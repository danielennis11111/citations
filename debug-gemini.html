<!DOCTYPE html>
<html>
<head>
    <title>Gemini API Debug</title>
</head>
<body>
    <h1>Gemini API Debug Tool</h1>
    <input type="password" id="apiKey" placeholder="Enter your API key" style="width: 300px; margin: 10px 0;">
    <br>
    <textarea id="message" placeholder="Enter test message" style="width: 400px; height: 100px;">Hello, can you explain quantum computing?</textarea>
    <br>
    <button onclick="testAPI()">Test API</button>
    <br><br>
    <h3>Raw Response:</h3>
    <pre id="response" style="background: #f0f0f0; padding: 10px; max-height: 400px; overflow-y: auto;"></pre>

    <script>
        async function testAPI() {
            const apiKey = document.getElementById('apiKey').value;
            const message = document.getElementById('message').value;
            const responseEl = document.getElementById('response');
            
            if (!apiKey) {
                responseEl.textContent = 'Please enter an API key';
                return;
            }
            
            try {
                responseEl.textContent = 'Making request...';
                
                const response = await fetch(
                    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`,
                    {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{
                                    text: message
                                }]
                            }],
                            generationConfig: {
                                temperature: 0.7,
                                maxOutputTokens: 2048,
                                candidateCount: 1,
                            }
                        })
                    }
                );
                
                responseEl.textContent = `Status: ${response.status} ${response.statusText}\n\n`;
                
                const data = await response.json();
                responseEl.textContent += 'Full Response:\n' + JSON.stringify(data, null, 2);
                
                // Check if response has the expected structure
                const content = data.candidates?.[0]?.content?.parts?.[0]?.text;
                if (content) {
                    responseEl.textContent += '\n\n=== EXTRACTED CONTENT ===\n' + content;
                } else {
                    responseEl.textContent += '\n\n=== NO CONTENT FOUND ===\nExpected path: data.candidates[0].content.parts[0].text';
                }
                
            } catch (error) {
                responseEl.textContent = 'Error: ' + error.message;
            }
        }
    </script>
</body>
</html> 