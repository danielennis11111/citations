/*! For license information please see main.4c4641b7.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},146:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,i=/-([a-z])/g,s=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,o=function(e,t){return t.toUpperCase()},l=function(e,t){return"".concat(t,"-")};t.camelCase=function(e,t){return void 0===t&&(t={}),function(e){return!e||s.test(e)||n.test(e)}(e)?e:(e=e.toLowerCase(),(e=t.reactCompat?e.replace(a,l):e.replace(r,l)).replace(i,o))}},153:(e,t,n)=>{"use strict";var i=n(43),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var i,r={},u=null,c=null;for(i in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,i)&&!l.hasOwnProperty(i)&&(r[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===r[i]&&(r[i]=t[i]);return{$$typeof:s,type:e,key:u,ref:c,props:r,_owner:o.current}}t.Fragment=r,t.jsx=u,t.jsxs=u},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function D(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=D.prototype=new y;x.constructor=D,m(x,v.prototype),x.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,A={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,i){var s,r={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,s)&&!C.hasOwnProperty(s)&&(r[s]=t[s]);var l=arguments.length-2;if(1===l)r.children=i;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];r.children=u}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===r[s]&&(r[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:r,_owner:A.current}}function F(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function _(e,t,s,r,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return a=a(l=e),e=""===r?"."+S(l,0):r,b(a)?(s="",null!=e&&(s=e.replace(k,"$&/")+"/"),_(a,t,s,"",(function(e){return e}))):null!=a&&(F(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(k,"$&/")+"/")+e)),t.push(a)),1;if(l=0,r=""===r?".":r+":",b(e))for(var u=0;u<e.length;u++){var c=r+S(o=e[u],u);l+=_(o,t,s,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(o=e.next()).done;)l+=_(o=o.value,t,s,c=r+S(o,u++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var i=[],s=0;return _(e,i,"","",(function(e){return t.call(n,e,s++)})),i}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T={current:null},B={transition:null},I={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:B,ReactCurrentOwner:A};function j(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!F(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=s,t.Profiler=a,t.PureComponent=D,t.StrictMode=r,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.act=j,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=m({},e.props),r=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=A.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)w.call(t,u)&&!C.hasOwnProperty(u)&&(s[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)s.children=i;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];s.children=l}return{$$typeof:n,type:e.type,key:r,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=F,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=B.transition;B.transition={};try{e()}finally{B.transition=t}},t.unstable_act=j,t.useCallback=function(e,t){return T.current.useCallback(e,t)},t.useContext=function(e){return T.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return T.current.useDeferredValue(e)},t.useEffect=function(e,t){return T.current.useEffect(e,t)},t.useId=function(){return T.current.useId()},t.useImperativeHandle=function(e,t,n){return T.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return T.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.current.useMemo(e,t)},t.useReducer=function(e,t,n){return T.current.useReducer(e,t,n)},t.useRef=function(e){return T.current.useRef(e)},t.useState=function(e){return T.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return T.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return T.current.useTransition()},t.version="18.3.1"},222:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=null;if(!e||"string"!==typeof e)return n;var i=(0,s.default)(e),r="function"===typeof t;return i.forEach((function(e){if("declaration"===e.type){var i=e.property,s=e.value;r?t(i,s,e):s&&((n=n||{})[i]=s)}})),n};var s=i(n(403))},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,s=e[i];if(!(0<r(s,t)))break e;e[i]=t,e[n]=s,n=i}}function i(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,s=e.length,a=s>>>1;i<a;){var o=2*(i+1)-1,l=e[o],u=o+1,c=e[u];if(0>r(l,n))u<s&&0>r(c,l)?(e[i]=c,e[u]=n,i=u):(e[i]=l,e[o]=n,i=o);else{if(!(u<s&&0>r(c,n)))break e;e[i]=c,e[u]=n,i=u}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,D="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=i(c);null!==t;){if(null===t.callback)s(c);else{if(!(t.startTime<=e))break;s(c),t.sortIndex=t.expirationTime,n(u,t)}t=i(c)}}function b(e){if(g=!1,x(e),!m)if(null!==i(u))m=!0,B(w);else{var t=i(c);null!==t&&I(b,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(F),F=-1),f=!0;var r=p;try{for(x(n),h=i(u);null!==h&&(!(h.expirationTime>n)||e&&!_());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===i(u)&&s(u),x(n)}else s(u);h=i(u)}if(null!==h)var l=!0;else{var d=i(c);null!==d&&I(b,d.startTime-n),l=!1}return l}finally{h=null,p=r,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var A,C=!1,E=null,F=-1,k=5,S=-1;function _(){return!(t.unstable_now()-S<k)}function N(){if(null!==E){var e=t.unstable_now();S=e;var n=!0;try{n=E(!0,e)}finally{n?A():(C=!1,E=null)}}else C=!1}if("function"===typeof D)A=function(){D(N)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,T=M.port2;M.port1.onmessage=N,A=function(){T.postMessage(null)}}else A=function(){v(N,0)};function B(e){E=e,C||(C=!0,A())}function I(e,n){F=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,B(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(u)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,s,r){var a=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?a+r:a:r=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:r,expirationTime:o=r+o,sortIndex:-1},r>a?(e.sortIndex=r,n(c,e),null===i(u)&&e===i(c)&&(g?(y(F),F=-1):g=!0,I(b,r-a))):(e.sortIndex=o,n(u,e),m||f||(m=!0,B(w))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},240:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,r=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},a=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var i,s=t.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!s&&!r)return!1;for(i in e);return"undefined"===typeof i||t.call(e,i)},o=function(e,t){i&&"__proto__"===t.name?i(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(s)return s(e,n).value}return e[n]};e.exports=function e(){var t,n,i,s,u,c,d=arguments[0],h=1,p=arguments.length,f=!1;for("boolean"===typeof d&&(f=d,d=arguments[1]||{},h=2),(null==d||"object"!==typeof d&&"function"!==typeof d)&&(d={});h<p;++h)if(null!=(t=arguments[h]))for(n in t)i=l(d,n),d!==(s=l(t,n))&&(f&&s&&(a(s)||(u=r(s)))?(u?(u=!1,c=i&&r(i)?i:[]):c=i&&a(i)?i:{},o(d,{name:n,newValue:e(f,c,s)})):"undefined"!==typeof s&&o(d,{name:n,newValue:s}));return d}},294:function(e,t,n){"use strict";var i=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(n(222)),s=n(146);function r(e,t){var n={};return e&&"string"===typeof e?((0,i.default)(e,(function(e,i){e&&i&&(n[(0,s.camelCase)(e,t)]=i)})),n):n}r.default=r,e.exports=r},358:(e,t)=>{"use strict";const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,i=/^[\u0021-\u003A\u003C-\u007E]*$/,s=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function u(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function c(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},379:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(705);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},382:(e,t,n)=>{"use strict";const i=n(445),s=n(900),r="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=l,t.IS=50;const a=2147483647;function o(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return u(e,t,n)}function u(e,t,n){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|m(e,t);let i=o(n);const s=i.write(e,t);s!==n&&(i=i.slice(0,s));return i}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Y(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer))return p(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&(Y(e,SharedArrayBuffer)||e&&Y(e.buffer,SharedArrayBuffer)))return p(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return l.from(i,t,n);const s=function(e){if(l.isBuffer(e)){const t=0|f(e.length),n=o(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!==typeof e.length||Q(e.length)?o(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}(e);if(s)return s;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return c(e),o(e<0?0:0|f(e))}function h(e){const t=e.length<0?0:0|f(e.length),n=o(t);for(let i=0;i<t;i+=1)n[i]=255&e[i];return n}function p(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(i,l.prototype),i}function f(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function m(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;let s=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(e).length;default:if(s)return i?-1:q(e).length;t=(""+t).toLowerCase(),s=!0}}function g(e,t,n){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return F(this,t,n);case"ascii":return S(this,t,n);case"latin1":case"binary":return _(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function v(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function y(e,t,n,i,s){if(0===e.length)return-1;if("string"===typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Q(n=+n)&&(n=s?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(s)return-1;n=e.length-1}else if(n<0){if(!s)return-1;n=0}if("string"===typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:D(e,t,n,i,s);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):D(e,[t],n,i,s);throw new TypeError("val must be string, number or Buffer")}function D(e,t,n,i,s){let r,a=1,o=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a=2,o/=2,l/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(s){let i=-1;for(r=n;r<o;r++)if(u(e,r)===u(t,-1===i?0:r-i)){if(-1===i&&(i=r),r-i+1===l)return i*a}else-1!==i&&(r-=r-i),i=-1}else for(n+l>o&&(n=o-l),r=n;r>=0;r--){let n=!0;for(let i=0;i<l;i++)if(u(e,r+i)!==u(t,i)){n=!1;break}if(n)return r}return-1}function x(e,t,n,i){n=Number(n)||0;const s=e.length-n;i?(i=Number(i))>s&&(i=s):i=s;const r=t.length;let a;for(i>r/2&&(i=r/2),a=0;a<i;++a){const i=parseInt(t.substr(2*a,2),16);if(Q(i))return a;e[n+a]=i}return a}function b(e,t,n,i){return X(q(t,e.length-n),e,n,i)}function w(e,t,n,i){return X(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function A(e,t,n,i){return X(K(t),e,n,i)}function C(e,t,n,i){return X(function(e,t){let n,i,s;const r=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),i=n>>8,s=n%256,r.push(s),r.push(i);return r}(t,e.length-n),e,n,i)}function E(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function F(e,t,n){n=Math.min(e.length,n);const i=[];let s=t;for(;s<n;){const t=e[s];let r=null,a=t>239?4:t>223?3:t>191?2:1;if(s+a<=n){let n,i,o,l;switch(a){case 1:t<128&&(r=t);break;case 2:n=e[s+1],128===(192&n)&&(l=(31&t)<<6|63&n,l>127&&(r=l));break;case 3:n=e[s+1],i=e[s+2],128===(192&n)&&128===(192&i)&&(l=(15&t)<<12|(63&n)<<6|63&i,l>2047&&(l<55296||l>57343)&&(r=l));break;case 4:n=e[s+1],i=e[s+2],o=e[s+3],128===(192&n)&&128===(192&i)&&128===(192&o)&&(l=(15&t)<<18|(63&n)<<12|(63&i)<<6|63&o,l>65535&&l<1114112&&(r=l))}}null===r?(r=65533,a=1):r>65535&&(r-=65536,i.push(r>>>10&1023|55296),r=56320|1023&r),i.push(r),s+=a}return function(e){const t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);let n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=k));return n}(i)}l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return u(e,t,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,n){return function(e,t,n){return c(e),e<=0?o(e):void 0!==t?"string"===typeof n?o(e).fill(t,n):o(e).fill(t):o(e)}(e,t,n)},l.allocUnsafe=function(e){return d(e)},l.allocUnsafeSlow=function(e){return d(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(Y(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),Y(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let s=0,r=Math.min(n,i);s<r;++s)if(e[s]!==t[s]){n=e[s],i=t[s];break}return n<i?-1:i<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const i=l.allocUnsafe(t);let s=0;for(n=0;n<e.length;++n){let t=e[n];if(Y(t,Uint8Array))s+t.length>i.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(i,s)):Uint8Array.prototype.set.call(i,t,s);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(i,s)}s+=t.length}return i},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)v(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?F(this,0,e):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const n=t.IS;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},r&&(l.prototype[r]=l.prototype.inspect),l.prototype.compare=function(e,t,n,i,s){if(Y(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===s&&(s=this.length),t<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&t>=n)return 0;if(i>=s)return-1;if(t>=n)return 1;if(this===e)return 0;let r=(s>>>=0)-(i>>>=0),a=(n>>>=0)-(t>>>=0);const o=Math.min(r,a),u=this.slice(i,s),c=e.slice(t,n);for(let l=0;l<o;++l)if(u[l]!==c[l]){r=u[l],a=c[l];break}return r<a?-1:a<r?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},l.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}const s=this.length-t;if((void 0===n||n>s)&&(n=s),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let r=!1;for(;;)switch(i){case"hex":return x(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":case"latin1":case"binary":return w(this,e,t,n);case"base64":return A(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(r)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),r=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const k=4096;function S(e,t,n){let i="";n=Math.min(e.length,n);for(let s=t;s<n;++s)i+=String.fromCharCode(127&e[s]);return i}function _(e,t,n){let i="";n=Math.min(e.length,n);for(let s=t;s<n;++s)i+=String.fromCharCode(e[s]);return i}function N(e,t,n){const i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);let s="";for(let r=t;r<n;++r)s+=$[e[r]];return s}function M(e,t,n){const i=e.slice(t,n);let s="";for(let r=0;r<i.length-1;r+=2)s+=String.fromCharCode(i[r]+256*i[r+1]);return s}function T(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,n,i,s,r){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<r)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function I(e,t,n,i,s){U(t,i,s,e,n,7);let r=Number(t&BigInt(4294967295));e[n++]=r,r>>=8,e[n++]=r,r>>=8,e[n++]=r,r>>=8,e[n++]=r;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function j(e,t,n,i,s){U(t,i,s,e,n,7);let r=Number(t&BigInt(4294967295));e[n+7]=r,r>>=8,e[n+6]=r,r>>=8,e[n+5]=r,r>>=8,e[n+4]=r;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function P(e,t,n,i,s,r){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(e,t,n,i,r){return t=+t,n>>>=0,r||P(e,0,n,4),s.write(e,t,n,i,23,4),n+4}function R(e,t,n,i,r){return t=+t,n>>>=0,r||P(e,0,n,8),s.write(e,t,n,i,52,8),n+8}l.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const i=this.subarray(e,t);return Object.setPrototypeOf(i,l.prototype),i},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);let i=this[e],s=1,r=0;for(;++r<t&&(s*=256);)i+=this[e+r]*s;return i},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);let i=this[e+--t],s=1;for(;t>0&&(s*=256);)i+=this[e+--t]*s;return i},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=J((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const i=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,s=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(i)+(BigInt(s)<<BigInt(32))})),l.prototype.readBigUInt64BE=J((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const i=t*2**24+65536*this[++e]+256*this[++e]+this[++e],s=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(i)<<BigInt(32))+BigInt(s)})),l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);let i=this[e],s=1,r=0;for(;++r<t&&(s*=256);)i+=this[e+r]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);let i=t,s=1,r=this[e+--i];for(;i>0&&(s*=256);)r+=this[e+--i]*s;return s*=128,r>=s&&(r-=Math.pow(2,8*t)),r},l.prototype.readInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||T(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||T(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=J((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const i=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),l.prototype.readBigInt64BE=J((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const i=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||T(e,4,this.length),s.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||T(e,4,this.length),s.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||T(e,8,this.length),s.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||T(e,8,this.length),s.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t>>>=0,n>>>=0,!i){B(this,e,t,n,Math.pow(2,8*n)-1,0)}let s=1,r=0;for(this[t]=255&e;++r<n&&(s*=256);)this[t+r]=e/s&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t>>>=0,n>>>=0,!i){B(this,e,t,n,Math.pow(2,8*n)-1,0)}let s=n-1,r=1;for(this[t+s]=255&e;--s>=0&&(r*=256);)this[t+s]=e/r&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=J((function(e){return I(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=J((function(e){return j(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*n-1);B(this,e,t,n,i-1,-i)}let s=0,r=1,a=0;for(this[t]=255&e;++s<n&&(r*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/r|0)-a&255;return t+n},l.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*n-1);B(this,e,t,n,i-1,-i)}let s=n-1,r=1,a=0;for(this[t+s]=255&e;--s>=0&&(r*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/r|0)-a&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=J((function(e){return I(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=J((function(e){return j(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return R(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return R(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,i){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);const s=i-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),s},l.prototype.fill=function(e,t,n,i){if("string"===typeof e){if("string"===typeof t?(i=t,t=0,n=this.length):"string"===typeof n&&(i=n,n=this.length),void 0!==i&&"string"!==typeof i)throw new TypeError("encoding must be a string");if("string"===typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){const t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(s=t;s<n;++s)this[s]=e;else{const r=l.isBuffer(e)?e:l.from(e,i),a=r.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-t;++s)this[s+t]=r[s%a]}return this};const O={};function z(e,t,n){O[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(e,"]"),this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}}function W(e){let t="",n=e.length;const i="-"===e[0]?1:0;for(;n>=i+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function U(e,t,n,i,s,r){if(e>n||e<t){const i="bigint"===typeof t?"n":"";let s;throw s=r>3?0===t||t===BigInt(0)?">= 0".concat(i," and < 2").concat(i," ** ").concat(8*(r+1)).concat(i):">= -(2".concat(i," ** ").concat(8*(r+1)-1).concat(i,") and < 2 ** ")+"".concat(8*(r+1)-1).concat(i):">= ".concat(t).concat(i," and <= ").concat(n).concat(i),new O.ERR_OUT_OF_RANGE("value",s,e)}!function(e,t,n){H(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||V(t,e.length-(n+1))}(i,s,r)}function H(e,t){if("number"!==typeof e)throw new O.ERR_INVALID_ARG_TYPE(t,"number",e)}function V(e,t,n){if(Math.floor(e)!==e)throw H(e,n),new O.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new O.ERR_BUFFER_OUT_OF_BOUNDS;throw new O.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}z("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),z("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)}),TypeError),z("ERR_OUT_OF_RANGE",(function(e,t,n){let i='The value of "'.concat(e,'" is out of range.'),s=n;return Number.isInteger(n)&&Math.abs(n)>2**32?s=W(String(n)):"bigint"===typeof n&&(s=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(s=W(s)),s+="n"),i+=" It must be ".concat(t,". Received ").concat(s),i}),RangeError);const G=/[^+/0-9A-Za-z-_]/g;function q(e,t){let n;t=t||1/0;const i=e.length;let s=null;const r=[];for(let a=0;a<i;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!s){if(n>56319){(t-=3)>-1&&r.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&r.push(239,191,189);continue}s=n;continue}if(n<56320){(t-=3)>-1&&r.push(239,191,189),s=n;continue}n=65536+(s-55296<<10|n-56320)}else s&&(t-=3)>-1&&r.push(239,191,189);if(s=null,n<128){if((t-=1)<0)break;r.push(n)}else if(n<2048){if((t-=2)<0)break;r.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;r.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return r}function K(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function X(e,t,n,i){let s;for(s=0;s<i&&!(s+n>=t.length||s>=e.length);++s)t[s+n]=e[s];return s}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Q(e){return e!==e}const $=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const i=16*n;for(let s=0;s<16;++s)t[i+s]=e[n]+e[s]}return t}();function J(e){return"undefined"===typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},391:(e,t,n)=>{"use strict";var i=n(950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},403:e=>{var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,i=/^\s*/,s=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,l=/^\s+|\s+$/g,u="";function c(e){return e?e.replace(l,u):u}e.exports=function(e,l){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];l=l||{};var d=1,h=1;function p(e){var t=e.match(n);t&&(d+=t.length);var i=e.lastIndexOf("\n");h=~i?e.length-i:h+e.length}function f(){var e={line:d,column:h};return function(t){return t.position=new m(e),D(),t}}function m(e){this.start=e,this.end={line:d,column:h},this.source=l.source}m.prototype.content=e;var g=[];function v(t){var n=new Error(l.source+":"+d+":"+h+": "+t);if(n.reason=t,n.filename=l.source,n.line=d,n.column=h,n.source=e,!l.silent)throw n;g.push(n)}function y(t){var n=t.exec(e);if(n){var i=n[0];return p(i),e=e.slice(i.length),n}}function D(){y(i)}function x(e){var t;for(e=e||[];t=b();)!1!==t&&e.push(t);return e}function b(){var t=f();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;u!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,u===e.charAt(n-1))return v("End of comment missing");var i=e.slice(2,n-2);return h+=2,p(i),e=e.slice(n),h+=2,t({type:"comment",comment:i})}}function w(){var e=f(),n=y(s);if(n){if(b(),!y(r))return v("property missing ':'");var i=y(a),l=e({type:"declaration",property:c(n[0].replace(t,u)),value:i?c(i[0].replace(t,u)):u});return y(o),l}}return D(),function(){var e,t=[];for(x(t);e=w();)!1!==e&&(t.push(e),x(t));return t}()}},445:(e,t)=>{"use strict";t.byteLength=function(e){var t=o(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){var t,n,r=o(e),a=r[0],l=r[1],u=new s(function(e,t,n){return 3*(t+n)/4-n}(0,a,l)),c=0,d=l>0?a-4:a;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;2===l&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[c++]=255&t);1===l&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t);return u},t.fromByteArray=function(e){for(var t,i=e.length,s=i%3,r=[],a=16383,o=0,u=i-s;o<u;o+=a)r.push(l(e,o,o+a>u?u:o+a));1===s?(t=e[i-1],r.push(n[t>>2]+n[t<<4&63]+"==")):2===s&&(t=(e[i-2]<<8)+e[i-1],r.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return r.join("")};for(var n=[],i=[],s="undefined"!==typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=r[a],i[r.charCodeAt(a)]=a;function o(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,i){for(var s,r,a=[],o=t;o<i;o+=3)s=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(n[(r=s)>>18&63]+n[r>>12&63]+n[r>>6&63]+n[63&r]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},495:(e,t,n)=>{"use strict";function i(e){var t,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new s(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function s(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return s=function(e){this.s=e,this.n=e.next},s.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new s(e)}n.d(t,{A:()=>i})},574:(e,t,n)=>{"use strict";n.d(t,{PDFProcessor:()=>gm});var i=n(379);function s(e,t,n){t||(t=[]);var i=t.length++;return Object.defineProperty({},"_",{set:function(s){t[i]=s,e.apply(n,t)}})}function r(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function a(e,t){r(e,t),t.add(e)}function o(e,t,n){r(e,t),t.set(e,n)}function l(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function u(e,t,n){return n(l(e,t))}function c(e,t){return e.get(l(e,t))}function d(e,t,n){return e.set(l(e,t),n),n}var h,p,f,m,g,v,y,D,x,b,w,A,C,E,F,k=n(705),S=n(495);const _="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),N=[.001,0,0,.001,0,0],M=1.35,T=1,B=2,I=4,j=16,P=32,L=64,R=128,O=256,z={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},W={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},U={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},H=0,V=1,G=2,q=3,K=3,X=4,Y={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Q={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},$=1,J=2,Z=3,ee=4,te=5,ne={ERRORS:0,WARNINGS:1,INFOS:5},ie={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},se=0,re=1,ae=2,oe=3;let le=ne.WARNINGS;function ue(e){Number.isInteger(e)&&(le=e)}function ce(){return le}function de(e){le>=ne.INFOS&&console.log("Info: ".concat(e))}function he(e){le>=ne.WARNINGS&&console.log("Warning: ".concat(e))}function pe(e){throw new Error(e)}function fe(e,t){e||pe(t)}function me(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;if(n&&"string"===typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);(null===t||void 0===t?void 0:t.length)>=2&&(e="http://".concat(e))}if(n.tryConvertEncoding)try{e=decodeURIComponent(escape(e))}catch(s){}}const i=t?URL.parse(e,t):URL.parse(e);return function(e){switch(null===e||void 0===e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i)?i:null}function ge(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=URL.parse(e);return i?(i.hash=t,i.href):n&&me(e,"http://example.com")?e.split("#",1)[0]+"".concat(t?"#".concat(t):""):""}function ve(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}const ye=function(){function e(e,t){this.message=e,this.name=t}return e.prototype=new Error,e.constructor=e,e}();class De extends ye{constructor(e,t){super(e,"PasswordException"),this.code=t}}class xe extends ye{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class be extends ye{constructor(e){super(e,"InvalidPDFException")}}class we extends ye{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class Ae extends ye{constructor(e){super(e,"FormatError")}}class Ce extends ye{constructor(e){super(e,"AbortException")}}function Ee(e){"object"===typeof e&&void 0!==(null===e||void 0===e?void 0:e.length)||pe("Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const i=[];for(let s=0;s<t;s+=n){const r=Math.min(s+n,t),a=e.subarray(s,r);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function Fe(e){"string"!==typeof e&&pe("Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let i=0;i<t;++i)n[i]=255&e.charCodeAt(i);return n}class ke{static get isLittleEndian(){return ve(this,"isLittleEndian",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return ve(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(e){return!1}}())}static get isOffscreenCanvasSupported(){return ve(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get isImageDecoderSupported(){return ve(this,"isImageDecoderSupported","undefined"!==typeof ImageDecoder)}static get platform(){const{platform:e,userAgent:t}=navigator;return ve(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return ve(this,"isCSSRoundSupported",null===(e=globalThis.CSS)||void 0===e||null===(t=e.supports)||void 0===t?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Se=Array.from(Array(256).keys(),(e=>e.toString(16).padStart(2,"0")));class _e{static makeHexColor(e,t,n){return"#".concat(Se[e]).concat(Se[t]).concat(Se[n])}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=e[n],s=e[n+1];e[n]=i*t[0]+s*t[2]+t[4],e[n+1]=i*t[1]+s*t[3]+t[5]}static applyTransformToBezier(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=t[0],s=t[1],r=t[2],a=t[3],o=t[4],l=t[5];for(let u=0;u<6;u+=2){const t=e[n+u],c=e[n+u+1];e[n+u]=t*i+c*r+o,e[n+u+1]=t*s+c*a+l}}static applyInverseTransform(e,t){const n=e[0],i=e[1],s=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/s,e[1]=(-n*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/s}static axialAlignedBoundingBox(e,t,n){const i=t[0],s=t[1],r=t[2],a=t[3],o=t[4],l=t[5],u=e[0],c=e[1],d=e[2],h=e[3];let p=i*u+o,f=p,m=i*d+o,g=m,v=a*c+l,y=v,D=a*h+l,x=D;if(0!==s||0!==r){const e=s*u,t=s*d,n=r*c,i=r*h;p+=n,g+=n,m+=i,f+=i,v+=e,x+=e,D+=t,y+=t}n[0]=Math.min(n[0],p,m,f,g),n[1]=Math.min(n[1],v,D,y,x),n[2]=Math.max(n[2],p,m,f,g),n[3]=Math.max(n[3],v,D,y,x)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],i=e[1],s=e[2],r=e[3],a=n**2+i**2,o=n*s+i*r,l=s**2+r**2,u=(a+l)/2,c=Math.sqrt(u**2-(a*l-o**2));t[0]=Math.sqrt(u+c||1),t[1]=Math.sqrt(u-c||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),r=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>r?null:[n,s,i,r]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,i,s){s[0]=Math.min(s[0],e,n),s[1]=Math.min(s[1],t,i),s[2]=Math.max(s[2],e,n),s[3]=Math.max(s[3],t,i)}static bezierBoundingBox(e,t,n,i,s,r,a,o,u){u[0]=Math.min(u[0],e,a),u[1]=Math.min(u[1],t,o),u[2]=Math.max(u[2],e,a),u[3]=Math.max(u[3],t,o),l(_e,this,Me).call(this,e,n,s,a,t,i,r,o,3*(3*(n-s)-e+a),6*(e-2*n+s),3*(n-e),u),l(_e,this,Me).call(this,e,n,s,a,t,i,r,o,3*(3*(i-r)-t+o),6*(t-2*i+r),3*(i-t),u)}}function Ne(e,t,n,i,s,r,a,o,l,u){if(l<=0||l>=1)return;const c=1-l,d=l*l,h=d*l,p=c*(c*(c*e+3*l*t)+3*d*n)+h*i,f=c*(c*(c*s+3*l*r)+3*d*a)+h*o;u[0]=Math.min(u[0],p),u[1]=Math.min(u[1],f),u[2]=Math.max(u[2],p),u[3]=Math.max(u[3],f)}function Me(e,t,n,i,s,r,a,o,u,c,d,p){if(Math.abs(u)<1e-12)return void(Math.abs(c)>=1e-12&&l(h,this,Ne).call(this,e,t,n,i,s,r,a,o,-d/c,p));const f=c**2-4*d*u;if(f<0)return;const m=Math.sqrt(f),g=2*u;l(h,this,Ne).call(this,e,t,n,i,s,r,a,o,(-c+m)/g,p),l(h,this,Ne).call(this,e,t,n,i,s,r,a,o,(-c-m)/g,p)}h=_e;let Te=null,Be=null;function Ie(){if("function"===typeof crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(32);return crypto.getRandomValues(e),Ee(e)}const je="pdfjs_internal_id_";function Pe(e,t,n){return Math.min(Math.max(e,t),n)}function Le(e){return Uint8Array.prototype.toBase64?e.toBase64():btoa(Ee(e))}"function"!==typeof Promise.try&&(Promise.try=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new Promise((t=>{t(e(...n))}))}),"function"!==typeof Math.sumPrecise&&(Math.sumPrecise=function(e){return e.reduce(((e,t)=>e+t),0)});const Re="http://www.w3.org/2000/svg";class Oe{}async function ze(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(qe(e,document.baseURI)){const n=await fetch(e);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise(((n,i)=>{const s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE)if(200!==s.status&&0!==s.status)i(new Error(s.statusText));else{switch(t){case"arraybuffer":case"blob":case"json":return void n(s.response)}n(s.responseText)}},s.send(null)}))}p=Oe,(0,k.A)(Oe,"CSS",96),(0,k.A)(Oe,"PDF",72),(0,k.A)(Oe,"PDF_TO_CSS_UNITS",p.CSS/p.PDF);class We{constructor(e){let{viewBox:t,userUnit:n,scale:i,rotation:s,offsetX:r=0,offsetY:a=0,dontFlip:o=!1}=e;this.viewBox=t,this.userUnit=n,this.scale=i,this.rotation=s,this.offsetX=r,this.offsetY=a,i*=n;const l=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let c,d,h,p,f,m,g,v;switch(s%=360,s<0&&(s+=360),s){case 180:c=-1,d=0,h=0,p=1;break;case 90:c=0,d=1,h=1,p=0;break;case 270:c=0,d=-1,h=-1,p=0;break;case 0:c=1,d=0,h=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(h=-h,p=-p),0===c?(f=Math.abs(u-t[1])*i+r,m=Math.abs(l-t[0])*i+a,g=(t[3]-t[1])*i,v=(t[2]-t[0])*i):(f=Math.abs(l-t[0])*i+r,m=Math.abs(u-t[1])*i+a,g=(t[2]-t[0])*i,v=(t[3]-t[1])*i),this.transform=[c*i,d*i,h*i,p*i,f-c*i*l-h*i*u,m-d*i*l-p*i*u],this.width=g,this.height=v}get rawDims(){const e=this.viewBox;return ve(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new We({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:s})}convertToViewportPoint(e,t){const n=[e,t];return _e.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];_e.applyTransform(t,this.transform);const n=[e[2],e[3]];return _e.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return _e.applyInverseTransform(n,this.transform),n}}class Ue extends ye{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(e,"RenderingCancelledException"),this.extraDelay=t}}function He(e){const t=e.length;let n=0;for(;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}function Ve(e){return"string"===typeof e&&/\.pdf$/i.test(e)}class Ge{constructor(){(0,k.A)(this,"started",Object.create(null)),(0,k.A)(this,"times",[])}time(e){e in this.started&&he("Timer is already running for ".concat(e)),this.started[e]=Date.now()}timeEnd(e){e in this.started||he("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:s}of this.times)e.push("".concat(n.padEnd(t)," ").concat(s-i,"ms\n"));return e.join("")}}function qe(e,t){const n=t?URL.parse(e,t):URL.parse(e);return"http:"===(null===n||void 0===n?void 0:n.protocol)||"https:"===(null===n||void 0===n?void 0:n.protocol)}function Ke(e){e.preventDefault()}function Xe(e){e.preventDefault(),e.stopPropagation()}class Ye{static toDateObject(e){if(!e||"string"!==typeof e)return null;l(Ye,this,Qe)._||(Qe._=l(Ye,this,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?")));const t=l(Ye,this,Qe)._.exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let r=parseInt(t[4],10);r=r>=0&&r<=23?r:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(t[6],10);o=o>=0&&o<=59?o:0;const u=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===u?(r+=c,a+=d):"+"===u&&(r-=c,a-=d),new Date(Date.UTC(n,i,s,r,a,o))}}var Qe={_:void 0};function $e(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map((e=>parseInt(e))):e.startsWith("rgba(")?e.slice(5,-1).split(",").map((e=>parseInt(e))).slice(0,3):(he('Not a valid color format: "'.concat(e,'"')),[0,0,0])}function Je(e){const{a:t,b:n,c:i,d:s,e:r,f:a}=e.getTransform();return[t,n,i,s,r,a]}function Ze(e){const{a:t,b:n,c:i,d:s,e:r,f:a}=e.getTransform().invertSelf();return[t,n,i,s,r,a]}function et(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t instanceof We){const{pageWidth:i,pageHeight:s}=t.rawDims,{style:r}=e,a=ke.isCSSRoundSupported,o="var(--total-scale-factor) * ".concat(i,"px"),l="var(--total-scale-factor) * ".concat(s,"px"),u=a?"round(down, ".concat(o,", var(--scale-round-x))"):"calc(".concat(o,")"),c=a?"round(down, ".concat(l,", var(--scale-round-y))"):"calc(".concat(l,")");n&&t.rotation%180!==0?(r.width=c,r.height=u):(r.width=u,r.height=c)}i&&e.setAttribute("data-main-rotation",t.rotation)}class tt{constructor(){const{pixelRatio:e}=tt;this.sx=e,this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,r=1/0,a=1/0,o=1/0;(n=tt.capPixels(n,s))>0&&(r=Math.sqrt(n/(e*t))),-1!==i&&(a=i/e,o=i/t);const l=Math.min(r,a,o);return(this.sx>l||this.sy>l)&&(this.sx=l,this.sy=l,!0)}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const nt=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var it=new WeakMap,st=new WeakMap,rt=new WeakMap,at=new WeakMap,ot=new WeakMap,lt=new WeakMap,ut=new WeakSet;class ct{constructor(e){a(this,ut),o(this,it,null),o(this,st,null),o(this,rt,void 0),o(this,at,null),o(this,ot,null),o(this,lt,null),d(rt,this,e),vt._||(vt._=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=d(it,this,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=c(rt,this)._uiManager._signal;e.addEventListener("contextmenu",Ke,{signal:t}),e.addEventListener("pointerdown",dt,{signal:t});const n=d(at,this,document.createElement("div"));n.className="buttons",e.append(n);const i=c(rt,this).toolbarPosition;if(i){const{style:t}=e,n="ltr"===c(rt,this)._uiManager.direction?1-i[0]:i[0];t.insetInlineEnd="".concat(100*n,"%"),t.top="calc(".concat(100*i[1],"% + var(--editor-toolbar-vert-offset))")}return l(ut,this,mt).call(this),e}get div(){return c(it,this)}hide(){var e;c(it,this).classList.add("hidden"),null===(e=c(st,this))||void 0===e||e.hideDropdown()}show(){var e;c(it,this).classList.remove("hidden"),null===(e=c(ot,this))||void 0===e||e.shown()}async addAltText(e){const t=await e.render();l(ut,this,ft).call(this,t),c(at,this).prepend(t,u(ut,this,gt)),d(ot,this,e)}addColorPicker(e){d(st,this,e);const t=e.renderButton();l(ut,this,ft).call(this,t),c(at,this).prepend(t,u(ut,this,gt))}async addEditSignatureButton(e){const t=d(lt,this,await e.renderEditButton(c(rt,this)));l(ut,this,ft).call(this,t),c(at,this).prepend(t,u(ut,this,gt))}updateEditSignatureButton(e){c(lt,this)&&(c(lt,this).title=e)}remove(){var e;c(it,this).remove(),null===(e=c(st,this))||void 0===e||e.destroy(),d(st,this,null)}}function dt(e){e.stopPropagation()}function ht(e){c(rt,this)._focusEventsAllowed=!1,Xe(e)}function pt(e){c(rt,this)._focusEventsAllowed=!0,Xe(e)}function ft(e){const t=c(rt,this)._uiManager._signal;e.addEventListener("focusin",l(ut,this,ht).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",l(ut,this,pt).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Ke,{signal:t})}function mt(){const{editorType:e,_uiManager:t}=c(rt,this),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",vt._[e]),l(ut,this,ft).call(this,n),n.addEventListener("click",(e=>{t.delete()}),{signal:t._signal}),c(at,this).append(n)}function gt(e){const t=document.createElement("div");return t.className="divider",t}var vt={_:null},yt=new WeakMap,Dt=new WeakMap,xt=new WeakMap,bt=new WeakSet;class wt{constructor(e){a(this,bt),o(this,yt,null),o(this,Dt,null),o(this,xt,void 0),d(xt,this,e)}show(e,t,n){const[i,s]=l(bt,this,Ct).call(this,t,n),{style:r}=c(Dt,this)||d(Dt,this,l(bt,this,At).call(this));e.append(c(Dt,this)),r.insetInlineEnd="".concat(100*i,"%"),r.top="calc(".concat(100*s,"% + var(--editor-toolbar-vert-offset))")}hide(){c(Dt,this).remove()}}function At(){const e=d(Dt,this,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Ke,{signal:c(xt,this)._signal});const t=d(yt,this,document.createElement("div"));return t.className="buttons",e.append(t),l(bt,this,Et).call(this),e}function Ct(e,t){let n=0,i=0;for(const s of e){const e=s.y+s.height;if(e<n)continue;const r=s.x+(t?s.width:0);e>n?(i=r,n=e):t?r>i&&(i=r):r<i&&(i=r)}return[t?1-i:i,n]}function Et(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=c(xt,this)._signal;e.addEventListener("contextmenu",Ke,{signal:n}),e.addEventListener("click",(()=>{c(xt,this).highlightSelection("floating_button")}),{signal:n}),c(yt,this).append(e)}function Ft(e,t,n){for(const i of n)t.addEventListener(i,e[i].bind(e))}var kt=new WeakMap;class St{constructor(){o(this,kt,0)}get id(){var e,t;return"".concat("pdfjs_internal_editor_").concat((d(kt,this,(e=c(kt,this),t=e++,e)),t))}}var _t=new WeakMap,Nt=new WeakMap,Mt=new WeakMap,Tt=new WeakSet;class Bt{constructor(){a(this,Tt),o(this,_t,Ie()),o(this,Nt,0),o(this,Mt,null)}static get _isSVGFittingCanvas(){const e=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),t=new Image;t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return ve(this,"_isSVGFittingCanvas",t.decode().then((()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0]))))}async getFromFile(e){const{lastModified:t,name:n,size:i,type:s}=e;return l(Tt,this,It).call(this,"".concat(t,"_").concat(n,"_").concat(i,"_").concat(s),e)}async getFromUrl(e){return l(Tt,this,It).call(this,e,e)}async getFromBlob(e,t){const n=await t;return l(Tt,this,It).call(this,e,n)}async getFromId(e){c(Mt,this)||d(Mt,this,new Map);const t=c(Mt,this).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:e}=t;return delete t.blobPromise,this.getFromBlob(t.id,e)}return this.getFromUrl(t.url)}getFromCanvas(e,t){var n,i,s;c(Mt,this)||d(Mt,this,new Map);let r=c(Mt,this).get(e);if(null!==(s=r)&&void 0!==s&&s.bitmap)return r.refCounter+=1,r;const a=new OffscreenCanvas(t.width,t.height);return a.getContext("2d").drawImage(t,0,0),r={bitmap:a.transferToImageBitmap(),id:"image_".concat(c(_t,this),"_").concat((d(Nt,this,(n=c(Nt,this),i=n++,n)),i)),refCounter:1,isSvg:!1},c(Mt,this).set(e,r),c(Mt,this).set(r.id,r),r}getSvgUrl(e){const t=c(Mt,this).get(e);return null!==t&&void 0!==t&&t.isSvg?t.svgUrl:null}deleteId(e){var t;c(Mt,this)||d(Mt,this,new Map);const n=c(Mt,this).get(e);if(!n)return;if(n.refCounter-=1,0!==n.refCounter)return;const{bitmap:i}=n;if(!n.url&&!n.file){const e=new OffscreenCanvas(i.width,i.height);e.getContext("bitmaprenderer").transferFromImageBitmap(i),n.blobPromise=e.convertToBlob()}null===(t=i.close)||void 0===t||t.call(i),n.bitmap=null}isValidId(e){return e.startsWith("image_".concat(c(_t,this),"_"))}}async function It(e,t){var n;c(Mt,this)||d(Mt,this,new Map);let i=c(Mt,this).get(e);if(null===i)return null;if(null!==(n=i)&&void 0!==n&&n.bitmap)return i.refCounter+=1,i;try{var s,r;let e;if(i||(i={bitmap:null,id:"image_".concat(c(_t,this),"_").concat((d(Nt,this,(s=c(Nt,this),r=s++,s)),r)),refCounter:0,isSvg:!1}),"string"===typeof t?(i.url=t,e=await ze(t,"blob")):t instanceof File?e=i.file=t:t instanceof Blob&&(e=t),"image/svg+xml"===e.type){const t=f._isSVGFittingCanvas,n=new FileReader,s=new Image,r=new Promise(((e,r)=>{s.onload=()=>{i.bitmap=s,i.isSvg=!0,e()},n.onload=async()=>{const e=i.svgUrl=n.result;s.src=await t?"".concat(e,"#svgView(preserveAspectRatio(none))"):e},s.onerror=n.onerror=r}));n.readAsDataURL(e),await r}else i.bitmap=await createImageBitmap(e);i.refCounter=1}catch(a){he(a),i=null}return c(Mt,this).set(e,i),i&&c(Mt,this).set(i.id,i),i}f=Bt;var jt=new WeakMap,Pt=new WeakMap,Lt=new WeakMap,Rt=new WeakMap;class Ot{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;o(this,jt,[]),o(this,Pt,!1),o(this,Lt,void 0),o(this,Rt,-1),d(Lt,this,e)}add(e){let{cmd:t,undo:n,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}=e;if(s&&t(),c(Pt,this))return;const l={cmd:t,undo:n,post:i,type:r};if(-1===c(Rt,this))return c(jt,this).length>0&&(c(jt,this).length=0),d(Rt,this,0),void c(jt,this).push(l);if(a&&c(jt,this)[c(Rt,this)].type===r)return o&&(l.undo=c(jt,this)[c(Rt,this)].undo),void(c(jt,this)[c(Rt,this)]=l);const u=c(Rt,this)+1;u===c(Lt,this)?c(jt,this).splice(0,1):(d(Rt,this,u),u<c(jt,this).length&&c(jt,this).splice(u)),c(jt,this).push(l)}undo(){if(-1===c(Rt,this))return;d(Pt,this,!0);const{undo:e,post:t}=c(jt,this)[c(Rt,this)];e(),null===t||void 0===t||t(),d(Pt,this,!1),d(Rt,this,c(Rt,this)-1)}redo(){if(c(Rt,this)<c(jt,this).length-1){d(Rt,this,c(Rt,this)+1),d(Pt,this,!0);const{cmd:e,post:t}=c(jt,this)[c(Rt,this)];e(),null===t||void 0===t||t(),d(Pt,this,!1)}}hasSomethingToUndo(){return-1!==c(Rt,this)}hasSomethingToRedo(){return c(Rt,this)<c(jt,this).length-1}cleanType(e){if(-1!==c(Rt,this)){for(let t=c(Rt,this);t>=0;t--)if(c(jt,this)[t].type!==e)return c(jt,this).splice(t+1,c(Rt,this)-t),void d(Rt,this,t);c(jt,this).length=0,d(Rt,this,-1)}}destroy(){d(jt,this,null)}}var zt=new WeakSet;class Wt{constructor(e){a(this,zt),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=ke.platform;for(const[n,i,s={}]of e)for(const e of n){const n=e.startsWith("mac+");t&&n?(this.callbacks.set(e.slice(4),{callback:i,options:s}),this.allKeys.add(e.split("+").at(-1))):t||n||(this.callbacks.set(e,{callback:i,options:s}),this.allKeys.add(e.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(l(zt,this,Ut).call(this,t));if(!n)return;const{callback:i,options:{bubbles:s=!1,args:r=[],checker:a=null}}=n;a&&!a(e,t)||(i.bind(e,...r,t)(),s||Xe(t))}}function Ut(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}class Ht{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return function(e){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const n of e.keys()){t.style.color=n;const i=window.getComputedStyle(t).color;e.set(n,$e(i))}t.remove()}(e),ve(this,"_colors",e)}convert(e){const t=$e(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every(((e,n)=>e===t[n])))return Ht._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?_e.makeHexColor(...t):e}}(0,k.A)(Ht,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var Vt=new WeakMap,Gt=new WeakMap,qt=new WeakMap,Kt=new WeakMap,Xt=new WeakMap,Yt=new WeakMap,Qt=new WeakMap,$t=new WeakMap,Jt=new WeakMap,Zt=new WeakMap,en=new WeakMap,tn=new WeakMap,nn=new WeakMap,sn=new WeakMap,rn=new WeakMap,an=new WeakMap,on=new WeakMap,ln=new WeakMap,un=new WeakMap,cn=new WeakMap,dn=new WeakMap,hn=new WeakMap,pn=new WeakMap,fn=new WeakMap,mn=new WeakMap,gn=new WeakMap,vn=new WeakMap,yn=new WeakMap,Dn=new WeakMap,xn=new WeakMap,bn=new WeakMap,wn=new WeakMap,An=new WeakMap,Cn=new WeakMap,En=new WeakMap,Fn=new WeakMap,kn=new WeakMap,Sn=new WeakMap,_n=new WeakMap,Nn=new WeakMap,Mn=new WeakMap,Tn=new WeakMap,Bn=new WeakMap,In=new WeakMap,jn=new WeakSet;class Pn{static get _keyboardManager(){const e=Pn.prototype,t=e=>c(Tn,e).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&e.hasSomethingToControl(),n=(e,t)=>{let{target:n}=t;if(n instanceof HTMLInputElement){const{type:e}=n;return"text"!==e&&"number"!==e}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return ve(this,"_keyboardManager",new Wt([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&c(Tn,e).contains(n)&&!e.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&c(Tn,e).contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}constructor(e,t,n,i,s,r,u,h,p,f,m,g,v,y){a(this,jn),o(this,Vt,new AbortController),o(this,Gt,null),o(this,qt,new Map),o(this,Kt,new Map),o(this,Xt,null),o(this,Yt,null),o(this,Qt,null),o(this,$t,new Ot),o(this,Jt,null),o(this,Zt,null),o(this,en,0),o(this,tn,new Set),o(this,nn,null),o(this,sn,null),o(this,rn,new Set),(0,k.A)(this,"_editorUndoBar",null),o(this,an,!1),o(this,on,!1),o(this,ln,!1),o(this,un,null),o(this,cn,null),o(this,dn,null),o(this,hn,null),o(this,pn,!1),o(this,fn,null),o(this,mn,new St),o(this,gn,!1),o(this,vn,!1),o(this,yn,null),o(this,Dn,null),o(this,xn,null),o(this,bn,null),o(this,wn,null),o(this,An,W.NONE),o(this,Cn,new Set),o(this,En,null),o(this,Fn,null),o(this,kn,null),o(this,Sn,null),o(this,_n,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),o(this,Nn,[0,0]),o(this,Mn,null),o(this,Tn,null),o(this,Bn,null),o(this,In,null);const D=this._signal=c(Vt,this).signal;d(Tn,this,e),d(Bn,this,t),d(Xt,this,n),d(Fn,this,i),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:D}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:D}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:D}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:D}),s._on("setpreference",this.onSetPreference.bind(this),{signal:D}),s._on("switchannotationeditorparams",(e=>this.updateParams(e.type,e.value)),{signal:D}),l(jn,this,Un).call(this),l(jn,this,Yn).call(this),l(jn,this,Gn).call(this),d(Yt,this,r.annotationStorage),d(un,this,r.filterFactory),d(kn,this,u),d(hn,this,h||null),d(an,this,p),d(on,this,f),d(ln,this,m),d(wn,this,g||null),this.viewParameters={realScale:Oe.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=!1!==y}destroy(){var e,t,n,i,s,r,a,o;null===(e=c(In,this))||void 0===e||e.resolve(),d(In,this,null),null===(t=c(Vt,this))||void 0===t||t.abort(),d(Vt,this,null),this._signal=null;for(const l of c(Kt,this).values())l.destroy();c(Kt,this).clear(),c(qt,this).clear(),c(rn,this).clear(),null===(n=c(bn,this))||void 0===n||n.clear(),d(Gt,this,null),c(Cn,this).clear(),c($t,this).destroy(),null===(i=c(Xt,this))||void 0===i||i.destroy(),null===(s=c(Fn,this))||void 0===s||s.destroy(),null===(r=c(fn,this))||void 0===r||r.hide(),d(fn,this,null),null===(a=c(xn,this))||void 0===a||a.destroy(),d(xn,this,null),c(cn,this)&&(clearTimeout(c(cn,this)),d(cn,this,null)),c(Mn,this)&&(clearTimeout(c(Mn,this)),d(Mn,this,null)),null===(o=this._editorUndoBar)||void 0===o||o.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return c(wn,this)}get useNewAltTextFlow(){return c(on,this)}get useNewAltTextWhenAddingImage(){return c(ln,this)}get hcmFilter(){return ve(this,"hcmFilter",c(kn,this)?c(un,this).addHCMFilter(c(kn,this).foreground,c(kn,this).background):"none")}get direction(){return ve(this,"direction",getComputedStyle(c(Tn,this)).direction)}get highlightColors(){return ve(this,"highlightColors",c(hn,this)?new Map(c(hn,this).split(",").map((e=>e.split("=").map((e=>e.trim()))))):null)}get highlightColorNames(){return ve(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,(e=>e.reverse()))):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),d(Zt,this,e)}setMainHighlightColorPicker(e){d(xn,this,e)}editAltText(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(t=c(Xt,this))||void 0===t||t.editAltText(this,e,n)}getSignature(e){var t;null===(t=c(Fn,this))||void 0===t||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return c(Fn,this)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference(e){let{name:t,value:n}=e;if("enableNewAltTextWhenAddingImage"===t)d(ln,this,n)}onPageChanging(e){let{pageNumber:t}=e;d(en,this,t-1)}focusMainContainer(){c(Tn,this).focus()}findParent(e,t){for(const n of c(Kt,this).values()){const{x:i,y:s,width:r,height:a}=n.div.getBoundingClientRect();if(e>=i&&e<=i+r&&t>=s&&t<=s+a)return n}return null}disableUserSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];c(Bn,this).classList.toggle("noUserSelect",e)}addShouldRescale(e){c(rn,this).add(e)}removeShouldRescale(e){c(rn,this).delete(e)}onScaleChanging(e){var t;let{scale:n}=e;this.commitOrRemove(),this.viewParameters.realScale=n*Oe.PDF_TO_CSS_UNITS;for(const i of c(rn,this))i.onScaleChanging();null===(t=c(Zt,this))||void 0===t||t.onScaleChanging()}onRotationChanging(e){let{pagesRotation:t}=e;this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:r}=t,a=t.toString(),o=l(jn,this,Ln).call(this,t).closest(".textLayer"),u=this.getSelectionBoxes(o);if(!u)return;t.empty();const d=l(jn,this,Rn).call(this,o),h=c(An,this)===W.NONE,p=()=>{null===d||void 0===d||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:r,text:a}),h&&this.showAllEditors("highlight",!0,!0)};h?this.switchToMode(W.HIGHLIGHT,p):p()}addToAnnotationStorage(e){e.isEmpty()||!c(Yt,this)||c(Yt,this).has(e.id)||c(Yt,this).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,c(pn,this)&&(d(pn,this,!1),l(jn,this,Wn).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of c(Cn,this))if(t.div.contains(e)){d(Dn,this,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!c(Dn,this))return;const[e,t]=c(Dn,this);d(Dn,this,null),t.addEventListener("focusin",(()=>{e._focusEventsAllowed=!0}),{once:!0,signal:this._signal}),t.focus()}addEditListeners(){l(jn,this,Gn).call(this),l(jn,this,Kn).call(this)}removeEditListeners(){l(jn,this,qn).call(this),l(jn,this,Xn).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of c(sn,this))if(n.isHandlingMimeForPasting(t))return e.dataTransfer.dropEffect="copy",void e.preventDefault()}drop(e){for(const t of e.dataTransfer.items)for(const n of c(sn,this))if(n.isHandlingMimeForPasting(t.type))return n.paste(t,this.currentLayer),void e.preventDefault()}copy(e){var t;if(e.preventDefault(),null===(t=c(Gt,this))||void 0===t||t.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of c(Cn,this)){const e=i.serialize(!0);e&&n.push(e)}0!==n.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const e of c(sn,this))if(e.isHandlingMimeForPasting(r.type))return void e.paste(r,this.currentLayer);let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(s){return void he('paste: "'.concat(s.message,'".'))}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const e=[];for(const r of n){const t=await i.deserialize(r);if(!t)return;e.push(t)}const t=()=>{for(const t of e)l(jn,this,ei).call(this,t);l(jn,this,ii).call(this,e)},s=()=>{for(const t of e)t.remove()};this.addCommands({cmd:t,undo:s,mustExec:!0})}catch(s){he('paste: "'.concat(s.message,'".'))}}keydown(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),c(An,this)===W.NONE||this.isEditorHandlingKeyboard||Pn._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,c(pn,this)&&(d(pn,this,!1),l(jn,this,Wn).call(this,"main_toolbar")))}onEditingAction(e){let{name:t}=e;switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu")}}setEditingState(e){e?(l(jn,this,Hn).call(this),l(jn,this,Kn).call(this),l(jn,this,Qn).call(this,{isEditing:c(An,this)!==W.NONE,isEmpty:l(jn,this,ni).call(this),hasSomethingToUndo:c($t,this).hasSomethingToUndo(),hasSomethingToRedo:c($t,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(l(jn,this,Vn).call(this),l(jn,this,Xn).call(this),l(jn,this,Qn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!c(sn,this)){d(sn,this,e);for(const e of c(sn,this))l(jn,this,$n).call(this,e.defaultPropertiesToUpdate)}}getId(){return c(mn,this).id}get currentLayer(){return c(Kt,this).get(c(en,this))}getLayer(e){return c(Kt,this).get(e)}get currentPageIndex(){return c(en,this)}addLayer(e){c(Kt,this).set(e.pageIndex,e),c(gn,this)?e.enable():e.disable()}removeLayer(e){c(Kt,this).delete(e.pageIndex)}async updateMode(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(c(An,this)!==e&&(!c(In,this)||(await c(In,this).promise,c(In,this)))){var s,r;if(d(In,this,Promise.withResolvers()),null===(t=c(Zt,this))||void 0===t||t.commitOrRemove(),d(An,this,e),e===W.NONE)return this.setEditingState(!1),l(jn,this,Zn).call(this),null===(s=this._editorUndoBar)||void 0===s||s.hide(),void c(In,this).resolve();if(e===W.SIGNATURE)await(null===(r=c(Fn,this))||void 0===r?void 0:r.loadSignatures());this.setEditingState(!0),await l(jn,this,Jn).call(this),this.unselectAll();for(const t of c(Kt,this).values())t.updateMode(e);if(!n)return i&&this.addNewEditorFromKeyboard(),void c(In,this).resolve();for(const e of c(qt,this).values())e.annotationElementId===n||e.id===n?(this.setSelected(e),e.enterInEditMode()):e.unselect();c(In,this).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==c(An,this)&&this._eventBus.dispatch("switchannotationeditormode",(0,i.A)({source:this},e))}updateParams(e,t){var n;if(c(sn,this)){switch(e){case U.CREATE:return void this.currentLayer.addNewEditor(t);case U.HIGHLIGHT_DEFAULT_COLOR:null===(n=c(xn,this))||void 0===n||n.updateColor(t);break;case U.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(Sn,this)||d(Sn,this,new Map)).set(e,t),this.showAllEditors("highlight",t)}for(const n of c(Cn,this))n.updateParams(e,t);for(const n of c(sn,this))n.updateDefaultParams(e,t)}}showAllEditors(e,t){var n,i;for(const s of c(qt,this).values())s.editorType===e&&s.show(t);(null===(n=null===(i=c(Sn,this))||void 0===i?void 0:i.get(U.HIGHLIGHT_SHOW_ALL))||void 0===n||n)!==t&&l(jn,this,$n).call(this,[[U.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(c(vn,this)!==e){d(vn,this,e);for(const t of c(Kt,this).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of c(qt,this).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return c(qt,this).get(e)}addEditor(e){c(qt,this).set(e.id,e)}removeEditor(e){var t,n;(e.div.contains(document.activeElement)&&(c(cn,this)&&clearTimeout(c(cn,this)),d(cn,this,setTimeout((()=>{this.focusMainContainer(),d(cn,this,null)}),0))),c(qt,this).delete(e.id),e.annotationElementId)&&(null===(t=c(bn,this))||void 0===t||t.delete(e.annotationElementId));(this.unselect(e),e.annotationElementId&&c(tn,this).has(e.annotationElementId))||(null===(n=c(Yt,this))||void 0===n||n.remove(e.id))}addDeletedAnnotationElement(e){c(tn,this).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return c(tn,this).has(e)}removeDeletedAnnotationElement(e){c(tn,this).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){c(Gt,this)!==e&&(d(Gt,this,e),e&&l(jn,this,$n).call(this,e.propertiesToUpdate))}updateUI(e){u(jn,this,ti)===e&&l(jn,this,$n).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){l(jn,this,$n).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(c(Cn,this).has(e))return c(Cn,this).delete(e),e.unselect(),void l(jn,this,Qn).call(this,{hasSelectedEditor:this.hasSelection});c(Cn,this).add(e),e.select(),l(jn,this,$n).call(this,e.propertiesToUpdate),l(jn,this,Qn).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;null===(t=c(Zt,this))||void 0===t||t.commitOrRemove();for(const n of c(Cn,this))n!==e&&n.unselect();c(Cn,this).clear(),c(Cn,this).add(e),e.select(),l(jn,this,$n).call(this,e.propertiesToUpdate),l(jn,this,Qn).call(this,{hasSelectedEditor:!0})}isSelected(e){return c(Cn,this).has(e)}get firstSelectedEditor(){return c(Cn,this).values().next().value}unselect(e){e.unselect(),c(Cn,this).delete(e),l(jn,this,Qn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==c(Cn,this).size}get isEnterHandled(){return 1===c(Cn,this).size&&this.firstSelectedEditor.isEnterHandled}undo(){var e;c($t,this).undo(),l(jn,this,Qn).call(this,{hasSomethingToUndo:c($t,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:l(jn,this,ni).call(this)}),null===(e=this._editorUndoBar)||void 0===e||e.hide()}redo(){c($t,this).redo(),l(jn,this,Qn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c($t,this).hasSomethingToRedo(),isEmpty:l(jn,this,ni).call(this)})}addCommands(e){c($t,this).add(e),l(jn,this,Qn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:l(jn,this,ni).call(this)})}cleanUndoStack(e){c($t,this).cleanType(e)}delete(){var e;this.commitOrRemove();const t=null===(e=this.currentLayer)||void 0===e?void 0:e.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const n=t?[t]:[...c(Cn,this)],i=()=>{for(const e of n)l(jn,this,ei).call(this,e)};this.addCommands({cmd:()=>{var e;null===(e=this._editorUndoBar)||void 0===e||e.show(i,1===n.length?n[0].editorType:n.length);for(const t of n)t.remove()},undo:i,mustExec:!0})}commitOrRemove(){var e;null===(e=c(Gt,this))||void 0===e||e.commitOrRemove()}hasSomethingToControl(){return c(Gt,this)||this.hasSelection}selectAll(){for(const e of c(Cn,this))e.commit();l(jn,this,ii).call(this,c(qt,this).values())}unselectAll(){var e;if((!c(Gt,this)||(c(Gt,this).commitOrRemove(),c(An,this)===W.NONE))&&(null===(e=c(Zt,this))||void 0===e||!e.commitOrRemove())&&this.hasSelection){for(const e of c(Cn,this))e.unselect();c(Cn,this).clear(),l(jn,this,Qn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;c(Nn,this)[0]+=e,c(Nn,this)[1]+=t;const[n,i]=c(Nn,this),s=[...c(Cn,this)];c(Mn,this)&&clearTimeout(c(Mn,this)),d(Mn,this,setTimeout((()=>{d(Mn,this,null),c(Nn,this)[0]=c(Nn,this)[1]=0,this.addCommands({cmd:()=>{for(const e of s)c(qt,this).has(e.id)&&(e.translateInPage(n,i),e.translationDone())},undo:()=>{for(const e of s)c(qt,this).has(e.id)&&(e.translateInPage(-n,-i),e.translationDone())},mustExec:!1})}),1e3));for(const r of s)r.translateInPage(e,t),r.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),d(nn,this,new Map);for(const e of c(Cn,this))c(nn,this).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(nn,this))return!1;this.disableUserSelect(!1);const e=c(nn,this);d(nn,this,null);let t=!1;for(const[{x:i,y:s,pageIndex:r},a]of e)a.newX=i,a.newY=s,a.newPageIndex=r,t||(t=i!==a.savedX||s!==a.savedY||r!==a.savedPageIndex);if(!t)return!1;const n=(e,t,n,i)=>{if(c(qt,this).has(e.id)){const s=c(Kt,this).get(i);s?e._setParentAndPosition(s,t,n):(e.pageIndex=i,e.x=t,e.y=n)}};return this.addCommands({cmd:()=>{for(const[t,{newX:i,newY:s,newPageIndex:r}]of e)n(t,i,s,r)},undo:()=>{for(const[t,{savedX:i,savedY:s,savedPageIndex:r}]of e)n(t,i,s,r)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(c(nn,this))for(const n of c(nn,this).keys())n.drag(e,t)}rebuild(e){if(null===e.parent){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return(null===(e=this.getActive())||void 0===e?void 0:e.shouldGetKeyboardEvents())||1===c(Cn,this).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return c(Gt,this)===e}getActive(){return c(Gt,this)}getMode(){return c(An,this)}get imageManager(){return ve(this,"imageManager",new Bt)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let l=0,u=t.rangeCount;l<u;l++)if(!e.contains(t.getRangeAt(l).commonAncestorContainer))return null;const{x:n,y:i,width:s,height:r}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(e,t,a,o)=>({x:(t-i)/r,y:1-(e+a-n)/s,width:o/r,height:a/s});break;case"180":a=(e,t,a,o)=>({x:1-(e+a-n)/s,y:1-(t+o-i)/r,width:a/s,height:o/r});break;case"270":a=(e,t,a,o)=>({x:1-(t+o-i)/r,y:(e-n)/s,width:o/r,height:a/s});break;default:a=(e,t,a,o)=>({x:(e-n)/s,y:(t-i)/r,width:a/s,height:o/r})}const o=[];for(let l=0,u=t.rangeCount;l<u;l++){const e=t.getRangeAt(l);if(!e.collapsed)for(const{x:t,y:n,width:i,height:s}of e.getClientRects())0!==i&&0!==s&&o.push(a(t,n,i,s))}return 0===o.length?null:o}addChangedExistingAnnotation(e){let{annotationElementId:t,id:n}=e;(c(Qt,this)||d(Qt,this,new Map)).set(t,n)}removeChangedExistingAnnotation(e){var t;let{annotationElementId:n}=e;null===(t=c(Qt,this))||void 0===t||t.delete(n)}renderAnnotationElement(e){var t;const n=null===(t=c(Qt,this))||void 0===t?void 0:t.get(e.data.id);if(!n)return;const i=c(Yt,this).getRawValue(n);i&&(c(An,this)!==W.NONE||i.hasBeenModified)&&i.renderAnnotationElement(e)}setMissingCanvas(e,t,n){var i;const s=null===(i=c(bn,this))||void 0===i?void 0:i.get(e);s&&(s.setCanvas(t,n),c(bn,this).delete(e))}addMissingCanvas(e,t){(c(bn,this)||d(bn,this,new Map)).set(e,t)}}function Ln(e){let{anchorNode:t}=e;return t.nodeType===Node.TEXT_NODE?t.parentElement:t}function Rn(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of c(Kt,this).values())if(n.hasTextLayer(e))return n;return null}function On(){const e=document.getSelection();if(!e||e.isCollapsed)return;const t=l(jn,this,Ln).call(this,e).closest(".textLayer"),n=this.getSelectionBoxes(t);n&&(c(fn,this)||d(fn,this,new wt(this)),c(fn,this).show(t,n,"ltr"===this.direction))}function zn(){var e;const t=document.getSelection();if(!t||t.isCollapsed){var n;if(c(En,this))null===(n=c(fn,this))||void 0===n||n.hide(),d(En,this,null),l(jn,this,Qn).call(this,{hasSelectedText:!1});return}const{anchorNode:i}=t;if(i===c(En,this))return;const s=l(jn,this,Ln).call(this,t).closest(".textLayer");var r;if(s){if(null===(e=c(fn,this))||void 0===e||e.hide(),d(En,this,i),l(jn,this,Qn).call(this,{hasSelectedText:!0}),(c(An,this)===W.HIGHLIGHT||c(An,this)===W.NONE)&&(c(An,this)===W.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),d(pn,this,this.isShiftKeyDown),!this.isShiftKeyDown)){const e=c(An,this)===W.HIGHLIGHT?l(jn,this,Rn).call(this,s):null;null===e||void 0===e||e.toggleDrawing();const t=new AbortController,n=this.combinedSignal(t),i=n=>{"pointerup"===n.type&&0!==n.button||(t.abort(),null===e||void 0===e||e.toggleDrawing(!0),"pointerup"===n.type&&l(jn,this,Wn).call(this,"main_toolbar"))};window.addEventListener("pointerup",i,{signal:n}),window.addEventListener("blur",i,{signal:n})}}else c(En,this)&&(null===(r=c(fn,this))||void 0===r||r.hide(),d(En,this,null),l(jn,this,Qn).call(this,{hasSelectedText:!1}))}function Wn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";c(An,this)===W.HIGHLIGHT?this.highlightSelection(e):c(an,this)&&l(jn,this,On).call(this)}function Un(){document.addEventListener("selectionchange",l(jn,this,zn).bind(this),{signal:this._signal})}function Hn(){if(c(dn,this))return;d(dn,this,new AbortController);const e=this.combinedSignal(c(dn,this));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}function Vn(){var e;null===(e=c(dn,this))||void 0===e||e.abort(),d(dn,this,null)}function Gn(){if(c(yn,this))return;d(yn,this,new AbortController);const e=this.combinedSignal(c(yn,this));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}function qn(){var e;null===(e=c(yn,this))||void 0===e||e.abort(),d(yn,this,null)}function Kn(){if(c(Jt,this))return;d(Jt,this,new AbortController);const e=this.combinedSignal(c(Jt,this));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}function Xn(){var e;null===(e=c(Jt,this))||void 0===e||e.abort(),d(Jt,this,null)}function Yn(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}function Qn(e){Object.entries(e).some((e=>{let[t,n]=e;return c(_n,this)[t]!==n}))&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(_n,this),e)}),c(An,this)===W.HIGHLIGHT&&!1===e.hasSelectedEditor&&l(jn,this,$n).call(this,[[U.HIGHLIGHT_FREE,!0]]))}function $n(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}async function Jn(){if(!c(gn,this)){d(gn,this,!0);const e=[];for(const t of c(Kt,this).values())e.push(t.enable());await Promise.all(e);for(const t of c(qt,this).values())t.enable()}}function Zn(){if(this.unselectAll(),c(gn,this)){d(gn,this,!1);for(const e of c(Kt,this).values())e.disable();for(const e of c(qt,this).values())e.disable()}}function ei(e){const t=c(Kt,this).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}function ti(e){let t=null;for(t of c(Cn,e));return t}function ni(){if(0===c(qt,this).size)return!0;if(1===c(qt,this).size)for(const e of c(qt,this).values())return e.isEmpty();return!1}function ii(e){for(const t of c(Cn,this))t.unselect();c(Cn,this).clear();for(const t of e)t.isEmpty()||(c(Cn,this).add(t),t.select());l(jn,this,Qn).call(this,{hasSelectedEditor:this.hasSelection})}(0,k.A)(Pn,"TRANSLATE_SMALL",1),(0,k.A)(Pn,"TRANSLATE_BIG",10);var si=new WeakMap,ri=new WeakMap,ai=new WeakMap,oi=new WeakMap,li=new WeakMap,ui=new WeakMap,ci=new WeakMap,di=new WeakMap,hi=new WeakMap,pi=new WeakMap,fi=new WeakMap,mi=new WeakMap,gi=new WeakSet;class vi{constructor(e){a(this,gi),o(this,si,null),o(this,ri,!1),o(this,ai,null),o(this,oi,null),o(this,li,null),o(this,ui,null),o(this,ci,!1),o(this,di,null),o(this,hi,null),o(this,pi,null),o(this,fi,null),o(this,mi,!1),d(hi,this,e),d(mi,this,e._uiManager.useNewAltTextFlow),xi._||(xi._=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){var t;null!==(t=vi._l10n)&&void 0!==t||(vi._l10n=e)}async render(){const e=d(ai,this,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=d(oi,this,document.createElement("span"));e.append(t),c(mi,this)?(e.classList.add("new"),e.setAttribute("data-l10n-id",xi._.missing),t.setAttribute("data-l10n-id",xi._["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=c(hi,this)._uiManager._signal;e.addEventListener("contextmenu",Ke,{signal:n}),e.addEventListener("pointerdown",(e=>e.stopPropagation()),{signal:n});const i=e=>{e.preventDefault(),c(hi,this)._uiManager.editAltText(c(hi,this)),c(mi,this)&&c(hi,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(gi,this,yi)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",(t=>{t.target===e&&"Enter"===t.key&&(d(ci,this,!0),i(t))}),{signal:n}),await l(gi,this,Di).call(this),e}finish(){c(ai,this)&&(c(ai,this).focus({focusVisible:c(ci,this)}),d(ci,this,!1))}isEmpty(){return c(mi,this)?null===c(si,this):!c(si,this)&&!c(ri,this)}hasData(){return c(mi,this)?null!==c(si,this)||!!c(pi,this):this.isEmpty()}get guessedText(){return c(pi,this)}async setGuessedText(e){null===c(si,this)&&(d(pi,this,e),d(fi,this,await vi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),l(gi,this,Di).call(this))}toggleAltTextBadge(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;if(!c(mi,this)||c(si,this))return null===(t=c(di,this))||void 0===t||t.remove(),void d(di,this,null);if(!c(di,this)){const e=d(di,this,document.createElement("div"));e.className="noAltTextBadge",c(hi,this).div.append(e)}c(di,this).classList.toggle("hidden",!e)}serialize(e){let t=c(si,this);return e||c(pi,this)!==t||(t=c(fi,this)),{altText:t,decorative:c(ri,this),guessedText:c(pi,this),textWithDisclaimer:c(fi,this)}}get data(){return{altText:c(si,this),decorative:c(ri,this)}}set data(e){let{altText:t,decorative:n,guessedText:i,textWithDisclaimer:s,cancel:r=!1}=e;i&&(d(pi,this,i),d(fi,this,s)),c(si,this)===t&&c(ri,this)===n||(r||(d(si,this,t),d(ri,this,n)),l(gi,this,Di).call(this))}toggle(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];c(ai,this)&&(!e&&c(ui,this)&&(clearTimeout(c(ui,this)),d(ui,this,null)),c(ai,this).disabled=!e)}shown(){c(hi,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(gi,this,yi)}})}destroy(){var e,t;null===(e=c(ai,this))||void 0===e||e.remove(),d(ai,this,null),d(oi,this,null),d(li,this,null),null===(t=c(di,this))||void 0===t||t.remove(),d(di,this,null)}}function yi(e){return(c(si,e)?"added":null===c(si,e)&&e.guessedText&&"review")||"missing"}async function Di(){const e=c(ai,this);if(!e)return;if(c(mi,this)){var t,n;if(e.classList.toggle("done",!!c(si,this)),e.setAttribute("data-l10n-id",xi._[u(gi,this,yi)]),null===(t=c(oi,this))||void 0===t||t.setAttribute("data-l10n-id",xi._["".concat(u(gi,this,yi),"-label")]),!c(si,this))return void(null===(n=c(li,this))||void 0===n||n.remove())}else{var i;if(!c(si,this)&&!c(ri,this))return e.classList.remove("done"),void(null===(i=c(li,this))||void 0===i||i.remove());e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let s=c(li,this);if(!s){d(li,this,s=document.createElement("span")),s.className="tooltip",s.setAttribute("role","tooltip"),s.id="alt-text-tooltip-".concat(c(hi,this).id);const t=100,n=c(hi,this)._uiManager._signal;n.addEventListener("abort",(()=>{clearTimeout(c(ui,this)),d(ui,this,null)}),{once:!0}),e.addEventListener("mouseenter",(()=>{d(ui,this,setTimeout((()=>{d(ui,this,null),c(li,this).classList.add("show"),c(hi,this)._reportTelemetry({action:"alt_text_tooltip"})}),t))}),{signal:n}),e.addEventListener("mouseleave",(()=>{var e;c(ui,this)&&(clearTimeout(c(ui,this)),d(ui,this,null)),null===(e=c(li,this))||void 0===e||e.classList.remove("show")}),{signal:n})}c(ri,this)?s.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(s.removeAttribute("data-l10n-id"),s.textContent=c(si,this)),s.parentNode||e.append(s);const r=c(hi,this).getElementForAltText();null===r||void 0===r||r.setAttribute("aria-describedby",s.id)}var xi={_:null};(0,k.A)(vi,"_l10n",null);var bi=new WeakMap,wi=new WeakMap,Ai=new WeakMap,Ci=new WeakMap,Ei=new WeakMap,Fi=new WeakMap,ki=new WeakMap,Si=new WeakMap,_i=new WeakMap,Ni=new WeakMap,Mi=new WeakMap,Ti=new WeakMap,Bi=new WeakSet;class Ii{constructor(e){let{container:t,isPinchingDisabled:n=null,isPinchingStopped:i=null,onPinchStart:s=null,onPinching:r=null,onPinchEnd:u=null,signal:h}=e;a(this,Bi),o(this,bi,void 0),o(this,wi,!1),o(this,Ai,null),o(this,Ci,void 0),o(this,Ei,void 0),o(this,Fi,void 0),o(this,ki,void 0),o(this,Si,null),o(this,_i,void 0),o(this,Ni,null),o(this,Mi,void 0),o(this,Ti,null),d(bi,this,t),d(Ai,this,i),d(Ci,this,n),d(Ei,this,s),d(Fi,this,r),d(ki,this,u),d(Mi,this,new AbortController),d(_i,this,AbortSignal.any([h,c(Mi,this).signal])),t.addEventListener("touchstart",l(Bi,this,ji).bind(this),{passive:!1,signal:c(_i,this)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/tt.pixelRatio}destroy(){var e,t;null===(e=c(Mi,this))||void 0===e||e.abort(),d(Mi,this,null),null===(t=c(Si,this))||void 0===t||t.abort(),d(Si,this,null)}}function ji(e){var t,n;if(null!==(t=c(Ci,this))&&void 0!==t&&t.call(this))return;if(1===e.touches.length){if(c(Si,this))return;const e=d(Si,this,new AbortController),t=AbortSignal.any([c(_i,this),e.signal]),n=c(bi,this),i={capture:!0,signal:t,passive:!1},s=e=>{var t;"touch"===e.pointerType&&(null===(t=c(Si,this))||void 0===t||t.abort(),d(Si,this,null))};return n.addEventListener("pointerdown",(e=>{"touch"===e.pointerType&&(Xe(e),s(e))}),i),n.addEventListener("pointerup",s,i),void n.addEventListener("pointercancel",s,i)}if(!c(Ti,this)){var i;d(Ti,this,new AbortController);const e=AbortSignal.any([c(_i,this),c(Ti,this).signal]),t=c(bi,this),n={signal:e,capture:!1,passive:!1};t.addEventListener("touchmove",l(Bi,this,Pi).bind(this),n);const s=l(Bi,this,Li).bind(this);t.addEventListener("touchend",s,n),t.addEventListener("touchcancel",s,n),n.capture=!0,t.addEventListener("pointerdown",Xe,n),t.addEventListener("pointermove",Xe,n),t.addEventListener("pointercancel",Xe,n),t.addEventListener("pointerup",Xe,n),null===(i=c(Ei,this))||void 0===i||i.call(this)}if(Xe(e),2!==e.touches.length||null!==(n=c(Ai,this))&&void 0!==n&&n.call(this))return void d(Ni,this,null);let[s,r]=e.touches;s.identifier>r.identifier&&([s,r]=[r,s]),d(Ni,this,{touch0X:s.screenX,touch0Y:s.screenY,touch1X:r.screenX,touch1Y:r.screenY})}function Pi(e){var t;if(!c(Ni,this)||2!==e.touches.length)return;Xe(e);let[n,i]=e.touches;n.identifier>i.identifier&&([n,i]=[i,n]);const{screenX:s,screenY:r}=n,{screenX:a,screenY:o}=i,l=c(Ni,this),{touch0X:u,touch0Y:h,touch1X:p,touch1Y:f}=l,g=p-u,v=f-h,y=a-s,D=o-r,x=Math.hypot(y,D)||1,b=Math.hypot(g,v)||1;if(!c(wi,this)&&Math.abs(b-x)<=m.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=s,l.touch0Y=r,l.touch1X=a,l.touch1Y=o,!c(wi,this))return void d(wi,this,!0);const w=[(s+a)/2,(r+o)/2];null===(t=c(Fi,this))||void 0===t||t.call(this,w,b,x)}function Li(e){if(!(e.touches.length>=2)){var t;if(c(Ti,this))c(Ti,this).abort(),d(Ti,this,null),null===(t=c(ki,this))||void 0===t||t.call(this);c(Ni,this)&&(Xe(e),d(Ni,this,null),d(wi,this,!1))}}m=Ii;var Ri=new WeakMap,Oi=new WeakMap,zi=new WeakMap,Wi=new WeakMap,Ui=new WeakMap,Hi=new WeakMap,Vi=new WeakMap,Gi=new WeakMap,qi=new WeakMap,Ki=new WeakMap,Xi=new WeakMap,Yi=new WeakMap,Qi=new WeakMap,$i=new WeakMap,Ji=new WeakMap,Zi=new WeakMap,es=new WeakMap,ts=new WeakMap,ns=new WeakMap,is=new WeakMap,ss=new WeakMap,rs=new WeakMap,as=new WeakMap,os=new WeakMap,ls=new WeakSet;class us{static get _resizerKeyboardManager(){const e=us.prototype._resizeWithKeyboard,t=Pn.TRANSLATE_SMALL,n=Pn.TRANSLATE_BIG;return ve(this,"_resizerKeyboardManager",new Wt([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],us.prototype._stopResizingWithKeyboard]]))}constructor(e){a(this,ls),o(this,Ri,null),o(this,Oi,null),o(this,zi,null),o(this,Wi,!1),o(this,Ui,null),o(this,Hi,""),o(this,Vi,!1),o(this,Gi,null),o(this,qi,null),o(this,Ki,null),o(this,Xi,null),o(this,Yi,""),o(this,Qi,!1),o(this,$i,null),o(this,Ji,!1),o(this,Zi,!1),o(this,es,!1),o(this,ts,null),o(this,ns,0),o(this,is,0),o(this,ss,null),o(this,rs,null),(0,k.A)(this,"isSelected",!1),(0,k.A)(this,"_isCopy",!1),(0,k.A)(this,"_editToolbar",null),(0,k.A)(this,"_initialOptions",Object.create(null)),(0,k.A)(this,"_initialData",null),(0,k.A)(this,"_isVisible",!0),(0,k.A)(this,"_uiManager",null),(0,k.A)(this,"_focusEventsAllowed",!0),o(this,as,!1),o(this,os,us._zIndex++),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:s,pageY:r}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[s,r];const[l,u]=this.parentDimensions;this.x=e.x/l,this.y=e.y/u,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return ve(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new _s({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){var n;if(null!==(n=us._l10n)&&void 0!==n||(us._l10n=e),us._l10nResizer||(us._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==us._borderLineWidth)return;const i=getComputedStyle(document.documentElement);us._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){pe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(as,this)}set _isDraggable(e){var t;d(as,this,e),null===(t=this.div)||void 0===t||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(os,this)}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):l(ls,this,Ss).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(c(Qi,this)?d(Qi,this,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const n=e.relatedTarget;null!==n&&void 0!==n&&n.closest("#".concat(this.id))||(e.preventDefault(),null!==(t=this.parent)&&void 0!==t&&t.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[s,r]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/s,this.y=(t+i)/r,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i),this._onTranslated()}translate(e,t){l(ls,this,cs).call(this,this.parentDimensions,e,t)}translateInPage(e,t){c($i,this)||d($i,this,[this.x,this.y,this.width,this.height]),l(ls,this,cs).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){c($i,this)||d($i,this,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,s]}=this;if(this.x+=e/i,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[o,l]=this.getBaseTranslation();r+=o,a+=l;const{style:u}=n;u.left="".concat((100*r).toFixed(2),"%"),u.top="".concat((100*a).toFixed(2),"%"),this._onTranslating(r,a),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!c($i,this)&&(c($i,this)[0]!==this.x||c($i,this)[1]!==this.y)}get _hasBeenResized(){return!!c($i,this)&&(c($i,this)[2]!==this.width||c($i,this)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=us,i=n/e,s=n/t;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation;const{div:{style:t},pageDimensions:[n,i]}=this;let{x:s,y:r,width:a,height:o}=this;if(a*=n,o*=i,s*=n,r*=i,this._mustFixPosition)switch(e){case 0:s=Pe(s,0,n-a),r=Pe(r,0,i-o);break;case 90:s=Pe(s,0,n-o),r=Pe(r,a,i);break;case 180:s=Pe(s,a,n),r=Pe(r,o,i);break;case 270:s=Pe(s,o,n),r=Pe(r,0,i-a)}this.x=s/=n,this.y=r/=i;const[l,u]=this.getBaseTranslation();s+=l,r+=u,t.left="".concat((100*s).toFixed(2),"%"),t.top="".concat((100*r).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(e,t){return ds.call(us,e,t,this.parentRotation)}pageTranslationToScreen(e,t){return ds.call(us,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,i]=this.parentDimensions,{style:s}=this.div;s.width="".concat((100*e/n).toFixed(2),"%"),c(Vi,this)||(s.height="".concat((100*t/i).toFixed(2),"%"))}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,i=n.endsWith("%"),s=!c(Vi,this)&&t.endsWith("%");if(i&&s)return;const[r,a]=this.parentDimensions;i||(e.width="".concat((100*parseFloat(n)/r).toFixed(2),"%")),c(Vi,this)||s||(e.height="".concat((100*parseFloat(t)/a).toFixed(2),"%"))}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(1e4*e)/1e4}_onResizing(){}altTextFinish(){var e;null===(e=c(zi,this))||void 0===e||e.finish()}async addEditToolbar(){return this._editToolbar||c(Zi,this)||(this._editToolbar=new ct(this),this.div.append(this._editToolbar.render()),c(zi,this)&&await this._editToolbar.addAltText(c(zi,this))),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,null===(e=c(zi,this))||void 0===e||e.destroy())}addContainer(e){var t;const n=null===(t=this._editToolbar)||void 0===t?void 0:t.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){c(zi,this)||(vi.initialize(us._l10n),d(zi,this,new vi(this)),c(Ri,this)&&(c(zi,this).data=c(Ri,this),d(Ri,this,null)),await this.addEditToolbar())}get altTextData(){var e;return null===(e=c(zi,this))||void 0===e?void 0:e.data}set altTextData(e){c(zi,this)&&(c(zi,this).data=e)}get guessedAltText(){var e;return null===(e=c(zi,this))||void 0===e?void 0:e.guessedText}async setGuessedAltText(e){var t;await(null===(t=c(zi,this))||void 0===t?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return null===(t=c(zi,this))||void 0===t?void 0:t.serialize(e)}hasAltText(){return!!c(zi,this)&&!c(zi,this).isEmpty()}hasAltTextData(){var e,t;return null!==(e=null===(t=c(zi,this))||void 0===t?void 0:t.hasData())&&void 0!==e&&e}render(){var e;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=c(Wi,this)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),l(ls,this,As).call(this);const[n,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth="".concat((100*i/n).toFixed(2),"%"),t.style.maxHeight="".concat((100*n/i).toFixed(2),"%"));const[s,r]=this.getInitialTranslation();return this.translate(s,r),Ft(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(rs,this)||d(rs,this,new Ii({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:l(ls,this,ys).bind(this),onPinching:l(ls,this,Ds).bind(this),onPinchEnd:l(ls,this,xs).bind(this),signal:this._uiManager._signal}))),null===(e=this._uiManager._editorUndoBar)||void 0===e||e.hide(),t}pointerdown(e){const{isMac:t}=ke.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(d(Qi,this,!0),this._isDraggable?l(ls,this,ws).call(this,e):l(ls,this,bs).call(this,e))}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(ts,this)&&clearTimeout(c(ts,this)),d(ts,this,setTimeout((()=>{var e;d(ts,this,null),null===(e=this.parent)||void 0===e||e.moveEditorInDOM(this)}),0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation;const i=this.parentScale,[s,r]=this.pageDimensions,[a,o]=this.pageTranslation,l=e/i,u=t/i,c=this.x*s,d=this.y*r,h=this.width*s,p=this.height*r;switch(n){case 0:return[c+l+a,r-d-u-p+o,c+l+h+a,r-d-u+o];case 90:return[c+u+a,r-d+l+o,c+u+p+a,r-d+l+h+o];case 180:return[c-l-h+a,r-d+u+o,c-l+a,r-d+u+p+o];case 270:return[c-u-p+a,r-d-l-h+o,c-u+a,r-d-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,s,r]=e,a=s-n,o=r-i;switch(this.rotation){case 0:return[n,t-r,a,o];case 90:return[n,t-i,o,a];case 180:return[s,t-i,a,o];case 270:return[s,t-r,o,a];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return!this.isInEditMode()&&(this.parent.setEditingState(!1),d(Zi,this,!0),!0)}disableEditMode(){return!!this.isInEditMode()&&(this.parent.setEditingState(!0),d(Zi,this,!1),!0)}isInEditMode(){return c(Zi,this)}shouldGetKeyboardEvents(){return c(es,this)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:s,innerWidth:r}=window;return t<r&&i>0&&e<s&&n>0}rebuild(){l(ls,this,As).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null===(e=this._initialData)||void 0===e?void 0:e.popupRef)||""}}serialize(){pe("An editor must be serializable")}static async deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});i.rotation=e.rotation,d(Ri,i,e.accessibilityData),i._isCopy=e.isCopy||!1;const[s,r]=i.pageDimensions,[a,o,l,u]=i.getRectInCurrentCoords(e.rect,r);return i.x=a/s,i.y=o/r,i.width=l/s,i.height=u/r,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){var e,t;if(null===(e=c(Xi,this))||void 0===e||e.abort(),d(Xi,this,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(ts,this)&&(clearTimeout(c(ts,this)),d(ts,this,null)),l(ls,this,Ss).call(this),this.removeEditToolbar(),c(ss,this)){for(const e of c(ss,this).values())clearTimeout(e);d(ss,this,null)}this.parent=null,null===(t=c(rs,this))||void 0===t||t.destroy(),d(rs,this,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(l(ls,this,ps).call(this),c(Gi,this).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),d(Ki,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=c(Gi,this).children;if(!c(Oi,this)){d(Oi,this,Array.from(t));const e=l(ls,this,Cs).bind(this),n=l(ls,this,Es).bind(this),i=this._uiManager._signal;for(const t of c(Oi,this)){const s=t.getAttribute("data-resizer-name");t.setAttribute("role","spinbutton"),t.addEventListener("keydown",e,{signal:i}),t.addEventListener("blur",n,{signal:i}),t.addEventListener("focus",l(ls,this,Fs).bind(this,s),{signal:i}),t.setAttribute("data-l10n-id",us._l10nResizer[s])}}const n=c(Oi,this)[0];let i=0;for(const r of t){if(r===n)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(c(Oi,this).length/4);if(s!==i){if(s<i)for(let t=0;t<i-s;t++)c(Gi,this).append(c(Gi,this).firstChild);else if(s>i)for(let t=0;t<s-i;t++)c(Gi,this).firstChild.before(c(Gi,this).lastChild);let e=0;for(const n of t){const t=c(Oi,this)[e++].getAttribute("data-resizer-name");n.setAttribute("data-l10n-id",us._l10nResizer[t])}}l(ls,this,ks).call(this,0),d(es,this,!0),c(Gi,this).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){c(es,this)&&l(ls,this,vs).call(this,c(Yi,this),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){l(ls,this,Ss).call(this),this.div.focus()}select(){var e,t,n;this.isSelected&&this._editToolbar||(this.isSelected=!0,this.makeResizable(),null===(e=this.div)||void 0===e||e.classList.add("selectedEditor"),this._editToolbar?(null===(t=this._editToolbar)||void 0===t||t.show(),null===(n=c(zi,this))||void 0===n||n.toggleAltTextBadge(!1)):this.addEditToolbar().then((()=>{var e,t;null!==(e=this.div)&&void 0!==e&&e.classList.contains("selectedEditor")&&(null===(t=this._editToolbar)||void 0===t||t.show())})))}unselect(){var e,t,n,i,s;this.isSelected&&(this.isSelected=!1,null===(e=c(Gi,this))||void 0===e||e.classList.add("hidden"),null===(t=this.div)||void 0===t||t.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null===(i=this._editToolbar)||void 0===i||i.hide(),null===(s=c(zi,this))||void 0===s||s.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return c(Ji,this)}set isEditing(e){d(Ji,this,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){d(Vi,this,!0);const n=e/t,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){c(ss,this)||d(ss,this,new Map);const{action:t}=e;let n=c(ss,this).get(t);return n&&clearTimeout(n),n=setTimeout((()=>{this._reportTelemetry(e),c(ss,this).delete(t),0===c(ss,this).size&&d(ss,this,null)}),us._telemetryTimeout),void c(ss,this).set(t,n)}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),d(Wi,this,!1)}disable(){this.div&&(this.div.tabIndex=-1),d(Wi,this,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){const e=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.before(t)}}else t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){const{firstChild:t}=e.container;"DIV"===(null===t||void 0===t?void 0:t.nodeName)&&t.classList.contains("annotationContent")&&t.remove()}}function cs(e,t,n){let[i,s]=e;[t,n]=this.screenToPageTranslation(t,n),this.x+=t/i,this.y+=n/s,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}function ds(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}function hs(e){switch(e){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}function ps(){if(c(Gi,this))return;d(Gi,this,document.createElement("div")),c(Gi,this).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const e=document.createElement("div");c(Gi,this).append(e),e.classList.add("resizer",n),e.setAttribute("data-resizer-name",n),e.addEventListener("pointerdown",l(ls,this,fs).bind(this,n),{signal:t}),e.addEventListener("contextmenu",Ke,{signal:t}),e.tabIndex=-1}this.div.prepend(c(Gi,this))}function fs(e,t){var n;t.preventDefault();const{isMac:i}=ke.platform;if(0!==t.button||t.ctrlKey&&i)return;null===(n=c(zi,this))||void 0===n||n.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,d(qi,this,[t.screenX,t.screenY]);const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",l(ls,this,vs).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Xe,{passive:!1,signal:a}),window.addEventListener("contextmenu",Ke,{signal:a}),d(Ki,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const h=()=>{var e;r.abort(),this.parent.togglePointerEvents(!0),null===(e=c(zi,this))||void 0===e||e.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=o,this.div.style.cursor=u,l(ls,this,gs).call(this)};window.addEventListener("pointerup",h,{signal:a}),window.addEventListener("blur",h,{signal:a})}function ms(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t;const[s,r]=this.parentDimensions;this.setDims(s*n,r*i),this.fixAndSetPosition(),this._onResized()}function gs(){if(!c(Ki,this))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=c(Ki,this);d(Ki,this,null);const s=this.x,r=this.y,a=this.width,o=this.height;s===e&&r===t&&a===n&&o===i||this.addCommands({cmd:l(ls,this,ms).bind(this,s,r,a,o),undo:l(ls,this,ms).bind(this,e,t,n,i),mustExec:!0})}function vs(e,t){const[n,i]=this.parentDimensions,s=this.x,r=this.y,a=this.width,o=this.height,u=g.MIN_SIZE/n,h=g.MIN_SIZE/i,p=l(ls,this,hs).call(this,this.rotation),f=(e,t)=>[p[0]*e+p[2]*t,p[1]*e+p[3]*t],m=l(ls,this,hs).call(this,360-this.rotation);let v,y,D=!1,x=!1;switch(e){case"topLeft":D=!0,v=(e,t)=>[0,0],y=(e,t)=>[e,t];break;case"topMiddle":v=(e,t)=>[e/2,0],y=(e,t)=>[e/2,t];break;case"topRight":D=!0,v=(e,t)=>[e,0],y=(e,t)=>[0,t];break;case"middleRight":x=!0,v=(e,t)=>[e,t/2],y=(e,t)=>[0,t/2];break;case"bottomRight":D=!0,v=(e,t)=>[e,t],y=(e,t)=>[0,0];break;case"bottomMiddle":v=(e,t)=>[e/2,t],y=(e,t)=>[e/2,0];break;case"bottomLeft":D=!0,v=(e,t)=>[0,t],y=(e,t)=>[e,0];break;case"middleLeft":x=!0,v=(e,t)=>[0,t/2],y=(e,t)=>[e,t/2]}const b=v(a,o),w=y(a,o);let A=f(...w);const C=g._round(s+A[0]),E=g._round(r+A[1]);let F,k,S=1,_=1;if(t.fromKeyboard)({deltaX:F,deltaY:k}=t);else{const{screenX:e,screenY:n}=t,[i,s]=c(qi,this);[F,k]=this.screenToPageTranslation(e-i,n-s),c(qi,this)[0]=e,c(qi,this)[1]=n}var N,M;if([F,k]=(N=F/n,M=k/i,[m[0]*N+m[2]*M,m[1]*N+m[3]*M]),D){const e=Math.hypot(a,o);S=_=Math.max(Math.min(Math.hypot(w[0]-b[0]-F,w[1]-b[1]-k)/e,1/a,1/o),u/a,h/o)}else x?S=Pe(Math.abs(w[0]-b[0]-F),u,1)/a:_=Pe(Math.abs(w[1]-b[1]-k),h,1)/o;const T=g._round(a*S),B=g._round(o*_);A=f(...y(T,B));const I=C-A[0],j=E-A[1];c($i,this)||d($i,this,[this.x,this.y,this.width,this.height]),this.width=T,this.height=B,this.x=I,this.y=j,this.setDims(n*T,i*B),this.fixAndSetPosition(),this._onResizing()}function ys(){var e;d(Ki,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),null===(e=c(zi,this))||void 0===e||e.toggle(!1),this.parent.togglePointerEvents(!1)}function Ds(e,t,n){let i=n/t*.7+1-.7;if(1===i)return;const s=l(ls,this,hs).call(this,this.rotation),r=(e,t)=>[s[0]*e+s[2]*t,s[1]*e+s[3]*t],[a,o]=this.parentDimensions,u=this.x,h=this.y,p=this.width,f=this.height,m=g.MIN_SIZE/a,v=g.MIN_SIZE/o;i=Math.max(Math.min(i,1/p,1/f),m/p,v/f);const y=g._round(p*i),D=g._round(f*i);if(y===p&&D===f)return;c($i,this)||d($i,this,[u,h,p,f]);const x=r(p/2,f/2),b=g._round(u+x[0]),w=g._round(h+x[1]),A=r(y/2,D/2);this.x=b-A[0],this.y=w-A[1],this.width=y,this.height=D,this.setDims(a*y,o*D),this.fixAndSetPosition(),this._onResizing()}function xs(){var e;null===(e=c(zi,this))||void 0===e||e.toggle(!0),this.parent.togglePointerEvents(!0),l(ls,this,gs).call(this)}function bs(e){const{isMac:t}=ke.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}function ws(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,s=this._uiManager.combinedSignal(i),r={capture:!0,passive:!1,signal:s},a=e=>{i.abort(),d(Ui,this,null),d(Qi,this,!1),this._uiManager.endDragSession()||l(ls,this,bs).call(this,e),n&&this._onStopDragging()};t&&(d(ns,this,e.clientX),d(is,this,e.clientY),d(Ui,this,e.pointerId),d(Hi,this,e.pointerType),window.addEventListener("pointermove",(e=>{n||(n=!0,this._onStartDragging());const{clientX:t,clientY:i,pointerId:s}=e;if(s!==c(Ui,this))return void Xe(e);const[r,a]=this.screenToPageTranslation(t-c(ns,this),i-c(is,this));d(ns,this,t),d(is,this,i),this._uiManager.dragSelectedEditors(r,a)}),r),window.addEventListener("touchmove",Xe,r),window.addEventListener("pointerdown",(e=>{e.pointerType===c(Hi,this)&&(c(rs,this)||e.isPrimary)&&a(e),Xe(e)}),r));const o=e=>{c(Ui,this)&&c(Ui,this)!==e.pointerId?Xe(e):a(e)};window.addEventListener("pointerup",o,{signal:s}),window.addEventListener("blur",o,{signal:s})}function As(){if(c(Xi,this)||!this.div)return;d(Xi,this,new AbortController);const e=this._uiManager.combinedSignal(c(Xi,this));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}function Cs(e){g._resizerKeyboardManager.exec(this,e)}function Es(e){var t;c(es,this)&&(null===(t=e.relatedTarget)||void 0===t?void 0:t.parentNode)!==c(Gi,this)&&l(ls,this,Ss).call(this)}function Fs(e){d(Yi,this,c(es,this)?e:"")}function ks(e){if(c(Oi,this))for(const t of c(Oi,this))t.tabIndex=e}function Ss(){d(es,this,!1),l(ls,this,ks).call(this,-1),l(ls,this,gs).call(this)}g=us,(0,k.A)(us,"_l10n",null),(0,k.A)(us,"_l10nResizer",null),(0,k.A)(us,"_borderLineWidth",-1),(0,k.A)(us,"_colorManager",new Ht),(0,k.A)(us,"_zIndex",1),(0,k.A)(us,"_telemetryTimeout",1e3);class _s extends us{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Ns=3285377520,Ms=4294901760,Ts=65535;class Bs{constructor(e){this.h1=e?4294967295&e:Ns,this.h2=e?4294967295&e:Ns}update(e){let t,n;if("string"===typeof e){t=new Uint8Array(2*e.length),n=0;for(let i=0,s=e.length;i<s;i++){const s=e.charCodeAt(i);s<=255?t[n++]=s:(t[n++]=s>>>8,t[n++]=255&s)}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");t=e.slice(),n=t.byteLength}const i=n>>2,s=n-4*i,r=new Uint32Array(t.buffer,0,i);let a=0,o=0,l=this.h1,u=this.h2;const c=3432918353,d=461845907,h=11601,p=13715;for(let f=0;f<i;f++)1&f?(a=r[f],a=a*c&Ms|a*h&Ts,a=a<<15|a>>>17,a=a*d&Ms|a*p&Ts,l^=a,l=l<<13|l>>>19,l=5*l+3864292196):(o=r[f],o=o*c&Ms|o*h&Ts,o=o<<15|o>>>17,o=o*d&Ms|o*p&Ts,u^=o,u=u<<13|u>>>19,u=5*u+3864292196);switch(a=0,s){case 3:a^=t[4*i+2]<<16;case 2:a^=t[4*i+1]<<8;case 1:a^=t[4*i],a=a*c&Ms|a*h&Ts,a=a<<15|a>>>17,a=a*d&Ms|a*p&Ts,1&i?l^=a:u^=a}this.h1=l,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&Ms|36045*e&Ts,t=4283543511*t&Ms|(2950163797*(t<<16|e>>>16)&Ms)>>>16,e^=t>>>1,e=444984403*e&Ms|60499*e&Ts,t=3301882366*t&Ms|(3120437893*(t<<16|e>>>16)&Ms)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Is=Object.freeze({map:null,hash:"",transfer:void 0});var js=new WeakMap,Ps=new WeakMap,Ls=new WeakMap,Rs=new WeakSet;class Os{constructor(){a(this,Rs),o(this,js,!1),o(this,Ps,null),o(this,Ls,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=c(Ls,this).get(e);return void 0===n?t:Object.assign(t,n)}getRawValue(e){return c(Ls,this).get(e)}remove(e){if(c(Ls,this).delete(e),0===c(Ls,this).size&&this.resetModified(),"function"===typeof this.onAnnotationEditor){for(const e of c(Ls,this).values())if(e instanceof us)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=c(Ls,this).get(e);let i=!1;if(void 0!==n)for(const[s,r]of Object.entries(t))n[s]!==r&&(i=!0,n[s]=r);else i=!0,c(Ls,this).set(e,t);i&&l(Rs,this,zs).call(this),t instanceof us&&"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return c(Ls,this).has(e)}get size(){return c(Ls,this).size}resetModified(){c(js,this)&&(d(js,this,!1),"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new Us(this)}get serializable(){if(0===c(Ls,this).size)return Is;const e=new Map,t=new Bs,n=[],i=Object.create(null);let s=!1;for(const[r,a]of c(Ls,this)){const n=a instanceof us?a.serialize(!1,i):a;n&&(e.set(r,n),t.update("".concat(r,":").concat(JSON.stringify(n))),s||(s=!!n.bitmap))}if(s)for(const r of e.values())r.bitmap&&n.push(r.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Is}get editorStats(){let e=null;const t=new Map;for(const s of c(Ls,this).values()){var n;if(!(s instanceof us))continue;const r=s.telemetryFinalData;if(!r)continue;const{type:a}=r;t.has(a)||t.set(a,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const o=(n=e)[a]||(n[a]=new Map);for(const[e,t]of Object.entries(r)){var i;if("type"===e)continue;let n=o.get(e);n||(n=new Map,o.set(e,n));const s=null!==(i=n.get(t))&&void 0!==i?i:0;n.set(t,s+1)}}for(const[s,r]of t)e[s]=r.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){d(Ps,this,null)}get modifiedIds(){if(c(Ps,this))return c(Ps,this);const e=[];for(const t of c(Ls,this).values())t instanceof us&&t.annotationElementId&&t.serialize()&&e.push(t.annotationElementId);return d(Ps,this,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return c(Ls,this).entries()}}function zs(){c(js,this)||(d(js,this,!0),"function"===typeof this.onSetModified&&this.onSetModified())}var Ws=new WeakMap;class Us extends Os{constructor(e){super(),o(this,Ws,void 0);const{map:t,hash:n,transfer:i}=e.serializable,s=structuredClone(t,i?{transfer:i}:null);d(Ws,this,{map:s,hash:n,transfer:i})}get print(){pe("Should not call PrintAnnotationStorage.print")}get serializable(){return c(Ws,this)}get modifiedIds(){return ve(this,"modifiedIds",{ids:new Set,hash:""})}}var Hs=new WeakMap;class Vs{constructor(e){let{ownerDocument:t=globalThis.document,styleElement:n=null}=e;o(this,Hs,new Set),this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),c(Hs,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){let{systemFontInfo:t,disableFontFace:n,_inspectFont:i}=e;if(t&&!c(Hs,this).has(t.loadedName))if(fe(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:e,src:n,style:r}=t,a=new FontFace(e,n,r);this.addNativeFontFace(a);try{await a.load(),c(Hs,this).add(e),null===i||void 0===i||i(t)}catch(s){he("Cannot load system font: ".concat(t.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(a)}}else pe("Not implemented: loadSystemFont without the Font Loading API.")}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e);if(this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw he("Failed to load font '".concat(t.family,"': '").concat(n,"'.")),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise((t=>{const n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)}))}}get isFontLoadingAPISupported(){var e;return ve(this,"isFontLoadingAPISupported",!(null===(e=this._document)||void 0===e||!e.fonts))}get isSyncFontLoadingSupported(){return ve(this,"isSyncFontLoadingSupported",_||ke.platform.isFirefox)}_queueLoadingCallback(e){const{loadingRequests:t}=this,n={done:!1,complete:function(){for(fe(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;){const e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(n),n}get _loadTestFont(){return ve(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function i(e,t,n,i){return e.substring(0,t)+i+e.substring(t+n)}let s,r;const a=this._document.createElement("canvas");a.width=1,a.height=1;const o=a.getContext("2d");let l=0;const u="lt".concat(Date.now()).concat(this.loadTestFontId++);let c=this._loadTestFont;c=i(c,976,u.length,u);const d=1482184792;let h=n(c,16);for(s=0,r=u.length-3;s<r;s+=4)h=h-d+n(u,s)|0;var p;s<u.length&&(h=h-d+n(u+"XXX",s)|0),c=i(c,16,4,(p=h,String.fromCharCode(p>>24&255,p>>16&255,p>>8&255,255&p)));const f="url(data:font/opentype;base64,".concat(btoa(c),");"),m='@font-face {font-family:"'.concat(u,'";src:').concat(f,"}");this.insertRule(m);const g=this._document.createElement("div");g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px";for(const v of[e.loadedName,u]){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=v,g.append(e)}this._document.body.append(g),function e(t,n){if(++l>30)return he("Load test font never loaded."),void n();o.font="30px "+t,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(u,(()=>{g.remove(),t.complete()}))}}class Gs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.compiledGlyphs=Object.create(null);for(const n in e)this[n]=e[n];this._inspectFont=t}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null===(e=this._inspectFont)||void 0===e||e.call(this,this),t}createFontFaceRule(){var e;if(!this.data||this.disableFontFace)return null;const t="url(data:".concat(this.mimetype,";base64,").concat(Le(this.data),");");let n;if(this.cssFontInfo){let e="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(e+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),n='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(e,"src:").concat(t,"}")}else n='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(t,"}");return null===(e=this._inspectFont)||void 0===e||e.call(this,this,t),n}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let i;try{i=e.get(n)}catch(r){he('getPathGenerator - ignoring character: "'.concat(r,'".'))}const s=new Path2D(i||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=s}}function qs(e){if("string"!==typeof e)return null;if(e.endsWith("/"))return e;throw new Error('Invalid factory url: "'.concat(e,'" must include trailing slash.'))}const Ks=e=>"object"===typeof e&&Number.isInteger(null===e||void 0===e?void 0:e.num)&&e.num>=0&&Number.isInteger(null===e||void 0===e?void 0:e.gen)&&e.gen>=0,Xs=function(e,t,n){if(!Array.isArray(n)||n.length<2)return!1;const[i,s,...r]=n;if(!e(i)&&!Number.isInteger(i))return!1;if(!t(s))return!1;const a=r.length;let o=!0;switch(s.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return 0===a;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(4!==a)return!1;o=!1;break;default:return!1}for(const l of r)if(!("number"===typeof l||o&&null===l))return!1;return!0}.bind(null,Ks,(e=>"object"===typeof e&&"string"===typeof(null===e||void 0===e?void 0:e.name)));var Ys=new WeakMap,Qs=new WeakMap;class $s{constructor(){o(this,Ys,new Map),o(this,Qs,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};c(Qs,this).then((()=>{for(const[e]of c(Ys,this))e.call(this,n)}))}addEventListener(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null;if((null===n||void 0===n?void 0:n.signal)instanceof AbortSignal){const{signal:s}=n;if(s.aborted)return void he("LoopbackPort - cannot use an `aborted` signal.");const r=()=>this.removeEventListener(e,t);i=()=>s.removeEventListener("abort",r),s.addEventListener("abort",r)}c(Ys,this).set(t,i)}removeEventListener(e,t){const n=c(Ys,this).get(t);null===n||void 0===n||n(),c(Ys,this).delete(t)}terminate(){for(const[,e]of c(Ys,this))null===e||void 0===e||e();c(Ys,this).clear()}}const Js=1,Zs=2,er=1,tr=2,nr=3,ir=4,sr=5,rr=6,ar=7,or=8;function lr(){}function ur(e){if(e instanceof Ce||e instanceof be||e instanceof De||e instanceof we||e instanceof xe)return e;switch(e instanceof Error||"object"===typeof e&&null!==e||pe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new Ce(e.message);case"InvalidPDFException":return new be(e.message);case"PasswordException":return new De(e.message,e.code);case"ResponseException":return new we(e.message,e.status,e.missing);case"UnknownErrorException":return new xe(e.message,e.details)}return new xe(e.message,e.toString())}var cr=new WeakMap,dr=new WeakSet;class hr{constructor(e,t,n){a(this,dr),o(this,cr,new AbortController),this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",l(dr,this,pr).bind(this),{signal:c(cr,this).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error('There is already an actionName called "'.concat(e,'"'));n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(r){s.reject(r)}return s.promise}sendWithStream(e,t,n,i){const s=this.streamId++,r=this.sourceName,a=this.targetName,o=this.comObj;return new ReadableStream({start:n=>{const l=Promise.withResolvers();return this.streamControllers[s]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:r,targetName:a,action:e,streamId:s,data:t,desiredSize:n.desiredSize},i),l.promise},pull:e=>{const t=Promise.withResolvers();return this.streamControllers[s].pullCall=t,o.postMessage({sourceName:r,targetName:a,stream:rr,streamId:s,desiredSize:e.desiredSize}),t.promise},cancel:e=>{fe(e instanceof Error,"cancel must have a valid reason");const t=Promise.withResolvers();return this.streamControllers[s].cancelCall=t,this.streamControllers[s].isClosed=!0,o.postMessage({sourceName:r,targetName:a,stream:er,streamId:s,reason:ur(e)}),t.promise}},n)}destroy(){var e;null===(e=c(cr,this))||void 0===e||e.abort(),d(cr,this,null)}}function pr(e){let{data:t}=e;if(t.targetName!==this.sourceName)return;if(t.stream)return void l(dr,this,mr).call(this,t);if(t.callback){const e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error("Cannot resolve callback ".concat(e));if(delete this.callbackCapabilities[e],t.callback===Js)n.resolve(t.data);else{if(t.callback!==Zs)throw new Error("Unexpected callback case");n.reject(ur(t.reason))}return}const n=this.actionHandler[t.action];if(!n)throw new Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){const e=this.sourceName,i=t.sourceName,s=this.comObj;Promise.try(n,t.data).then((function(n){s.postMessage({sourceName:e,targetName:i,callback:Js,callbackId:t.callbackId,data:n})}),(function(n){s.postMessage({sourceName:e,targetName:i,callback:Zs,callbackId:t.callbackId,reason:ur(n)})}))}else t.streamId?l(dr,this,fr).call(this,t):n(t.data)}function fr(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,s=this.comObj,r=this,a=this.actionHandler[e.action],o={enqueue(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=r,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:i,stream:ir,streamId:t,chunk:e},a)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:nr,streamId:t}),delete r.streamSinks[t])},error(e){fe(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:sr,streamId:t,reason:ur(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[t]=o,Promise.try(a,e.data,o).then((function(){s.postMessage({sourceName:n,targetName:i,stream:or,streamId:t,success:!0})}),(function(e){s.postMessage({sourceName:n,targetName:i,stream:or,streamId:t,reason:ur(e)})}))}function mr(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,s=this.comObj,r=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case or:e.success?r.startCall.resolve():r.startCall.reject(ur(e.reason));break;case ar:e.success?r.pullCall.resolve():r.pullCall.reject(ur(e.reason));break;case rr:if(!a){s.postMessage({sourceName:n,targetName:i,stream:ar,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||lr).then((function(){s.postMessage({sourceName:n,targetName:i,stream:ar,streamId:t,success:!0})}),(function(e){s.postMessage({sourceName:n,targetName:i,stream:ar,streamId:t,reason:ur(e)})}));break;case ir:if(fe(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(e.chunk);break;case nr:if(fe(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),l(dr,this,gr).call(this,r,t);break;case sr:fe(r,"error should have stream controller"),r.controller.error(ur(e.reason)),l(dr,this,gr).call(this,r,t);break;case tr:e.success?r.cancelCall.resolve():r.cancelCall.reject(ur(e.reason)),l(dr,this,gr).call(this,r,t);break;case er:if(!a)break;const o=ur(e.reason);Promise.try(a.onCancel||lr,o).then((function(){s.postMessage({sourceName:n,targetName:i,stream:tr,streamId:t,success:!0})}),(function(e){s.postMessage({sourceName:n,targetName:i,stream:tr,streamId:t,reason:ur(e)})})),a.sinkCapability.reject(o),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async function gr(e,t){var n,i,s;await Promise.allSettled([null===(n=e.startCall)||void 0===n?void 0:n.promise,null===(i=e.pullCall)||void 0===i?void 0:i.promise,null===(s=e.cancelCall)||void 0===s?void 0:s.promise]),delete this.streamControllers[t]}var vr=new WeakMap;class yr{constructor(e){let{enableHWA:t=!1}=e;o(this,vr,!1),d(vr,this,t)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!c(vr,this)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){pe("Abstract method `_createCanvas` called.")}}class Dr extends yr{constructor(e){let{ownerDocument:t=globalThis.document,enableHWA:n=!1}=e;super({enableHWA:n}),this._document=t}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class xr{constructor(e){let{baseUrl:t=null,isCompressed:n=!0}=e;this.baseUrl=t,this.isCompressed=n}async fetch(e){let{name:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then((e=>({cMapData:e,isCompressed:this.isCompressed}))).catch((e=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(n))}))}async _fetch(e){pe("Abstract method `_fetch` called.")}}class br extends xr{async _fetch(e){const t=await ze(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Fe(t)}}class wr{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,s){return"none"}destroy(){}}var Ar=new WeakMap,Cr=new WeakMap,Er=new WeakMap,Fr=new WeakMap,kr=new WeakMap,Sr=new WeakMap,_r=new WeakMap,Nr=new WeakSet;class Mr extends wr{constructor(e){let{docId:t,ownerDocument:n=globalThis.document}=e;super(),a(this,Nr),o(this,Ar,void 0),o(this,Cr,void 0),o(this,Er,void 0),o(this,Fr,void 0),o(this,kr,void 0),o(this,Sr,void 0),o(this,_r,0),d(Fr,this,t),d(kr,this,n)}addFilter(e){var t,n;if(!e)return"none";let i=u(Nr,this,Tr).get(e);if(i)return i;const[s,r,a]=l(Nr,this,jr).call(this,e),o=1===e.length?s:"".concat(s).concat(r).concat(a);if(i=u(Nr,this,Tr).get(o),i)return u(Nr,this,Tr).set(e,i),i;const h="g_".concat(c(Fr,this),"_transfer_map_").concat((d(_r,this,(t=c(_r,this),n=t++,t)),n)),p=l(Nr,this,Pr).call(this,h);u(Nr,this,Tr).set(e,p),u(Nr,this,Tr).set(o,p);const f=l(Nr,this,Or).call(this,h);return l(Nr,this,Wr).call(this,s,r,a,f),p}addHCMFilter(e,t){var n;const i="".concat(e,"-").concat(t),s="base";let r=u(Nr,this,Br).get(s);if((null===(n=r)||void 0===n?void 0:n.key)===i)return r.url;var a;r?(null===(a=r.filter)||void 0===a||a.remove(),r.key=i,r.url="none",r.filter=null):(r={key:i,url:"none",filter:null},u(Nr,this,Br).set(s,r));if(!e||!t)return r.url;const o=l(Nr,this,Hr).call(this,e);e=_e.makeHexColor(...o);const d=l(Nr,this,Hr).call(this,t);if(t=_e.makeHexColor(...d),u(Nr,this,Ir).style.color="","#000000"===e&&"#ffffff"===t||e===t)return r.url;const h=new Array(256);for(let l=0;l<=255;l++){const e=l/255;h[l]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const p=h.join(","),f="g_".concat(c(Fr,this),"_hcm_filter"),m=r.filter=l(Nr,this,Or).call(this,f);l(Nr,this,Wr).call(this,p,p,p,m),l(Nr,this,Rr).call(this,m);const g=(e,t)=>{const n=o[e]/255,i=d[e]/255,s=new Array(t+1);for(let r=0;r<=t;r++)s[r]=n+r/t*(i-n);return s.join(",")};return l(Nr,this,Wr).call(this,g(0,5),g(1,5),g(2,5),m),r.url=l(Nr,this,Pr).call(this,f),r.url}addAlphaFilter(e){var t,n;let i=u(Nr,this,Tr).get(e);if(i)return i;const[s]=l(Nr,this,jr).call(this,[e]),r="alpha_".concat(s);if(i=u(Nr,this,Tr).get(r),i)return u(Nr,this,Tr).set(e,i),i;const a="g_".concat(c(Fr,this),"_alpha_map_").concat((d(_r,this,(t=c(_r,this),n=t++,t)),n)),o=l(Nr,this,Pr).call(this,a);u(Nr,this,Tr).set(e,o),u(Nr,this,Tr).set(r,o);const h=l(Nr,this,Or).call(this,a);return l(Nr,this,Ur).call(this,s,h),o}addLuminosityFilter(e){var t,n;let i,s,r=u(Nr,this,Tr).get(e||"luminosity");if(r)return r;if(e?([i]=l(Nr,this,jr).call(this,[e]),s="luminosity_".concat(i)):s="luminosity",r=u(Nr,this,Tr).get(s),r)return u(Nr,this,Tr).set(e,r),r;const a="g_".concat(c(Fr,this),"_luminosity_map_").concat((d(_r,this,(t=c(_r,this),n=t++,t)),n)),o=l(Nr,this,Pr).call(this,a);u(Nr,this,Tr).set(e,o),u(Nr,this,Tr).set(s,o);const h=l(Nr,this,Or).call(this,a);return l(Nr,this,Lr).call(this,h),e&&l(Nr,this,Ur).call(this,i,h),o}addHighlightHCMFilter(e,t,n,i,s){var r;const a="".concat(t,"-").concat(n,"-").concat(i,"-").concat(s);let o=u(Nr,this,Br).get(e);if((null===(r=o)||void 0===r?void 0:r.key)===a)return o.url;var d;o?(null===(d=o.filter)||void 0===d||d.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},u(Nr,this,Br).set(e,o));if(!t||!n)return o.url;const[h,p]=[t,n].map(l(Nr,this,Hr).bind(this));let f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),m=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[g,v]=[i,s].map(l(Nr,this,Hr).bind(this));m<f&&([f,m,g,v]=[m,f,v,g]),u(Nr,this,Ir).style.color="";const y=(e,t,n)=>{const i=new Array(256),s=(m-f)/n,r=e/255,a=(t-e)/(255*n);let o=0;for(let l=0;l<=n;l++){const e=Math.round(f+l*s),t=r+l*a;for(let n=o;n<=e;n++)i[n]=t;o=e+1}for(let l=o;l<256;l++)i[l]=i[o-1];return i.join(",")},D="g_".concat(c(Fr,this),"_hcm_").concat(e,"_filter"),x=o.filter=l(Nr,this,Or).call(this,D);return l(Nr,this,Rr).call(this,x),l(Nr,this,Wr).call(this,y(g[0],v[0],5),y(g[1],v[1],5),y(g[2],v[2],5),x),o.url=l(Nr,this,Pr).call(this,D),o.url}destroy(){var e,t,n,i;arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&null!==(e=c(Sr,this))&&void 0!==e&&e.size||(null===(t=c(Er,this))||void 0===t||t.parentNode.parentNode.remove(),d(Er,this,null),null===(n=c(Cr,this))||void 0===n||n.clear(),d(Cr,this,null),null===(i=c(Sr,this))||void 0===i||i.clear(),d(Sr,this,null),d(_r,this,0))}}function Tr(e){return c(Cr,e)||d(Cr,e,new Map)}function Br(e){return c(Sr,e)||d(Sr,e,new Map)}function Ir(e){if(!c(Er,e)){const t=c(kr,e).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=c(kr,e).createElementNS(Re,"svg");i.setAttribute("width",0),i.setAttribute("height",0),d(Er,e,c(kr,e).createElementNS(Re,"defs")),t.append(i),i.append(c(Er,e)),c(kr,e).body.append(t)}return c(Er,e)}function jr(e){if(1===e.length){const t=e[0],n=new Array(256);for(let e=0;e<256;e++)n[e]=t[e]/255;const i=n.join(",");return[i,i,i]}const[t,n,i]=e,s=new Array(256),r=new Array(256),a=new Array(256);for(let o=0;o<256;o++)s[o]=t[o]/255,r[o]=n[o]/255,a[o]=i[o]/255;return[s.join(","),r.join(","),a.join(",")]}function Pr(e){if(void 0===c(Ar,this)){d(Ar,this,"");const e=c(kr,this).URL;e!==c(kr,this).baseURI&&(He(e)?he('#createUrl: ignore "data:"-URL for performance reasons.'):d(Ar,this,ge(e,"")))}return"url(".concat(c(Ar,this),"#").concat(e,")")}function Lr(e){const t=c(kr,this).createElementNS(Re,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}function Rr(e){const t=c(kr,this).createElementNS(Re,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}function Or(e){const t=c(kr,this).createElementNS(Re,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),u(Nr,this,Ir).append(t),t}function zr(e,t,n){const i=c(kr,this).createElementNS(Re,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),e.append(i)}function Wr(e,t,n,i){const s=c(kr,this).createElementNS(Re,"feComponentTransfer");i.append(s),l(Nr,this,zr).call(this,s,"feFuncR",e),l(Nr,this,zr).call(this,s,"feFuncG",t),l(Nr,this,zr).call(this,s,"feFuncB",n)}function Ur(e,t){const n=c(kr,this).createElementNS(Re,"feComponentTransfer");t.append(n),l(Nr,this,zr).call(this,n,"feFuncA",e)}function Hr(e){return u(Nr,this,Ir).style.color=e,$e(getComputedStyle(u(Nr,this,Ir)).getPropertyValue("color"))}class Vr{constructor(e){let{baseUrl:t=null}=e;this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch((e=>{throw new Error("Unable to load font data at: ".concat(n))}))}async _fetch(e){pe("Abstract method `_fetch` called.")}}class Gr extends Vr{async _fetch(e){const t=await ze(e,"arraybuffer");return new Uint8Array(t)}}class qr{constructor(e){let{baseUrl:t=null}=e;this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch((e=>{throw new Error("Unable to load wasm data at: ".concat(n))}))}async _fetch(e){pe("Abstract method `_fetch` called.")}}class Kr extends qr{async _fetch(e){const t=await ze(e,"arraybuffer");return new Uint8Array(t)}}async function Xr(e){const t=process.getBuiltinModule("fs"),n=await t.promises.readFile(e);return new Uint8Array(n)}_&&he("Please use the `legacy` build in Node.js environments.");class Yr extends wr{}class Qr extends yr{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire("file:///Users/danielennis/ai-apps/citations-demo/node_modules/pdfjs-dist/build/pdf.mjs")("@napi-rs/canvas").createCanvas(e,t)}}class $r extends xr{async _fetch(e){return Xr(e)}}class Jr extends Vr{async _fetch(e){return Xr(e)}}class Zr extends qr{async _fetch(e){return Xr(e)}}const ea="Fill",ta="Stroke",na="Shading";function ia(e,t){if(!t)return;const n=t[2]-t[0],i=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],n,i),e.clip(s)}class sa{isModifyingCurrentTransform(){return!1}getPattern(){pe("Abstract method `getPattern` called.")}}class ra extends sa{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let s;if(i===ta||i===ea){const r=t.current.getClippedPathBoundingBox(i,Je(e))||[0,0,0,0],a=Math.ceil(r[2]-r[0])||1,o=Math.ceil(r[3]-r[1])||1,l=t.cachedCanvases.getCanvas("pattern",a,o),u=l.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-r[0],-r[1]),n=_e.transform(n,[1,0,0,1,r[0],r[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),ia(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),s=e.createPattern(l.canvas,"no-repeat");const c=new DOMMatrix(n);s.setTransform(c)}else ia(e,this._bbox),s=this._createGradient(e);return s}}function aa(e,t,n,i,s,r,a,o){const l=t.coords,u=t.colors,c=e.data,d=4*e.width;let h;l[n+1]>l[i+1]&&(h=n,n=i,i=h,h=r,r=a,a=h),l[i+1]>l[s+1]&&(h=i,i=s,s=h,h=a,a=o,o=h),l[n+1]>l[i+1]&&(h=n,n=i,i=h,h=r,r=a,a=h);const p=(l[n]+t.offsetX)*t.scaleX,f=(l[n+1]+t.offsetY)*t.scaleY,m=(l[i]+t.offsetX)*t.scaleX,g=(l[i+1]+t.offsetY)*t.scaleY,v=(l[s]+t.offsetX)*t.scaleX,y=(l[s+1]+t.offsetY)*t.scaleY;if(f>=y)return;const D=u[r],x=u[r+1],b=u[r+2],w=u[a],A=u[a+1],C=u[a+2],E=u[o],F=u[o+1],k=u[o+2],S=Math.round(f),_=Math.round(y);let N,M,T,B,I,j,P,L;for(let R=S;R<=_;R++){if(R<g){const e=R<f?0:(f-R)/(f-g);N=p-(p-m)*e,M=D-(D-w)*e,T=x-(x-A)*e,B=b-(b-C)*e}else{let e;e=R>y?1:g===y?0:(g-R)/(g-y),N=m-(m-v)*e,M=w-(w-E)*e,T=A-(A-F)*e,B=C-(C-k)*e}let e;e=R<f?0:R>y?1:(f-R)/(f-y),I=p-(p-v)*e,j=D-(D-E)*e,P=x-(x-F)*e,L=b-(b-k)*e;const t=Math.round(Math.min(N,I)),n=Math.round(Math.max(N,I));let i=d*R+4*t;for(let s=t;s<=n;s++)e=(N-s)/(N-I),e<0?e=0:e>1&&(e=1),c[i++]=M-(M-j)*e|0,c[i++]=T-(T-P)*e|0,c[i++]=B-(B-L)*e|0,c[i++]=255}}function oa(e,t,n){const i=t.coords,s=t.colors;let r,a;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(i.length/o)-1,u=o-1;for(r=0;r<l;r++){let t=r*o;for(let r=0;r<u;r++,t++)aa(e,n,i[t],i[t+1],i[t+o],s[t],s[t+1],s[t+o]),aa(e,n,i[t+o+1],i[t+1],i[t+o],s[t+o+1],s[t+1],s[t+o])}break;case"triangles":for(r=0,a=i.length;r<a;r+=3)aa(e,n,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class la extends sa{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const i=Math.floor(this._bounds[0]),s=Math.floor(this._bounds[1]),r=Math.ceil(this._bounds[2])-i,a=Math.ceil(this._bounds[3])-s,o=Math.min(Math.ceil(Math.abs(r*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*e[1]*1.1)),3e3),u=r/o,c=a/l,d={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-s,scaleX:1/u,scaleY:1/c},h=o+4,p=l+4,f=n.getCanvas("mesh",h,p),m=f.context,g=m.createImageData(o,l);if(t){const e=g.data;for(let n=0,i=e.length;n<i;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(const v of this._figures)oa(g,v,d);m.putImageData(g,2,2);return{canvas:f.canvas,offsetX:i-2*u,offsetY:s-2*c,scaleX:u,scaleY:c}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,i){ia(e,this._bbox);const s=new Float32Array(2);if(i===na)_e.singularValueDecompose2dScale(Je(e),s);else if(this.matrix){_e.singularValueDecompose2dScale(this.matrix,s);const[e,n]=s;_e.singularValueDecompose2dScale(t.baseTransform,s),s[0]*=e,s[1]*=n}else _e.singularValueDecompose2dScale(t.baseTransform,s);const r=this._createMeshCanvas(s,i===na?null:this._background,t.cachedCanvases);return i!==na&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(r.offsetX,r.offsetY),e.scale(r.scaleX,r.scaleY),e.createPattern(r.canvas,"no-repeat")}}class ua extends sa{getPattern(){return"hotpink"}}const ca=1,da=2;class ha{constructor(e,t,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:i,tilingType:s,color:r,canvasGraphicsFactory:a}=this;let{xstep:o,ystep:l}=this;o=Math.abs(o),l=Math.abs(l),de("TilingType: "+s);const u=t[0],c=t[1],d=t[2],h=t[3],p=d-u,f=h-c,m=new Float32Array(2);_e.singularValueDecompose2dScale(this.matrix,m);const[g,v]=m;_e.singularValueDecompose2dScale(this.baseTransform,m);const y=g*m[0],D=v*m[1];let x=p,b=f,w=!1,A=!1;const C=Math.ceil(o*y),E=Math.ceil(l*D);C>=Math.ceil(p*y)?x=o:w=!0,E>=Math.ceil(f*D)?b=l:A=!0;const F=this.getSizeAndScale(x,this.ctx.canvas.width,y),k=this.getSizeAndScale(b,this.ctx.canvas.height,D),S=e.cachedCanvases.getCanvas("pattern",F.size,k.size),_=S.context,N=a.createCanvasGraphics(_);if(N.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(N,i,r),_.translate(-F.scale*u,-k.scale*c),N.transform(F.scale,0,0,k.scale,0,0),_.save(),this.clipBbox(N,u,c,d,h),N.baseTransform=Je(N.ctx),N.executeOperatorList(n),N.endDrawing(),_.restore(),w||A){const t=S.canvas;w&&(x=o),A&&(b=l);const n=this.getSizeAndScale(x,this.ctx.canvas.width,y),i=this.getSizeAndScale(b,this.ctx.canvas.height,D),s=n.size,r=i.size,a=e.cachedCanvases.getCanvas("pattern-workaround",s,r),d=a.context,h=w?Math.floor(p/o):0,m=A?Math.floor(f/l):0;for(let e=0;e<=h;e++)for(let n=0;n<=m;n++)d.drawImage(t,s*e,r*n,s,r,0,0,s,r);return{canvas:a.canvas,scaleX:n.scale,scaleY:i.scale,offsetX:u,offsetY:c}}return{canvas:S.canvas,scaleX:F.scale,scaleY:k.scale,offsetX:u,offsetY:c}}getSizeAndScale(e,t,n){const i=Math.max(ha.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*n);return s>=i?s=i:n=s/e,{scale:n,size:s}}clipBbox(e,t,n,i,s){const r=i-t,a=s-n;e.ctx.rect(t,n,r,a),_e.axialAlignedBoundingBox([t,n,i,s],Je(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,s=e.current;switch(t){case ca:const{fillStyle:e,strokeStyle:r}=this.ctx;i.fillStyle=s.fillColor=e,i.strokeStyle=s.strokeColor=r;break;case da:i.fillStyle=i.strokeStyle=n,s.fillColor=s.strokeColor=n;break;default:throw new Ae("Unsupported paint type: ".concat(t))}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,i){let s=n;i!==na&&(s=_e.transform(s,t.baseTransform),this.matrix&&(s=_e.transform(s,this.matrix)));const r=this.createPatternCanvas(t);let a=new DOMMatrix(s);a=a.translate(r.offsetX,r.offsetY),a=a.scale(1/r.scaleX,1/r.scaleY);const o=e.createPattern(r.canvas,"repeat");return o.setTransform(a),o}}function pa(e){let{src:t,srcPos:n=0,dest:i,width:s,height:r,nonBlackColor:a=4294967295,inverseDecode:o=!1}=e;const l=ke.isLittleEndian?4278190080:255,[u,c]=o?[a,l]:[l,a],d=s>>3,h=7&s,p=t.length;i=new Uint32Array(i.buffer);let f=0;for(let m=0;m<r;m++){for(const s=n+d;n<s;n++){const e=n<p?t[n]:255;i[f++]=128&e?c:u,i[f++]=64&e?c:u,i[f++]=32&e?c:u,i[f++]=16&e?c:u,i[f++]=8&e?c:u,i[f++]=4&e?c:u,i[f++]=2&e?c:u,i[f++]=1&e?c:u}if(0===h)continue;const e=n<p?t[n++]:255;for(let t=0;t<h;t++)i[f++]=e&1<<7-t?c:u}return{srcPos:n,destPos:f}}(0,k.A)(ha,"MAX_PATTERN_SIZE",3e3);const fa=16,ma=new DOMMatrix,ga=new Float32Array(2),va=new Float32Array([1/0,1/0,-1/0,-1/0]);class ya{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return void 0!==this.cache[e]?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Da(e,t,n,i,s,r,a,o,l,u){const[c,d,h,p,f,m]=Je(e);if(0===d&&0===h){const g=a*c+f,v=Math.round(g),y=o*p+m,D=Math.round(y),x=(a+l)*c+f,b=Math.abs(Math.round(x)-v)||1,w=(o+u)*p+m,A=Math.abs(Math.round(w)-D)||1;return e.setTransform(Math.sign(c),0,0,Math.sign(p),v,D),e.drawImage(t,n,i,s,r,0,0,b,A),e.setTransform(c,d,h,p,f,m),[b,A]}if(0===c&&0===p){const g=o*h+f,v=Math.round(g),y=a*d+m,D=Math.round(y),x=(o+u)*h+f,b=Math.abs(Math.round(x)-v)||1,w=(a+l)*d+m,A=Math.abs(Math.round(w)-D)||1;return e.setTransform(0,Math.sign(d),Math.sign(h),0,v,D),e.drawImage(t,n,i,s,r,0,0,A,b),e.setTransform(c,d,h,p,f,m),[A,b]}e.drawImage(t,n,i,s,r,a,o,l,u);return[Math.hypot(c,d)*l,Math.hypot(h,p)*u]}class xa{constructor(e,t){(0,k.A)(this,"alphaIsShape",!1),(0,k.A)(this,"fontSize",0),(0,k.A)(this,"fontSizeScale",1),(0,k.A)(this,"textMatrix",null),(0,k.A)(this,"textMatrixScale",1),(0,k.A)(this,"fontMatrix",N),(0,k.A)(this,"leading",0),(0,k.A)(this,"x",0),(0,k.A)(this,"y",0),(0,k.A)(this,"lineX",0),(0,k.A)(this,"lineY",0),(0,k.A)(this,"charSpacing",0),(0,k.A)(this,"wordSpacing",0),(0,k.A)(this,"textHScale",1),(0,k.A)(this,"textRenderingMode",H),(0,k.A)(this,"textRise",0),(0,k.A)(this,"fillColor","#000000"),(0,k.A)(this,"strokeColor","#000000"),(0,k.A)(this,"patternFill",!1),(0,k.A)(this,"patternStroke",!1),(0,k.A)(this,"fillAlpha",1),(0,k.A)(this,"strokeAlpha",1),(0,k.A)(this,"lineWidth",1),(0,k.A)(this,"activeSMask",null),(0,k.A)(this,"transferMaps","none"),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=va.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ea,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.minMax.slice();if(e===ta){t||pe("Stroke bounding box must include transform."),_e.singularValueDecompose2dScale(t,ga);const e=ga[0]*this.lineWidth/2,i=ga[1]*this.lineWidth/2;n[0]-=e,n[1]-=i,n[2]+=e,n[3]+=i}return n}updateClipFromPath(){const e=_e.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(va,0)}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ea,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _e.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function ba(e,t){if(t instanceof ImageData)return void e.putImageData(t,0,0);const n=t.height,i=t.width,s=n%fa,r=(n-s)/fa,a=0===s?r:r+1,o=e.createImageData(i,fa);let l,u=0;const c=t.data,d=o.data;let h,p,f,m;if(t.kind===Y.GRAYSCALE_1BPP){const t=c.byteLength,n=new Uint32Array(d.buffer,0,d.byteLength>>2),m=n.length,g=i+7>>3,v=4294967295,y=ke.isLittleEndian?4278190080:255;for(h=0;h<a;h++){for(f=h<r?fa:s,l=0,p=0;p<f;p++){const e=t-u;let s=0;const r=e>g?i:8*e-7,a=-8&r;let o=0,d=0;for(;s<a;s+=8)d=c[u++],n[l++]=128&d?v:y,n[l++]=64&d?v:y,n[l++]=32&d?v:y,n[l++]=16&d?v:y,n[l++]=8&d?v:y,n[l++]=4&d?v:y,n[l++]=2&d?v:y,n[l++]=1&d?v:y;for(;s<r;s++)0===o&&(d=c[u++],o=128),n[l++]=d&o?v:y,o>>=1}for(;l<m;)n[l++]=0;e.putImageData(o,0,h*fa)}}else if(t.kind===Y.RGBA_32BPP){for(p=0,m=i*fa*4,h=0;h<r;h++)d.set(c.subarray(u,u+m)),u+=m,e.putImageData(o,0,p),p+=fa;h<a&&(m=i*s*4,d.set(c.subarray(u,u+m)),e.putImageData(o,0,p))}else{if(t.kind!==Y.RGB_24BPP)throw new Error("bad image kind: ".concat(t.kind));for(f=fa,m=i*f,h=0;h<a;h++){for(h>=r&&(f=s,m=i*f),l=0,p=m;p--;)d[l++]=c[u++],d[l++]=c[u++],d[l++]=c[u++],d[l++]=255;e.putImageData(o,0,h*fa)}}}function wa(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const n=t.height,i=t.width,s=n%fa,r=(n-s)/fa,a=0===s?r:r+1,o=e.createImageData(i,fa);let l=0;const u=t.data,c=o.data;for(let d=0;d<a;d++){const t=d<r?fa:s;({srcPos:l}=pa({src:u,srcPos:l,dest:c,width:i,height:t,nonBlackColor:0})),e.putImageData(o,0,d*fa)}}function Aa(e,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of n)void 0!==e[i]&&(t[i]=e[i]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function Ca(e){e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0);const{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}function Ea(e,t){if(t)return!0;_e.singularValueDecompose2dScale(e,ga);const n=Math.fround(tt.pixelRatio*Oe.PDF_TO_CSS_UNITS);return ga[0]<=n&&ga[1]<=n}const Fa=["butt","round","square"],ka=["miter","round","bevel"],Sa={},_a={};var Na=new WeakSet;class Ma{constructor(e,t,n,i,s,r,o,l){let{optionalContentConfig:u,markedContentStack:c=null}=r;a(this,Na),this.ctx=e,this.current=new xa(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=u,this.cachedCanvases=new ya(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=o,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=l,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"===typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing(e){let{transform:t,viewport:n,transparency:i=!1,background:s=null}=e;const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,i){const e=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...Je(this.compositeCtx))}this.ctx.save(),Ca(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=Je(this.ctx)}executeOperatorList(e,t,n,i){const s=e.argsArray,r=e.fnArray;let a=t||0;const o=s.length;if(o===a)return a;const l=o-a>10&&"function"===typeof n,u=l?Date.now()+15:0;let c=0;const d=this.commonObjs,h=this.objs;let p;for(;;){if(void 0!==i&&a===i.nextBreakPoint)return i.breakIt(a,n),a;if(p=r[a],p!==ie.dependency)this[p].apply(this,s[a]);else for(const e of s[a]){const t=e.startsWith("g_")?d:h;if(!t.has(e))return t.get(e,n),a}if(a++,a===o)return a;if(l&&++c>10){if(Date.now()>u)return n(),a;c=0}}}endDrawing(){l(Na,this,Ta).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),l(Na,this,Ba).call(this)}_scaleImage(e,t){var n,i;const s=null!==(n=e.width)&&void 0!==n?n:e.displayWidth,r=null!==(i=e.height)&&void 0!==i?i:e.displayHeight;let a,o,l=Math.max(Math.hypot(t[0],t[1]),1),u=Math.max(Math.hypot(t[2],t[3]),1),c=s,d=r,h="prescale1";for(;l>2&&c>1||u>2&&d>1;){let t=c,n=d;l>2&&c>1&&(t=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),l/=c/t),u>2&&d>1&&(n=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,u/=d/n),a=this.cachedCanvases.getCanvas(h,t,n),o=a.context,o.clearRect(0,0,t,n),o.drawImage(e,0,0,c,d,0,0,t,n),e=a.canvas,c=t,d=n,h="prescale1"===h?"prescale2":"prescale1"}return{img:e,paintWidth:c,paintHeight:d}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:i}=e,s=this.current.fillColor,r=this.current.patternFill,a=Je(t);let o,l,u,c;if((e.bitmap||e.data)&&e.count>1){const t=e.bitmap||e.data.buffer;l=JSON.stringify(r?a:[a.slice(0,4),s]),o=this._cachedBitmapsMap.get(t),o||(o=new Map,this._cachedBitmapsMap.set(t,o));const n=o.get(l);if(n&&!r){return{canvas:n,offsetX:Math.round(Math.min(a[0],a[2])+a[4]),offsetY:Math.round(Math.min(a[1],a[3])+a[5])}}u=n}u||(c=this.cachedCanvases.getCanvas("maskCanvas",n,i),wa(c.context,e));let d=_e.transform(a,[1/n,0,0,-1/i,0,0]);d=_e.transform(d,[1,0,0,1,0,-i]);const h=va.slice();_e.axialAlignedBoundingBox([0,0,n,i],d,h);const[p,f,m,g]=h,v=Math.round(m-p)||1,y=Math.round(g-f)||1,D=this.cachedCanvases.getCanvas("fillCanvas",v,y),x=D.context,b=p,w=f;x.translate(-b,-w),x.transform(...d),u||(u=this._scaleImage(c.canvas,Ze(x)),u=u.img,o&&r&&o.set(l,u)),x.imageSmoothingEnabled=Ea(Je(x),e.interpolate),Da(x,u,0,0,u.width,u.height,0,0,n,i),x.globalCompositeOperation="source-in";const A=_e.transform(Ze(x),[1,0,0,1,-b,-w]);return x.fillStyle=r?s.getPattern(t,this,A,ea):s,x.fillRect(0,0,n,i),o&&!r&&(this.cachedCanvases.delete("fillCanvas"),o.set(l,D.canvas)),{canvas:D.canvas,offsetX:Math.round(b),offsetY:Math.round(w)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=Fa[e]}setLineJoin(e){this.ctx.lineJoin=ka[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx;const s=this.ctx=i.context;s.setTransform(this.suspendedCtx.getTransform()),Aa(this.suspendedCtx,s),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,i,s,r,a){t.transform(e,n,i,s,r,a),this.__originalTransform(e,n,i,s,r,a)},e.setTransform=function(e,n,i,s,r,a){t.setTransform(e,n,i,s,r,a),this.__originalSetTransform(e,n,i,s,r,a)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,i,s,r,a){t.bezierCurveTo(e,n,i,s,r,a),this.__originalBezierCurveTo(e,n,i,s,r,a)},e.rect=function(e,n,i,s){t.rect(e,n,i,s),this.__originalRect(e,n,i,s)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(s,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Aa(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const s=i[0],r=i[1],a=i[2]-s,o=i[3]-r;0!==a&&0!==o&&(this.genericComposeSMask(t.context,n,a,o,t.subtype,t.backdrop,t.transferMap,s,r,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,s,r,a,o,l,u,c){let d=e.canvas,h=o-u,p=l-c;if(r)if(h<0||p<0||h+n>d.width||p+i>d.height){const e=this.cachedCanvases.getCanvas("maskExtension",n,i),t=e.context;t.drawImage(d,-h,-p),t.globalCompositeOperation="destination-atop",t.fillStyle=r,t.fillRect(0,0,n,i),t.globalCompositeOperation="source-over",d=e.canvas,h=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const t=new Path2D;t.rect(h,p,n,i),e.clip(t),e.globalCompositeOperation="destination-atop",e.fillStyle=r,e.fillRect(h,p,n,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===s&&a?t.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===s&&(t.filter=this.filterFactory.addLuminosityFilter(a));const f=new Path2D;f.rect(o,l,n,i),t.clip(f),t.globalCompositeOperation="destination-in",t.drawImage(d,h,p,n,i,o,l,n,i),t.restore()}save(){this.inSMaskMode&&Aa(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0!==this.stateStack.length?(this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Aa(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null):this.inSMaskMode&&this.endSMaskMode()}transform(e,t,n,i,s,r){this.ctx.transform(e,t,n,i,s,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){let[i]=t;if(!n)return i||(i=t[0]=new Path2D),void this[e](i);if(!(i instanceof Path2D)){const e=t[0]=new Path2D;for(let t=0,n=i.length;t<n;)switch(i[t++]){case se:e.moveTo(i[t++],i[t++]);break;case re:e.lineTo(i[t++],i[t++]);break;case ae:e.bezierCurveTo(i[t++],i[t++],i[t++],i[t++],i[t++],i[t++]);break;case oe:e.closePath();break;default:he("Unrecognized drawing path operator: ".concat(i[t-1]))}i=e}_e.axialAlignedBoundingBox(n,Je(this.ctx),this.current.minMax),this[e](i)}closePath(){this.ctx.closePath()}stroke(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.ctx,i=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"===typeof i&&null!==i&&void 0!==i&&i.getPattern){const t=i.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=i.getPattern(n,this,Ze(n),ta),t){const i=new Path2D;i.addPath(e,n.getTransform().invertSelf().multiplySelf(t)),e=i}this.rescaleAndStroke(e,!1),n.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(ta,Je(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.ctx,i=this.current.fillColor;let s=!1;if(this.current.patternFill){const t=i.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=i.getPattern(n,this,Ze(n),ea),t){const i=new Path2D;i.addPath(e,n.getTransform().invertSelf().multiplySelf(t)),e=i}s=!0}const r=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==r&&(this.pendingEOFill?(n.fill(e,"evenodd"),this.pendingEOFill=!1):n.fill(e)),s&&n.restore(),t&&this.consumePath(e,r)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=Sa}eoClip(){this.pendingClip=_a}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(void 0===e)return;const n=new Path2D,i=t.getTransform().invertSelf();for(const{transform:s,x:r,y:a,fontSize:o,path:l}of e)n.addPath(l,new DOMMatrix(s).preMultiplySelf(i).translate(r,a).scale(o,-o));t.clip(n),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var n;const i=this.commonObjs.get(e),s=this.current;if(!i)throw new Error("Can't find font for ".concat(e));if(s.fontMatrix=i.fontMatrix||N,0!==s.fontMatrix[0]&&0!==s.fontMatrix[3]||he("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const r=i.loadedName||"sans-serif",a=(null===(n=i.systemFontInfo)||void 0===n?void 0:n.css)||'"'.concat(r,'", ').concat(i.fallbackName);let o="normal";i.black?o="900":i.bold&&(o="bold");const l=i.italic?"italic":"normal";let u=t;t<16?u=16:t>100&&(u=100),this.current.fontSizeScale=t/u,this.ctx.font="".concat(l," ").concat(o," ").concat(u,"px ").concat(a)}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,i,s){const r=this.ctx,a=this.current,o=a.font,u=a.textRenderingMode,c=a.fontSize/a.fontSizeScale,d=u&K,h=!!(u&X),p=a.patternFill&&!o.missingFile,f=a.patternStroke&&!o.missingFile;let m;if((o.disableFontFace||h||p||f)&&(m=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||p||f){let e;if(r.save(),r.translate(t,n),r.scale(c,-c),d!==H&&d!==G||(i?(e=r.getTransform(),r.setTransform(...i),r.fill(l(Na,this,Ia).call(this,m,e,i))):r.fill(m)),d===V||d===G)if(s){e||(e=r.getTransform()),r.setTransform(...s);const{a:t,b:n,c:i,d:a}=e,o=_e.inverseTransform(s),u=_e.transform([t,n,i,a,0,0],o);_e.singularValueDecompose2dScale(u,ga),r.lineWidth*=Math.max(ga[0],ga[1])/c,r.stroke(l(Na,this,Ia).call(this,m,e,s))}else r.lineWidth/=c,r.stroke(m);r.restore()}else d!==H&&d!==G||r.fillText(e,t,n),d!==V&&d!==G||r.strokeText(e,t,n);if(h){(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Je(r),x:t,y:n,fontSize:c,path:m})}}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return ve(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(0===i)return;const s=this.ctx,r=t.fontSizeScale,a=t.charSpacing,o=t.wordSpacing,l=t.fontDirection,u=t.textHScale*l,c=e.length,d=n.vertical,h=d?1:-1,p=n.defaultVMetrics,f=i*t.fontMatrix[0],m=t.textRenderingMode===H&&!n.disableFontFace&&!t.patternFill;let g,v;if(s.save(),t.textMatrix&&s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),l>0?s.scale(u,-1):s.scale(u,1),t.patternFill){s.save();const e=t.fillColor.getPattern(s,this,Ze(s),ea);g=Je(s),s.restore(),s.fillStyle=e}if(t.patternStroke){s.save();const e=t.strokeColor.getPattern(s,this,Ze(s),ta);v=Je(s),s.restore(),s.strokeStyle=e}let y=t.lineWidth;const D=t.textMatrixScale;if(0===D||0===y){const e=t.textRenderingMode&K;e!==V&&e!==G||(y=this.getSinglePixelWidth())}else y/=D;if(1!==r&&(s.scale(r,r),y/=r),s.lineWidth=y,n.isInvalidPDFjsFont){const n=[];let i=0;for(const t of e)n.push(t.unicode),i+=t.width;return s.fillText(n.join(""),0,0),t.x+=i*f*u,s.restore(),void this.compose()}let x,b=0;for(x=0;x<c;++x){const t=e[x];if("number"===typeof t){b+=h*t*i/1e3;continue}let u=!1;const c=(t.isSpace?o:0)+a,y=t.fontChar,D=t.accent;let w,A,C=t.width;if(d){const e=t.vmetric||p,n=-(t.vmetric?e[1]:.5*C)*f,i=e[2]*f;C=e?-e[0]:C,w=n/r,A=(b+i)/r}else w=b/r,A=0;if(n.remeasure&&C>0){const e=1e3*s.measureText(y).width/i*r;if(C<e&&this.isFontSubpixelAAEnabled){const t=C/e;u=!0,s.save(),s.scale(t,1),w/=t}else C!==e&&(w+=(C-e)/2e3*i/r)}if(this.contentVisible&&(t.isInFont||n.missingFile))if(m&&!D)s.fillText(y,w,A);else if(this.paintChar(y,w,A,g,v),D){const e=w+i*D.offset.x/r,t=A-i*D.offset.y/r;this.paintChar(D.fontChar,e,t,g,v)}b+=d?C*f-c*l:C*f+c*l,u&&s.restore()}d?t.y-=b:t.x+=b*u,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,i=n.font,s=n.fontSize,r=n.fontDirection,a=i.vertical?1:-1,o=n.charSpacing,l=n.wordSpacing,u=n.textHScale*r,c=n.fontMatrix||N,d=e.length;let h,p,f,m;if(!(n.textRenderingMode===q)&&0!==s){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),n.textMatrix&&t.transform(...n.textMatrix),t.translate(n.x,n.y+n.textRise),t.scale(u,r),h=0;h<d;++h){if(p=e[h],"number"===typeof p){m=a*p*s/1e3,this.ctx.translate(m,0),n.x+=m*u;continue}const r=(p.isSpace?l:0)+o,d=i.charProcOperatorList[p.operatorListId];d?this.contentVisible&&(this.save(),t.scale(s,s),t.transform(...c),this.executeOperatorList(d),this.restore()):he('Type3 character "'.concat(p.operatorListId,'" is not available.'));const g=[p.width,0];_e.applyTransform(g,c),f=g[0]*s+r,t.translate(f,0),n.x+=f*u}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,i,s,r){const a=new Path2D;a.rect(n,i,s-n,r-i),this.ctx.clip(a),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){const n=this.baseTransform||Je(this.ctx),i={createCanvasGraphics:e=>new Ma(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new ha(e,this.ctx,i,n)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(e)?t=this.cachedPatterns.get(e):(t=function(e){switch(e[0]){case"RadialAxial":return new ra(e);case"Mesh":return new la(e);case"Dummy":return new ua}throw new Error("Unknown IR type: ".concat(e[0]))}(this.getObject(e)),this.cachedPatterns.set(e,t)),n&&(t.matrix=n),t}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,Ze(t),na);const i=Ze(t);if(i){const{width:e,height:n}=t.canvas,s=va.slice();_e.axialAlignedBoundingBox([0,0,e,n],i,s);const[r,a,o,l]=s;this.ctx.fillRect(r,a,o-r,l-a)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){pe("Should not call beginInlineImage")}beginImageData(){pe("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Je(this.ctx),t)){_e.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[e,n,i,s]=t,r=new Path2D;r.rect(e,n,i-e,s-n),this.ctx.clip(r),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||de("TODO: Support non-isolated groups."),e.knockout&&he("Knockout groups not supported.");const n=Je(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=va.slice();_e.axialAlignedBoundingBox(e.bbox,Je(t),i);const s=[0,0,t.canvas.width,t.canvas.height];i=_e.intersect(i,s)||[0,0,0,0];const r=Math.floor(i[0]),a=Math.floor(i[1]),o=Math.max(Math.ceil(i[2])-r,1),l=Math.max(Math.ceil(i[3])-a,1);this.current.startNewPathAndClipBox([0,0,o,l]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const c=this.cachedCanvases.getCanvas(u,o,l),d=c.context;d.translate(-r,-a),d.transform(...n);let h=new Path2D;const[p,f,m,g]=e.bbox;if(h.rect(p,f,m-p,g-f),e.matrix){const t=new Path2D;t.addPath(h,new DOMMatrix(e.matrix)),h=t}d.clip(h),e.smask?this.smaskStack.push({canvas:c.canvas,context:d,offsetX:r,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(r,a),t.save()),Aa(t,d),this.ctx=d,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const e=Je(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...e);const n=va.slice();_e.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e,n),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,n,i,s){if(l(Na,this,Ta).call(this),Ca(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const i=t[2]-t[0],r=t[3]-t[1];if(s&&this.annotationCanvasMap){(n=n.slice())[4]-=t[0],n[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=i,t[3]=r,_e.singularValueDecompose2dScale(Je(this.ctx),ga);const{viewportScale:s}=this,a=Math.ceil(i*this.outputScaleX*s),o=Math.ceil(r*this.outputScaleY*s);this.annotationCanvas=this.canvasFactory.create(a,o);const{canvas:l,context:u}=this.annotationCanvas;this.annotationCanvasMap.set(e,l),this.annotationCanvas.savedCtx=this.ctx,this.ctx=u,this.ctx.save(),this.ctx.setTransform(ga[0],0,0,-ga[1],0,r*ga[1]),Ca(this.ctx)}else{Ca(this.ctx),this.endPath();const e=new Path2D;e.rect(t[0],t[1],i,r),this.ctx.clip(e)}}this.current=new xa(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),l(Na,this,Ba).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;(e=this.getObject(e.data,e)).count=t;const n=this.ctx,i=this._createMaskCanvas(e),s=i.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(s,i.offsetX,i.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const o=Je(a);a.transform(t,n,i,s,0,0);const l=this._createMaskCanvas(e);a.setTransform(1,0,0,1,l.offsetX-o[4],l.offsetY-o[5]);for(let u=0,c=r.length;u<c;u+=2){const e=_e.transform(o,[t,n,i,s,r[u],r[u+1]]);a.drawImage(l.canvas,e[4],e[5])}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const s of e){const{data:e,width:r,height:a,transform:o}=s,l=this.cachedCanvases.getCanvas("maskCanvas",r,a),u=l.context;u.save();wa(u,this.getObject(e,s)),u.globalCompositeOperation="source-in",u.fillStyle=i?n.getPattern(u,this,Ze(t),ea):n,u.fillRect(0,0,r,a),u.restore(),t.save(),t.transform(...o),t.scale(1,-1),Da(t,l.canvas,0,0,r,a,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);t?this.paintInlineImageXObject(t):he("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,n,i){if(!this.contentVisible)return;const s=this.getObject(e);if(!s)return void he("Dependent image isn't ready yet");const r=s.width,a=s.height,o=[];for(let l=0,u=i.length;l<u;l+=2)o.push({transform:[t,0,0,n,i[l],i[l+1]],x:0,y:0,w:r,h:a});this.paintInlineImageXObjectGroup(s,o)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:n,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",n,i),r=s.context;return r.filter=this.current.transferMaps,r.drawImage(t,0,0),r.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,i=this.ctx;this.save();const{filter:s}=i;let r;if("none"!==s&&""!==s&&(i.filter="none"),i.scale(1/t,-1/n),e.bitmap)r=this.applyTransferMapsToBitmap(e);else if("function"===typeof HTMLElement&&e instanceof HTMLElement||!e.data)r=e;else{const i=this.cachedCanvases.getCanvas("inlineImage",t,n).context;ba(i,e),r=this.applyTransferMapsToCanvas(i)}const a=this._scaleImage(r,Ze(i));i.imageSmoothingEnabled=Ea(Je(i),e.interpolate),Da(i,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const t=e.width,n=e.height,s=this.cachedCanvases.getCanvas("inlineImage",t,n).context;ba(s,e),i=this.applyTransferMapsToCanvas(s)}for(const s of t)n.save(),n.transform(...s.transform),n.scale(1,-1),Da(n,i,s.x,s.y,s.w,s.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(n||(this.pendingClip===_a?i.clip(e,"evenodd"):i.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Je(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:s}=this.ctx.getTransform();let r,a;if(0===n&&0===i){const n=Math.abs(t),i=Math.abs(s);if(n===i)if(0===e)r=a=1/n;else{const t=n*e;r=a=t<1?1/t:1}else if(0===e)r=1/n,a=1/i;else{const t=n*e,s=i*e;r=t<1?1/t:1,a=s<1?1/s:1}}else{const o=Math.abs(t*s-n*i),l=Math.hypot(t,n),u=Math.hypot(i,s);if(0===e)r=u/o,a=l/o;else{const t=e*o;r=u>t?u/t:1,a=l>t?l/t:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:i}}=this,[s,r]=this.getScaleForStroking();if(s===r)return n.lineWidth=(i||1)*s,void n.stroke(e);const a=n.getLineDash();t&&n.save(),n.scale(s,r),ma.a=1/s,ma.d=1/r;const o=new Path2D;if(o.addPath(e,ma),a.length>0){const e=Math.max(s,r);n.setLineDash(a.map((t=>t/e))),n.lineDashOffset/=e}n.lineWidth=i||1,n.stroke(o),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}function Ta(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function Ba(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}function Ia(e,t,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i}for(const ym in ie)void 0!==Ma.prototype[ym]&&(Ma.prototype[ie[ym]]=Ma.prototype[ym]);class ja{static get workerPort(){return l(ja,this,Pa)._}static set workerPort(e){if(!("undefined"!==typeof Worker&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");Pa._=l(ja,this,e)}static get workerSrc(){return l(ja,this,La)._}static set workerSrc(e){if("string"!==typeof e)throw new Error("Invalid `workerSrc` type.");La._=l(ja,this,e)}}var Pa={_:null},La={_:""},Ra=new WeakMap,Oa=new WeakMap;class za{constructor(e){let{parsedData:t,rawData:n}=e;o(this,Ra,void 0),o(this,Oa,void 0),d(Ra,this,t),d(Oa,this,n)}getRaw(){return c(Oa,this)}get(e){var t;return null!==(t=c(Ra,this).get(e))&&void 0!==t?t:null}[Symbol.iterator](){return c(Ra,this).entries()}}const Wa=Symbol("INTERNAL");var Ua=new WeakMap,Ha=new WeakMap,Va=new WeakMap,Ga=new WeakMap;class qa{constructor(e,t){let{name:n,intent:i,usage:s,rbGroups:r}=t;o(this,Ua,!1),o(this,Ha,!1),o(this,Va,!1),o(this,Ga,!0),d(Ua,this,!!(e&B)),d(Ha,this,!!(e&I)),this.name=n,this.intent=i,this.usage=s,this.rbGroups=r}get visible(){if(c(Va,this))return c(Ga,this);if(!c(Ga,this))return!1;const{print:e,view:t}=this.usage;return c(Ua,this)?"OFF"!==(null===t||void 0===t?void 0:t.viewState):!c(Ha,this)||"OFF"!==(null===e||void 0===e?void 0:e.printState)}_setVisible(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e!==Wa&&pe("Internal method `_setVisible` called."),d(Va,this,n),d(Ga,this,t)}}var Ka=new WeakMap,Xa=new WeakMap,Ya=new WeakMap,Qa=new WeakMap,$a=new WeakSet;class Ja{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B;if(a(this,$a),o(this,Ka,null),o(this,Xa,new Map),o(this,Ya,null),o(this,Qa,null),this.renderingIntent=t,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,d(Qa,this,e.order);for(const n of e.groups)c(Xa,this).set(n.id,new qa(t,n));if("OFF"===e.baseState)for(const e of c(Xa,this).values())e._setVisible(Wa,!1);for(const t of e.on)c(Xa,this).get(t)._setVisible(Wa,!0);for(const t of e.off)c(Xa,this).get(t)._setVisible(Wa,!1);d(Ya,this,this.getHash())}}isVisible(e){if(0===c(Xa,this).size)return!0;if(!e)return de("Optional content group not defined."),!0;if("OCG"===e.type)return c(Xa,this).has(e.id)?c(Xa,this).get(e.id).visible:(he("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return l($a,this,Za).call(this,e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!c(Xa,this).has(t))return he("Optional content group not found: ".concat(t)),!0;if(c(Xa,this).get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!c(Xa,this).has(t))return he("Optional content group not found: ".concat(t)),!0;if(!c(Xa,this).get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!c(Xa,this).has(t))return he("Optional content group not found: ".concat(t)),!0;if(!c(Xa,this).get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!c(Xa,this).has(t))return he("Optional content group not found: ".concat(t)),!0;if(c(Xa,this).get(t).visible)return!1}return!0}return he("Unknown optional content policy ".concat(e.policy,".")),!0}return he("Unknown group type ".concat(e.type,".")),!0}setVisibility(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=c(Xa,this).get(e);if(i){if(n&&t&&i.rbGroups.length)for(const t of i.rbGroups)for(const n of t){var s;if(n!==e)null===(s=c(Xa,this).get(n))||void 0===s||s._setVisible(Wa,!1,!0)}i._setVisible(Wa,!!t,!0),d(Ka,this,null)}else he("Optional content group not found: ".concat(e))}setOCGState(e){let t,{state:n,preserveRB:i}=e;for(const s of n){switch(s){case"ON":case"OFF":case"Toggle":t=s;continue}const e=c(Xa,this).get(s);if(e)switch(t){case"ON":this.setVisibility(s,!0,i);break;case"OFF":this.setVisibility(s,!1,i);break;case"Toggle":this.setVisibility(s,!e.visible,i)}}d(Ka,this,null)}get hasInitialVisibility(){return null===c(Ya,this)||this.getHash()===c(Ya,this)}getOrder(){return c(Xa,this).size?c(Qa,this)?c(Qa,this).slice():[...c(Xa,this).keys()]:null}getGroup(e){return c(Xa,this).get(e)||null}getHash(){if(null!==c(Ka,this))return c(Ka,this);const e=new Bs;for(const[t,n]of c(Xa,this))e.update("".concat(t,":").concat(n.visible));return d(Ka,this,e.hexdigest())}[Symbol.iterator](){return c(Xa,this).entries()}}function Za(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const t=e[i];let s;if(Array.isArray(t))s=l($a,this,Za).call(this,t);else{if(!c(Xa,this).has(t))return he("Optional content group not found: ".concat(t)),!0;s=c(Xa,this).get(t).visible}switch(n){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return"And"===n}class eo{constructor(e,t){let{disableRange:n=!1,disableStream:i=!1}=t;fe(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(null===r||void 0===r?void 0:r.length)>0){const e=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!n,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener(((e,t)=>{this._onReceiveData({begin:e,chunk:t})})),e.addProgressListener(((e,t)=>{this._onProgress({loaded:e,total:t})})),e.addProgressiveReadListener((e=>{this._onReceiveData({chunk:e})})),e.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),e.transportReady()}_onReceiveData(e){let{begin:t,chunk:n}=e;const i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(void 0===t)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{fe(this._rangeReaders.some((function(e){return e._begin===t&&(e._enqueue(i),!0)})),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}_onProgress(e){var t,n,i,s;void 0===e.total?null===(t=this._rangeReaders[0])||void 0===t||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded}):null===(i=this._fullRequestReader)||void 0===i||null===(s=i.onProgress)||void 0===s||s.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null===(e=this._fullRequestReader)||void 0===e||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){fe(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new to(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new no(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class to{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=e,this._done=n||!1,this._filename=Ve(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunks.push(e);this._loaded+=e.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class no{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function io(e,t){const n=new Headers;if(!e||!t||"object"!==typeof t)return n;for(const i in t){const e=t[i];void 0!==e&&n.append(i,e)}return n}function so(e){var t,n;return null!==(t=null===(n=URL.parse(e))||void 0===n?void 0:n.origin)&&void 0!==t?t:null}function ro(e){let{responseHeaders:t,isHttp:n,rangeChunkSize:i,disableRange:s}=e;const r={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(t.get("Content-Length"),10);if(!Number.isInteger(a))return r;if(r.suggestedLength=a,a<=2*i)return r;if(s||!n)return r;if("bytes"!==t.get("Accept-Ranges"))return r;return"identity"!==(t.get("Content-Encoding")||"identity")||(r.allowRangeRequests=!0),r}function ao(e){const t=e.get("Content-Disposition");if(t){let e=function(e){let t=!0,n=i("filename\\*","i").exec(e);if(n){n=n[1];let e=a(n);return e=unescape(e),e=o(e),e=l(e),r(e)}if(n=function(e){const t=[];let n;const s=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=s.exec(e));){let[,e,i,s]=n;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[i,s]}const r=[];for(let i=0;i<t.length&&i in t;++i){let[e,n]=t[i];n=a(n),e&&(n=unescape(n),0===i&&(n=o(n))),r.push(n)}return r.join("")}(e),n)return r(l(n));if(n=i("filename","i").exec(e),n){n=n[1];let e=a(n);return e=l(e),r(e)}function i(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function s(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const i=new TextDecoder(e,{fatal:!0}),s=Fe(n);n=i.decode(s),t=!1}catch(i){}}return n}function r(e){return t&&/[\x80-\xff]/.test(e)&&(e=s("utf-8",e),t&&(e=s("iso-8859-1",e))),e}function a(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function o(e){const t=e.indexOf("'");return-1===t?e:s(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function l(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(e,t,n,i){if("q"===n||"Q"===n)return s(t,i=(i=i.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})));try{i=atob(i)}catch(r){}return s(t,i)}))}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(n){}if(Ve(e))return e}return null}function oo(e,t){return new we("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e,404===e||0===e&&t.startsWith("file:"))}function lo(e){return 200===e||206===e}function uo(e,t,n){return{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function co(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(he("getArrayBuffer - unexpected data format: ".concat(e)),new Uint8Array(e).buffer)}class ho{constructor(e){(0,k.A)(this,"_responseOrigin",null),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=io(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return fe(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new po(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new fo(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class po{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),i=t.url;fetch(i,uo(n,this._withCredentials,this._abortController)).then((t=>{if(e._responseOrigin=so(t.url),!lo(t.status))throw oo(t.status,i);this._reader=t.body.getReader(),this._headersCapability.resolve();const n=t.headers,{allowRangeRequests:s,suggestedLength:r}=ro({responseHeaders:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=r||this._contentLength,this._filename=ao(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ce("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:co(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class fo{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range","bytes=".concat(t,"-").concat(n-1));const r=i.url;fetch(r,uo(s,this._withCredentials,this._abortController)).then((t=>{const n=so(t.url);if(n!==e._responseOrigin)throw new Error('Expected range response-origin "'.concat(n,'" to match "').concat(e._responseOrigin,'".'));if(!lo(t.status))throw oo(t.status,r);this._readCapability.resolve(),this._reader=t.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),{value:co(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class mo{constructor(e){let{url:t,httpHeaders:n,withCredentials:i}=e;(0,k.A)(this,"_responseOrigin",null),this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=io(this.isHttp,n),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,r]of this.headers)t.setRequestHeader(s,r);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),i.expectedStatus=206):i.expectedStatus=200,t.responseType="arraybuffer",fe(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var n;const i=this.pendingRequests[e];i&&(null===(n=i.onProgress)||void 0===n||n.call(i,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==i.readyState)return;if(!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===i.status&&this.isHttp)return void n.onError(i.status);const s=i.status||200;if(!(200===s&&206===n.expectedStatus)&&s!==n.expectedStatus)return void n.onError(i.status);const r=function(e){const t=e.response;return"string"!==typeof t?t:Fe(t).buffer}(i);if(206===s){const e=i.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);t?n.onDone({begin:parseInt(t[1],10),chunk:r}):(he('Missing or invalid "Content-Range" header.'),n.onError(0))}else r?n.onDone({begin:0,chunk:r}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class go{constructor(e){this._source=e,this._manager=new mo(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return fe(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new vo(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new yo(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class vo{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=so(t.responseURL);const n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map((e=>{const[t,...n]=e.split(": ");return[t,n.join(": ")]})):[]),{allowRangeRequests:s,suggestedLength:r}=ro({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=ao(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e)if(this._requests.length>0){this._requests.shift().resolve({value:e.chunk,done:!1})}else this._cachedChunks.push(e.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=oo(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class yo{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=so(null===(e=this._manager.getRequestXhr(this._requestId))||void 0===e?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error('Expected range response-origin "'.concat(t,'" to match "').concat(this._manager._responseOrigin,'".')),this._onError(0))}_close(){var e;null===(e=this.onClosed)||void 0===e||e.call(this,this)}_onDone(e){const t=e.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunk=t;this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){var t;null!==(t=this._storedError)&&void 0!==t||(this._storedError=oo(e,this._url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Do=/^[a-z][a-z0-9\-+.]+:/i;class xo{constructor(e){this.source=e,this.url=function(e){if(Do.test(e))return new URL(e);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(e))}(e.url),fe("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return fe(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new bo(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new wo(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class bo{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then((e=>{this._contentLength=e.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()}),(e=>{"ENOENT"===e.code&&(e=oo(0,this._url.href)),this._storedError=e,this._headersCapability.reject(e)}))}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ce("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class wo{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),this._storedError&&this._readableStream.destroy(this._storedError)}}const Ao=Symbol("INITIAL_DATA");var Co=new WeakMap,Eo=new WeakSet;class Fo{constructor(){a(this,Eo),o(this,Co,Object.create(null))}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){const n=l(Eo,this,ko).call(this,e);return n.promise.then((()=>t(n.data))),null}const n=c(Co,this)[e];if(!n||n.data===Ao)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return n.data}has(e){const t=c(Co,this)[e];return!!t&&t.data!==Ao}delete(e){const t=c(Co,this)[e];return!(!t||t.data===Ao)&&(delete c(Co,this)[e],!0)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=l(Eo,this,ko).call(this,e);n.data=t,n.resolve()}clear(){for(const t in c(Co,this)){var e;const{data:n}=c(Co,this)[t];null===n||void 0===n||null===(e=n.bitmap)||void 0===e||e.close()}d(Co,this,Object.create(null))}*[Symbol.iterator](){for(const e in c(Co,this)){const{data:t}=c(Co,this)[e];t!==Ao&&(yield[e,t])}}}function ko(e){var t;return(t=c(Co,this))[e]||(t[e]=(0,i.A)((0,i.A)({},Promise.withResolvers()),{},{data:Ao}))}var So=new WeakMap,_o=new WeakMap,No=new WeakMap,Mo=new WeakMap,To=new WeakMap,Bo=new WeakMap,Io=new WeakMap,jo=new WeakMap,Po=new WeakMap,Lo=new WeakMap,Ro=new WeakMap,Oo=new WeakMap,zo=new WeakMap,Wo=new WeakMap,Uo=new WeakMap,Ho=new WeakMap,Vo=new WeakMap,Go=new WeakMap,qo=new WeakSet;class Ko{constructor(e){var t;let{textContentSource:n,container:i,viewport:s}=e;if(a(this,qo),o(this,So,Promise.withResolvers()),o(this,_o,null),o(this,No,!1),o(this,Mo,!(null===(t=globalThis.FontInspector)||void 0===t||!t.enabled)),o(this,To,null),o(this,Bo,null),o(this,Io,0),o(this,jo,0),o(this,Po,null),o(this,Lo,null),o(this,Ro,0),o(this,Oo,0),o(this,zo,Object.create(null)),o(this,Wo,[]),o(this,Uo,null),o(this,Ho,[]),o(this,Vo,new WeakMap),o(this,Go,null),n instanceof ReadableStream)d(Uo,this,n);else{if("object"!==typeof n)throw new Error('No "textContentSource" parameter specified.');d(Uo,this,new ReadableStream({start(e){e.enqueue(n),e.close()}}))}d(_o,this,d(Lo,this,i)),d(Oo,this,s.scale*tt.pixelRatio),d(Ro,this,s.rotation),d(Bo,this,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:l,pageX:u,pageY:h}=s.rawDims;d(Go,this,[1,0,0,-1,-u,h+l]),d(jo,this,r),d(Io,this,l),Zo.call(Ko),et(i,s),c(So,this).promise.finally((()=>{rl._.delete(this),d(Bo,this,null),d(zo,this,null)})).catch((()=>{}))}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=ke.platform;return ve(this,"fontFamilyMap",new Map([["sans-serif","".concat(e&&t?"Calibri, ":"","sans-serif")],["monospace","".concat(e&&t?"Lucida Console, ":"","monospace")]]))}render(){const e=()=>{c(Po,this).read().then((t=>{var n;let{value:i,done:s}=t;s?c(So,this).resolve():(null!==(n=c(To,this))&&void 0!==n||d(To,this,i.lang),Object.assign(c(zo,this),i.styles),l(qo,this,Xo).call(this,i.items),e())}),c(So,this).reject)};return d(Po,this,c(Uo,this).getReader()),rl._.add(this),e(),c(So,this).promise}update(e){let{viewport:t,onBefore:n=null}=e;const i=t.scale*tt.pixelRatio,s=t.rotation;if(s!==c(Ro,this)&&(null===n||void 0===n||n(),d(Ro,this,s),et(c(Lo,this),{rotation:s})),i!==c(Oo,this)){null===n||void 0===n||n(),d(Oo,this,i);const e={div:null,properties:null,ctx:$o.call(Ko,c(To,this))};for(const t of c(Ho,this))e.properties=c(Vo,this).get(t),e.div=t,l(qo,this,Qo).call(this,e)}}cancel(){var e;const t=new Ce("TextLayer task cancelled.");null===(e=c(Po,this))||void 0===e||e.cancel(t).catch((()=>{})),d(Po,this,null),c(So,this).reject(t)}get textDivs(){return c(Ho,this)}get textContentItemsStr(){return c(Wo,this)}static cleanup(){if(!(l(Ko,this,rl)._.size>0)){l(Ko,this,tl)._.clear();for(const{canvas:e}of l(Ko,this,nl)._.values())e.remove();l(Ko,this,nl)._.clear()}}}function Xo(e){var t,n;if(c(No,this))return;null!==(n=(t=c(Bo,this)).ctx)&&void 0!==n||(t.ctx=$o.call(v,c(To,this)));const i=c(Ho,this),s=c(Wo,this);for(const r of e){if(i.length>1e5)return he("Ignoring additional textDivs for performance reasons."),void d(No,this,!0);if(void 0!==r.str)s.push(r.str),l(qo,this,Yo).call(this,r);else if("beginMarkedContentProps"===r.type||"beginMarkedContent"===r.type){const e=c(_o,this);d(_o,this,document.createElement("span")),c(_o,this).classList.add("markedContent"),null!==r.id&&c(_o,this).setAttribute("id","".concat(r.id)),e.append(c(_o,this))}else"endMarkedContent"===r.type&&d(_o,this,c(_o,this).parentNode)}}function Yo(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};c(Ho,this).push(t);const i=_e.transform(c(Go,this),e.transform);let s=Math.atan2(i[1],i[0]);const r=c(zo,this)[e.fontName];r.vertical&&(s+=Math.PI/2);let a=c(Mo,this)&&r.fontSubstitution||r.fontFamily;a=v.fontFamilyMap.get(a)||a;const o=Math.hypot(i[2],i[3]),u=o*el.call(v,a,r,c(To,this));let d,h;0===s?(d=i[4],h=i[5]-u):(d=i[4]+u*Math.sin(s),h=i[5]-u*Math.cos(s));const p="calc(var(--total-scale-factor) *",f=t.style;c(_o,this)===c(Lo,this)?(f.left="".concat((100*d/c(jo,this)).toFixed(2),"%"),f.top="".concat((100*h/c(Io,this)).toFixed(2),"%")):(f.left="".concat(p).concat(d.toFixed(2),"px)"),f.top="".concat(p).concat(h.toFixed(2),"px)")),f.fontSize="".concat(p).concat((sl._*o).toFixed(2),"px)"),f.fontFamily=a,n.fontSize=o,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,c(Mo,this)&&(t.dataset.fontName=r.fontSubstitutionLoadedName||e.fontName),0!==s&&(n.angle=s*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),n=Math.abs(e.transform[3]);t!==n&&Math.max(t,n)/Math.min(t,n)>1.5&&(m=!0)}if(m&&(n.canvasWidth=r.vertical?e.height:e.width),c(Vo,this).set(t,n),c(Bo,this).div=t,c(Bo,this).properties=n,l(qo,this,Qo).call(this,c(Bo,this)),n.hasText&&c(_o,this).append(t),n.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),c(_o,this).append(e)}}function Qo(e){const{div:t,properties:n,ctx:i}=e,{style:s}=t;let r="";if(sl._>1&&(r="scale(".concat(1/sl._,")")),0!==n.canvasWidth&&n.hasText){const{fontFamily:e}=s,{canvasWidth:a,fontSize:o}=n;Jo.call(v,i,o*c(Oo,this),e);const{width:l}=i.measureText(t.textContent);l>0&&(r="scaleX(".concat(a*c(Oo,this)/l,") ").concat(r))}0!==n.angle&&(r="rotate(".concat(n.angle,"deg) ").concat(r)),r.length>0&&(s.transform=r)}function $o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=l(v,this,nl)._.get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(v,this,nl)._.set(e,t),l(v,this,il)._.set(t,{size:0,family:""})}return t}function Jo(e,t,n){const i=l(v,this,il)._.get(e);t===i.size&&n===i.family||(e.font="".concat(t,"px ").concat(n),i.size=t,i.family=n)}function Zo(){if(null!==l(v,this,sl)._)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),sl._=l(v,this,e.getBoundingClientRect().height),e.remove()}function el(e,t,n){const i=l(v,this,tl)._.get(e);if(i)return i;const s=l(v,this,$o).call(this,n);s.canvas.width=s.canvas.height=30,l(v,this,Jo).call(this,s,30,e);const r=s.measureText(""),a=r.fontBoundingBoxAscent,o=Math.abs(r.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let u=.8;return a?u=a/(a+o):(ke.platform.isFirefox&&he("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?u=t.ascent:t.descent&&(u=1+t.descent)),l(v,this,tl)._.set(e,u),u}v=Ko;var tl={_:new Map},nl={_:new Map},il={_:new WeakMap},sl={_:null},rl={_:new Set};class al{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};return function e(n){var i;if(!n)return;let s=null;const r=n.name;if("#text"===r)s=n.value;else{if(!al.shouldBuildText(r))return;null!==n&&void 0!==n&&null!==(i=n.attributes)&&void 0!==i&&i.textContent?s=n.attributes.textContent:n.value&&(s=n.value)}if(null!==s&&t.push({str:s}),n.children)for(const t of n.children)e(t)}(e),n}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}function ol(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"===typeof n||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const i=new ll,{docId:s}=i,r=n.url?function(e){if(e instanceof URL)return e.href;if("string"===typeof e){if(_)return e;const t=URL.parse(e,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(n.url):null,a=n.data?function(e){if(_&&"undefined"!==typeof Buffer&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"===typeof e)return Fe(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"object"===typeof e&&!isNaN(null===e||void 0===e?void 0:e.length))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(n.data):null,o=n.httpHeaders||null,l=!0===n.withCredentials,u=null!==(e=n.password)&&void 0!==e?e:null,c=n.range instanceof ml?n.range:null,d=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:65536;let h=n.worker instanceof Fl?n.worker:null;const p=n.verbosity,f="string"!==typeof n.docBaseUrl||He(n.docBaseUrl)?null:n.docBaseUrl,m=qs(n.cMapUrl),g=!1!==n.cMapPacked,v=n.CMapReaderFactory||(_?$r:br),y=qs(n.iccUrl),D=qs(n.standardFontDataUrl),x=n.StandardFontDataFactory||(_?Jr:Gr),b=qs(n.wasmUrl),w=n.WasmFactory||(_?Zr:Kr),A=!0!==n.stopAtErrors,C=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,E=!1!==n.isEvalSupported,F="boolean"===typeof n.isOffscreenCanvasSupported?n.isOffscreenCanvasSupported:!_,k="boolean"===typeof n.isImageDecoderSupported?n.isImageDecoderSupported:!_&&(ke.platform.isFirefox||!globalThis.chrome),S=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,N="boolean"===typeof n.disableFontFace?n.disableFontFace:_,M=!0===n.fontExtraProperties,T=!0===n.enableXfa,B=n.ownerDocument||globalThis.document,I=!0===n.disableRange,j=!0===n.disableStream,P=!0===n.disableAutoFetch,L=!0===n.pdfBug,R=n.CanvasFactory||(_?Qr:Dr),O=n.FilterFactory||(_?Yr:Mr),z=!0===n.enableHWA,W=!1!==n.useWasm,U=c?c.length:null!==(t=n.length)&&void 0!==t?t:NaN,H="boolean"===typeof n.useSystemFonts?n.useSystemFonts:!_&&!N,V="boolean"===typeof n.useWorkerFetch?n.useWorkerFetch:!!(v===br&&x===Gr&&w===Kr&&m&&D&&b&&qe(m,document.baseURI)&&qe(D,document.baseURI)&&qe(b,document.baseURI));ue(p);const G={canvasFactory:new R({ownerDocument:B,enableHWA:z}),filterFactory:new O({docId:s,ownerDocument:B}),cMapReaderFactory:V?null:new v({baseUrl:m,isCompressed:g}),standardFontDataFactory:V?null:new x({baseUrl:D}),wasmFactory:V?null:new w({baseUrl:b})};h||(h=Fl.create({verbosity:p,port:ja.workerPort}),i._worker=h);const q={docId:s,apiVersion:"5.3.31",data:a,password:u,disableAutoFetch:P,rangeChunkSize:d,length:U,docBaseUrl:f,enableXfa:T,evaluatorOptions:{maxImageSize:C,disableFontFace:N,ignoreErrors:A,isEvalSupported:E,isOffscreenCanvasSupported:F,isImageDecoderSupported:k,canvasMaxAreaInBytes:S,fontExtraProperties:M,useSystemFonts:H,useWasm:W,useWorkerFetch:V,cMapUrl:m,iccUrl:y,standardFontDataUrl:D,wasmUrl:b}},K={ownerDocument:B,pdfBug:L,styleElement:null,loadingParams:{disableAutoFetch:P,enableXfa:T}};return h.promise.then((function(){if(i.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const e=h.messageHandler.sendWithPromise("GetDocRequest",q,a?[a.buffer]:null);let t;if(c)t=new eo(c,{disableRange:I,disableStream:j});else if(!a){if(!r)throw new Error("getDocument - no `url` parameter provided.");const e=qe(r)?ho:_?xo:go;t=new e({url:r,length:U,httpHeaders:o,withCredentials:l,rangeChunkSize:d,disableRange:I,disableStream:j})}return e.then((e=>{if(i.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const n=new hr(s,e,h.port),r=new Wl(n,i,t,K,G);i._transport=r,n.send("Ready",null)}))})).catch(i._capability.reject),i}class ll{constructor(){(0,k.A)(this,"_capability",Promise.withResolvers()),(0,k.A)(this,"_transport",null),(0,k.A)(this,"_worker",null),(0,k.A)(this,"docId","d".concat((ul._=(y=ul._,D=y++,y),D))),(0,k.A)(this,"destroyed",!1),(0,k.A)(this,"onPassword",null),(0,k.A)(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e;this.destroyed=!0;try{var t,n;null!==(t=this._worker)&&void 0!==t&&t.port&&(this._worker._pendingDestroy=!0),await(null===(n=this._transport)||void 0===n?void 0:n.destroy())}catch(s){var i;throw null!==(i=this._worker)&&void 0!==i&&i.port&&delete this._worker._pendingDestroy,s}this._transport=null,null===(e=this._worker)||void 0===e||e.destroy(),this._worker=null}async getData(){return this._transport.getData()}}var ul={_:0},cl=new WeakMap,dl=new WeakMap,hl=new WeakMap,pl=new WeakMap,fl=new WeakMap;class ml{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;o(this,cl,Promise.withResolvers()),o(this,dl,[]),o(this,hl,[]),o(this,pl,[]),o(this,fl,[]),this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){c(fl,this).push(e)}addProgressListener(e){c(pl,this).push(e)}addProgressiveReadListener(e){c(hl,this).push(e)}addProgressiveDoneListener(e){c(dl,this).push(e)}onDataRange(e,t){for(const n of c(fl,this))n(e,t)}onDataProgress(e,t){c(cl,this).promise.then((()=>{for(const n of c(pl,this))n(e,t)}))}onDataProgressiveRead(e){c(cl,this).promise.then((()=>{for(const t of c(hl,this))t(e)}))}onDataProgressiveDone(){c(cl,this).promise.then((()=>{for(const e of c(dl,this))e()}))}transportReady(){c(cl,this).resolve()}requestDataRange(e,t){pe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class gl{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ve(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var vl=new WeakMap,yl=new WeakSet;class Dl{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];a(this,yl),o(this,vl,!1),this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new Ge:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new Fo,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:s=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new We({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:s})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ve(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null}render(e){var t,n;let{canvasContext:i,viewport:s,intent:r="display",annotationMode:a=z.ENABLE,transform:o=null,background:u=null,optionalContentConfigPromise:c=null,annotationCanvasMap:h=null,pageColors:p=null,printAnnotationStorage:f=null,isEditing:m=!1}=e;null===(t=this._stats)||void 0===t||t.time("Overall");const g=this._transport.getRenderingIntent(r,a,f,m),{renderingIntent:v,cacheKey:y}=g;d(vl,this,!1),c||(c=this._transport.getOptionalContentConfig(v));let D=this._intentStates.get(y);D||(D=Object.create(null),this._intentStates.set(y,D)),D.streamReaderCancelTimeout&&(clearTimeout(D.streamReaderCancelTimeout),D.streamReaderCancelTimeout=null);const x=!!(v&I);var b;D.displayReadyCapability||(D.displayReadyCapability=Promise.withResolvers(),D.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(b=this._stats)||void 0===b||b.time("Page Request"),this._pumpOperatorList(g));const w=e=>{var t;(D.renderTasks.delete(A),x&&d(vl,this,!0),l(yl,this,xl).call(this),e?(A.capability.reject(e),this._abortOperatorList({intentState:D,reason:e instanceof Error?e:new Error(e)})):A.capability.resolve(),this._stats)&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),null!==(t=globalThis.Stats)&&void 0!==t&&t.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},A=new ql({callback:w,params:{canvasContext:i,viewport:s,transform:o,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:D.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:p});((n=D).renderTasks||(n.renderTasks=new Set)).add(A);const C=A.task;return Promise.all([D.displayReadyCapability.promise,c]).then((e=>{var t;let[n,i]=e;if(this.destroyed)w();else{if(null===(t=this._stats)||void 0===t||t.time("Rendering"),!(i.renderingIntent&v))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");A.initializeGraphics({transparency:n,optionalContentConfig:i}),A.operatorListChanged()}})).catch(w),C}getOperatorList(){let{intent:e="display",annotationMode:t=z.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=this._transport.getRenderingIntent(e,t,n,i,!0);let r,a=this._intentStates.get(s.cacheKey);var o,l;(a||(a=Object.create(null),this._intentStates.set(s.cacheKey,a)),a.opListReadCapability)||(r=Object.create(null),r.operatorListChanged=function(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(r))},a.opListReadCapability=Promise.withResolvers(),((o=a).renderTasks||(o.renderTasks=new Set)).add(r),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(l=this._stats)||void 0===l||l.time("Page Request"),this._pumpOperatorList(s));return a.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then((e=>al.textContent(e)));const t=this.streamTextContent(e);return new Promise((function(e,n){const i=t.getReader(),s={items:[],styles:Object.create(null),lang:null};!function t(){i.read().then((function(n){var i;let{value:r,done:a}=n;a?e(s):(null!==(i=s.lang)&&void 0!==i||(s.lang=r.lang),Object.assign(s.styles,r.styles),s.items.push(...r.items),t())}),n)}()}))}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),d(vl,this,!1),Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];d(vl,this,!0);const t=l(yl,this,xl).call(this);return e&&t&&this._stats&&(this._stats=new Ge),t}_startRenderPage(e,t){var n,i;const s=this._intentStates.get(t);s&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(i=s.displayReadyCapability)||void 0===i||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&l(yl,this,xl).call(this)}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:n,annotationStorageSerializable:i,modifiedIds:s}=e;const{map:r,transfer:a}=i,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:r,modifiedIds:s},a).getReader(),u=this._intentStates.get(n);u.streamReader=o;const c=()=>{o.read().then((e=>{let{value:t,done:n}=e;n?u.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,u),c())}),(e=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const e of u.renderTasks)e.operatorListChanged();l(yl,this,xl).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(e);else{if(!u.opListReadCapability)throw e;u.opListReadCapability.reject(e)}}}))};c()}_abortOperatorList(e){let{intentState:t,reason:n,force:i=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(n instanceof Ue){let e=100;return n.extraDelay>0&&n.extraDelay<1e3&&(e+=n.extraDelay),void(t.streamReaderCancelTimeout=setTimeout((()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})}),e))}}if(t.streamReader.cancel(new Ce(n.message)).catch((()=>{})),t.streamReader=null,!this._transport.destroyed){for(const[e,n]of this._intentStates)if(n===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}function xl(){if(!c(vl,this)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),d(vl,this,!1),!0}var bl=new WeakMap,wl=new WeakMap,Al=new WeakMap,Cl=new WeakMap,El=new WeakSet;class Fl{constructor(){let{name:e=null,port:t=null,verbosity:n=ce()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(a(this,El),o(this,bl,Promise.withResolvers()),o(this,wl,null),o(this,Al,null),o(this,Cl,null),this.name=e,this.destroyed=!1,this.verbosity=n,t){if(Il._.has(t))throw new Error("Cannot use more than one PDFWorker per port.");Il._.set(t,this),l(El,this,Sl).call(this,t)}else l(El,this,_l).call(this)}get promise(){return c(bl,this).promise}get port(){return c(Al,this)}get messageHandler(){return c(wl,this)}destroy(){var e,t;this.destroyed=!0,null===(e=c(Cl,this))||void 0===e||e.terminate(),d(Cl,this,null),Il._.delete(c(Al,this)),d(Al,this,null),null===(t=c(wl,this))||void 0===t||t.destroy(),d(wl,this,null)}static create(e){const t=l(Fl,this,Il)._.get(null===e||void 0===e?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Fl(e)}static get workerSrc(){if(ja.workerSrc)return ja.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ve(this,"_setupFakeWorkerGlobal",(async()=>{if(u(Fl,this,Ml))return u(Fl,this,Ml);return(await import(this.workerSrc)).WorkerMessageHandler})())}}function kl(){c(bl,this).resolve(),c(wl,this).send("configure",{verbosity:this.verbosity})}function Sl(e){d(Al,this,e),d(wl,this,new hr("main","worker",e)),c(wl,this).on("ready",(()=>{})),l(El,this,kl).call(this)}function _l(){if(Bl._||Ml(x))return void l(El,this,Nl).call(this);let{workerSrc:e}=x;try{x._isSameOrigin(window.location,e)||(e=x._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new hr("main","worker",t),i=()=>{s.abort(),n.destroy(),t.terminate(),this.destroyed?c(bl,this).reject(new Error("Worker was destroyed")):l(El,this,Nl).call(this)},s=new AbortController;t.addEventListener("error",(()=>{c(Cl,this)||i()}),{signal:s.signal}),n.on("test",(e=>{s.abort(),!this.destroyed&&e?(d(wl,this,n),d(Al,this,t),d(Cl,this,t),l(El,this,kl).call(this)):i()})),n.on("ready",(e=>{if(s.abort(),this.destroyed)i();else try{r()}catch(t){l(El,this,Nl).call(this)}}));const r=()=>{const e=new Uint8Array;n.send("test",e,[e.buffer])};return void r()}catch(t){de("The worker has been disabled.")}l(El,this,Nl).call(this)}function Nl(){Bl._||(he("Setting up fake worker."),Bl._=!0),x._setupFakeWorkerGlobal.then((e=>{var t,n;if(this.destroyed)return void c(bl,this).reject(new Error("Worker was destroyed"));const i=new $s;d(Al,this,i);const s="fake".concat((Tl._=(t=Tl._,n=t++,t),n)),r=new hr(s+"_worker",s,i);e.setup(r,i),d(wl,this,new hr(s,s+"_worker",i)),l(El,this,kl).call(this)})).catch((e=>{c(bl,this).reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))}))}function Ml(e){try{var t;return(null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler)||null}catch(n){return null}}x=Fl;var Tl={_:0},Bl={_:!1},Il={_:new WeakMap};_&&(Bl._=l(x,x,!0),ja.workerSrc||(ja.workerSrc="./pdf.worker.mjs")),x._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(null===n||void 0===n||!n.origin||"null"===n.origin)return!1;const i=new URL(t,n);return n.origin===i.origin},x._createCDNWrapper=e=>{const t='await import("'.concat(e,'");');return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},x.fromPort=e=>{var t;if(t="`PDFWorker.fromPort` - please use `PDFWorker.create` instead.",console.log("Deprecated API usage: "+t),null===e||void 0===e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return x.create(e)};var jl=new WeakMap,Pl=new WeakMap,Ll=new WeakMap,Rl=new WeakMap,Ol=new WeakMap,zl=new WeakSet;class Wl{constructor(e,t,n,i,s){a(this,zl),o(this,jl,new Map),o(this,Pl,new Map),o(this,Ll,new Map),o(this,Rl,new Map),o(this,Ol,null),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Fo,this.fontLoader=new Vs({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ve(this,"annotationStorage",new Os)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=B,a=Is;switch(e){case"any":r=T;break;case"display":break;case"print":r=I;break;default:he("getRenderingIntent - invalid intent: ".concat(e))}const o=r&I&&n instanceof Us?n:this.annotationStorage;switch(t){case z.DISABLE:r+=L;break;case z.ENABLE:break;case z.ENABLE_FORMS:r+=j;break;case z.ENABLE_STORAGE:r+=P,a=o.serializable;break;default:he("getRenderingIntent - invalid annotationMode: ".concat(t))}i&&(r+=R),s&&(r+=O);const{ids:l,hash:u}=o.modifiedIds;return{renderingIntent:r,cacheKey:[r,a.hash,u].join("_"),annotationStorageSerializable:a,modifiedIds:l}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null===(e=c(Ol,this))||void 0===e||e.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of c(Pl,this).values())t.push(i._destroy());c(Pl,this).clear(),c(Ll,this).clear(),c(Rl,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then((()=>{var e,t;this.commonObjs.clear(),this.fontLoader.clear(),c(jl,this).clear(),this.filterFactory.destroy(),Ko.cleanup(),null===(e=this._networkStream)||void 0===e||e.cancelAllRequests(new Ce("Worker was terminated.")),null===(t=this.messageHandler)||void 0===t||t.destroy(),this.messageHandler=null,this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",((e,t)=>{fe(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then((function(e){let{value:n,done:i}=e;i?t.close():(fe(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}})),e.on("ReaderHeadersReady",(async e=>{await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:i,contentLength:s}=this._fullReader;if(!n||!i){var r;if(this._lastProgress)null===(r=t.onProgress)||void 0===r||r.call(t,this._lastProgress);this._fullReader.onProgress=e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}}return{isStreamingSupported:n,isRangeSupported:i,contentLength:s}})),e.on("GetRangeReader",((e,t)=>{fe(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=()=>{n.read().then((function(e){let{value:n,done:i}=e;i?t.close():(fe(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{n.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}):t.close()})),e.on("GetDoc",(e=>{let{pdfInfo:n}=e;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new gl(n,this))})),e.on("DocException",(e=>{t._capability.reject(ur(e))})),e.on("PasswordRequest",(e=>{d(Ol,this,Promise.withResolvers());try{if(!t.onPassword)throw ur(e);const n=e=>{e instanceof Error?c(Ol,this).reject(e):c(Ol,this).resolve({password:e})};t.onPassword(n,e.code)}catch(n){c(Ol,this).reject(n)}return c(Ol,this).promise})),e.on("DataLoaded",(e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)})),e.on("StartRenderPage",(e=>{if(this.destroyed)return;c(Pl,this).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)})),e.on("commonobj",(t=>{var n;let[i,s,r]=t;if(this.destroyed)return null;if(this.commonObjs.has(i))return null;switch(s){case"Font":if("error"in r){const e=r.error;he("Error during font loading: ".concat(e)),this.commonObjs.resolve(i,e);break}const t=this._params.pdfBug&&null!==(n=globalThis.FontInspector)&&void 0!==n&&n.enabled?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null,a=new Gs(r,t);this.fontLoader.bind(a).catch((()=>e.sendWithPromise("FontFallback",{id:i}))).finally((()=>{!a.fontExtraProperties&&a.data&&(a.data=null),this.commonObjs.resolve(i,a)}));break;case"CopyLocalImage":const{imageRef:o}=r;fe(o,"The imageRef must be defined.");for(const e of c(Pl,this).values())for(const[,t]of e.objs)if((null===t||void 0===t?void 0:t.ref)===o)return t.dataLen?(this.commonObjs.resolve(i,structuredClone(t)),t.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error("Got unknown common object type ".concat(s))}return null})),e.on("obj",(e=>{let[t,n,i,s]=e;if(this.destroyed)return;const r=c(Pl,this).get(n);var a;if(!r.objs.has(t))if(0!==r._intentStates.size)switch(i){case"Image":case"Pattern":r.objs.resolve(t,s);break;default:throw new Error("Got unknown object type ".concat(i))}else null===s||void 0===s||null===(a=s.bitmap)||void 0===a||a.close()})),e.on("DocProgress",(e=>{var n;this.destroyed||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})})),e.on("FetchBinaryData",(async e=>{if(this.destroyed)throw new Error("Worker was destroyed.");const t=this[e.type];if(!t)throw new Error("".concat(e.type," not initialized, see the `useWorkerFetch` parameter."));return t.fetch(e)}))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,t;this.annotationStorage.size<=0&&he("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:null!==(e=null===(t=this._fullReader)||void 0===t?void 0:t.filename)&&void 0!==e?e:null},i).finally((()=>{this.annotationStorage.resetModified()}))}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=c(Ll,this).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then((n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&c(Rl,this).set(n.refStr,e);const i=new Dl(t,n,this,this._params.pdfBug);return c(Pl,this).set(t,i),i}));return c(Ll,this).set(t,i),i}getPageIndex(e){return Ks(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return l(zl,this,Ul).call(this,"GetFieldObjects")}hasJSActions(){return l(zl,this,Ul).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!==typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return l(zl,this,Ul).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return l(zl,this,Ul).call(this,"GetOptionalContentConfig").then((t=>new Ja(t,e)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=c(jl,this).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then((e=>{var t,n,i,s;return{info:e[0],metadata:e[1]?new za(e[1]):null,contentDispositionFilename:null!==(t=null===(n=this._fullReader)||void 0===n?void 0:n.filename)&&void 0!==t?t:null,contentLength:null!==(i=null===(s=this._fullReader)||void 0===s?void 0:s.contentLength)&&void 0!==i?i:null}}));return c(jl,this).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of c(Pl,this).values()){if(!e.cleanup())throw new Error("startCleanup: Page ".concat(e.pageNumber," is currently rendering."))}this.commonObjs.clear(),e||this.fontLoader.clear(),c(jl,this).clear(),this.filterFactory.destroy(!0),Ko.cleanup()}}cachedPageNumber(e){var t;if(!Ks(e))return null;const n=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return null!==(t=c(Rl,this).get(n))&&void 0!==t?t:null}}function Ul(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=c(jl,this).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return c(jl,this).set(e,i),i}var Hl=new WeakMap;class Vl{constructor(e){o(this,Hl,null),(0,k.A)(this,"onContinue",null),(0,k.A)(this,"onError",null),d(Hl,this,e)}get promise(){return c(Hl,this).capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;c(Hl,this).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=c(Hl,this).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=c(Hl,this);return e.form||e.canvas&&(null===t||void 0===t?void 0:t.size)>0}}var Gl=new WeakMap;class ql{constructor(e){let{callback:t,params:n,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:a,pageIndex:l,canvasFactory:u,filterFactory:c,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:p=null}=e;o(this,Gl,null),this.callback=t,this.params=n,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=u,this.filterFactory=c,this._pdfBug=h,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===d&&"undefined"!==typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Vl(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics(e){var t,n;let{transparency:i=!1,optionalContentConfig:s}=e;if(this.cancelled)return;if(this._canvas){if(Kl._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Kl._.add(this._canvas)}this._pdfBug&&null!==(t=globalThis.StepperManager)&&void 0!==t&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:a,transform:o,background:l}=this.params;this.gfx=new Ma(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:s},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:a,transparency:i,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}cancel(){var e,t,n;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(e=this.gfx)||void 0===e||e.endDrawing(),c(Gl,this)&&(window.cancelAnimationFrame(c(Gl,this)),d(Gl,this,null)),Kl._.delete(this._canvas),i||(i=new Ue("Rendering cancelled, page ".concat(this._pageIndex+1),s)),this.callback(i),null===(t=(n=this.task).onError)||void 0===t||t.call(n,i)}operatorListChanged(){var e;this.graphicsReady?(null===(e=this.stepper)||void 0===e||e.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?d(Gl,this,window.requestAnimationFrame((()=>{d(Gl,this,null),this._nextBound().catch(this._cancelBound)}))):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Kl._.delete(this._canvas),this.callback())))}}var Kl={_:new WeakSet};function Xl(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function Yl(e){return Math.max(0,Math.min(255,255*e))}class Ql{static CMYK_G(e){let[t,n,i,s]=e;return["G",1-Math.min(1,.3*t+.59*i+.11*n+s)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_rgb(e){let[t]=e;return t=Yl(t),[t,t,t]}static G_HTML(e){let[t]=e;const n=Xl(t);return"#".concat(n).concat(n).concat(n)}static RGB_G(e){let[t,n,i]=e;return["G",.3*t+.59*n+.11*i]}static RGB_rgb(e){return e.map(Yl)}static RGB_HTML(e){return"#".concat(e.map(Xl).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(e){let[t,n,i,s]=e;return["RGB",1-Math.min(1,t+s),1-Math.min(1,i+s),1-Math.min(1,n+s)]}static CMYK_rgb(e){let[t,n,i,s]=e;return[Yl(1-Math.min(1,t+s)),Yl(1-Math.min(1,i+s)),Yl(1-Math.min(1,n+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,n,i]=e;const s=1-t,r=1-n,a=1-i;return["CMYK",s,r,a,Math.min(s,r,a)]}}class $l{create(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width","".concat(e,"px")),i.setAttribute("height","".concat(t,"px"))),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),i}createElement(e){if("string"!==typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){pe("Abstract method `_createSVG` called.")}}class Jl extends $l{_createSVG(e){return document.createElementNS(Re,e)}}class Zl{static setupStorage(e,t,n,i,s){const r=i.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==r.value&&(e.textContent=r.value),"print"===s)break;e.addEventListener("input",(e=>{i.setValue(t,{value:e.target.value})}));break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(r.value===n.attributes.xfaOn?e.setAttribute("checked",!0):r.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===s)break;e.addEventListener("change",(e=>{i.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})}))}else{if(null!==r.value&&e.setAttribute("value",r.value),"print"===s)break;e.addEventListener("input",(e=>{i.setValue(t,{value:e.target.value})}))}break;case"select":if(null!==r.value){e.setAttribute("value",r.value);for(const e of n.children)e.attributes.value===r.value?e.attributes.selected=!0:e.attributes.hasOwnProperty("selected")&&delete e.attributes.selected}e.addEventListener("input",(e=>{const n=e.target.options,s=-1===n.selectedIndex?"":n[n.selectedIndex].value;i.setValue(t,{value:s})}))}}static setAttributes(e){let{html:t,element:n,storage:i=null,intent:s,linkService:r}=e;const{attributes:a}=n,o=t instanceof HTMLAnchorElement;"radio"===a.type&&(a.name="".concat(a.name,"-").concat(s));for(const[l,u]of Object.entries(a))if(null!==u&&void 0!==u)switch(l){case"class":u.length&&t.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!o||"href"!==l&&"newWindow"!==l)&&t.setAttribute(l,u)}o&&r.addLinkAttributes(t,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(t,a.dataId,n,i)}static render(e){const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,s=e.intent||"display",r=document.createElement(i.name);i.attributes&&this.setAttributes({html:r,element:i,intent:s,linkService:n});const a="richText"!==s,o=e.div;if(o.append(r),e.viewport){const t="matrix(".concat(e.viewport.transform.join(","),")");o.style.transform=t}a&&o.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===i.children.length){if(i.value){const e=document.createTextNode(i.value);r.append(e),a&&al.shouldBuildText(i.name)&&l.push(e)}return{textDivs:l}}const u=[[i,-1,r]];for(;u.length>0;){var c,d;const[e,i,r]=u.at(-1);if(i+1===e.children.length){u.pop();continue}const o=e.children[++u.at(-1)[1]];if(null===o)continue;const{name:h}=o;if("#text"===h){const e=document.createTextNode(o.value);l.push(e),r.append(e);continue}const p=null!==o&&void 0!==o&&null!==(c=o.attributes)&&void 0!==c&&c.xmlns?document.createElementNS(o.attributes.xmlns,h):document.createElement(h);if(r.append(p),o.attributes&&this.setAttributes({html:p,element:o,storage:t,intent:s,linkService:n}),(null===(d=o.children)||void 0===d?void 0:d.length)>0)u.push([o,-1,p]);else if(o.value){const e=document.createTextNode(o.value);a&&al.shouldBuildText(h)&&l.push(e),p.append(e)}}for(const h of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:l}}static update(e){const t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}const eu=1e3,tu=new WeakSet;class nu{static create(e){switch(e.data.annotationType){case Q.LINK:return new cu(e);case Q.TEXT:return new fu(e);case Q.WIDGET:switch(e.data.fieldType){case"Tx":return new gu(e);case"Btn":return e.data.radioButton?new Du(e):e.data.checkBox?new yu(e):new xu(e);case"Ch":return new bu(e);case"Sig":return new vu(e)}return new mu(e);case Q.POPUP:return new wu(e);case Q.FREETEXT:return new Zu(e);case Q.LINE:return new tc(e);case Q.SQUARE:return new ic(e);case Q.CIRCLE:return new rc(e);case Q.POLYLINE:return new oc(e);case Q.CARET:return new uc(e);case Q.INK:return new pc(e);case Q.POLYGON:return new lc(e);case Q.HIGHLIGHT:return new mc(e);case Q.UNDERLINE:return new gc(e);case Q.SQUIGGLY:return new vc(e);case Q.STRIKEOUT:return new yc(e);case Q.STAMP:return new Dc(e);case Q.FILEATTACHMENT:return new wc(e);default:return new ou(e)}}}var iu=new WeakMap,su=new WeakMap,ru=new WeakMap,au=new WeakSet;class ou{constructor(e){let{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,au),o(this,iu,null),o(this,su,!1),o(this,ru,null),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData(e){let{titleObj:t,contentsObj:n,richText:i}=e;return!!(null!==t&&void 0!==t&&t.str||null!==n&&void 0!==n&&n.str||null!==i&&void 0!==i&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ou._hasPopupData(this.data)}updateEdited(e){var t;if(!this.container)return;c(iu,this)||d(iu,this,{rect:this.data.rect.slice(0)});const{rect:n}=e;n&&l(au,this,lu).call(this,n),null===(t=c(ru,this))||void 0===t||t.popup.updateEdited(e)}resetEdited(){var e;c(iu,this)&&(l(au,this,lu).call(this,c(iu,this).rect),null===(e=c(ru,this))||void 0===e||e.popup.resetEdited(),d(iu,this,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof mu||(s.tabIndex=eu);const{style:r}=s;if(r.zIndex=this.parent.zIndex++,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof wu){const{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,s),s}const{width:a,height:o}=this;if(!e&&t.borderStyle.width>0){r.borderWidth="".concat(t.borderStyle.width,"px");const e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;if(e>0||n>0){const t="calc(".concat(e,"px * var(--total-scale-factor)) / calc(").concat(n,"px * var(--total-scale-factor))");r.borderRadius=t}else if(this instanceof Du){const e="calc(".concat(a,"px * var(--total-scale-factor)) / calc(").concat(o,"px * var(--total-scale-factor))");r.borderRadius=e}switch(t.borderStyle.style){case $:r.borderStyle="solid";break;case J:r.borderStyle="dashed";break;case Z:he("Unimplemented border style: beveled");break;case ee:he("Unimplemented border style: inset");break;case te:r.borderBottomStyle="solid"}const i=t.borderColor||null;i?(d(su,this,!0),r.borderColor=_e.makeHexColor(0|i[0],0|i[1],0|i[2])):r.borderWidth=0}const l=_e.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:u,pageHeight:c,pageX:h,pageY:p}=i.rawDims;r.left="".concat(100*(l[0]-h)/u,"%"),r.top="".concat(100*(l[1]-p)/c,"%");const{rotation:f}=t;return t.hasOwnCanvas||0===f?(r.width="".concat(100*a/u,"%"),r.height="".concat(100*o/c,"%")):this.setRotation(f,s),s}setRotation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:s,height:r}=this;e%180!==0&&([s,r]=[r,s]),t.style.width="".concat(100*s/n,"%"),t.style.height="".concat(100*r/i,"%"),t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(e,t,n)=>{const i=n.detail[e],s=i[0],r=i.slice(1);n.target.style[t]=Ql["".concat(s,"_HTML")](r),this.annotationStorage.setValue(this.data.id,{[t]:Ql["".concat(s,"_rgb")](r)})};return ve(this,"_commonActions",{display:e=>{const{display:t}=e.detail,n=t%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout((()=>e.target.focus({preventScroll:!1})),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail)){const s=e[i]||n[i];null===s||void 0===s||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,s]of Object.entries(t)){const r=n[i];if(r){r({detail:{[i]:s},target:e}),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,s]=this.data.rect.map((e=>Math.fround(e)));if(8===e.length){const[r,a,o,l]=e.subarray(2,6);if(i===r&&s===a&&t===o&&n===l)return}const{style:r}=this.container;let a;if(c(su,this)){const{borderColor:e,borderWidth:t}=r;r.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(e,'" stroke-width="').concat(t,'">')],this.container.classList.add("hasBorder")}const o=i-t,l=s-n,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const h=u.createElement("defs");d.append(h);const p=u.createElement("clipPath"),f="clippath_".concat(this.data.id);p.setAttribute("id",f),p.setAttribute("clipPathUnits","objectBoundingBox"),h.append(p);for(let c=2,g=e.length;c<g;c+=8){var m;const n=e[c],i=e[c+1],r=e[c+2],d=e[c+3],h=u.createElement("rect"),f=(r-t)/o,g=(s-i)/l,v=(n-r)/o,y=(i-d)/l;h.setAttribute("x",f),h.setAttribute("y",g),h.setAttribute("width",v),h.setAttribute("height",y),p.append(h),null===(m=a)||void 0===m||m.push('<rect vector-effect="non-scaling-stroke" x="'.concat(f,'" y="').concat(g,'" width="').concat(v,'" height="').concat(y,'"/>'))}c(su,this)&&(a.push("</g></svg>')"),r.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath="url(#".concat(f,")")}_createPopup(){const{data:e}=this,t=d(ru,this,new wu({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:"popup_".concat(e.id),rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){pe("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:e,id:s,exportValues:r}of i){if(-1===e)continue;if(s===t)continue;const i="string"===typeof r?r:null,a=document.querySelector('[data-element-id="'.concat(s,'"]'));!a||tu.has(a)?n.push({id:s,exportValue:i,domElement:a}):he("_getElementsByName - element not allowed: ".concat(s))}return n}for(const i of document.getElementsByName(e)){const{exportValue:e}=i,s=i.getAttribute("data-element-id");s!==t&&(tu.has(i)&&n.push({id:s,exportValue:e,domElement:i}))}return n}show(){var e;this.container&&(this.container.hidden=!1),null===(e=this.popup)||void 0===e||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null===(e=this.popup)||void 0===e||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",(()=>{var n;null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})}))}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}function lu(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:a,pageY:o}}}}=this;null===n||void 0===n||n.splice(0,4,...e),t.left="".concat(100*(e[0]-a)/s,"%"),t.top="".concat(100*(r-e[3]+o)/r,"%"),0===i?(t.width="".concat(100*(e[2]-e[0])/s,"%"),t.height="".concat(100*(e[3]-e[1])/r,"%")):this.setRotation(i)}var uu=new WeakSet;class cu extends ou{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,{isRenderable:!0,ignoreBorder:!(null===t||void 0===t||!t.ignoreBorder),createQuadrilaterals:!0}),a(this,uu),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(n,e.action),i=!0):e.attachment?(l(uu,this,hu).call(this,n,e.attachment,e.attachmentDest),i=!0):e.setOCGState?(l(uu,this,pu).call(this,n,e.setOCGState),i=!0):e.dest?(this._bindLink(n,e.dest),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),i=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&l(uu,this,du).call(this)}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),l(uu,this,du).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const s=n.get(i);s&&(e[s]=()=>{var e;return null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1})}e.onclick||(e.onclick=()=>!1),l(uu,this,du).call(this)}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),l(uu,this,du).call(this),!this._fieldObjects)return he('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(e.onclick=()=>!1));e.onclick=()=>{null===n||void 0===n||n();const{fields:e,refs:i,include:s}=t,r=[];if(0!==e.length||0!==i.length){const t=new Set(i);for(const n of e){const e=this._fieldObjects[n]||[];for(const{id:n}of e)t.add(n)}for(const e of Object.values(this._fieldObjects))for(const n of e)t.has(n.id)===s&&r.push(n)}else for(const t of Object.values(this._fieldObjects))r.push(...t);const a=this.annotationStorage,o=[];for(const t of r){const{id:e}=t;switch(o.push(e),t.type){case"text":{const n=t.defaultValue||"";a.setValue(e,{value:n});break}case"checkbox":case"radiobutton":{const n=t.defaultValue===t.exportValues;a.setValue(e,{value:n});break}case"combobox":case"listbox":{const n=t.defaultValue||"";a.setValue(e,{value:n});break}default:continue}const n=document.querySelector('[data-element-id="'.concat(e,'"]'));n&&(tu.has(n)?n.dispatchEvent(new Event("resetform")):he("_bindResetFormAction - element not allowed: ".concat(e)))}var l;this.enableScripting&&(null===(l=this.linkService.eventBus)||void 0===l||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:o,name:"ResetForm"}}));return!1}}}function du(){this.container.setAttribute("data-internal-link","")}function hu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>{var e;return null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(t.content,t.filename,n),!1},l(uu,this,du).call(this)}function pu(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),l(uu,this,du).call(this)}class fu extends ou{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class mu extends ou{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&("CANVAS"===(null===(t=e.previousSibling)||void 0===t?void 0:t.nodeName)&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return ke.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,s){n.includes("mouse")?e.addEventListener(n,(e=>{var t;null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})})):e.addEventListener(n,(e=>{var r;if("blur"===n){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===n){if(t.focused)return;t.focused=!0}s&&(null===(r=this.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(e)}}))}))}_setEventListeners(e,t,n,i){for(const[o,l]of n){var s,r,a;if("Action"===l||null!==(s=this.data.actions)&&void 0!==s&&s[l])"Focus"!==l&&"Blur"!==l||t||(t={focused:!1}),this._setEventListener(e,t,o,l,i),"Focus"!==l||null!==(r=this.data.actions)&&void 0!==r&&r.Blur?"Blur"!==l||null!==(a=this.data.actions)&&void 0!==a&&a.Focus||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null)}}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":_e.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,s=e.style;let r;const a=e=>Math.round(10*e)/10;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/(M*i))||1);r=Math.min(i,a(t/M))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);r=Math.min(i,a(e/M))}s.fontSize="calc(".concat(r,"px * var(--total-scale-factor))"),s.color=_e.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class gu extends mu{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,n,i){const s=this.annotationStorage;for(const r of this._getElementsByName(e.name,e.id))r.domElement&&(r.domElement[t]=n),s.setValue(r.id,{[i]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){var i;const r=e.getValue(t,{value:this.data.fieldValue});let a=r.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let l=r.formattedValue||(null===(i=this.data.textContent)||void 0===i?void 0:i.join("\n"))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const u={userValue:a,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=null!==l&&void 0!==l?l:a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",null!==l&&void 0!==l?l:a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),tu.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=eu,this._setRequired(n,this.data.required),o&&(n.maxLength=o),n.addEventListener("input",(i=>{e.setValue(t,{value:i.target.value}),this.setPropertyOnSiblings(n,"value",i.target.value,"value"),u.formattedValue=null})),n.addEventListener("resetform",(e=>{var t;const i=null!==(t=this.data.defaultFieldValue)&&void 0!==t?t:"";n.value=u.userValue=i,u.formattedValue=null}));let c=e=>{const{formattedValue:t}=u;null!==t&&void 0!==t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var s;n.addEventListener("focus",(e=>{var t;if(u.focused)return;const{target:n}=e;u.userValue&&(n.value=u.userValue),u.lastCommittedValue=n.value,u.commitKey=1,null!==(t=this.data.actions)&&void 0!==t&&t.Focus||(u.focused=!0)})),n.addEventListener("updatefromsandbox",(n=>{this.showElementAndHideCanvas(n.target);const i={value(n){var i;u.userValue=null!==(i=n.detail.value)&&void 0!==i?i:"",e.setValue(t,{value:u.userValue.toString()}),n.target.value=u.userValue},formattedValue(n){const{formattedValue:i}=n.detail;u.formattedValue=i,null!==i&&void 0!==i&&n.target!==document.activeElement&&(n.target.value=i),e.setValue(t,{formattedValue:i})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:n=>{var i;const{charLimit:s}=n.detail,{target:r}=n;if(0===s)return void r.removeAttribute("maxLength");r.setAttribute("maxLength",s);let a=u.userValue;!a||a.length<=s||(a=a.slice(0,s),r.value=u.userValue=a,e.setValue(t,{value:a}),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:r.selectionStart,selEnd:r.selectionEnd}}))}};this._dispatchEventFromSandbox(i,n)})),n.addEventListener("keydown",(e=>{var n;u.commitKey=1;let i=-1;if("Escape"===e.key?i=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(u.commitKey=3):i=2,-1===i)return;const{value:s}=e.target;u.lastCommittedValue!==s&&(u.lastCommittedValue=s,u.userValue=s,null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,willCommit:!0,commitKey:i,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))}));const i=c;c=null,n.addEventListener("blur",(e=>{var n;if(!u.focused||!e.relatedTarget)return;null!==(n=this.data.actions)&&void 0!==n&&n.Blur||(u.focused=!1);const{value:s}=e.target;var r;(u.userValue=s,u.lastCommittedValue!==s)&&(null===(r=this.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,willCommit:!0,commitKey:u.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}));i(e)})),null!==(s=this.data.actions)&&void 0!==s&&s.Keystroke&&n.addEventListener("beforeinput",(e=>{var n;u.lastCommittedValue=null;const{data:i,target:s}=e,{value:r,selectionStart:a,selectionEnd:o}=s;let l=a,c=o;switch(e.inputType){case"deleteWordBackward":{const e=r.substring(0,a).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=r.substring(a).match(/^[^\w]*\w*/);e&&(c+=e[0].length);break}case"deleteContentBackward":a===o&&(l-=1);break;case"deleteContentForward":a===o&&(c+=1)}e.preventDefault(),null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,change:i||"",willCommit:!1,selStart:l,selEnd:c}})})),this._setEventListeners(n,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.value))}if(c&&n.addEventListener("blur",c),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/o;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(e,"px * var(--total-scale-factor) - 1ch)")}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class vu extends mu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class yu extends mu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;"string"===typeof i&&(i="Off"!==i,e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return tu.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=eu,s.addEventListener("change",(i=>{const{name:s,checked:r}=i.target;for(const a of this._getElementsByName(s,n)){const n=r&&a.exportValue===t.exportValue;a.domElement&&(a.domElement.checked=n),e.setValue(a.id,{value:n})}e.setValue(n,{value:r})})),s.addEventListener("resetform",(e=>{const n=t.defaultFieldValue||"Off";e.target.checked=n===t.exportValue})),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",(t=>{const i={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}};this._dispatchEventFromSandbox(i,t)})),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Du extends mu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if("string"===typeof i&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const r of this._getElementsByName(t.fieldName,n))e.setValue(r.id,{value:!1});const s=document.createElement("input");if(tu.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=eu,s.addEventListener("change",(t=>{const{name:i,checked:s}=t.target;for(const r of this._getElementsByName(i,n))e.setValue(r.id,{value:!1});e.setValue(n,{value:s})})),s.addEventListener("resetform",(e=>{const n=t.defaultFieldValue;e.target.checked=null!==n&&void 0!==n&&n===t.buttonValue})),this.enableScripting&&this.hasJSActions){const i=t.buttonValue;s.addEventListener("updatefromsandbox",(t=>{const s={value:t=>{const s=i===t.detail.value;for(const i of this._getElementsByName(t.target.name)){const t=s&&i.id===n;i.domElement&&(i.domElement.checked=t),e.setValue(i.id,{value:t})}}};this._dispatchEventFromSandbox(s,t)})),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class xu extends cu{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",(e=>{this._dispatchEventFromSandbox({},e)}))),e}}class bu extends mu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");tu.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=eu;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",(e=>{const t=this.data.defaultFieldValue;for(const n of i.options)n.selected=n.value===t}));for(const u of this.data.options){const e=document.createElement("option");e.textContent=u.displayValue,e.value=u.exportValue,n.value.includes(u.exportValue)&&(e.setAttribute("selected",!0),s=!1),i.append(e)}let r=null;if(s){const e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),i.prepend(e),r=()=>{e.remove(),i.removeEventListener("input",r),r=null},i.addEventListener("input",r)}const a=e=>{const t=e?"value":"textContent",{options:n,multiple:s}=i;return s?Array.prototype.filter.call(n,(e=>e.selected)).map((e=>e[t])):-1===n.selectedIndex?null:n[n.selectedIndex][t]};let o=a(!1);const l=e=>{const t=e.target.options;return Array.prototype.map.call(t,(e=>({displayValue:e.textContent,exportValue:e.value})))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",(n=>{const s={value(n){var s;null===(s=r)||void 0===s||s();const l=n.detail.value,u=new Set(Array.isArray(l)?l:[l]);for(const e of i.options)e.selected=u.has(e.value);e.setValue(t,{value:a(!0)}),o=a(!1)},multipleSelection(e){i.multiple=!0},remove(n){const s=i.options,r=n.detail.remove;if(s[r].selected=!1,i.remove(r),s.length>0){-1===Array.prototype.findIndex.call(s,(e=>e.selected))&&(s[0].selected=!0)}e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},clear(n){for(;0!==i.length;)i.remove(0);e.setValue(t,{value:null,items:[]}),o=a(!1)},insert(n){const{index:s,displayValue:r,exportValue:u}=n.detail.insert,c=i.children[s],d=document.createElement("option");d.textContent=r,d.value=u,c?c.before(d):i.append(d),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},items(n){const{items:s}=n.detail;for(;0!==i.length;)i.remove(0);for(const e of s){const{displayValue:t,exportValue:n}=e,s=document.createElement("option");s.textContent=t,s.value=n,i.append(s)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},indices(n){const i=new Set(n.detail.indices);for(const e of n.target.options)e.selected=i.has(e.index);e.setValue(t,{value:a(!0)}),o=a(!1)},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(s,n)})),i.addEventListener("input",(n=>{var i;const s=a(!0),r=a(!1);e.setValue(t,{value:s}),n.preventDefault(),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,change:r,changeEx:s,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(e=>e.target.value))):i.addEventListener("input",(function(n){e.setValue(t,{value:a(!0)})})),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class wu extends ou{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:ou._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new Hu({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map((e=>"".concat(je).concat(e))).join(",")),this.container}}var Au=new WeakMap,Cu=new WeakMap,Eu=new WeakMap,Fu=new WeakMap,ku=new WeakMap,Su=new WeakMap,_u=new WeakMap,Nu=new WeakMap,Mu=new WeakMap,Tu=new WeakMap,Bu=new WeakMap,Iu=new WeakMap,ju=new WeakMap,Pu=new WeakMap,Lu=new WeakMap,Ru=new WeakMap,Ou=new WeakMap,zu=new WeakMap,Wu=new WeakMap,Uu=new WeakSet;class Hu{constructor(e){let{container:t,color:n,elements:i,titleObj:s,modificationDate:r,contentsObj:u,richText:h,parent:p,rect:f,parentRect:m,open:g}=e;a(this,Uu),o(this,Au,l(Uu,this,Xu).bind(this)),o(this,Cu,l(Uu,this,Ju).bind(this)),o(this,Eu,l(Uu,this,$u).bind(this)),o(this,Fu,l(Uu,this,Qu).bind(this)),o(this,ku,null),o(this,Su,null),o(this,_u,null),o(this,Nu,null),o(this,Mu,null),o(this,Tu,null),o(this,Bu,null),o(this,Iu,!1),o(this,ju,null),o(this,Pu,null),o(this,Lu,null),o(this,Ru,null),o(this,Ou,null),o(this,zu,null),o(this,Wu,!1),d(Su,this,t),d(Ou,this,s),d(_u,this,u),d(Ru,this,h),d(Tu,this,p),d(ku,this,n),d(Lu,this,f),d(Bu,this,m),d(Mu,this,i),d(Nu,this,Ye.toDateObject(r)),this.trigger=i.flatMap((e=>e.getElementsToTriggerPopup()));for(const a of this.trigger)a.addEventListener("click",c(Fu,this)),a.addEventListener("mouseenter",c(Eu,this)),a.addEventListener("mouseleave",c(Cu,this)),a.classList.add("popupTriggerArea");for(const a of i){var v;null===(v=a.container)||void 0===v||v.addEventListener("keydown",c(Au,this))}c(Su,this).hidden=!0,g&&l(Uu,this,Qu).call(this)}render(){if(c(ju,this))return;const e=d(ju,this,document.createElement("div"));if(e.className="popup",c(ku,this)){const t=e.style.outlineColor=_e.makeHexColor(...c(ku,this));e.style.backgroundColor="color-mix(in srgb, ".concat(t," 30%, white)")}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),({dir:n.dir,str:n.textContent}=c(Ou,this)),e.append(t),c(Nu,this)){const e=document.createElement("span");e.classList.add("popupDate"),e.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),e.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(Nu,this).valueOf()})),t.append(e)}const i=u(Uu,this,Vu);if(i)Zl.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const t=this._formatContents(c(_u,this));e.append(t)}c(Su,this).append(e)}_formatContents(e){let{str:t,dir:n}=e;const i=document.createElement("p");i.classList.add("popupContent"),i.dir=n;const s=t.split(/(?:\r\n?|\n)/);for(let r=0,a=s.length;r<a;++r){const e=s[r];i.append(document.createTextNode(e)),r<a-1&&i.append(document.createElement("br"))}return i}updateEdited(e){var t;let{rect:n,popupContent:i}=e;c(zu,this)||d(zu,this,{contentsObj:c(_u,this),richText:c(Ru,this)}),n&&d(Pu,this,null),i&&(d(Ru,this,l(Uu,this,Ku).call(this,i)),d(_u,this,null)),null===(t=c(ju,this))||void 0===t||t.remove(),d(ju,this,null)}resetEdited(){var e;c(zu,this)&&(({contentsObj:s(d,[_u,this])._,richText:s(d,[Ru,this])._}=c(zu,this)),d(zu,this,null),null===(e=c(ju,this))||void 0===e||e.remove(),d(ju,this,null),d(Pu,this,null))}forceHide(){d(Wu,this,this.isVisible),c(Wu,this)&&(c(Su,this).hidden=!0)}maybeShow(){c(Wu,this)&&(c(ju,this)||l(Uu,this,$u).call(this),d(Wu,this,!1),c(Su,this).hidden=!1)}get isVisible(){return!1===c(Su,this).hidden}}function Vu(e){const t=c(Ru,e),n=c(_u,e);return null===t||void 0===t||!t.str||null!==n&&void 0!==n&&n.str&&n.str!==t.str?null:c(Ru,e).html||null}function Gu(e){var t;return(null===(t=u(Uu,e,Vu))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.fontSize)||0}function qu(e){var t;return(null===(t=u(Uu,e,Vu))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.color)||null}function Ku(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:u(Uu,this,qu),fontSize:u(Uu,this,Gu)?"calc(".concat(u(Uu,this,Gu),"px * var(--total-scale-factor))"):""}};for(const s of e.split("\n"))t.push({name:"span",value:s,attributes:i});return n}function Xu(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&c(Iu,this))&&l(Uu,this,Qu).call(this)}function Yu(){if(null!==c(Pu,this))return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:s}}}=c(Tu,this);let r=!!c(Bu,this),a=c(r?Bu:Lu,this);for(const d of c(Mu,this))if(!a||null!==_e.intersect(d.data.rect,a)){a=d.data.rect,r=!0;break}const o=_e.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),l=r?a[2]-a[0]+5:0,u=o[0]+l,h=o[1];d(Pu,this,[100*(u-i)/t,100*(h-s)/n]);const{style:p}=c(Su,this);p.left="".concat(c(Pu,this)[0],"%"),p.top="".concat(c(Pu,this)[1],"%")}function Qu(){d(Iu,this,!c(Iu,this)),c(Iu,this)?(l(Uu,this,$u).call(this),c(Su,this).addEventListener("click",c(Fu,this)),c(Su,this).addEventListener("keydown",c(Au,this))):(l(Uu,this,Ju).call(this),c(Su,this).removeEventListener("click",c(Fu,this)),c(Su,this).removeEventListener("keydown",c(Au,this)))}function $u(){c(ju,this)||this.render(),this.isVisible?c(Iu,this)&&c(Su,this).classList.add("focused"):(l(Uu,this,Yu).call(this),c(Su,this).hidden=!1,c(Su,this).style.zIndex=parseInt(c(Su,this).style.zIndex)+1e3)}function Ju(){c(Su,this).classList.remove("focused"),!c(Iu,this)&&this.isVisible&&(c(Su,this).hidden=!0,c(Su,this).style.zIndex=parseInt(c(Su,this).style.zIndex)-1e3)}class Zu extends ou{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=W.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ec=new WeakMap;class tc extends ou{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),o(this,ec,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),s=d(ec,this,this.svgFactory.createElement("svg:line"));return s.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),s.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),s.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),s.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),s.setAttribute("stroke-width",e.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(ec,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var nc=new WeakMap;class ic extends ou{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),o(this,nc,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),s=e.borderStyle.width,r=d(nc,this,this.svgFactory.createElement("svg:rect"));return r.setAttribute("x",s/2),r.setAttribute("y",s/2),r.setAttribute("width",t-s),r.setAttribute("height",n-s),r.setAttribute("stroke-width",s||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(nc,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var sc=new WeakMap;class rc extends ou{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),o(this,sc,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),s=e.borderStyle.width,r=d(sc,this,this.svgFactory.createElement("svg:ellipse"));return r.setAttribute("cx",t/2),r.setAttribute("cy",n/2),r.setAttribute("rx",t/2-s/2),r.setAttribute("ry",n/2-s/2),r.setAttribute("stroke-width",s||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(sc,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var ac=new WeakMap;class oc extends ou{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),o(this,ac,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:i},width:s,height:r}=this;if(!t)return this.container;const a=this.svgFactory.create(s,r,!0);let o=[];for(let u=0,c=t.length;u<c;u+=2){const n=t[u]-e[0],i=e[3]-t[u+1];o.push("".concat(n,",").concat(i))}o=o.join(" ");const l=d(ac,this,this.svgFactory.createElement(this.svgElementName));return l.setAttribute("points",o),l.setAttribute("stroke-width",n.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(ac,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class lc extends oc{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class uc extends ou{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var cc=new WeakMap,dc=new WeakMap,hc=new WeakSet;class pc extends ou{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),a(this,hc),o(this,cc,null),o(this,dc,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?W.HIGHLIGHT:W.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:n,borderStyle:i,popupRef:s}}=this,{transform:r,width:a,height:o}=l(hc,this,fc).call(this,t,e),u=this.svgFactory.create(a,o,!0),h=d(cc,this,this.svgFactory.createElement("svg:g"));u.append(h),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",r);for(let l=0,d=n.length;l<d;l++){const e=this.svgFactory.createElement(this.svgElementName);c(dc,this).push(e),e.setAttribute("points",n[l].join(",")),h.append(e)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:n,rect:i}=e,s=c(cc,this);if(t>=0&&s.setAttribute("stroke-width",t||1),n)for(let r=0,a=c(dc,this).length;r<a;r++)c(dc,this)[r].setAttribute("points",n[r].join(","));if(i){const{transform:e,width:t,height:n}=l(hc,this,fc).call(this,this.data.rotation,i);s.parentElement.setAttribute("viewBox","0 0 ".concat(t," ").concat(n)),s.setAttribute("transform",e)}}getElementsToTriggerPopup(){return c(dc,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function fc(e,t){switch(e){case 90:return{transform:"rotate(90) translate(".concat(-t[0],",").concat(t[1],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:"rotate(180) translate(".concat(-t[2],",").concat(t[1],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:"rotate(270) translate(".concat(-t[2],",").concat(t[3],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:"translate(".concat(-t[0],",").concat(t[3],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]}}}class mc extends ou{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=W.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class gc extends ou{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class vc extends ou{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class yc extends ou{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Dc extends ou{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=W.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var xc=new WeakMap,bc=new WeakSet;class wc extends ou{constructor(e){var t;super(e,{isRenderable:!0}),a(this,bc),o(this,xc,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("fileattachmentannotation",(0,i.A)({source:this},n))}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||0===t.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(t.name)?"paperclip":"pushpin",".svg"),t.fillAlpha&&t.fillAlpha<1&&(n.style="filter: opacity(".concat(Math.round(100*t.fillAlpha),"%);"))),n.addEventListener("dblclick",l(bc,this,Ac).bind(this)),d(xc,this,n);const{isMac:i}=ke.platform;return e.addEventListener("keydown",(e=>{"Enter"===e.key&&(i?e.metaKey:e.ctrlKey)&&l(bc,this,Ac).call(this)})),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return c(xc,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function Ac(){var e;null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(this.content,this.filename)}var Cc=new WeakMap,Ec=new WeakMap,Fc=new WeakMap,kc=new WeakMap,Sc=new WeakSet;class _c{constructor(e){let{div:t,accessibilityManager:n,annotationCanvasMap:i,annotationEditorUIManager:s,page:r,viewport:l,structTreeLayer:u}=e;a(this,Sc),o(this,Cc,null),o(this,Ec,null),o(this,Fc,new Map),o(this,kc,null),this.div=t,d(Cc,this,n),d(Ec,this,i),d(kc,this,u||null),this.page=r,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return c(Fc,this).size>0}async render(e){const{annotations:t}=e,n=this.div;et(n,this.viewport);const i=new Map,s={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new Jl,annotationStorage:e.annotationStorage||new Os,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const e=a.annotationType===Q.POPUP;if(e){const e=i.get(a.id);if(!e)continue;s.elements=e}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;s.data=a;const t=nu.create(s);if(!t.isRenderable)continue;if(!e&&a.popupRef){const e=i.get(a.popupRef);e?e.push(t):i.set(a.popupRef,[t])}const n=t.render();var r;if(a.hidden&&(n.style.visibility="hidden"),await l(Sc,this,Nc).call(this,n,a.id),t._isEditable)c(Fc,this).set(t.data.id,t),null===(r=this._annotationEditorUIManager)||void 0===r||r.renderAnnotationElement(t)}l(Sc,this,Mc).call(this)}async addLinkAnnotations(e,t){const n={data:null,layer:this.div,linkService:t,svgFactory:new Jl,parent:this};for(const i of e){i.borderStyle||(i.borderStyle=_c._defaultBorderStyle),n.data=i;const e=nu.create(n);if(!e.isRenderable)continue;const t=e.render();await l(Sc,this,Nc).call(this,t,i.id)}}update(e){let{viewport:t}=e;const n=this.div;this.viewport=t,et(n,{rotation:t.rotation}),l(Sc,this,Mc).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(c(Fc,this).values())}getEditableAnnotation(e){return c(Fc,this).get(e)}static get _defaultBorderStyle(){return ve(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:$,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}async function Nc(e,t){var n,i;const s=e.firstChild||e,r=s.id="".concat(je).concat(t),a=await(null===(n=c(kc,this))||void 0===n?void 0:n.getAriaAttributes(r));if(a)for(const[o,l]of a)s.setAttribute(o,l);this.div.append(e),null===(i=c(Cc,this))||void 0===i||i.moveElementInDOM(this.div,e,s,!1)}function Mc(){if(!c(Ec,this))return;const e=this.div;for(const[n,i]of c(Ec,this)){const s=e.querySelector('[data-annotation-id="'.concat(n,'"]'));if(!s)continue;i.className="annotationContent";const{firstChild:r}=s;r?"CANVAS"===r.nodeName?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):s.append(i);const a=c(Fc,this).get(n);var t;if(a)if(a._hasNoCanvas)null===(t=this._annotationEditorUIManager)||void 0===t||t.setMissingCanvas(n,s.id,i),a._hasNoCanvas=!1;else a.canvas=i}c(Ec,this).clear()}const Tc=/\r\n?|\n/g;var Bc=new WeakMap,Ic=new WeakMap,jc=new WeakMap,Pc=new WeakMap,Lc=new WeakMap,Rc=new WeakSet;class Oc extends us{static get _keyboardManager(){const e=Oc.prototype,t=e=>e.isEmpty(),n=Pn.TRANSLATE_SMALL,i=Pn.TRANSLATE_BIG;return ve(this,"_keyboardManager",new Wt([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}constructor(e){super((0,i.A)((0,i.A)({},e),{},{name:"freeTextEditor"})),a(this,Rc),o(this,Bc,void 0),o(this,Ic,""),o(this,jc,"".concat(this.id,"-editor")),o(this,Pc,null),o(this,Lc,void 0),d(Bc,this,e.color||Oc._defaultColor||us._defaultLineColor),d(Lc,this,e.fontSize||Oc._defaultFontSize)}static initialize(e,t){us.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case U.FREETEXT_SIZE:Oc._defaultFontSize=t;break;case U.FREETEXT_COLOR:Oc._defaultColor=t}}updateParams(e,t){switch(e){case U.FREETEXT_SIZE:l(Rc,this,zc).call(this,t);break;case U.FREETEXT_COLOR:l(Rc,this,Wc).call(this,t)}}static get defaultPropertiesToUpdate(){return[[U.FREETEXT_SIZE,Oc._defaultFontSize],[U.FREETEXT_COLOR,Oc._defaultColor||us._defaultLineColor]]}get propertiesToUpdate(){return[[U.FREETEXT_SIZE,c(Lc,this)],[U.FREETEXT_COLOR,c(Bc,this)]]}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-Oc._internalPadding*e,-(Oc._internalPadding+c(Lc,this))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),d(Pc,this,new AbortController);const e=this._uiManager.combinedSignal(c(Pc,this));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return!!super.disableEditMode()&&(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(jc,this)),this._isDraggable=!0,null===(e=c(Pc,this))||void 0===e||e.abort(),d(Pc,this,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0)}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var t;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),null!==(t=this._initialOptions)&&void 0!==t&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=c(Ic,this),t=d(Ic,this,l(Rc,this,Uc).call(this).trimEnd());if(e===t)return;const n=e=>{d(Ic,this,e),e?(l(Rc,this,Gc).call(this),this._uiManager.rebuild(this),l(Rc,this,Hc).call(this)):this.remove()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),l(Rc,this,Hc).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Oc._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(jc,this)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize="calc(".concat(c(Lc,this),"px * var(--total-scale-factor))"),n.color=c(Bc,this),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[n,i]=this.parentDimensions;if(this.annotationElementId){const{position:s}=this._initialData;let[r,a]=this.getInitialTranslation();[r,a]=this.pageTranslationToScreen(r,a);const[o,l]=this.pageDimensions,[u,c]=this.pageTranslation;let d,h;switch(this.rotation){case 0:d=e+(s[0]-u)/o,h=t+this.height-(s[1]-c)/l;break;case 90:d=e+(s[0]-u)/o,h=t-(s[1]-c)/l,[r,a]=[a,-r];break;case 180:d=e-this.width+(s[0]-u)/o,h=t-(s[1]-c)/l,[r,a]=[-r,-a];break;case 270:d=e+(s[0]-u-this.height*l)/o,h=t+(s[1]-c-this.width*o)/l,[r,a]=[-a,r]}this.setAt(d*n,h*i,r,a)}else this._moveAfterPaste(e,t);l(Rc,this,Gc).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(1===n.length&&"text/plain"===n[0])return;e.preventDefault();const i=Kc.call(Oc,t.getData("text")||"").replaceAll(Tc,"\n");if(!i)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const r=s.getRangeAt(0);if(!i.includes("\n"))return r.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),void s.collapseToStart();const{startContainer:a,startOffset:o}=r,u=[],c=[];if(a.nodeType===Node.TEXT_NODE){const e=a.parentElement;if(c.push(a.nodeValue.slice(o).replaceAll(Tc,"")),e!==this.editorDiv){let t=u;for(const n of this.editorDiv.childNodes)n!==e?t.push(Vc.call(Oc,n)):t=c}u.push(a.nodeValue.slice(0,o).replaceAll(Tc,""))}else if(a===this.editorDiv){let e=u,t=0;for(const n of this.editorDiv.childNodes)t++===o&&(e=c),e.push(Vc.call(Oc,n))}d(Ic,this,"".concat(u.join("\n")).concat(i).concat(c.join("\n"))),l(Rc,this,Gc).call(this);const h=new Range;let p=Math.sumPrecise(u.map((e=>e.length)));for(const{firstChild:l}of this.editorDiv.childNodes)if(l.nodeType===Node.TEXT_NODE){const e=l.nodeValue.length;if(p<=e){h.setStart(l,p),h.setEnd(l,p);break}p-=e}s.removeAllRanges(),s.addRange(h)}get contentDiv(){return this.editorDiv}static async deserialize(e,t,n){let i=null;if(e instanceof Zu){const{data:{defaultAppearanceData:{fontSize:t,fontColor:n},rect:s,rotation:r,id:a,popupRef:o},textContent:l,textPosition:u,parent:{page:{pageNumber:c}}}=e;if(!l||0===l.length)return null;i=e={annotationType:W.FREETEXT,color:Array.from(n),fontSize:t,value:l.join("\n"),position:u,pageIndex:c-1,rect:s.slice(0),rotation:r,id:a,deleted:!1,popupRef:o}}const s=await super.deserialize(e,t,n);return d(Lc,s,e.fontSize),d(Bc,s,_e.makeHexColor(...e.color)),d(Ic,s,Kc.call(Oc,e.value)),s.annotationElementId=e.id||null,s._initialData=i,s}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=Oc._internalPadding*this.parentScale,n=this.getRect(t,t),i=us._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(Bc,this)),s={annotationType:W.FREETEXT,color:i,fontSize:c(Lc,this),value:l(Rc,this,qc).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(s.isCopy=!0,s):this.annotationElementId&&!l(Rc,this,Xc).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:n}=t;n.fontSize="calc(".concat(c(Lc,this),"px * var(--total-scale-factor))"),n.color=c(Bc,this),t.replaceChildren();for(const s of c(Ic,this).split("\n")){const e=document.createElement("div");e.append(s?document.createTextNode(s):document.createElement("br")),t.append(e)}const i=Oc._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(i,i),popupContent:c(Ic,this)}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}function zc(e){const t=e=>{this.editorDiv.style.fontSize="calc(".concat(e,"px * var(--total-scale-factor))"),this.translate(0,-(e-c(Lc,this))*this.parentScale),d(Lc,this,e),l(Rc,this,Hc).call(this)},n=c(Lc,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:U.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function Wc(e){const t=e=>{d(Bc,this,this.editorDiv.style.color=e)},n=c(Bc,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:U.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function Uc(){const e=[];this.editorDiv.normalize();let t=null;for(const i of this.editorDiv.childNodes){var n;(null===(n=t)||void 0===n?void 0:n.nodeType)===Node.TEXT_NODE&&"BR"===i.nodeName||(e.push(Vc.call(b,i)),t=i)}return e.join("\n")}function Hc(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:e,div:t}=this,i=t.style.display,s=t.classList.contains("hidden");t.classList.remove("hidden"),t.style.display="hidden",e.div.append(this.div),n=t.getBoundingClientRect(),t.remove(),t.style.display=i,t.classList.toggle("hidden",s)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}function Vc(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Tc,"")}function Gc(){if(this.editorDiv.replaceChildren(),c(Ic,this))for(const e of c(Ic,this).split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}function qc(){return c(Ic,this).replaceAll("\xa0"," ")}function Kc(e){return e.replaceAll(" ","\xa0")}function Xc(e){const{value:t,fontSize:n,color:i,pageIndex:s}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some(((e,t)=>e!==i[t]))||e.pageIndex!==s}b=Oc,(0,k.A)(Oc,"_freeTextDefaultContent",""),(0,k.A)(Oc,"_internalPadding",0),(0,k.A)(Oc,"_defaultColor",null),(0,k.A)(Oc,"_defaultFontSize",10),(0,k.A)(Oc,"_type","freetext"),(0,k.A)(Oc,"_editorType",W.FREETEXT);class Yc{toSVGPath(){pe("Abstract method `toSVGPath` must be implemented.")}get box(){pe("Abstract getter `box` must be implemented.")}serialize(e,t){pe("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,s,r){r||(r=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)r[a]=t+e[a]*i,r[a+1]=n+e[a+1]*s;return r}static _rescaleAndSwap(e,t,n,i,s,r){r||(r=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)r[a]=t+e[a+1]*i,r[a+1]=n+e[a]*s;return r}static _translate(e,t,n,i){i||(i=new Float32Array(e.length));for(let s=0,r=e.length;s<r;s+=2)i[s]=t+e[s],i[s+1]=n+e[s+1];return i}static svgRound(e){return Math.round(1e4*e)}static _normalizePoint(e,t,n,i,s){switch(s){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,s,r){return[(e+5*n)/6,(t+5*i)/6,(5*n+s)/6,(5*i+r)/6,(n+s)/2,(i+r)/2]}}(0,k.A)(Yc,"PRECISION",1e-4);var Qc=new WeakMap,$c=new WeakMap,Jc=new WeakMap,Zc=new WeakMap,ed=new WeakMap,td=new WeakMap,nd=new WeakMap,id=new WeakMap,sd=new WeakMap,rd=new WeakMap,ad=new WeakMap,od=new WeakMap,ld=new WeakMap,ud=new WeakSet;class cd{constructor(e,t,n,i,s){let{x:r,y:l}=e,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;a(this,ud),o(this,Qc,void 0),o(this,$c,[]),o(this,Jc,void 0),o(this,Zc,void 0),o(this,ed,[]),o(this,td,new Float32Array(18)),o(this,nd,void 0),o(this,id,void 0),o(this,sd,void 0),o(this,rd,void 0),o(this,ad,void 0),o(this,od,void 0),o(this,ld,[]),d(Qc,this,t),d(od,this,i*n),d(Zc,this,s),c(td,this).set([NaN,NaN,NaN,NaN,r,l],6),d(Jc,this,u),d(rd,this,yd._*n),d(sd,this,Dd._*n),d(ad,this,n),c(ld,this).push(r,l)}isEmpty(){return isNaN(c(td,this)[8])}add(e){var t;let{x:n,y:i}=e;d(nd,this,n),d(id,this,i);const[s,r,a,o]=c(Qc,this);let[l,u,h,p]=c(td,this).subarray(8,12);const f=n-h,m=i-p,g=Math.hypot(f,m);if(g<c(sd,this))return!1;const v=g-c(rd,this),y=v/g,D=y*f,x=y*m;let b=l,w=u;l=h,u=p,h+=D,p+=x,null===(t=c(ld,this))||void 0===t||t.push(n,i);const A=D/v,C=-x/v*c(od,this),E=A*c(od,this);if(c(td,this).set(c(td,this).subarray(2,8),0),c(td,this).set([h+C,p+E],4),c(td,this).set(c(td,this).subarray(14,18),12),c(td,this).set([h-C,p-E],16),isNaN(c(td,this)[6]))return 0===c(ed,this).length&&(c(td,this).set([l+C,u+E],2),c(ed,this).push(NaN,NaN,NaN,NaN,(l+C-s)/a,(u+E-r)/o),c(td,this).set([l-C,u-E],14),c($c,this).push(NaN,NaN,NaN,NaN,(l-C-s)/a,(u-E-r)/o)),c(td,this).set([b,w,l,u,h,p],6),!this.isEmpty();c(td,this).set([b,w,l,u,h,p],6);return Math.abs(Math.atan2(w-u,b-l)-Math.atan2(x,D))<Math.PI/2?([l,u,h,p]=c(td,this).subarray(2,6),c(ed,this).push(NaN,NaN,NaN,NaN,((l+h)/2-s)/a,((u+p)/2-r)/o),[l,u,b,w]=c(td,this).subarray(14,18),c($c,this).push(NaN,NaN,NaN,NaN,((b+l)/2-s)/a,((w+u)/2-r)/o),!0):([b,w,l,u,h,p]=c(td,this).subarray(0,6),c(ed,this).push(((b+5*l)/6-s)/a,((w+5*u)/6-r)/o,((5*l+h)/6-s)/a,((5*u+p)/6-r)/o,((l+h)/2-s)/a,((u+p)/2-r)/o),[h,p,l,u,b,w]=c(td,this).subarray(12,18),c($c,this).push(((b+5*l)/6-s)/a,((w+5*u)/6-r)/o,((5*l+h)/6-s)/a,((5*u+p)/6-r)/o,((l+h)/2-s)/a,((u+p)/2-r)/o),!0)}toSVGPath(){if(this.isEmpty())return"";const e=c(ed,this),t=c($c,this);if(isNaN(c(td,this)[6])&&!this.isEmpty())return l(ud,this,hd).call(this);const n=[];n.push("M".concat(e[4]," ").concat(e[5]));for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push("L".concat(e[i+4]," ").concat(e[i+5])):n.push("C".concat(e[i]," ").concat(e[i+1]," ").concat(e[i+2]," ").concat(e[i+3]," ").concat(e[i+4]," ").concat(e[i+5]));l(ud,this,fd).call(this,n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push("L".concat(t[i+4]," ").concat(t[i+5])):n.push("C".concat(t[i]," ").concat(t[i+1]," ").concat(t[i+2]," ").concat(t[i+3]," ").concat(t[i+4]," ").concat(t[i+5]));return l(ud,this,pd).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,i,s,r){return new Sd(e,t,n,i,s,r)}getOutlines(){var e,t;const n=c(ed,this),i=c($c,this),s=c(td,this),[r,a,o,u]=c(Qc,this),d=new Float32Array((null!==(e=null===(t=c(ld,this))||void 0===t?void 0:t.length)&&void 0!==e?e:0)+2);for(let l=0,f=d.length-2;l<f;l+=2)d[l]=(c(ld,this)[l]-r)/o,d[l+1]=(c(ld,this)[l+1]-a)/u;if(d[d.length-2]=(c(nd,this)-r)/o,d[d.length-1]=(c(id,this)-a)/u,isNaN(s[6])&&!this.isEmpty())return l(ud,this,md).call(this,d);const h=new Float32Array(c(ed,this).length+24+c($c,this).length);let p=n.length;for(let l=0;l<p;l+=2)isNaN(n[l])?h[l]=h[l+1]=NaN:(h[l]=n[l],h[l+1]=n[l+1]);p=l(ud,this,vd).call(this,h,p);for(let l=i.length-6;l>=6;l-=6)for(let e=0;e<6;e+=2)isNaN(i[l+e])?(h[p]=h[p+1]=NaN,p+=2):(h[p]=i[l+e],h[p+1]=i[l+e+1],p+=2);return l(ud,this,gd).call(this,h,p),this.newFreeDrawOutline(h,d,c(Qc,this),c(ad,this),c(Jc,this),c(Zc,this))}}function dd(){const e=c(td,this).subarray(4,6),t=c(td,this).subarray(16,18),[n,i,s,r]=c(Qc,this);return[(c(nd,this)+(e[0]-t[0])/2-n)/s,(c(id,this)+(e[1]-t[1])/2-i)/r,(c(nd,this)+(t[0]-e[0])/2-n)/s,(c(id,this)+(t[1]-e[1])/2-i)/r]}function hd(){const[e,t,n,i]=c(Qc,this),[s,r,a,o]=l(ud,this,dd).call(this);return"M".concat((c(td,this)[2]-e)/n," ").concat((c(td,this)[3]-t)/i," L").concat((c(td,this)[4]-e)/n," ").concat((c(td,this)[5]-t)/i," L").concat(s," ").concat(r," L").concat(a," ").concat(o," L").concat((c(td,this)[16]-e)/n," ").concat((c(td,this)[17]-t)/i," L").concat((c(td,this)[14]-e)/n," ").concat((c(td,this)[15]-t)/i," Z")}function pd(e){const t=c($c,this);e.push("L".concat(t[4]," ").concat(t[5]," Z"))}function fd(e){const[t,n,i,s]=c(Qc,this),r=c(td,this).subarray(4,6),a=c(td,this).subarray(16,18),[o,u,d,h]=l(ud,this,dd).call(this);e.push("L".concat((r[0]-t)/i," ").concat((r[1]-n)/s," L").concat(o," ").concat(u," L").concat(d," ").concat(h," L").concat((a[0]-t)/i," ").concat((a[1]-n)/s))}function md(e){const t=c(td,this),[n,i,s,r]=c(Qc,this),[a,o,u,d]=l(ud,this,dd).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-n)/s,(t[3]-i)/r,NaN,NaN,NaN,NaN,(t[4]-n)/s,(t[5]-i)/r,NaN,NaN,NaN,NaN,a,o,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,(t[16]-n)/s,(t[17]-i)/r,NaN,NaN,NaN,NaN,(t[14]-n)/s,(t[15]-i)/r],0),this.newFreeDrawOutline(h,e,c(Qc,this),c(ad,this),c(Jc,this),c(Zc,this))}function gd(e,t){const n=c($c,this);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+6}function vd(e,t){const n=c(td,this).subarray(4,6),i=c(td,this).subarray(16,18),[s,r,a,o]=c(Qc,this),[u,d,h,p]=l(ud,this,dd).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-s)/a,(n[1]-r)/o,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,h,p,NaN,NaN,NaN,NaN,(i[0]-s)/a,(i[1]-r)/o],t),t+24}var yd={_:8},Dd={_:yd._+2},xd=new WeakMap,bd=new WeakMap,wd=new WeakMap,Ad=new WeakMap,Cd=new WeakMap,Ed=new WeakMap,Fd=new WeakMap,kd=new WeakSet;class Sd extends Yc{constructor(e,t,n,i,s,r){super(),a(this,kd),o(this,xd,void 0),o(this,bd,new Float32Array(4)),o(this,wd,void 0),o(this,Ad,void 0),o(this,Cd,void 0),o(this,Ed,void 0),o(this,Fd,void 0),d(Fd,this,e),d(Cd,this,t),d(xd,this,n),d(Ed,this,i),d(wd,this,s),d(Ad,this,r),this.lastPoint=[NaN,NaN],l(kd,this,_d).call(this,r);const[u,h,p,f]=c(bd,this);for(let a=0,o=e.length;a<o;a+=2)e[a]=(e[a]-u)/p,e[a+1]=(e[a+1]-h)/f;for(let a=0,o=t.length;a<o;a+=2)t[a]=(t[a]-u)/p,t[a+1]=(t[a+1]-h)/f}toSVGPath(){const e=["M".concat(c(Fd,this)[4]," ").concat(c(Fd,this)[5])];for(let t=6,n=c(Fd,this).length;t<n;t+=6)isNaN(c(Fd,this)[t])?e.push("L".concat(c(Fd,this)[t+4]," ").concat(c(Fd,this)[t+5])):e.push("C".concat(c(Fd,this)[t]," ").concat(c(Fd,this)[t+1]," ").concat(c(Fd,this)[t+2]," ").concat(c(Fd,this)[t+3]," ").concat(c(Fd,this)[t+4]," ").concat(c(Fd,this)[t+5]));return e.push("Z"),e.join(" ")}serialize(e,t){let[n,i,s,r]=e;const a=s-n,o=r-i;let l,u;switch(t){case 0:l=Yc._rescale(c(Fd,this),n,r,a,-o),u=Yc._rescale(c(Cd,this),n,r,a,-o);break;case 90:l=Yc._rescaleAndSwap(c(Fd,this),n,i,a,o),u=Yc._rescaleAndSwap(c(Cd,this),n,i,a,o);break;case 180:l=Yc._rescale(c(Fd,this),s,i,-a,o),u=Yc._rescale(c(Cd,this),s,i,-a,o);break;case 270:l=Yc._rescaleAndSwap(c(Fd,this),s,r,-a,-o),u=Yc._rescaleAndSwap(c(Cd,this),s,r,-a,-o)}return{outline:Array.from(l),points:[Array.from(u)]}}get box(){return c(bd,this)}newOutliner(e,t,n,i,s){return new cd(e,t,n,i,s,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}getNewOutline(e,t){const[n,i,s,r]=c(bd,this),[a,o,l,u]=c(xd,this),d=s*l,h=r*u,p=n*l+a,f=i*u+o,m=this.newOutliner({x:c(Cd,this)[0]*d+p,y:c(Cd,this)[1]*h+f},c(xd,this),c(Ed,this),e,c(Ad,this),null!==t&&void 0!==t?t:c(wd,this));for(let g=2;g<c(Cd,this).length;g+=2)m.add({x:c(Cd,this)[g]*d+p,y:c(Cd,this)[g+1]*h+f});return m.getOutlines()}}function _d(e){const t=c(Fd,this);let n=t[4],i=t[5];const s=[n,i,n,i];let r=n,a=i;const o=e?Math.max:Math.min;for(let u=6,c=t.length;u<c;u+=6){const e=t[u+4],l=t[u+5];if(isNaN(t[u]))_e.pointBoundingBox(e,l,s),a<l?(r=e,a=l):a===l&&(r=o(r,e));else{const e=[1/0,1/0,-1/0,-1/0];_e.bezierBoundingBox(n,i,...t.slice(u,u+6),e),_e.rectBoundingBox(...e,s),a<e[3]?(r=e[2],a=e[3]):a===e[3]&&(r=o(r,e[2]))}n=e,i=l}const l=c(bd,this);l[0]=s[0]-c(wd,this),l[1]=s[1]-c(wd,this),l[2]=s[2]-s[0]+2*c(wd,this),l[3]=s[3]-s[1]+2*c(wd,this),this.lastPoint=[r,a]}var Nd=new WeakMap,Md=new WeakMap,Td=new WeakMap,Bd=new WeakMap,Id=new WeakSet;class jd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];a(this,Id),o(this,Nd,void 0),o(this,Md,void 0),o(this,Td,[]),o(this,Bd,[]);const s=[1/0,1/0,-1/0,-1/0],r=1e-4;for(const{x:a,y:o,width:d,height:g}of e){const e=Math.floor((a-t)/r)*r,n=Math.ceil((a+d+t)/r)*r,i=Math.floor((o-t)/r)*r,l=Math.ceil((o+g+t)/r)*r,u=[e,i,l,!0],h=[n,i,l,!1];c(Td,this).push(u,h),_e.rectBoundingBox(e,i,n,l,s)}const l=s[2]-s[0]+2*n,u=s[3]-s[1]+2*n,h=s[0]-n,p=s[1]-n,f=c(Td,this).at(i?-1:-2),m=[f[0],f[2]];for(const a of c(Td,this)){const[e,t,n]=a;a[0]=(e-h)/l,a[1]=(t-p)/u,a[2]=(n-p)/u}d(Nd,this,new Float32Array([h,p,l,u])),d(Md,this,m)}getOutlines(){c(Td,this).sort(((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]));const e=[];for(const t of c(Td,this))t[3]?(e.push(...l(Id,this,zd).call(this,t)),l(Id,this,Rd).call(this,t)):(l(Id,this,Od).call(this,t),e.push(...l(Id,this,zd).call(this,t)));return l(Id,this,Pd).call(this,e)}}function Pd(e){const t=[],n=new Set;for(const r of e){const[e,n,i]=r;t.push([e,n,r],[e,i,r])}t.sort(((e,t)=>e[1]-t[1]||e[0]-t[0]));for(let r=0,a=t.length;r<a;r+=2){const e=t[r][2],i=t[r+1][2];e.push(i),i.push(e),n.add(e),n.add(i)}const i=[];let s;for(;n.size>0;){const e=n.values().next().value;let[t,r,a,o,l]=e;n.delete(e);let u=t,c=r;for(s=[t,a],i.push(s);;){let e;if(n.has(o))e=o;else{if(!n.has(l))break;e=l}n.delete(e),[t,r,a,o,l]=e,u!==t&&(s.push(u,c,t,c===r?r:a),u=t),c=c===r?a:r}s.push(u,c)}return new Hd(i,c(Nd,this),c(Md,this))}function Ld(e){const t=c(Bd,this);let n=0,i=t.length-1;for(;n<=i;){const s=n+i>>1,r=t[s][0];if(r===e)return s;r<e?n=s+1:i=s-1}return i+1}function Rd(e){let[,t,n]=e;const i=l(Id,this,Ld).call(this,t);c(Bd,this).splice(i,0,[t,n])}function Od(e){let[,t,n]=e;const i=l(Id,this,Ld).call(this,t);for(let s=i;s<c(Bd,this).length;s++){const[e,i]=c(Bd,this)[s];if(e!==t)break;if(e===t&&i===n)return void c(Bd,this).splice(s,1)}for(let s=i-1;s>=0;s--){const[e,i]=c(Bd,this)[s];if(e!==t)break;if(e===t&&i===n)return void c(Bd,this).splice(s,1)}}function zd(e){const[t,n,i]=e,s=[[t,n,i]],r=l(Id,this,Ld).call(this,i);for(let a=0;a<r;a++){const[e,n]=c(Bd,this)[a];for(let i=0,r=s.length;i<r;i++){const[,a,o]=s[i];if(!(n<=a||o<=e))if(a>=e)if(o>n)s[i][1]=n;else{if(1===r)return[];s.splice(i,1),i--,r--}else s[i][2]=e,o>n&&s.push([t,n,o])}}return s}var Wd=new WeakMap,Ud=new WeakMap;class Hd extends Yc{constructor(e,t,n){super(),o(this,Wd,void 0),o(this,Ud,void 0),d(Ud,this,e),d(Wd,this,t),this.lastPoint=n}toSVGPath(){const e=[];for(const t of c(Ud,this)){let[n,i]=t;e.push("M".concat(n," ").concat(i));for(let s=2;s<t.length;s+=2){const r=t[s],a=t[s+1];r===n?(e.push("V".concat(a)),i=a):a===i&&(e.push("H".concat(r)),n=r)}e.push("Z")}return e.join(" ")}serialize(e,t){let[n,i,s,r]=e;const a=[],o=s-n,l=r-i;for(const u of c(Ud,this)){const e=new Array(u.length);for(let t=0;t<u.length;t+=2)e[t]=n+u[t]*o,e[t+1]=r-u[t+1]*l;a.push(e)}return a}get box(){return c(Wd,this)}get classNamesForOutlining(){return["highlightOutline"]}}class Vd extends cd{newFreeDrawOutline(e,t,n,i,s,r){return new Gd(e,t,n,i,s,r)}}class Gd extends Sd{newOutliner(e,t,n,i,s){return new Vd(e,t,n,i,s,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}}var qd=new WeakMap,Kd=new WeakMap,Xd=new WeakMap,Yd=new WeakMap,Qd=new WeakMap,$d=new WeakMap,Jd=new WeakMap,Zd=new WeakMap,eh=new WeakMap,th=new WeakMap,nh=new WeakMap,ih=new WeakSet;class sh{static get _keyboardManager(){return ve(this,"_keyboardManager",new Wt([[["Escape","mac+Escape"],sh.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],sh.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],sh.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],sh.prototype._moveToPrevious],[["Home","mac+Home"],sh.prototype._moveToBeginning],[["End","mac+End"],sh.prototype._moveToEnd]]))}constructor(e){var t;let{editor:n=null,uiManager:i=null}=e;a(this,ih),o(this,qd,null),o(this,Kd,null),o(this,Xd,void 0),o(this,Yd,null),o(this,Qd,!1),o(this,$d,!1),o(this,Jd,null),o(this,Zd,void 0),o(this,eh,null),o(this,th,null),o(this,nh,void 0),n?(d($d,this,!1),d(nh,this,U.HIGHLIGHT_COLOR),d(Jd,this,n)):(d($d,this,!0),d(nh,this,U.HIGHLIGHT_DEFAULT_COLOR)),d(th,this,(null===n||void 0===n?void 0:n._uiManager)||i),d(Zd,this,c(th,this)._eventBus),d(Xd,this,(null===n||void 0===n?void 0:n.color)||(null===(t=c(th,this))||void 0===t?void 0:t.highlightColors.values().next().value)||"#FFFF98"),dh._||(dh._=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}renderButton(){const e=d(qd,this,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=c(th,this)._signal;e.addEventListener("click",l(ih,this,lh).bind(this),{signal:t}),e.addEventListener("keydown",l(ih,this,oh).bind(this),{signal:t});const n=d(Kd,this,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=c(Xd,this),e.append(n),e}renderMainDropdown(){const e=d(Yd,this,l(ih,this,rh).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===c(qd,this))return void l(ih,this,lh).call(this,e);const t=e.target.getAttribute("data-color");t&&l(ih,this,ah).call(this,t,e)}_moveToNext(e){var t,n;u(ih,this,ch)?e.target!==c(qd,this)?null===(t=e.target.nextSibling)||void 0===t||t.focus():null===(n=c(Yd,this).firstChild)||void 0===n||n.focus():l(ih,this,lh).call(this,e)}_moveToPrevious(e){var t,n;e.target!==(null===(t=c(Yd,this))||void 0===t?void 0:t.firstChild)&&e.target!==c(qd,this)?(u(ih,this,ch)||l(ih,this,lh).call(this,e),null===(n=e.target.previousSibling)||void 0===n||n.focus()):u(ih,this,ch)&&this._hideDropdownFromKeyboard()}_moveToBeginning(e){var t;u(ih,this,ch)?null===(t=c(Yd,this).firstChild)||void 0===t||t.focus():l(ih,this,lh).call(this,e)}_moveToEnd(e){var t;u(ih,this,ch)?null===(t=c(Yd,this).lastChild)||void 0===t||t.focus():l(ih,this,lh).call(this,e)}hideDropdown(){var e,t;null===(e=c(Yd,this))||void 0===e||e.classList.add("hidden"),null===(t=c(eh,this))||void 0===t||t.abort(),d(eh,this,null)}_hideDropdownFromKeyboard(){var e;c($d,this)||(u(ih,this,ch)?(this.hideDropdown(),c(qd,this).focus({preventScroll:!0,focusVisible:c(Qd,this)})):null===(e=c(Jd,this))||void 0===e||e.unselect())}updateColor(e){if(c(Kd,this)&&(c(Kd,this).style.backgroundColor=e),!c(Yd,this))return;const t=c(th,this).highlightColors.values();for(const n of c(Yd,this).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;null===(e=c(qd,this))||void 0===e||e.remove(),d(qd,this,null),d(Kd,this,null),null===(t=c(Yd,this))||void 0===t||t.remove(),d(Yd,this,null)}}function rh(){const e=document.createElement("div"),t=c(th,this)._signal;e.addEventListener("contextmenu",Ke,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,i]of c(th,this).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=n,s.setAttribute("data-l10n-id",dh._[n]);const r=document.createElement("span");s.append(r),r.className="swatch",r.style.backgroundColor=i,s.setAttribute("aria-selected",i===c(Xd,this)),s.addEventListener("click",l(ih,this,ah).bind(this,i),{signal:t}),e.append(s)}return e.addEventListener("keydown",l(ih,this,oh).bind(this),{signal:t}),e}function ah(e,t){t.stopPropagation(),c(Zd,this).dispatch("switchannotationeditorparams",{source:this,type:c(nh,this),value:e})}function oh(e){w._keyboardManager.exec(this,e)}function lh(e){if(u(ih,this,ch))return void this.hideDropdown();if(d(Qd,this,0===e.detail),c(eh,this)||(d(eh,this,new AbortController),window.addEventListener("pointerdown",l(ih,this,uh).bind(this),{signal:c(th,this).combinedSignal(c(eh,this))})),c(Yd,this))return void c(Yd,this).classList.remove("hidden");const t=d(Yd,this,l(ih,this,rh).call(this));c(qd,this).append(t)}function uh(e){var t;null!==(t=c(Yd,this))&&void 0!==t&&t.contains(e.target)||this.hideDropdown()}function ch(e){return c(Yd,e)&&!c(Yd,e).classList.contains("hidden")}w=sh;var dh={_:null},hh=new WeakMap,ph=new WeakMap,fh=new WeakMap,mh=new WeakMap,gh=new WeakMap,vh=new WeakMap,yh=new WeakMap,Dh=new WeakMap,xh=new WeakMap,bh=new WeakMap,wh=new WeakMap,Ah=new WeakMap,Ch=new WeakMap,Eh=new WeakMap,Fh=new WeakMap,kh=new WeakMap,Sh=new WeakMap,_h=new WeakMap,Nh=new WeakSet;class Mh extends us{static get _keyboardManager(){const e=Mh.prototype;return ve(this,"_keyboardManager",new Wt([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super((0,i.A)((0,i.A)({},e),{},{name:"highlightEditor"})),a(this,Nh),o(this,hh,null),o(this,ph,0),o(this,fh,void 0),o(this,mh,null),o(this,gh,null),o(this,vh,null),o(this,yh,null),o(this,Dh,0),o(this,xh,null),o(this,bh,null),o(this,wh,null),o(this,Ah,!1),o(this,Ch,null),o(this,Eh,void 0),o(this,Fh,null),o(this,kh,""),o(this,Sh,void 0),o(this,_h,""),this.color=e.color||Mh._defaultColor,d(Sh,this,e.thickness||Mh._defaultThickness),d(Eh,this,e.opacity||Mh._defaultOpacity),d(fh,this,e.boxes||null),d(_h,this,e.methodOfCreation||""),d(kh,this,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(d(Ah,this,!0),l(Nh,this,Bh).call(this,e),l(Nh,this,Rh).call(this)):c(fh,this)&&(d(hh,this,e.anchorNode),d(ph,this,e.anchorOffset),d(yh,this,e.focusNode),d(Dh,this,e.focusOffset),l(Nh,this,Th).call(this),l(Nh,this,Rh).call(this),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:c(Ah,this)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(Sh,this),methodOfCreation:c(_h,this)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,t){var n;us.initialize(e,t),Mh._defaultColor||(Mh._defaultColor=(null===(n=t.highlightColors)||void 0===n?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,t){switch(e){case U.HIGHLIGHT_DEFAULT_COLOR:Mh._defaultColor=t;break;case U.HIGHLIGHT_THICKNESS:Mh._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return c(Ch,this)}updateParams(e,t){switch(e){case U.HIGHLIGHT_COLOR:l(Nh,this,Ih).call(this,t);break;case U.HIGHLIGHT_THICKNESS:l(Nh,this,jh).call(this,t)}}static get defaultPropertiesToUpdate(){return[[U.HIGHLIGHT_DEFAULT_COLOR,Mh._defaultColor],[U.HIGHLIGHT_THICKNESS,Mh._defaultThickness]]}get propertiesToUpdate(){return[[U.HIGHLIGHT_COLOR,this.color||Mh._defaultColor],[U.HIGHLIGHT_THICKNESS,c(Sh,this)||Mh._defaultThickness],[U.HIGHLIGHT_FREE,c(Ah,this)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(d(gh,this,new sh({editor:this})),e.addColorPicker(c(gh,this))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(l(Nh,this,Uh).call(this))}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,l(Nh,this,Uh).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){l(Nh,this,Lh).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(l(Nh,this,Rh).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)l(Nh,this,Lh).call(this);else if(e){var n;l(Nh,this,Rh).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),this.show(this._isVisible),t&&this.select()}rotate(e){const{drawLayer:t}=this.parent;let n;c(Ah,this)?(e=(e-this.rotation+360)%360,n=Oh.call(Mh,c(bh,this).box,e)):n=Oh.call(Mh,[this.x,this.y,this.width,this.height],e),t.updateProperties(c(wh,this),{bbox:n,root:{"data-main-rotation":e}}),t.updateProperties(c(Fh,this),{bbox:Oh.call(Mh,c(vh,this).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();c(kh,this)&&(e.setAttribute("aria-label",c(kh,this)),e.setAttribute("role","mark")),c(Ah,this)?e.classList.add("free"):this.div.addEventListener("keydown",l(Nh,this,zh).bind(this),{signal:this._uiManager._signal});const t=d(xh,this,document.createElement("div"));e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=c(mh,this);const[n,i]=this.parentDimensions;return this.setDims(this.width*n,this.height*i),Ft(this,c(xh,this),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(c(Fh,this),{rootClass:{hovered:!0}}))}pointerleave(){var e;this.isSelected||(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(c(Fh,this),{rootClass:{hovered:!1}}))}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:l(Nh,this,Wh).call(this,!0);break;case 1:case 3:l(Nh,this,Wh).call(this,!1)}}select(){var e;super.select(),c(Fh,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(c(Fh,this),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),c(Fh,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(c(Fh,this),{rootClass:{selected:!1}}),c(Ah,this)||l(Nh,this,Wh).call(this,!1))}get _mustFixPosition(){return!c(Ah,this)}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(c(wh,this),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(c(Fh,this),{rootClass:{hidden:!e}}))}static startHighlighting(e,t,n){let{target:i,x:s,y:r}=n;const{x:a,y:o,width:u,height:c}=i.getBoundingClientRect(),d=new AbortController,h=e.combinedSignal(d),p=t=>{d.abort(),l(Mh,this,qh).call(this,e,t)};window.addEventListener("blur",p,{signal:h}),window.addEventListener("pointerup",p,{signal:h}),window.addEventListener("pointerdown",Xe,{capture:!0,passive:!1,signal:h}),window.addEventListener("contextmenu",Ke,{signal:h}),i.addEventListener("pointermove",l(Mh,this,Gh).bind(this,e),{signal:h}),this._freeHighlight=new Vd({x:s,y:r},[a,o,u,c],e.scale,this._defaultThickness/2,t,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0))}static async deserialize(e,t,n){let i=null;if(e instanceof mc){const{data:{quadPoints:t,rect:n,rotation:s,id:r,color:a,opacity:o,popupRef:l},parent:{page:{pageNumber:u}}}=e;i=e={annotationType:W.HIGHLIGHT,color:Array.from(a),opacity:o,quadPoints:t,boxes:null,pageIndex:u-1,rect:n.slice(0),rotation:s,id:r,deleted:!1,popupRef:l}}else if(e instanceof pc){const{data:{inkLists:t,rect:n,rotation:s,id:r,color:a,borderStyle:{rawWidth:o},popupRef:l},parent:{page:{pageNumber:u}}}=e;i=e={annotationType:W.HIGHLIGHT,color:Array.from(a),thickness:o,inkLists:t,boxes:null,pageIndex:u-1,rect:n.slice(0),rotation:s,id:r,deleted:!1,popupRef:l}}const{color:s,quadPoints:r,inkLists:a,opacity:o}=e,u=await super.deserialize(e,t,n);u.color=_e.makeHexColor(...s),d(Eh,u,o||1),a&&d(Sh,u,e.thickness),u.annotationElementId=e.id||null,u._initialData=i;const[h,p]=u.pageDimensions,[f,m]=u.pageTranslation;if(r){const e=d(fh,u,[]);for(let t=0;t<r.length;t+=8)e.push({x:(r[t]-f)/h,y:1-(r[t+1]-m)/p,width:(r[t+2]-r[t])/h,height:(r[t+1]-r[t+5])/p});l(Nh,u,Th).call(u),l(Nh,u,Rh).call(u),u.rotate(u.rotation)}else if(a){d(Ah,u,!0);const e=a[0],n={x:e[0]-f,y:p-(e[1]-m)},i=new Vd(n,[0,0,h,p],1,c(Sh,u)/2,!0,.001);for(let t=0,a=e.length;t<a;t+=2)n.x=e[t]-f,n.y=p-(e[t+1]-m),i.add(n);const{id:s,clipPathId:r}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:i.toSVGPath()}},!0,!0);l(Nh,u,Bh).call(u,{highlightOutlines:i.getOutlines(),highlightId:s,clipPathId:r}),l(Nh,u,Rh).call(u),u.rotate(u.parentRotation)}return u}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),n=us._colorManager.convert(this.color),i={annotationType:W.HIGHLIGHT,color:n,opacity:c(Eh,this),thickness:c(Sh,this),quadPoints:l(Nh,this,Hh).call(this),outlines:l(Nh,this,Vh).call(this,t),pageIndex:this.pageIndex,rect:t,rotation:l(Nh,this,Uh).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!l(Nh,this,Kh).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}function Th(){const e=new jd(c(fh,this),.001);d(bh,this,e.getOutlines()),[this.x,this.y,this.width,this.height]=c(bh,this).box;const t=new jd(c(fh,this),.0025,.001,"ltr"===this._uiManager.direction);d(vh,this,t.getOutlines());const{lastPoint:n}=c(vh,this);d(Ch,this,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])}function Bh(e){let{highlightOutlines:t,highlightId:n,clipPathId:i}=e;d(bh,this,t);if(d(vh,this,t.getNewOutline(c(Sh,this)/2+1.5,.0025)),n>=0)d(wh,this,n),d(mh,this,i),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),d(Fh,this,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(vh,this).box,path:{d:c(vh,this).toSVGPath()}},!0));else if(this.parent){const e=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(wh,this),{bbox:Oh.call(A,c(bh,this).box,(e-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(Fh,this),{bbox:Oh.call(A,c(vh,this).box,e),path:{d:c(vh,this).toSVGPath()}})}const[s,r,a,o]=t.box;switch(this.rotation){case 0:this.x=s,this.y=r,this.width=a,this.height=o;break;case 90:{const[e,t]=this.parentDimensions;this.x=r,this.y=1-s,this.width=a*t/e,this.height=o*e/t;break}case 180:this.x=1-s,this.y=1-r,this.width=a,this.height=o;break;case 270:{const[e,t]=this.parentDimensions;this.x=1-r,this.y=s,this.width=a*t/e,this.height=o*e/t;break}}const{lastPoint:l}=c(vh,this);d(Ch,this,[(l[0]-s)/a,(l[1]-r)/o])}function Ih(e){const t=(e,t)=>{var n,i;this.color=e,d(Eh,this,t),null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(c(wh,this),{root:{fill:e,"fill-opacity":t}}),null===(i=c(gh,this))||void 0===i||i.updateColor(e)},n=this.color,i=c(Eh,this);this.addCommands({cmd:t.bind(this,e,A._defaultOpacity),undo:t.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:U.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}function jh(e){const t=c(Sh,this),n=e=>{d(Sh,this,e),l(Nh,this,Ph).call(this,e)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:U.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}function Ph(e){if(!c(Ah,this))return;l(Nh,this,Bh).call(this,{highlightOutlines:c(bh,this).getNewOutline(e/2)}),this.fixAndSetPosition();const[t,n]=this.parentDimensions;this.setDims(this.width*t,this.height*n)}function Lh(){null!==c(wh,this)&&this.parent&&(this.parent.drawLayer.remove(c(wh,this)),d(wh,this,null),this.parent.drawLayer.remove(c(Fh,this)),d(Fh,this,null))}function Rh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===c(wh,this)&&(({id:s(d,[wh,this])._,clipPathId:s(d,[mh,this])._}=e.drawLayer.draw({bbox:c(bh,this).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":c(Eh,this)},rootClass:{highlight:!0,free:c(Ah,this)},path:{d:c(bh,this).toSVGPath()}},!1,!0)),d(Fh,this,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(Ah,this)},bbox:c(vh,this).box,path:{d:c(vh,this).toSVGPath()}},c(Ah,this))),c(xh,this)&&(c(xh,this).style.clipPath=c(mh,this)))}function Oh(e,t){let[n,i,s,r]=e;switch(t){case 90:return[1-i-r,n,r,s];case 180:return[1-n-s,1-i-r,s,r];case 270:return[i,1-n-s,r,s]}return[n,i,s,r]}function zh(e){A._keyboardManager.exec(this,e)}function Wh(e){if(!c(hh,this))return;const t=window.getSelection();e?t.setPosition(c(hh,this),c(ph,this)):t.setPosition(c(yh,this),c(Dh,this))}function Uh(){return c(Ah,this)?this.rotation:0}function Hh(){if(c(Ah,this))return null;const[e,t]=this.pageDimensions,[n,i]=this.pageTranslation,s=c(fh,this),r=new Float32Array(8*s.length);let a=0;for(const{x:o,y:l,width:u,height:c}of s){const s=o*e+n,d=(1-l)*t+i;r[a]=r[a+4]=s,r[a+1]=r[a+3]=d,r[a+2]=r[a+6]=s+u*e,r[a+5]=r[a+7]=d-c*t,a+=8}return r}function Vh(e){return c(bh,this).serialize(e,l(Nh,this,Uh).call(this))}function Gh(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}function qh(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}function Kh(e){const{color:t}=this._initialData;return e.color.some(((e,n)=>e!==t[n]))}A=Mh,(0,k.A)(Mh,"_defaultColor",null),(0,k.A)(Mh,"_defaultOpacity",1),(0,k.A)(Mh,"_defaultThickness",12),(0,k.A)(Mh,"_type","highlight"),(0,k.A)(Mh,"_editorType",W.HIGHLIGHT),(0,k.A)(Mh,"_freeHighlightId",-1),(0,k.A)(Mh,"_freeHighlight",null),(0,k.A)(Mh,"_freeHighlightClipId","");var Xh=new WeakMap;class Yh{constructor(){o(this,Xh,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){c(Xh,this)[e]=t}toSVGProperties(){const e=c(Xh,this);return d(Xh,this,Object.create(null)),{root:e}}reset(){d(Xh,this,Object.create(null))}updateAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;this.updateProperties(e)}clone(){pe("Not implemented")}}var Qh=new WeakMap,$h=new WeakMap,Jh=new WeakSet;class Zh extends us{constructor(e){super(e),a(this,Jh),o(this,Qh,null),o(this,$h,void 0),(0,k.A)(this,"_drawId",null),d($h,this,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(l(Jh,this,ep).call(this,e),l(Jh,this,ip).call(this))}static _mergeSVGProperties(e,t){const n=new Set(Object.keys(e));for(const[i,s]of Object.entries(t))n.has(i)?Object.assign(e[i],s):e[i]=s;return e}static getDefaultDrawingOptions(e){pe("Not implemented")}static get typesMap(){pe("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,t),this._currentParent&&(lp._.updateProperty(n,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[n,i]of this.typesMap)e.push([n,t[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[n,i]of this.constructor.typesMap)e.push([n,t[i]]);return e}_updateProperty(e,t,n){const i=this._drawingOptions,s=i[t],r=e=>{var n;i.updateProperty(t,e);const s=c(Qh,this).updateProperty(t,e);s&&l(Jh,this,ap).call(this,s),null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(this._drawId,i.toSVGProperties())};this.addCommands({cmd:r.bind(this,n),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,Zh._mergeSVGProperties(c(Qh,this).getPathResizingSVGProperties(l(Jh,this,rp).call(this)),{bbox:l(Jh,this,op).call(this)}))}_onResized(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,Zh._mergeSVGProperties(c(Qh,this).getPathResizedSVGProperties(l(Jh,this,rp).call(this)),{bbox:l(Jh,this,op).call(this)}))}_onTranslating(e,t){var n;null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(this._drawId,{bbox:l(Jh,this,op).call(this)})}_onTranslated(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,Zh._mergeSVGProperties(c(Qh,this).getPathTranslatedSVGProperties(l(Jh,this,rp).call(this),this.parentDimensions),{bbox:l(Jh,this,op).call(this)}))}_onStartDragging(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c($h,this)&&(d($h,this,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){l(Jh,this,np).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(l(Jh,this,ip).call(this),l(Jh,this,ap).call(this,c(Qh,this).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)this._uiManager.removeShouldRescale(this),l(Jh,this,np).call(this);else if(e){var n;this._uiManager.addShouldRescale(this),l(Jh,this,ip).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),t&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Zh._mergeSVGProperties({bbox:l(Jh,this,op).call(this)},c(Qh,this).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&l(Jh,this,ap).call(this,c(Qh,this).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const n=super.render();n.classList.add("draw");const i=document.createElement("div");n.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),n}static createDrawerInstance(e,t,n,i,s){pe("Not implemented")}static startDrawing(e,t,n,i){var s,r;const{target:a,offsetX:o,offsetY:l,pointerId:u,pointerType:c}=i;if(hp._&&hp._!==c)return;const{viewport:{rotation:d}}=e,{width:h,height:p}=a.getBoundingClientRect(),f=up._=new AbortController,m=e.combinedSignal(f);dp._||(dp._=u),null!==(s=hp._)&&void 0!==s||(hp._=c),window.addEventListener("pointerup",(e=>{var t;dp._===e.pointerId?this._endDraw(e):null===(t=pp._)||void 0===t||t.delete(e.pointerId)}),{signal:m}),window.addEventListener("pointercancel",(e=>{var t;dp._===e.pointerId?this._currentParent.endDrawingSession():null===(t=pp._)||void 0===t||t.delete(e.pointerId)}),{signal:m}),window.addEventListener("pointerdown",(e=>{hp._===e.pointerType&&((pp._||(pp._=new Set)).add(e.pointerId),lp._.isCancellable()&&(lp._.removeLastElement(),lp._.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))}),{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Ke,{signal:m}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:m}),a.addEventListener("touchmove",(e=>{e.timeStamp===fp._&&Xe(e)}),{signal:m}),e.toggleDrawing(),null===(r=t._editorUndoBar)||void 0===r||r.hide(),lp._?e.drawLayer.updateProperties(this._currentDrawId,lp._.startNew(o,l,h,p,d)):(t.updateUIForDefaultProperties(this),lp._=this.createDrawerInstance(o,l,h,p,d),cp._=this.getDefaultDrawingOptions(),this._currentParent=e,({id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(cp._.toSVGProperties(),lp._.defaultSVGProperties),!0,!1)))}static _drawMove(e){var t;if(fp._=-1,!lp._)return;const{offsetX:n,offsetY:i,pointerId:s}=e;dp._===s&&((null===(t=pp._)||void 0===t?void 0:t.size)>=1?this._endDraw(e):(this._currentParent.drawLayer.updateProperties(this._currentDrawId,lp._.add(n,i)),fp._=e.timeStamp,Xe(e)))}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,lp._=null,cp._=null,hp._=null,fp._=NaN),up._&&(up._.abort(),up._=null,dp._=NaN,pp._=null)}static _endDraw(e){const t=this._currentParent;if(t)if(t.toggleDrawing(!0),this._cleanup(!1),(null===e||void 0===e?void 0:e.target)===t.div&&t.drawLayer.updateProperties(this._currentDrawId,lp._.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const e=lp._,n=this._currentDrawId,i=e.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(n,e.setLastElement(i))},undo:()=>{t.drawLayer.updateProperties(n,e.removeLastElement())},mustExec:!1,type:U.DRAW_STEP})}else this.endDrawing(!1)}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(U.DRAW_STEP),!lp._.isEmpty()){const{pageDimensions:[n,i],scale:s}=t,r=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:lp._.getOutlines(n*s,i*s,s,this._INNER_MARGIN),drawingOptions:cp._,mustBeCommitted:!e});return this._cleanup(!0),r}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,i,s,r){pe("Not implemented")}static async deserialize(e,t,n){const{rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:a}}=t.viewport,o=this.deserializeDraw(r,a,i,s,this._INNER_MARGIN,e),u=await super.deserialize(e,t,n);return u.createDrawingOptions(e),l(Jh,u,ep).call(u,{drawOutlines:o}),l(Jh,u,ip).call(u),u.onScaleChanging(),u.rotate(),u}serializeDraw(e){const[t,n]=this.pageTranslation,[i,s]=this.pageDimensions;return c(Qh,this).serialize([t,n,i,s],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}function ep(e){let{drawOutlines:t,drawId:n,drawingOptions:i}=e;d(Qh,this,t),this._drawingOptions||(this._drawingOptions=i),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=l(Jh,this,tp).call(this,t,this.parent),l(Jh,this,ap).call(this,t.box)}function tp(e,t){const{id:n}=t.drawLayer.draw(C._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}function np(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}function ip(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null!==this._drawId&&this.parent===e||(null===this._drawId?(this._drawingOptions.updateAll(),this._drawId=l(Jh,this,tp).call(this,c(Qh,this),e)):this.parent.drawLayer.updateParent(this._drawId,e.drawLayer))}function sp(e){let[t,n,i,s]=e;const{parentDimensions:[r,a],rotation:o}=this;switch(o){case 90:return[n,1-t,i*(a/r),s*(r/a)];case 180:return[1-t,1-n,i,s];case 270:return[1-n,t,i*(a/r),s*(r/a)];default:return[t,n,i,s]}}function rp(){const{x:e,y:t,width:n,height:i,parentDimensions:[s,r],rotation:a}=this;switch(a){case 90:return[1-t,e,n*(s/r),i*(r/s)];case 180:return[1-e,1-t,n,i];case 270:return[t,1-e,n*(s/r),i*(r/s)];default:return[e,t,n,i]}}function ap(e){if([this.x,this.y,this.width,this.height]=l(Jh,this,sp).call(this,e),this.div){this.fixAndSetPosition();const[e,t]=this.parentDimensions;this.setDims(this.width*e,this.height*t)}this._onResized()}function op(){const{x:e,y:t,width:n,height:i,rotation:s,parentRotation:r,parentDimensions:[a,o]}=this;switch((4*s+r)/90){case 1:return[1-t-i,e,i,n];case 2:return[1-e-n,1-t-i,n,i];case 3:return[t,1-e-n,i,n];case 4:return[e,t-n*(a/o),i*(o/a),n*(a/o)];case 5:return[1-t,e,n*(a/o),i*(o/a)];case 6:return[1-e-i*(o/a),1-t,i*(o/a),n*(a/o)];case 7:return[t-n*(a/o),1-e-i*(o/a),n*(a/o),i*(o/a)];case 8:return[e-n,t-i,n,i];case 9:return[1-t,e-n,i,n];case 10:return[1-e,1-t,n,i];case 11:return[t-i,1-e,i,n];case 12:return[e-i*(o/a),t,i*(o/a),n*(a/o)];case 13:return[1-t-n*(a/o),e-i*(o/a),n*(a/o),i*(o/a)];case 14:return[1-e,1-t-n*(a/o),i*(o/a),n*(a/o)];case 15:return[t,1-e,n*(a/o),i*(o/a)];default:return[e,t,n,i]}}C=Zh,(0,k.A)(Zh,"_currentDrawId",-1),(0,k.A)(Zh,"_currentParent",null);var lp={_:null},up={_:null},cp={_:null},dp={_:NaN},hp={_:null},pp={_:null},fp={_:NaN};(0,k.A)(Zh,"_INNER_MARGIN",3);var mp=new WeakMap,gp=new WeakMap,vp=new WeakMap,yp=new WeakMap,Dp=new WeakMap,xp=new WeakMap,bp=new WeakMap,wp=new WeakMap,Ap=new WeakMap,Cp=new WeakMap,Ep=new WeakMap,Fp=new WeakSet;class kp{constructor(e,t,n,i,s,r){a(this,Fp),o(this,mp,new Float64Array(6)),o(this,gp,void 0),o(this,vp,void 0),o(this,yp,void 0),o(this,Dp,void 0),o(this,xp,void 0),o(this,bp,""),o(this,wp,0),o(this,Ap,new Op),o(this,Cp,void 0),o(this,Ep,void 0),d(Cp,this,n),d(Ep,this,i),d(yp,this,s),d(Dp,this,r),[e,t]=l(Fp,this,Sp).call(this,e,t);const u=d(gp,this,[NaN,NaN,NaN,NaN,e,t]);d(xp,this,[e,t]),d(vp,this,[{line:u,points:c(xp,this)}]),c(mp,this).set(u,0)}updateProperty(e,t){"stroke-width"===e&&d(Dp,this,t)}isEmpty(){return!c(vp,this)||0===c(vp,this).length}isCancellable(){return c(xp,this).length<=10}add(e,t){[e,t]=l(Fp,this,Sp).call(this,e,t);const[n,i,s,r]=c(mp,this).subarray(2,6),a=e-s,o=t-r;return Math.hypot(c(Cp,this)*a,c(Ep,this)*o)<=2?null:(c(xp,this).push(e,t),isNaN(n)?(c(mp,this).set([s,r,e,t],2),c(gp,this).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(c(mp,this)[0])&&c(gp,this).splice(6,6),c(mp,this).set([n,i,s,r,e,t],0),c(gp,this).push(...Yc.createBezierPoints(n,i,s,r,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(2===c(xp,this).length?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,s){d(Cp,this,n),d(Ep,this,i),d(yp,this,s),[e,t]=l(Fp,this,Sp).call(this,e,t);const r=d(gp,this,[NaN,NaN,NaN,NaN,e,t]);d(xp,this,[e,t]);const a=c(vp,this).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),c(vp,this).push({line:r,points:c(xp,this)}),c(mp,this).set(r,0),d(wp,this,0),this.toSVGPath(),null}getLastElement(){return c(vp,this).at(-1)}setLastElement(e){return c(vp,this)?(c(vp,this).push(e),d(gp,this,e.line),d(xp,this,e.points),d(wp,this,0),{path:{d:this.toSVGPath()}}):c(Ap,this).setLastElement(e)}removeLastElement(){if(!c(vp,this))return c(Ap,this).removeLastElement();c(vp,this).pop(),d(bp,this,"");for(let e=0,t=c(vp,this).length;e<t;e++){const{line:t,points:n}=c(vp,this)[e];d(gp,this,t),d(xp,this,n),d(wp,this,0),this.toSVGPath()}return{path:{d:c(bp,this)}}}toSVGPath(){const e=Yc.svgRound(c(gp,this)[4]),t=Yc.svgRound(c(gp,this)[5]);if(2===c(xp,this).length)return d(bp,this,"".concat(c(bp,this)," M ").concat(e," ").concat(t," Z")),c(bp,this);if(c(xp,this).length<=6){const n=c(bp,this).lastIndexOf("M");d(bp,this,"".concat(c(bp,this).slice(0,n)," M ").concat(e," ").concat(t)),d(wp,this,6)}if(4===c(xp,this).length){const e=Yc.svgRound(c(gp,this)[10]),t=Yc.svgRound(c(gp,this)[11]);return d(bp,this,"".concat(c(bp,this)," L ").concat(e," ").concat(t)),d(wp,this,12),c(bp,this)}const n=[];0===c(wp,this)&&(n.push("M ".concat(e," ").concat(t)),d(wp,this,6));for(let i=c(wp,this),s=c(gp,this).length;i<s;i+=6){const[e,t,s,r,a,o]=c(gp,this).slice(i,i+6).map(Yc.svgRound);n.push("C".concat(e," ").concat(t," ").concat(s," ").concat(r," ").concat(a," ").concat(o))}return d(bp,this,c(bp,this)+n.join(" ")),d(wp,this,c(gp,this).length),c(bp,this)}getOutlines(e,t,n,i){const s=c(vp,this).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),c(Ap,this).build(c(vp,this),e,t,n,c(yp,this),c(Dp,this),i),d(mp,this,null),d(gp,this,null),d(vp,this,null),d(bp,this,null),c(Ap,this)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}function Sp(e,t){return Yc._normalizePoint(e,t,c(Cp,this),c(Ep,this),c(yp,this))}var _p=new WeakMap,Np=new WeakMap,Mp=new WeakMap,Tp=new WeakMap,Bp=new WeakMap,Ip=new WeakMap,jp=new WeakMap,Pp=new WeakMap,Lp=new WeakMap,Rp=new WeakSet;class Op extends Yc{constructor(){super(...arguments),a(this,Rp),o(this,_p,void 0),o(this,Np,0),o(this,Mp,void 0),o(this,Tp,void 0),o(this,Bp,void 0),o(this,Ip,void 0),o(this,jp,void 0),o(this,Pp,void 0),o(this,Lp,void 0)}build(e,t,n,i,s,r,a){d(Bp,this,t),d(Ip,this,n),d(jp,this,i),d(Pp,this,s),d(Lp,this,r),d(Mp,this,null!==a&&void 0!==a?a:0),d(Tp,this,e),l(Rp,this,Up).call(this)}get thickness(){return c(Lp,this)}setLastElement(e){return c(Tp,this).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(Tp,this).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of c(Tp,this))if(e.push("M".concat(Yc.svgRound(t[4])," ").concat(Yc.svgRound(t[5]))),6!==t.length)if(12===t.length&&isNaN(t[6]))e.push("L".concat(Yc.svgRound(t[10])," ").concat(Yc.svgRound(t[11])));else for(let n=6,i=t.length;n<i;n+=6){const[i,s,r,a,o,l]=t.subarray(n,n+6).map(Yc.svgRound);e.push("C".concat(i," ").concat(s," ").concat(r," ").concat(a," ").concat(o," ").concat(l))}else e.push("Z");return e.join("")}serialize(e,t){let[n,i,s,r]=e;const a=[],o=[],[u,d,h,p]=l(Rp,this,Wp).call(this);let f,m,g,v,y,D,x,b,w;switch(c(Pp,this)){case 0:w=Yc._rescale,f=n,m=i+r,g=s,v=-r,y=n+u*s,D=i+(1-d-p)*r,x=n+(u+h)*s,b=i+(1-d)*r;break;case 90:w=Yc._rescaleAndSwap,f=n,m=i,g=s,v=r,y=n+d*s,D=i+u*r,x=n+(d+p)*s,b=i+(u+h)*r;break;case 180:w=Yc._rescale,f=n+s,m=i,g=-s,v=r,y=n+(1-u-h)*s,D=i+d*r,x=n+(1-u)*s,b=i+(d+p)*r;break;case 270:w=Yc._rescaleAndSwap,f=n+s,m=i+r,g=-s,v=-r,y=n+(1-d-p)*s,D=i+(1-u-h)*r,x=n+(1-d)*s,b=i+(1-u)*r}for(const{line:l,points:A}of c(Tp,this))a.push(w(l,f,m,g,v,t?new Array(l.length):null)),o.push(w(A,f,m,g,v,t?new Array(A.length):null));return{lines:a,points:o,rect:[y,D,x,b]}}static deserialize(e,t,n,i,s,r){let{paths:{lines:a,points:o},rotation:l,thickness:u}=r;const c=[];let d,h,p,f,m;switch(l){case 0:m=Yc._rescale,d=-e/n,h=t/i+1,p=1/n,f=-1/i;break;case 90:m=Yc._rescaleAndSwap,d=-t/i,h=-e/n,p=1/i,f=1/n;break;case 180:m=Yc._rescale,d=e/n+1,h=-t/i,p=-1/n,f=1/i;break;case 270:m=Yc._rescaleAndSwap,d=t/i+1,h=e/n+1,p=-1/i,f=-1/n}if(!a){a=[];for(const e of o){const t=e.length;if(2===t){a.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1]]));continue}if(4===t){a.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1],NaN,NaN,NaN,NaN,e[2],e[3]]));continue}const n=new Float32Array(3*(t-2));a.push(n);let[i,s,r,o]=e.subarray(0,4);n.set([NaN,NaN,NaN,NaN,i,s],0);for(let a=4;a<t;a+=2){const t=e[a],l=e[a+1];n.set(Yc.createBezierPoints(i,s,r,o,t,l),3*(a-2)),[i,s,r,o]=[r,o,t,l]}}}for(let v=0,y=a.length;v<y;v++)c.push({line:m(a[v].map((e=>null!==e&&void 0!==e?e:NaN)),d,h,p,f),points:m(o[v].map((e=>null!==e&&void 0!==e?e:NaN)),d,h,p,f)});const g=new this.prototype.constructor;return g.build(c,n,i,1,l,u,s),g}get box(){return c(_p,this)}updateProperty(e,t){return"stroke-width"===e?l(Rp,this,Hp).call(this,t):null}updateParentDimensions(e,t){let[n,i]=e;const[s,r]=l(Rp,this,zp).call(this);d(Bp,this,n),d(Ip,this,i),d(jp,this,t);const[a,o]=l(Rp,this,zp).call(this),u=a-s,h=o-r,p=c(_p,this);return p[0]-=u,p[1]-=h,p[2]+=2*u,p[3]+=2*h,p}updateRotation(e){return d(Np,this,e),{path:{transform:this.rotationTransform}}}get viewBox(){return c(_p,this).map(Yc.svgRound).join(" ")}get defaultProperties(){const[e,t]=c(_p,this);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Yc.svgRound(e)," ").concat(Yc.svgRound(t))}}}get rotationTransform(){const[,,e,t]=c(_p,this);let n=0,i=0,s=0,r=0,a=0,o=0;switch(c(Np,this)){case 90:i=t/e,s=-e/t,a=e;break;case 180:n=-1,r=-1,a=e,o=t;break;case 270:i=-t/e,s=e/t,o=t;break;default:return""}return"matrix(".concat(n," ").concat(i," ").concat(s," ").concat(r," ").concat(Yc.svgRound(a)," ").concat(Yc.svgRound(o),")")}getPathResizingSVGProperties(e){let[t,n,i,s]=e;const[r,a]=l(Rp,this,zp).call(this),[o,u,d,h]=c(_p,this);if(Math.abs(d-r)<=Yc.PRECISION||Math.abs(h-a)<=Yc.PRECISION){const e=t+i/2-(o+d/2),r=n+s/2-(u+h/2);return{path:{"transform-origin":"".concat(Yc.svgRound(t)," ").concat(Yc.svgRound(n)),transform:"".concat(this.rotationTransform," translate(").concat(e," ").concat(r,")")}}}const p=(i-2*r)/(d-2*r),f=(s-2*a)/(h-2*a),m=d/i,g=h/s;return{path:{"transform-origin":"".concat(Yc.svgRound(o)," ").concat(Yc.svgRound(u)),transform:"".concat(this.rotationTransform," scale(").concat(m," ").concat(g,") ")+"translate(".concat(Yc.svgRound(r)," ").concat(Yc.svgRound(a),") scale(").concat(p," ").concat(f,") ")+"translate(".concat(Yc.svgRound(-r)," ").concat(Yc.svgRound(-a),")")}}}getPathResizedSVGProperties(e){let[t,n,i,s]=e;const[r,a]=l(Rp,this,zp).call(this),o=c(_p,this),[u,d,h,p]=o;if(o[0]=t,o[1]=n,o[2]=i,o[3]=s,Math.abs(h-r)<=Yc.PRECISION||Math.abs(p-a)<=Yc.PRECISION){const e=t+i/2-(u+h/2),r=n+s/2-(d+p/2);for(const{line:t,points:n}of c(Tp,this))Yc._translate(t,e,r,t),Yc._translate(n,e,r,n);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Yc.svgRound(t)," ").concat(Yc.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}const f=(i-2*r)/(h-2*r),m=(s-2*a)/(p-2*a),g=-f*(u+r)+t+r,v=-m*(d+a)+n+a;if(1!==f||1!==m||0!==g||0!==v)for(const{line:l,points:y}of c(Tp,this))Yc._rescale(l,g,v,f,m,l),Yc._rescale(y,g,v,f,m,y);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Yc.svgRound(t)," ").concat(Yc.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties(e,t){let[n,i]=e;const[s,r]=t,a=c(_p,this),o=n-a[0],l=i-a[1];if(c(Bp,this)===s&&c(Ip,this)===r)for(const{line:u,points:d}of c(Tp,this))Yc._translate(u,o,l,u),Yc._translate(d,o,l,d);else{const e=c(Bp,this)/s,t=c(Ip,this)/r;d(Bp,this,s),d(Ip,this,r);for(const{line:n,points:i}of c(Tp,this))Yc._rescale(n,o,l,e,t,n),Yc._rescale(i,o,l,e,t,i);a[2]*=e,a[3]*=t}return a[0]=n,a[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":"".concat(Yc.svgRound(n)," ").concat(Yc.svgRound(i))}}}get defaultSVGProperties(){const e=c(_p,this);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":"".concat(Yc.svgRound(e[0])," ").concat(Yc.svgRound(e[1])),transform:this.rotationTransform||null},bbox:e}}}function zp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c(Lp,this);const t=c(Mp,this)+e/2*c(jp,this);return c(Pp,this)%180===0?[t/c(Bp,this),t/c(Ip,this)]:[t/c(Ip,this),t/c(Bp,this)]}function Wp(){const[e,t,n,i]=c(_p,this),[s,r]=l(Rp,this,zp).call(this,0);return[e+s,t+r,n-2*s,i-2*r]}function Up(){const e=d(_p,this,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of c(Tp,this)){if(i.length<=12){for(let t=4,n=i.length;t<n;t+=6)_e.pointBoundingBox(i[t],i[t+1],e);continue}let t=i[4],n=i[5];for(let s=6,r=i.length;s<r;s+=6){const[r,a,o,l,u,c]=i.subarray(s,s+6);_e.bezierBoundingBox(t,n,r,a,o,l,u,c,e),t=u,n=c}}const[t,n]=l(Rp,this,zp).call(this);e[0]=Pe(e[0]-t,0,1),e[1]=Pe(e[1]-n,0,1),e[2]=Pe(e[2]+t,0,1),e[3]=Pe(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]}function Hp(e){const[t,n]=l(Rp,this,zp).call(this);d(Lp,this,e);const[i,s]=l(Rp,this,zp).call(this),[r,a]=[i-t,s-n],o=c(_p,this);return o[0]-=r,o[1]-=a,o[2]+=2*r,o[3]+=2*a,o}class Vp extends Yh{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:us._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){"stroke-width"===e&&(null!==t&&void 0!==t||(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Vp(this._viewParameters);return e.updateAll(this),e}}var Gp=new WeakSet;class qp extends Zh{constructor(e){super((0,i.A)((0,i.A)({},e),{},{name:"inkEditor"})),a(this,Gp),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){us.initialize(e,t),this._defaultDrawingOptions=new Vp(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return ve(this,"typesMap",new Map([[U.INK_THICKNESS,"stroke-width"],[U.INK_COLOR,"stroke"],[U.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,i,s){return new kp(e,t,n,i,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,i,s,r){return Op.deserialize(e,t,n,i,s,r)}static async deserialize(e,t,n){let i=null;if(e instanceof pc){const{data:{inkLists:t,rect:n,rotation:s,id:r,color:a,opacity:o,borderStyle:{rawWidth:l},popupRef:u},parent:{page:{pageNumber:c}}}=e;i=e={annotationType:W.INK,color:Array.from(a),thickness:l,opacity:o,paths:{points:t},boxes:null,pageIndex:c-1,rect:n.slice(0),rotation:s,id:r,deleted:!1,popupRef:u}}const s=await super.deserialize(e,t,n);return s.annotationElementId=e.id||null,s._initialData=i,s}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions(e){let{color:t,thickness:n,opacity:i}=e;this._drawingOptions=qp.getDefaultDrawingOptions({stroke:_e.makeHexColor(...t),"stroke-width":n,"stroke-opacity":i})}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:n,rect:i}=this.serializeDraw(e),{_drawingOptions:{stroke:s,"stroke-opacity":r,"stroke-width":a}}=this,o={annotationType:W.INK,color:us._colorManager.convert(s),opacity:r,thickness:a,paths:{lines:t,points:n},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(o.isCopy=!0,o):this.annotationElementId&&!l(Gp,this,Kp).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:t}),null}}function Kp(e){const{color:t,thickness:n,opacity:i,pageIndex:s}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some(((e,n)=>e!==t[n]))||e.thickness!==n||e.opacity!==i||e.pageIndex!==s}(0,k.A)(qp,"_type","ink"),(0,k.A)(qp,"_editorType",W.INK),(0,k.A)(qp,"_defaultDrawingOptions",null);class Xp extends Op{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}class Yp{static extractContoursFromText(e,t,n,i,s,r){let{fontFamily:a,fontStyle:o,fontWeight:u}=t,c=new OffscreenCanvas(1,1),d=c.getContext("2d",{alpha:!1});const h=d.font="".concat(o," ").concat(u," ").concat(200,"px ").concat(a),{actualBoundingBoxLeft:p,actualBoundingBoxRight:f,actualBoundingBoxAscent:m,actualBoundingBoxDescent:g,fontBoundingBoxAscent:v,fontBoundingBoxDescent:y,width:D}=d.measureText(e),x=1.5,b=Math.ceil(Math.max(Math.abs(p)+Math.abs(f)||0,D)*x),w=Math.ceil(Math.max(Math.abs(m)+Math.abs(g)||200,Math.abs(v)+Math.abs(y)||200)*x);c=new OffscreenCanvas(b,w),d=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=h,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,b,w),d.fillStyle="black",d.fillText(e,.5*b/2,1.5*w/2);const A=l(Yp,this,rf).call(this,d.getImageData(0,0,b,w).data),C=l(Yp,this,sf).call(this,A),E=l(Yp,this,af).call(this,C),F=l(Yp,this,Zp).call(this,A,b,w,E);return this.processDrawnLines({lines:{curves:F,width:b,height:w},pageWidth:n,pageHeight:i,rotation:s,innerMargin:r,mustSmooth:!0,areContours:!0})}static process(e,t,n,i,s){const[r,a,o]=l(Yp,this,of).call(this,e),[u,c]=l(Yp,this,nf).call(this,r,a,o,Math.hypot(a,o)*l(Yp,this,lf)._.sigmaSFactor,l(Yp,this,lf)._.sigmaR,l(Yp,this,lf)._.kernelSize),d=l(Yp,this,af).call(this,c),h=l(Yp,this,Zp).call(this,u,a,o,d);return this.processDrawnLines({lines:{curves:h,width:a,height:o},pageWidth:t,pageHeight:n,rotation:i,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines(e){var t;let{lines:n,pageWidth:i,pageHeight:s,rotation:r,innerMargin:a,mustSmooth:o,areContours:u}=e;r%180!==0&&([i,s]=[s,i]);const{curves:c,width:d,height:h}=n,p=null!==(t=n.thickness)&&void 0!==t?t:0,f=[],m=Math.min(i/d,s/h),g=m/i,v=m/s,y=[];for(const{points:x}of c){const e=o?l(Yp,this,tf).call(this,x):x;if(!e)continue;y.push(e);const t=e.length,n=new Float32Array(t),i=new Float32Array(3*(2===t?2:t-2));if(f.push({line:i,points:n}),2===t){n[0]=e[0]*g,n[1]=e[1]*v,i.set([NaN,NaN,NaN,NaN,n[0],n[1]],0);continue}let[s,r,a,u]=e;s*=g,r*=v,a*=g,u*=v,n.set([s,r,a,u],0),i.set([NaN,NaN,NaN,NaN,s,r],0);for(let o=4;o<t;o+=2){const t=n[o]=e[o]*g,l=n[o+1]=e[o+1]*v;i.set(Yc.createBezierPoints(s,r,a,u,t,l),3*(o-2)),[s,r,a,u]=[a,u,t,l]}}if(0===f.length)return null;const D=u?new Xp:new Op;return D.build(f,i,s,1,r,u?0:p,a),{outline:D,newCurves:y,areContours:u,thickness:p,width:d,height:h}}static async compressSignature(e){let t,{outlines:n,areContours:i,thickness:s,width:r,height:a}=e,o=1/0,l=-1/0,u=0;for(const y of n){u+=y.length;for(let e=2,t=y.length;e<t;e++){const t=y[e]-y[e-2];o=Math.min(o,t),l=Math.max(l,t)}}t=o>=-128&&l<=127?Int8Array:o>=-32768&&l<=32767?Int16Array:Int32Array;const c=n.length,d=8+3*c,h=new Uint32Array(d);let p=0;h[p++]=d*Uint32Array.BYTES_PER_ELEMENT+(u-2*c)*t.BYTES_PER_ELEMENT,h[p++]=0,h[p++]=r,h[p++]=a,h[p++]=i?0:1,h[p++]=Math.max(0,Math.floor(null!==s&&void 0!==s?s:0)),h[p++]=c,h[p++]=t.BYTES_PER_ELEMENT;for(const y of n)h[p++]=y.length-2,h[p++]=y[0],h[p++]=y[1];const f=new CompressionStream("deflate-raw"),m=f.writable.getWriter();await m.ready,m.write(h);const g=t.prototype.constructor;for(const y of n){const e=new g(y.length-2);for(let t=2,n=y.length;t<n;t++)e[t-2]=y[t]-y[t-2];m.write(e)}m.close();const v=await new Response(f.readable).arrayBuffer();return Le(new Uint8Array(v))}static async decompressSignature(e){try{const l=(a=e,Uint8Array.fromBase64?Uint8Array.fromBase64(a):Fe(atob(a))),{readable:u,writable:c}=new DecompressionStream("deflate-raw"),d=c.getWriter();await d.ready,d.write(l).then((async()=>{await d.ready,await d.close()})).catch((()=>{}));let h=null,p=0;var t,n=!1,i=!1;try{for(var s,r=(0,S.A)(u);n=!(s=await r.next()).done;n=!1){const e=s.value;h||(h=new Uint8Array(new Uint32Array(e.buffer,0,4)[0])),h.set(e,p),p+=e.length}}catch(o){i=!0,t=o}finally{try{n&&null!=r.return&&await r.return()}finally{if(i)throw t}}const f=new Uint32Array(h.buffer,0,h.length>>2),m=f[1];if(0!==m)throw new Error("Invalid version: ".concat(m));const g=f[2],v=f[3],y=0===f[4],D=f[5],x=f[6],b=f[7],w=[],A=(8+3*x)*Uint32Array.BYTES_PER_ELEMENT;let C;switch(b){case Int8Array.BYTES_PER_ELEMENT:C=new Int8Array(h.buffer,A);break;case Int16Array.BYTES_PER_ELEMENT:C=new Int16Array(h.buffer,A);break;case Int32Array.BYTES_PER_ELEMENT:C=new Int32Array(h.buffer,A)}p=0;for(let e=0;e<x;e++){const t=f[3*e+8],n=new Float32Array(t+2);w.push(n);for(let i=0;i<2;i++)n[i]=f[3*e+8+i+1];for(let e=0;e<t;e++)n[e+2]=n[e]+C[p++]}return{areContours:y,thickness:D,outlines:w,width:g,height:v}}catch(l){return he("decompressSignature: ".concat(l)),null}var a}}function Qp(e,t,n,i){return i-=t,0===(n-=e)?i>0?0:4:1===n?i+6:2-i}function $p(e,t,n,i,s,r,a){const o=l(E,this,Qp).call(this,n,i,s,r);for(let u=0;u<8;u++){const s=(-u+o-a+16)%8;if(0!==e[(n+l(E,this,uf)._[2*s])*t+(i+l(E,this,uf)._[2*s+1])])return s}return-1}function Jp(e,t,n,i,s,r,a){const o=l(E,this,Qp).call(this,n,i,s,r);for(let u=0;u<8;u++){const s=(u+o+a+16)%8;if(0!==e[(n+l(E,this,uf)._[2*s])*t+(i+l(E,this,uf)._[2*s+1])])return s}return-1}function Zp(e,t,n,i){const s=e.length,r=new Int32Array(s);for(let l=0;l<s;l++)r[l]=e[l]<=i?1:0;for(let l=1;l<n-1;l++)r[l*t]=r[l*t+t-1]=0;for(let l=0;l<t;l++)r[l]=r[t*n-1-l]=0;let a,o=1;const u=[];for(let c=1;c<n-1;c++){a=1;for(let e=1;e<t-1;e++){const n=c*t+e,i=r[n];if(0===i)continue;let s=c,d=e;if(1===i&&0===r[n-1])o+=1,d-=1;else{if(!(i>=1&&0===r[n+1])){1!==i&&(a=Math.abs(i));continue}o+=1,d+=1,i>1&&(a=i)}const h=[e,c],p=d===e+1,f={isHole:p,points:h,id:o,parent:0};let m;u.push(f);for(const e of u)if(e.id===a){m=e;break}m?m.isHole?f.parent=p?m.parent:a:f.parent=p?a:m.parent:f.parent=p?a:0;const g=l(E,this,$p).call(this,r,t,c,e,s,d,0);if(-1===g){r[n]=-o,1!==r[n]&&(a=Math.abs(r[n]));continue}let v=l(E,this,uf)._[2*g],y=l(E,this,uf)._[2*g+1];const D=c+v,x=e+y;s=D,d=x;let b=c,w=e;for(;;){const i=l(E,this,Jp).call(this,r,t,b,w,s,d,1);v=l(E,this,uf)._[2*i],y=l(E,this,uf)._[2*i+1];const u=b+v,p=w+y;h.push(p,u);const f=b*t+w;if(0===r[f+1]?r[f]=-o:1===r[f]&&(r[f]=o),u===c&&p===e&&b===D&&w===x){1!==r[n]&&(a=Math.abs(r[n]));break}s=b,d=w,b=u,w=p}}}return u}function ef(e,t,n,i){if(n-t<=4){for(let s=t;s<n-2;s+=2)i.push(e[s],e[s+1]);return}const s=e[t],r=e[t+1],a=e[n-4]-s,o=e[n-3]-r,u=Math.hypot(a,o),c=a/u,d=o/u,h=c*r-d*s,p=o/a,f=1/u,m=Math.atan(p),g=Math.cos(m),v=Math.sin(m),y=f*(Math.abs(g)+Math.abs(v)),D=f*(1-y+y**2),x=Math.max(Math.atan(Math.abs(v+g)*D),Math.atan(Math.abs(v-g)*D));let b=0,w=t;for(let l=t+2;l<n-2;l+=2){const t=Math.abs(h-c*e[l+1]+d*e[l]);t>b&&(w=l,b=t)}b>(u*x)**2?(l(E,this,ef).call(this,e,t,w+2,i),l(E,this,ef).call(this,e,w,n,i)):i.push(s,r)}function tf(e){const t=[],n=e.length;return l(E,this,ef).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t}function nf(e,t,n,i,s,r){const a=new Float32Array(r**2),o=-2*i**2,l=r>>1;for(let f=0;f<r;f++){const e=(f-l)**2;for(let t=0;t<r;t++)a[f*r+t]=Math.exp((e+(t-l)**2)/o)}const u=new Float32Array(256),c=-2*s**2;for(let f=0;f<256;f++)u[f]=Math.exp(f**2/c);const d=e.length,h=new Uint8Array(d),p=new Uint32Array(256);for(let f=0;f<n;f++)for(let i=0;i<t;i++){const s=f*t+i,o=e[s];let c=0,d=0;for(let h=0;h<r;h++){const s=f+h-l;if(!(s<0||s>=n))for(let n=0;n<r;n++){const p=i+n-l;if(p<0||p>=t)continue;const f=e[s*t+p],m=a[h*r+n]*u[Math.abs(f-o)];c+=f*m,d+=m}}p[h[s]=Math.round(c/d)]++}return[h,p]}function sf(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t}function rf(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let i=-1/0,s=1/0;for(let a=0,o=n.length;a<o;a++){if(0===e[3+(a<<2)]){i=n[a]=255;continue}const t=n[a]=e[a<<2];t>i&&(i=t),t<s&&(s=t)}const r=255/(i-s);for(let a=0;a<t;a++)n[a]=(n[a]-s)*r;return n}function af(e){let t,n=-1/0,i=-1/0;const s=e.findIndex((e=>0!==e));let r=s,a=s;for(t=s;t<256;t++){const s=e[t];s>n&&(t-r>i&&(i=t-r,a=t-1),n=s,r=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t}function of(e){const t=e,{width:n,height:i}=e,{maxDim:s}=l(E,this,lf)._;let r=n,a=i;if(n>s||i>s){let o=n,l=i,u=Math.log2(Math.max(n,i)/s);const c=Math.floor(u);u=u===c?c-1:c;for(let n=0;n<u;n++){r=Math.ceil(o/2),a=Math.ceil(l/2);const n=new OffscreenCanvas(r,a);n.getContext("2d").drawImage(e,0,0,o,l,0,0,r,a),o=r,l=a,e!==t&&e.close(),e=n.transferToImageBitmap()}const d=Math.min(s/r,s/a);r=Math.round(r*d),a=Math.round(a*d)}const o=new OffscreenCanvas(r,a).getContext("2d",{willReadFrequently:!0});o.filter="grayscale(1)",o.drawImage(e,0,0,e.width,e.height,0,0,r,a);const u=o.getImageData(0,0,r,a).data;return[l(E,this,rf).call(this,u),r,a]}E=Yp;var lf={_:{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}},uf={_:new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1])};class cf extends Yh{constructor(){super(),super.updateProperties({fill:us._defaultLineColor,"stroke-width":0})}clone(){const e=new cf;return e.updateAll(this),e}}class df extends Vp{constructor(e){super(e),super.updateProperties({stroke:us._defaultLineColor,"stroke-width":1})}clone(){const e=new df(this._viewParameters);return e.updateAll(this),e}}var hf=new WeakMap,pf=new WeakMap,ff=new WeakMap,mf=new WeakMap;class gf extends Zh{constructor(e){super((0,i.A)((0,i.A)({},e),{},{mustBeCommitted:!0,name:"signatureEditor"})),o(this,hf,!1),o(this,pf,null),o(this,ff,null),o(this,mf,null),this._willKeepAspectRatio=!0,d(ff,this,e.signatureData||null),d(pf,this,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){us.initialize(e,t),this._defaultDrawingOptions=new cf,this._defaultDrawnSignatureOptions=new df(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return ve(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!c(pf,this)}}static computeTelemetryFinalData(e){var t,n;const i=e.get("hasDescription");return{hasAltText:null!==(t=i.get(!0))&&void 0!==t?t:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}get isResizable(){return!0}onScaleChanging(){null!==this._drawId&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),null===this._drawId)if(c(ff,this)){const{lines:e,mustSmooth:t,areContours:n,description:i,uuid:s,heightInPage:r}=c(ff,this),{rawDims:{pageWidth:a,pageHeight:o},rotation:l}=this.parent.viewport,u=Yp.processDrawnLines({lines:e,pageWidth:a,pageHeight:o,rotation:l,innerMargin:gf._INNER_MARGIN,mustSmooth:t,areContours:n});this.addSignature(u,r,i,s)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return n&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){d(mf,this,e),this.addEditToolbar()}getUuid(){return c(mf,this)}get description(){return c(pf,this)}set description(e){d(pf,this,e),super.addEditToolbar().then((t=>{null===t||void 0===t||t.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:n,width:i,height:s}=c(ff,this),r=Math.max(i,s);return{areContours:t,outline:Yp.processDrawnLines({lines:{curves:e.map((e=>({points:e}))),thickness:n,width:i,height:s},pageWidth:r,pageHeight:r,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t}).outline}}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.signatureManager&&null!==c(pf,this)&&(await e.addEditSignatureButton(this._uiManager.signatureManager,c(mf,this),c(pf,this)),e.show()),e):null}addSignature(e,t,n,i){const{x:s,y:r}=this,{outline:a}=d(ff,this,e);let o;d(hf,this,a instanceof Xp),d(pf,this,n),this.div.setAttribute("data-l10n-args",JSON.stringify({description:n})),c(hf,this)?o=gf.getDefaultDrawingOptions():(o=gf._defaultDrawnSignatureOptions.clone(),o.updateProperties({"stroke-width":a.thickness})),this._addOutlines({drawOutlines:a,drawingOptions:o});const[l,u]=this.parentDimensions,[,h]=this.pageDimensions;let p=t/h;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(l*this.width,u*this.height),this.x=s,this.y=r,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return Yp.process(e,t,n,i,gf._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:s}=this.parent.viewport;return Yp.extractContoursFromText(e,t,n,i,s,gf._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return Yp.processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:gf._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions(e){let{areContours:t,thickness:n}=e;t?this._drawingOptions=gf.getDefaultDrawingOptions():(this._drawingOptions=gf._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;const{lines:t,points:n,rect:i}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":s}}=this,r={annotationType:W.SIGNATURE,isSignature:!0,areContours:c(hf,this),color:[0,0,0],thickness:c(hf,this)?0:s,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(r.paths={lines:t,points:n},r.uuid=c(mf,this),r.isCopy=!0):r.lines=t,c(pf,this)&&(r.accessibilityData={type:"Figure",alt:c(pf,this)}),r}static deserializeDraw(e,t,n,i,s,r){return r.areContours?Xp.deserialize(e,t,n,i,s,r):Op.deserialize(e,t,n,i,s,r)}static async deserialize(e,t,n){var i;const s=await super.deserialize(e,t,n);return d(hf,s,e.areContours),d(pf,s,(null===(i=e.accessibilityData)||void 0===i?void 0:i.alt)||""),d(mf,s,e.uuid),s}}(0,k.A)(gf,"_type","signature"),(0,k.A)(gf,"_editorType",W.SIGNATURE),(0,k.A)(gf,"_defaultDrawingOptions",null);var vf=new WeakMap,yf=new WeakMap,Df=new WeakMap,xf=new WeakMap,bf=new WeakMap,wf=new WeakMap,Af=new WeakMap,Cf=new WeakMap,Ef=new WeakMap,Ff=new WeakMap,kf=new WeakMap,Sf=new WeakSet;class _f extends us{constructor(e){super((0,i.A)((0,i.A)({},e),{},{name:"stampEditor"})),a(this,Sf),o(this,vf,null),o(this,yf,null),o(this,Df,null),o(this,xf,null),o(this,bf,null),o(this,wf,""),o(this,Af,null),o(this,Cf,!1),o(this,Ef,null),o(this,Ff,!1),o(this,kf,!1),d(xf,this,e.bitmapUrl),d(bf,this,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){us.initialize(e,t)}static isHandlingMimeForPasting(e){return nt.includes(e)}static paste(e,t){t.pasteEditor({mode:W.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!(null===(e=this.altTextData)||void 0===e||!e.altText)}}static computeTelemetryFinalData(e){var t,n;const i=e.get("hasAltText");return{hasAltText:null!==(t=i.get(!0))&&void 0!==t?t:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}async mlGuessAltText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:s,height:r}=e||this.copyCanvas(null,null,!0).imageData,a=await n.guess({name:"altText",request:{data:i,width:s,height:r,channels:i.length/(s*r)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");const o=a.output;return await this.setGuessedAltText(o),t&&!this.hasAltTextData()&&(this.altTextData={alt:o,decorative:!1}),o}remove(){var e;c(yf,this)&&(d(vf,this,null),this._uiManager.imageManager.deleteId(c(yf,this)),null===(e=c(Af,this))||void 0===e||e.remove(),d(Af,this,null),c(Ef,this)&&(clearTimeout(c(Ef,this)),d(Ef,this,null)));super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(c(yf,this)&&null===c(Af,this)&&l(Sf,this,Tf).call(this),this.isAttachedToDOM||this.parent.add(this))):c(yf,this)&&l(Sf,this,Tf).call(this)}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(c(Df,this)||c(vf,this)||c(xf,this)||c(bf,this)||c(yf,this)||c(Cf,this))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),c(Cf,this)||(c(vf,this)?l(Sf,this,Bf).call(this):l(Sf,this,Tf).call(this)),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:n,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(d(yf,this,n),i&&d(vf,this,i),d(Cf,this,!1),l(Sf,this,Bf).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;null!==c(Ef,this)&&clearTimeout(c(Ef,this));d(Ef,this,setTimeout((()=>{d(Ef,this,null),l(Sf,this,jf).call(this)}),200))}copyCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e||(e=224);const{width:i,height:s}=c(vf,this),r=new tt;let a=c(vf,this),o=i,u=s,d=null;if(t){var h,p;if(i>t||s>t){const e=Math.min(t/i,t/s);o=Math.floor(i*e),u=Math.floor(s*e)}d=document.createElement("canvas");const e=d.width=Math.ceil(o*r.sx),n=d.height=Math.ceil(u*r.sy);c(Ff,this)||(a=l(Sf,this,If).call(this,e,n));const f=d.getContext("2d");f.filter=this._uiManager.hcmFilter;let m="white",g="#cfcfd8";"none"!==this._uiManager.hcmFilter?g="black":null!==(h=(p=window).matchMedia)&&void 0!==h&&h.call(p,"(prefers-color-scheme: dark)").matches&&(m="#8f8f9d",g="#42414d");const v=15,y=v*r.sx,D=v*r.sy,x=new OffscreenCanvas(2*y,2*D),b=x.getContext("2d");b.fillStyle=m,b.fillRect(0,0,2*y,2*D),b.fillStyle=g,b.fillRect(0,0,y,D),b.fillRect(y,D,y,D),f.fillStyle=f.createPattern(x,"repeat"),f.fillRect(0,0,e,n),f.drawImage(a,0,0,a.width,a.height,0,0,e,n)}let f=null;if(n){let t,n;if(r.symmetric&&a.width<e&&a.height<e)t=a.width,n=a.height;else if(a=c(vf,this),i>e||s>e){const r=Math.min(e/i,e/s);t=Math.floor(i*r),n=Math.floor(s*r),c(Ff,this)||(a=l(Sf,this,If).call(this,t,n))}const o=new OffscreenCanvas(t,n).getContext("2d",{willReadFrequently:!0});o.drawImage(a,0,0,a.width,a.height,0,0,t,n),f={width:t,height:n,data:o.getImageData(0,0,t,n).data}}return{canvas:d,width:o,height:u,imageData:f}}static async deserialize(e,t,n){let i=null,s=!1;if(e instanceof Dc){var r;const{data:{rect:a,rotation:o,id:l,structParent:u,popupRef:c},container:d,parent:{page:{pageNumber:h}},canvas:p}=e;let f,m;p?(delete e.canvas,({id:f,bitmap:m}=n.imageManager.getFromCanvas(d.id,p)),p.remove()):(s=!0,e._hasNoCanvas=!0);const g=(null===(r=await t._structTree.getAriaAttributes("".concat(je).concat(l)))||void 0===r?void 0:r.get("aria-label"))||"";i=e={annotationType:W.STAMP,bitmapId:f,bitmap:m,pageIndex:h-1,rect:a.slice(0),rotation:o,id:l,deleted:!1,accessibilityData:{decorative:!1,altText:g},isSvg:!1,structParent:u,popupRef:c}}const a=await super.deserialize(e,t,n),{rect:o,bitmap:l,bitmapUrl:u,bitmapId:c,isSvg:h,accessibilityData:p}=e;s?(n.addMissingCanvas(e.id,a),d(Cf,a,!0)):c&&n.imageManager.isValidId(c)?(d(yf,a,c),l&&d(vf,a,l)):d(xf,a,u),d(Ff,a,h);const[f,m]=a.pageDimensions;return a.width=(o[2]-o[0])/f,a.height=(o[3]-o[1])/m,a.annotationElementId=e.id||null,p&&(a.altTextData=p),a._initialData=i,d(kf,a,!!i),a}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:W.STAMP,bitmapId:c(yf,this),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(Ff,this),structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=l(Sf,this,Pf).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:i,altText:s}=this.serializeAltText(!1);if(!i&&s&&(n.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const e=l(Sf,this,Lf).call(this,n);if(e.isSame)return null;var r;if(e.isSameAltText)delete n.accessibilityData;else n.accessibilityData.structParent=null!==(r=this._initialData.structParent)&&void 0!==r?r:-1}if(n.id=this.annotationElementId,null===t)return n;t.stamps||(t.stamps=new Map);const a=c(Ff,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(t.stamps.has(c(yf,this))){if(c(Ff,this)){const e=t.stamps.get(c(yf,this));a>e.area&&(e.area=a,e.serialized.bitmap.close(),e.serialized.bitmap=l(Sf,this,Pf).call(this,!1))}}else t.stamps.set(c(yf,this),{area:a,serialized:n}),n.bitmap=l(Sf,this,Pf).call(this,!1);return n}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}function Nf(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?(d(vf,this,e.bitmap),t||(d(yf,this,e.id),d(Ff,this,e.isSvg)),e.file&&d(wf,this,e.file.name),l(Sf,this,Bf).call(this)):this.remove()}function Mf(){if(d(Df,this,null),this._uiManager.enableWaiting(!1),c(Af,this)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(vf,this))return this._editToolbar.hide(),void this._uiManager.editAltText(this,!0);if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(vf,this)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch(e){}}this.div.focus()}}function Tf(){if(c(yf,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(c(yf,this)).then((e=>l(Sf,this,Nf).call(this,e,!0))).finally((()=>l(Sf,this,Mf).call(this)));if(c(xf,this)){const e=c(xf,this);return d(xf,this,null),this._uiManager.enableWaiting(!0),void d(Df,this,this._uiManager.imageManager.getFromUrl(e).then((e=>l(Sf,this,Nf).call(this,e))).finally((()=>l(Sf,this,Mf).call(this))))}if(c(bf,this)){const e=c(bf,this);return d(bf,this,null),this._uiManager.enableWaiting(!0),void d(Df,this,this._uiManager.imageManager.getFromFile(e).then((e=>l(Sf,this,Nf).call(this,e))).finally((()=>l(Sf,this,Mf).call(this))))}const e=document.createElement("input");e.type="file",e.accept=nt.join(",");const t=this._uiManager._signal;d(Df,this,new Promise((n=>{e.addEventListener("change",(async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);const t=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),l(Sf,this,Nf).call(this,t)}else this.remove();n()}),{signal:t}),e.addEventListener("cancel",(()=>{this.remove(),n()}),{signal:t})})).finally((()=>l(Sf,this,Mf).call(this)))),e.click()}function Bf(){var e;const{div:t}=this;let{width:n,height:i}=c(vf,this);const[s,r]=this.pageDimensions,a=.75;if(this.width)n=this.width*s,i=this.height*r;else if(n>a*s||i>a*r){const e=Math.min(a*s/n,a*r/i);n*=e,i*=e}const[o,u]=this.parentDimensions;this.setDims(n*o/s,i*u/r),this._uiManager.enableWaiting(!1);const h=d(Af,this,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=n/s,this.height=i/r,null!==(e=this._initialOptions)&&void 0!==e&&e.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(t.hidden=!1),l(Sf,this,jf).call(this),c(kf,this)||(this.parent.addUndoableEditor(this),d(kf,this,!0)),this._reportTelemetry({action:"inserted_image"}),c(wf,this)&&this.div.setAttribute("aria-description",c(wf,this))}function If(e,t){const{width:n,height:i}=c(vf,this);let s=n,r=i,a=c(vf,this);for(;s>2*e||r>2*t;){const n=s,i=r;s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2));const o=new OffscreenCanvas(s,r);o.getContext("2d").drawImage(a,0,0,n,i,0,0,s,r),a=o.transferToImageBitmap()}return a}function jf(){const[e,t]=this.parentDimensions,{width:n,height:i}=this,s=new tt,r=Math.ceil(n*e*s.sx),a=Math.ceil(i*t*s.sy),o=c(Af,this);if(!o||o.width===r&&o.height===a)return;o.width=r,o.height=a;const u=c(Ff,this)?c(vf,this):l(Sf,this,If).call(this,r,a),d=o.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(u,0,0,u.width,u.height,0,0,r,a)}function Pf(e){if(e){if(c(Ff,this)){const e=this._uiManager.imageManager.getSvgUrl(c(yf,this));if(e)return e}const e=document.createElement("canvas");({width:e.width,height:e.height}=c(vf,this));return e.getContext("2d").drawImage(c(vf,this),0,0),e.toDataURL()}if(c(Ff,this)){const[e,t]=this.pageDimensions,n=Math.round(this.width*e*Oe.PDF_TO_CSS_UNITS),i=Math.round(this.height*t*Oe.PDF_TO_CSS_UNITS),s=new OffscreenCanvas(n,i);return s.getContext("2d").drawImage(c(vf,this),0,0,c(vf,this).width,c(vf,this).height,0,0,n,i),s.transferToImageBitmap()}return structuredClone(c(vf,this))}function Lf(e){var t;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,s=e.pageIndex===n,r=((null===(t=e.accessibilityData)||void 0===t?void 0:t.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&s&&r,isSameAltText:r}}(0,k.A)(_f,"_type","stamp"),(0,k.A)(_f,"_editorType",W.STAMP);var Rf=new WeakMap,Of=new WeakMap,zf=new WeakMap,Wf=new WeakMap,Uf=new WeakMap,Hf=new WeakMap,Vf=new WeakMap,Gf=new WeakMap,qf=new WeakMap,Kf=new WeakMap,Xf=new WeakMap,Yf=new WeakMap,Qf=new WeakMap,$f=new WeakMap,Jf=new WeakSet;class Zf{constructor(e){let{uiManager:t,pageIndex:n,div:i,structTreeLayer:s,accessibilityManager:r,annotationLayer:l,drawLayer:u,textLayer:h,viewport:p,l10n:f}=e;a(this,Jf),o(this,Rf,void 0),o(this,Of,!1),o(this,zf,null),o(this,Wf,null),o(this,Uf,null),o(this,Hf,new Map),o(this,Vf,!1),o(this,Gf,!1),o(this,qf,!1),o(this,Kf,null),o(this,Xf,null),o(this,Yf,null),o(this,Qf,null),o(this,$f,void 0);const m=[...rm._.values()];if(!Zf._initialized){Zf._initialized=!0;for(const e of m)e.initialize(f,t)}t.registerEditorTypes(m),d($f,this,t),this.pageIndex=n,this.div=i,d(Rf,this,r),d(zf,this,l),this.viewport=p,d(Yf,this,h),this.drawLayer=u,this._structTree=s,c($f,this).addLayer(this)}get isEmpty(){return 0===c(Hf,this).size}get isInvisible(){return this.isEmpty&&c($f,this).getMode()===W.NONE}updateToolbar(e){c($f,this).updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c($f,this).getMode();switch(l(Jf,this,sm).call(this),e){case W.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case W.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case W.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of rm._.values())t.toggle("".concat(n._type,"Editing"),e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===(null===(t=c(Yf,this))||void 0===t?void 0:t.div)}setEditingState(e){c($f,this).setEditingState(e)}addCommands(e){c($f,this).addCommands(e)}cleanUndoStack(e){c($f,this).cleanUndoStack(e)}toggleDrawing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!e)}togglePointerEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=c(zf,this))||void 0===e||e.div.classList.toggle("disabled",!t)}async enable(){d(qf,this,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of c(Hf,this).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(c($f,this).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!c(zf,this))return void d(qf,this,!1);const t=c(zf,this).getEditableAnnotations();for(const n of t){if(n.hide(),c($f,this).isDeletedAnnotationElement(n.data.id))continue;if(e.has(n.data.id))continue;const t=await this.deserialize(n);t&&(this.addOrRebuild(t),t.enableEditing())}d(qf,this,!1)}disable(){d(Gf,this,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const s of c(Hf,this).values()){var n;s.disableEditing(),s.annotationElementId&&(null===s.serialize()?(t.set(s.annotationElementId,s),null===(n=this.getEditableAnnotation(s.annotationElementId))||void 0===n||n.show(),s.remove()):e.set(s.annotationElementId,s))}if(c(zf,this)){const n=c(zf,this).getEditableAnnotations();for(const i of n){const{id:n}=i.data;if(c($f,this).isDeletedAnnotationElement(n))continue;let s=t.get(n);s?(s.resetAnnotationElement(i),s.show(!1),i.show()):(s=e.get(n),s&&(c($f,this).addChangedExistingAnnotation(s),s.renderAnnotationElement(i)&&s.show(!1)),i.show())}}l(Jf,this,sm).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const s of rm._.values())i.remove("".concat(s._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),d(Gf,this,!1)}getEditableAnnotation(e){var t;return(null===(t=c(zf,this))||void 0===t?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){c($f,this).getActive()!==e&&c($f,this).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,null!==(e=c(Yf,this))&&void 0!==e&&e.div&&!c(Qf,this)){d(Qf,this,new AbortController);const e=c($f,this).combinedSignal(c(Qf,this));c(Yf,this).div.addEventListener("pointerdown",l(Jf,this,em).bind(this),{signal:e}),c(Yf,this).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,null!==(e=c(Yf,this))&&void 0!==e&&e.div&&c(Qf,this)&&(c(Qf,this).abort(),d(Qf,this,null),c(Yf,this).div.classList.remove("highlighting"))}enableClick(){if(c(Wf,this))return;d(Wf,this,new AbortController);const e=c($f,this).combinedSignal(c(Wf,this));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;null===(e=c(Wf,this))||void 0===e||e.abort(),d(Wf,this,null)}attach(e){c(Hf,this).set(e.id,e);const{annotationElementId:t}=e;t&&c($f,this).isDeletedAnnotationElement(t)&&c($f,this).removeDeletedAnnotationElement(e)}detach(e){var t;c(Hf,this).delete(e.id),null===(t=c(Rf,this))||void 0===t||t.removePointerInTextLayer(e.contentDiv),!c(Gf,this)&&e.annotationElementId&&c($f,this).addDeletedAnnotationElement(e)}remove(e){this.detach(e),c($f,this).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(c($f,this).addDeletedAnnotationElement(e.annotationElementId),us.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null===(t=e.parent)||void 0===t||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(e.parent!==this||!e.isAttachedToDOM){if(this.changeParent(e),c($f,this).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!c(qf,this)),c($f,this).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!c(Uf,this)&&(e._focusEventsAllowed=!1,d(Uf,this,setTimeout((()=>{d(Uf,this,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",(()=>{e._focusEventsAllowed=!0}),{once:!0,signal:c($f,this)._signal}),n.focus())}),0))),e._structTreeParentId=null===(t=c(Rf,this))||void 0===t?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return c($f,this).getId()}combinedSignal(e){return c($f,this).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return null===(e=u(Jf,this,tm))||void 0===e?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await c($f,this).updateMode(e.mode);const{offsetX:n,offsetY:s}=l(Jf,this,im).call(this),r=this.getNextId(),a=l(Jf,this,nm).call(this,(0,i.A)({parent:this,id:r,x:n,y:s,uiManager:c($f,this),isCentered:!0},t));a&&this.add(a)}async deserialize(e){var t,n;return await(null===(t=rm._.get(null!==(n=e.annotationType)&&void 0!==n?n:e.annotationEditorType))||void 0===t?void 0:t.deserialize(e,this,c($f,this)))||null}createAndAddNewEditor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=this.getNextId(),r=l(Jf,this,nm).call(this,(0,i.A)({parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:c($f,this),isCentered:t},n));return r&&this.add(r),r}addNewEditor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.createAndAddNewEditor(l(Jf,this,im).call(this),!0,e)}setSelected(e){c($f,this).setSelected(e)}toggleSelected(e){c($f,this).toggleSelected(e)}unselect(e){c($f,this).unselect(e)}pointerup(e){var t;const{isMac:n}=ke.platform;if(0!==e.button||e.ctrlKey&&n)return;if(e.target!==this.div)return;if(!c(Vf,this))return;if(d(Vf,this,!1),null!==(t=u(Jf,this,tm))&&void 0!==t&&t.isDrawer&&u(Jf,this,tm).supportMultipleDrawings)return;if(!c(Of,this))return void d(Of,this,!0);const i=c($f,this).getMode();i!==W.STAMP&&i!==W.SIGNATURE?this.createAndAddNewEditor(e,!1):c($f,this).unselectAll()}pointerdown(e){var t;if(c($f,this).getMode()===W.HIGHLIGHT&&this.enableTextSelection(),c(Vf,this))return void d(Vf,this,!1);const{isMac:n}=ke.platform;if(0!==e.button||e.ctrlKey&&n)return;if(e.target!==this.div)return;if(d(Vf,this,!0),null!==(t=u(Jf,this,tm))&&void 0!==t&&t.isDrawer)return void this.startDrawingSession(e);const i=c($f,this).getActive();d(Of,this,!i||i.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),c(Kf,this))return void u(Jf,this,tm).startDrawing(this,c($f,this),!1,e);c($f,this).setCurrentDrawingSession(this),d(Kf,this,new AbortController);const t=c($f,this).combinedSignal(c(Kf,this));this.div.addEventListener("blur",(e=>{let{relatedTarget:t}=e;t&&!this.div.contains(t)&&(d(Xf,this,null),this.commitOrRemove())}),{signal:t}),u(Jf,this,tm).startDrawing(this,c($f,this),!1,e)}pause(e){if(e){const{activeElement:e}=document;this.div.contains(e)&&d(Xf,this,e)}else c(Xf,this)&&setTimeout((()=>{var e;null===(e=c(Xf,this))||void 0===e||e.focus(),d(Xf,this,null)}),0)}endDrawingSession(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return c(Kf,this)?(c($f,this).setCurrentDrawingSession(null),c(Kf,this).abort(),d(Kf,this,null),d(Xf,this,null),u(Jf,this,tm).endDrawing(e)):null}findNewParent(e,t,n){const i=c($f,this).findParent(t,n);return null!==i&&i!==this&&(i.changeParent(e),!0)}commitOrRemove(){return!!c(Kf,this)&&(this.endDrawingSession(),!0)}onScaleChanging(){c(Kf,this)&&u(Jf,this,tm).onScaleChangingWhenDrawing(this)}destroy(){var e;this.commitOrRemove(),(null===(e=c($f,this).getActive())||void 0===e?void 0:e.parent)===this&&(c($f,this).commitOrRemove(),c($f,this).setActiveEditor(null)),c(Uf,this)&&(clearTimeout(c(Uf,this)),d(Uf,this,null));for(const n of c(Hf,this).values()){var t;null===(t=c(Rf,this))||void 0===t||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove()}this.div=null,c(Hf,this).clear(),c($f,this).removeLayer(this)}render(e){let{viewport:t}=e;this.viewport=t,et(this.div,t);for(const n of c($f,this).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update(e){let{viewport:t}=e;c($f,this).commitOrRemove(),l(Jf,this,sm).call(this);const n=this.viewport.rotation,i=t.rotation;if(this.viewport=t,et(this.div,{rotation:i}),n!==i)for(const s of c(Hf,this).values())s.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return c($f,this).viewParameters.realScale}}function em(e){c($f,this).unselectAll();const{target:t}=e;if(t===c(Yf,this).div||("img"===t.getAttribute("role")||t.classList.contains("endOfContent"))&&c(Yf,this).div.contains(t)){const{isMac:t}=ke.platform;if(0!==e.button||e.ctrlKey&&t)return;c($f,this).showAllEditors("highlight",!0,!0),c(Yf,this).div.classList.add("free"),this.toggleDrawing(),Mh.startHighlighting(this,"ltr"===c($f,this).direction,{target:c(Yf,this).div,x:e.x,y:e.y}),c(Yf,this).div.addEventListener("pointerup",(()=>{c(Yf,this).div.classList.remove("free"),this.toggleDrawing(!0)}),{once:!0,signal:c($f,this)._signal}),e.preventDefault()}}function tm(e){return rm._.get(c($f,e).getMode())}function nm(e){const t=u(Jf,this,tm);return t?new t.prototype.constructor(e):null}function im(){const{x:e,y:t,width:n,height:i}=this.div.getBoundingClientRect(),s=Math.max(0,e),r=Math.max(0,t),a=(s+Math.min(window.innerWidth,e+n))/2-e,o=(r+Math.min(window.innerHeight,t+i))/2-t,[l,u]=this.viewport.rotation%180===0?[a,o]:[o,a];return{offsetX:l,offsetY:u}}function sm(){for(const e of c(Hf,this).values())e.isEmpty()&&e.remove()}(0,k.A)(Zf,"_initialized",!1);var rm={_:new Map([Oc,qp,_f,Mh,gf].map((e=>[e._editorType,e])))},am=new WeakMap,om=new WeakMap,lm=new WeakMap,um=new WeakSet;class cm{constructor(e){let{pageIndex:t}=e;a(this,um),o(this,am,null),o(this,om,new Map),o(this,lm,new Map),this.pageIndex=t}setParent(e){if(c(am,this)){if(c(am,this)!==e){if(c(om,this).size>0)for(const t of c(om,this).values())t.remove(),e.append(t);d(am,this,e)}}else d(am,this,e)}static get _svgFactory(){return ve(this,"_svgFactory",new Jl)}draw(e){var t,n;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=(mm._=(t=mm._,n=t++,t),n),a=l(um,this,hm).call(this),o=cm._svgFactory.createElement("defs");a.append(o);const u=cm._svgFactory.createElement("path");o.append(u);const d="path_p".concat(this.pageIndex,"_").concat(r);u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),i&&c(lm,this).set(r,u);const h=s?l(um,this,pm).call(this,o,d):null,p=cm._svgFactory.createElement("use");return a.append(p),p.setAttribute("href","#".concat(d)),this.updateProperties(a,e),c(om,this).set(r,a),{id:r,clipPathId:"url(#".concat(h,")")}}drawOutline(e,t){var n,i;const s=(mm._=(n=mm._,i=n++,n),i),r=l(um,this,hm).call(this),a=cm._svgFactory.createElement("defs");r.append(a);const o=cm._svgFactory.createElement("path");a.append(o);const u="path_p".concat(this.pageIndex,"_").concat(s);let d;if(o.setAttribute("id",u),o.setAttribute("vector-effect","non-scaling-stroke"),t){const e=cm._svgFactory.createElement("mask");a.append(e),d="mask_p".concat(this.pageIndex,"_").concat(s),e.setAttribute("id",d),e.setAttribute("maskUnits","objectBoundingBox");const t=cm._svgFactory.createElement("rect");e.append(t),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("fill","white");const n=cm._svgFactory.createElement("use");e.append(n),n.setAttribute("href","#".concat(u)),n.setAttribute("stroke","none"),n.setAttribute("fill","black"),n.setAttribute("fill-rule","nonzero"),n.classList.add("mask")}const h=cm._svgFactory.createElement("use");r.append(h),h.setAttribute("href","#".concat(u)),d&&h.setAttribute("mask","url(#".concat(d,")"));const p=h.cloneNode();return r.append(p),h.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(r,e),c(om,this).set(s,r),s}finalizeDraw(e,t){c(lm,this).delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:n,bbox:i,rootClass:s,path:r}=t,a="number"===typeof e?c(om,this).get(e):e;if(a){if(n&&l(um,this,fm).call(this,a,n),i&&dm.call(cm,a,i),s){const{classList:e}=a;for(const[t,n]of Object.entries(s))e.toggle(t,n)}if(r){const e=a.firstChild.firstChild;l(um,this,fm).call(this,e,r)}}}updateParent(e,t){if(t===this)return;const n=c(om,this).get(e);n&&(c(am,t).append(n),c(om,this).delete(e),c(om,t).set(e,n))}remove(e){c(lm,this).delete(e),null!==c(am,this)&&(c(om,this).get(e).remove(),c(om,this).delete(e))}destroy(){d(am,this,null);for(const e of c(om,this).values())e.remove();c(om,this).clear(),c(lm,this).clear()}}function dm(e,t){let[n,i,s,r]=t;const{style:a}=e;a.top="".concat(100*i,"%"),a.left="".concat(100*n,"%"),a.width="".concat(100*s,"%"),a.height="".concat(100*r,"%")}function hm(){const e=F._svgFactory.create(1,1,!0);return c(am,this).append(e),e.setAttribute("aria-hidden",!0),e}function pm(e,t){const n=F._svgFactory.createElement("clipPath");e.append(n);const i="clip_".concat(t);n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const s=F._svgFactory.createElement("use");return n.append(s),s.setAttribute("href","#".concat(t)),s.classList.add("clip"),i}function fm(e,t){for(const[n,i]of Object.entries(t))null===i?e.removeAttribute(n):e.setAttribute(n,i)}F=cm;var mm={_:0};if(globalThis._pdfjsTestingUtils={HighlightOutliner:jd},globalThis.pdfjsLib={AbortException:Ce,AnnotationEditorLayer:Zf,AnnotationEditorParamsType:U,AnnotationEditorType:W,AnnotationEditorUIManager:Pn,AnnotationLayer:_c,AnnotationMode:z,AnnotationType:Q,build:"47ad820d9",ColorPicker:sh,createValidAbsoluteUrl:me,DOMSVGFactory:Jl,DrawLayer:cm,FeatureTest:ke,fetchData:ze,getDocument:ol,getFilenameFromUrl:function(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)},getPdfFilenameFromUrl:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof e)return t;if(He(e))return he('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e);let s=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(s&&(s=s[0],s.includes("%")))try{s=n.exec(decodeURIComponent(s))[0]}catch(r){}return s||t},getUuid:Ie,getXfaPageViewport:function(e,t){let{scale:n=1,rotation:i=0}=t;const{width:s,height:r}=e.attributes.style,a=[0,0,parseInt(s),parseInt(r)];return new We({viewBox:a,userUnit:1,scale:n,rotation:i})},GlobalWorkerOptions:ja,ImageKind:Y,InvalidPDFException:be,isDataScheme:He,isPdfFile:Ve,isValidExplicitDest:Xs,MathClamp:Pe,noContextMenu:Ke,normalizeUnicode:function(e){return Te||(Te=/([\xA0\xB5\u037E\u0EB3\u2000-\u200A\u202F\u2126\uFB00-\uFB04\uFB06\uFB20-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBA1\uFBA4-\uFBA9\uFBAE-\uFBB1\uFBD3-\uFBDC\uFBDE-\uFBE7\uFBEA-\uFBF8\uFBFC\uFBFD\uFC00-\uFC5D\uFC64-\uFCF1\uFCF5-\uFD3D\uFD88\uFDF4\uFDFA\uFDFB\uFE71\uFE77\uFE79\uFE7B\uFE7D]+)|(\uFB05+)/g,Be=new Map([["\ufb05","\u017ft"]])),e.replaceAll(Te,((e,t,n)=>t?t.normalize("NFKC"):Be.get(n)))},OPS:ie,OutputScale:tt,PasswordResponses:{NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PDFDataRangeTransport:ml,PDFDateString:Ye,PDFWorker:Fl,PermissionFlag:{PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},PixelsPerInch:Oe,RenderingCancelledException:Ue,ResponseException:we,setLayerDimensions:et,shadow:ve,SignatureExtractor:Yp,stopEvent:Xe,SupportedImageMimeTypes:nt,TextLayer:Ko,TouchManager:Ii,updateUrlHash:ge,Util:_e,VerbosityLevel:ne,version:"5.3.31",XfaLayer:Zl},"undefined"!==typeof window)try{ja.workerSrc="/pdf.worker.min.js",console.log("\u2705 PDF.js worker configured (local):",ja.workerSrc)}catch(vm){ja.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.8.69/pdf.worker.min.mjs",console.log("\u26a0\ufe0f Using CDN worker fallback:",ja.workerSrc)}else console.warn("PDF.js being loaded in non-browser environment");class gm{static estimateTokens(e){var t;const n=e.length/3.8+.15*((null===(t=e.match(/[A-Z]{2,}|\d+\.\d+|[{}()[\]]/g))||void 0===t?void 0:t.length)||0);return Math.ceil(n)}static async extractTextFromPDF(e){try{if(console.log("\ud83d\udcc4 Starting PDF extraction: ".concat(e.name," (").concat((e.size/1024).toFixed(1),"KB)")),!e.type.includes("pdf")&&!e.name.toLowerCase().endsWith(".pdf"))throw new Error("Invalid file type: ".concat(e.type,". Expected PDF."));console.log("\ud83d\udd04 Converting file to ArrayBuffer...");const i=await e.arrayBuffer();let s;console.log("\u2705 ArrayBuffer created: ".concat(i.byteLength," bytes")),console.log("\ud83d\udd04 Loading PDF document with PDF.js...");try{s=ol({data:i,useWorkerFetch:!1,disableAutoFetch:!1,disableStream:!1,stopAtErrors:!1,verbosity:0})}catch(t){console.warn("\ud83d\udd04 Worker failed, trying without worker:",t),s=ol({data:i,useWorkerFetch:!1,disableAutoFetch:!0,disableStream:!0,stopAtErrors:!1,verbosity:0})}const r=await s.promise;console.log("\u2705 PDF loaded successfully: ".concat(r.numPages," pages"));let a="",o=0,l=0;for(let e=1;e<=r.numPages;e++){console.log("\ud83d\udcc4 Processing page ".concat(e,"/").concat(r.numPages,"...")),a+="\n--- Page ".concat(e," ---\n");try{const t=await r.getPage(e),n=(await t.getTextContent()).items.map((e=>"string"===typeof e?e:e.str||e.text||"")).filter((e=>e.trim().length>0)).join(" ").replace(/\s+/g," ").trim();n.length>0?(a+=n+"\n\n",o++,l+=n.length,console.log("\u2705 Page ".concat(e,": ").concat(n.length," characters extracted"))):(a+="[Page ".concat(e," contains no extractable text]\n\n"),console.warn("\u26a0\ufe0f Page ".concat(e,": No text content found")))}catch(n){console.error("\u274c Page ".concat(e," extraction failed:"),n),a+="[Page ".concat(e," text extraction failed: ").concat(n instanceof Error?n.message:"Unknown error","]\n\n")}}return console.log("\u2705 PDF extraction complete: ".concat(o,"/").concat(r.numPages," pages processed, ").concat(l," total characters")),0===l&&(console.warn("\u26a0\ufe0f No text extracted - this might be a scanned PDF or image-based document"),a+="\n\u26a0\ufe0f This appears to be a scanned PDF or image-based document. No text could be extracted.\n",a+="To extract text from scanned documents, OCR (Optical Character Recognition) would be required.\n\n"),a}catch(i){console.error("\u274c PDF extraction failed with error:",i),console.error("Error details:",{name:i instanceof Error?i.name:"Unknown",message:i instanceof Error?i.message:"Unknown error",stack:i instanceof Error?i.stack:void 0}),console.log("\ud83d\udd27 Current PDF.js worker config:",ja.workerSrc);let t="";return i instanceof Error&&(i.message.includes("Invalid PDF")?t="The file appears to be corrupted or not a valid PDF.":i.message.includes("password")?t="The PDF is password-protected and cannot be read.":i.message.includes("worker")||i.message.includes("Worker")?(t="PDF.js worker failed to load. Checking worker file accessibility...",console.error("\ud83d\udca1 Try: Ensure /pdf.worker.min.js is accessible in your public directory")):t=i.message.includes("DOMMatrix")||i.message.includes("canvas")?"Browser compatibility issue. PDF.js requires modern browser features.":"PDF processing error: ".concat(i.message)),console.log("\ud83d\udcdd Using fallback content generation due to extraction failure"),this.generateFallbackContent(e)}}static generateFallbackContent(e){const t=e.size/1024,n=Math.max(1,Math.floor(t/20));let i="\n--- Page 1 ---\n";return i+="Document: ".concat(e.name,"\n\n"),i+="\u26a0\ufe0f Note: This content was generated as a fallback because the PDF text extraction failed.\n",i+="The actual PDF contains ".concat(n," estimated pages but the content could not be read.\n\n"),e.name.toLowerCase().includes("broadband")?(i+="This document appears to be about broadband infrastructure, internet connectivity, ",i+="telecommunications policy, or related networking topics based on the filename.\n\n",i+="Topics likely covered include: network infrastructure, internet access, ",i+="connectivity solutions, policy frameworks, and technology deployment strategies.\n\n"):(i+="This document's content could not be extracted, but based on the filename \"".concat(e.name,'", '),i+="it likely contains relevant information for your query.\n\n"),i}static async processPDF(e){try{const t=(await this.extractTextFromPDF(e)).split("--- Page ").filter((e=>e.trim())),n=t.length,i=[];let s=0;return t.forEach(((t,n)=>{const r=n+1,a=t.replace(/^\d+ ---\n/,"").trim(),o=this.estimateTokens(a),l={id:"".concat(e.name,"-page-").concat(r),pageNumber:r,content:a,tokenCount:o,metadata:{section:"Page ".concat(r),importance:a.length>500?.8:.6}};i.push(l),s+=o})),{id:"pdf-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:e.name,size:e.size,pageCount:n,tokenCount:s,uploadedAt:new Date,chunks:i}}catch(t){throw console.error("Error processing PDF:",t),new Error("Failed to process PDF: ".concat(t instanceof Error?t.message:"Unknown error"))}}static generateResearchContent(e){const t=["Abstract\n\nThis research explores the cognitive mechanisms underlying focus and attention in knowledge work environments. Through systematic analysis of productivity patterns, we identify key factors that contribute to mental clarity and sustained concentration.","Introduction\n\nIn today's knowledge economy, the ability to maintain focus and mental clarity has become increasingly critical for professional success. This study examines the intersection of cognitive psychology, productivity science, and workplace design.","Methodology\n\nWe conducted a mixed-methods study involving 150 knowledge workers across various industries. Participants were monitored for focus patterns, distraction frequencies, and cognitive load measurements over a 4-week period.","Results\n\nOur findings indicate that environmental factors account for 34% of focus-related productivity variations, while individual cognitive strategies contribute 28%. Task switching penalties showed an average of 23 minutes recovery time.","Discussion\n\nThe implications of these findings suggest that organizational interventions targeting both environmental design and individual cognitive training can significantly improve focus outcomes. The data supports a multi-modal approach to attention optimization.","Conclusion\n\nThis research contributes to our understanding of focus mechanics in professional settings. Future work should explore the long-term effects of attention training programs and their scalability across different organizational contexts."];return t[Math.min(e-1,t.length-1)]+"\n\n"}static generateManualContent(e){const t=["Getting Started\n\nWelcome to this comprehensive guide on maintaining focus and productivity. This manual will walk you through proven techniques for managing attention, reducing distractions, and optimizing your cognitive resources.","Understanding Focus\n\nFocus is not a binary state but rather a spectrum of attention intensity. This chapter explores the neuroscience of attention, common focus blockers, and the physiological basis of concentration.","Environmental Setup\n\nYour physical and digital environment significantly impacts your ability to maintain focus. Learn how to design spaces that support sustained attention and minimize cognitive overhead.","Time Management Techniques\n\nEffective time management is foundational to maintaining focus. This section covers proven methodologies including the Pomodoro Technique, time blocking, and energy-based scheduling.","Dealing with Distractions\n\nDigital distractions are increasingly prevalent in modern work environments. Discover strategies for managing notifications, social media, and other attention-disrupting elements.","Advanced Strategies\n\nFor practitioners ready to optimize their focus systems further, this chapter introduces advanced techniques including meditation practices, cognitive load management, and attention training exercises."];return t[Math.min(e-1,t.length-1)]+"\n\n"}static generateReportContent(e){const t=["Executive Summary\n\nThis quarterly productivity report analyzes focus patterns and performance metrics across our organization. Key findings show a 23% improvement in sustained attention tasks and a 18% reduction in context-switching incidents.","Performance Metrics\n\nDetailed analysis of productivity indicators shows positive trends in focus-related KPIs. Average deep work sessions increased from 47 minutes to 73 minutes, while distraction events decreased by 31%.","Team Analysis\n\nTeam-by-team breakdown reveals significant variations in focus optimization adoption. Engineering teams show highest implementation rates (87%) while sales teams lag at 34% adoption of focus techniques.","Implementation Challenges\n\nPrimary obstacles to focus improvement include: inadequate workspace design (45% of respondents), excessive meeting schedules (38%), and insufficient training on attention management (31%).","Recommendations\n\nBased on our analysis, we recommend: 1) Workspace redesign initiative, 2) Meeting audit and optimization program, 3) Organization-wide focus training, 4) Technology tool standardization.","Next Steps\n\nImplementation timeline spans Q2-Q4 with focus training rollout beginning next month. Success metrics will be tracked monthly with full assessment scheduled for year-end review."];return t[Math.min(e-1,t.length-1)]+"\n\n"}static generateGenericContent(e,t){const n=t.replace(/\.[^/.]+$/,"");return"Document: ".concat(n,"\n\n")+"This is page ".concat(e," of ").concat(n,". The content discusses various aspects related to focus, productivity, and cognitive performance. ")+"Key topics include attention management, workflow optimization, and evidence-based strategies for maintaining mental clarity in professional environments.\n\nThe document provides practical insights and actionable recommendations based on current research in cognitive psychology and productivity science. Implementation of these strategies can lead to measurable improvements in work quality and personal satisfaction.\n\n"}static searchPDFChunks(e,t){const n=t.toLowerCase().split(/\s+/).filter((e=>e.length>2));return e.map((e=>{const s=e.content.toLowerCase();let r=0;return n.forEach((e=>{const t=(s.match(new RegExp(e,"g"))||[]).length;r+=t*e.length})),(0,i.A)((0,i.A)({},e),{},{relevanceScore:r,searchQuery:t})})).filter((e=>e.relevanceScore>0)).sort(((e,t)=>t.relevanceScore-e.relevanceScore)).slice(0,10)}}},579:(e,t,n)=>{"use strict";e.exports=n(153)},705:(e,t,n)=>{"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=i(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function r(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{A:()=>r})},730:(e,t,n)=>{"use strict";var i=n(43),s=n(853);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,i,s,r,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function D(e,t,n,i){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,i)&&(n=null),i||null===s?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,i=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),k=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var B=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var P,L=Object.assign;function R(e){if(void 0===P)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||""}return"\n"+P+e}var O=!1;function z(e,t){if(!e||O)return"";O=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){i=u}e.call(t.prototype)}else{try{throw Error()}catch(u){i=u}e()}}catch(u){if(u&&i&&"string"===typeof u.stack){for(var s=u.stack.split("\n"),r=i.stack.split("\n"),a=s.length-1,o=r.length-1;1<=a&&0<=o&&s[a]!==r[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==r[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==r[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{O=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?R(e):""}function W(e){switch(e.tag){case 5:return R(e.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case A:return"Fragment";case w:return"Portal";case E:return"Profiler";case C:return"StrictMode";case _:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case F:return(e._context.displayName||"Context")+".Provider";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){i=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=G(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&D(e,"checked",t,!1)}function J(e,t){$(e,t);var n=V(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(i&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(r(92));if(te(n)){if(1<n.length)throw Error(r(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function re(e,t){var n=V(t.value),i=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),s=me(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,s):e[n]=s}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(r(62))}}function De(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ae=null,Ce=null;function Ee(e){if(e=Ds(e)){if("function"!==typeof we)throw Error(r(280));var t=e.stateNode;t&&(t=bs(t),we(e.stateNode,e.type,t))}}function Fe(e){Ae?Ce?Ce.push(e):Ce=[e]:Ae=e}function ke(){if(Ae){var e=Ae,t=Ce;if(Ce=Ae=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Se(e,t){return e(t)}function _e(){}var Ne=!1;function Me(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Se(e,t,n)}finally{Ne=!1,(null!==Ae||null!==Ce)&&(_e(),ke())}}function Te(e,t){var n=e.stateNode;if(null===n)return null;var i=bs(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(r(231,t,typeof n));return n}var Be=!1;if(c)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Be=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(ce){Be=!1}function je(e,t,n,i,s,r,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Pe=!1,Le=null,Re=!1,Oe=null,ze={onError:function(e){Pe=!0,Le=e}};function We(e,t,n,i,s,r,a,o,l){Pe=!1,Le=null,je.apply(ze,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(Ue(e)!==e)throw Error(r(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(i=s.return)){n=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Ve(s),e;if(a===i)return Ve(s),t;a=a.sibling}throw Error(r(188))}if(n.return!==i.return)n=s,i=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,i=a;break}if(l===i){o=!0,i=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,i=s;break}if(l===i){o=!0,i=a,n=s;break}l=l.sibling}if(!o)throw Error(r(189))}}if(n.alternate!==i)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=s.unstable_scheduleCallback,Xe=s.unstable_cancelCallback,Ye=s.unstable_shouldYield,Qe=s.unstable_requestPaint,$e=s.unstable_now,Je=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,it=s.unstable_IdlePriority,st=null,rt=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,s=e.suspendedLanes,r=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?i=dt(o):0!==(r&=a)&&(i=dt(r))}else 0!==(a=n&~s)?i=dt(a):0!==r&&(i=dt(r));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(r=t&-t)||16===s&&0!==(4194240&r)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)s=1<<(n=31-at(t)),i|=e[n],t&=~s;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-at(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}var Dt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,wt,At,Ct,Et,Ft=!1,kt=[],St=null,_t=null,Nt=null,Mt=new Map,Tt=new Map,Bt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":St=null;break;case"dragenter":case"dragleave":_t=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function Pt(e,t,n,i,s,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},null!==t&&(null!==(t=Ds(t))&&wt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Lt(e){var t=ys(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Et(e.priority,(function(){At(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Rt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Ds(n))&&wt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);xe=i,n.target.dispatchEvent(i),xe=null,t.shift()}return!0}function Ot(e,t,n){Rt(e)&&n.delete(t)}function zt(){Ft=!1,null!==St&&Rt(St)&&(St=null),null!==_t&&Rt(_t)&&(_t=null),null!==Nt&&Rt(Nt)&&(Nt=null),Mt.forEach(Ot),Tt.forEach(Ot)}function Wt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ft||(Ft=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,zt)))}function Ut(e){function t(t){return Wt(t,e)}if(0<kt.length){Wt(kt[0],e);for(var n=1;n<kt.length;n++){var i=kt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==St&&Wt(St,e),null!==_t&&Wt(_t,e),null!==Nt&&Wt(Nt,e),Mt.forEach(t),Tt.forEach(t),n=0;n<Bt.length;n++)(i=Bt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Bt.length&&null===(n=Bt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Bt.shift()}var Ht=x.ReactCurrentBatchConfig,Vt=!0;function Gt(e,t,n,i){var s=Dt,r=Ht.transition;Ht.transition=null;try{Dt=1,Kt(e,t,n,i)}finally{Dt=s,Ht.transition=r}}function qt(e,t,n,i){var s=Dt,r=Ht.transition;Ht.transition=null;try{Dt=4,Kt(e,t,n,i)}finally{Dt=s,Ht.transition=r}}function Kt(e,t,n,i){if(Vt){var s=Yt(e,t,n,i);if(null===s)Vi(e,t,i,Xt,n),jt(e,i);else if(function(e,t,n,i,s){switch(t){case"focusin":return St=Pt(St,e,t,n,i,s),!0;case"dragenter":return _t=Pt(_t,e,t,n,i,s),!0;case"mouseover":return Nt=Pt(Nt,e,t,n,i,s),!0;case"pointerover":var r=s.pointerId;return Mt.set(r,Pt(Mt.get(r)||null,e,t,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Tt.set(r,Pt(Tt.get(r)||null,e,t,n,i,s)),!0}return!1}(s,e,t,n,i))i.stopPropagation();else if(jt(e,i),4&t&&-1<It.indexOf(e)){for(;null!==s;){var r=Ds(s);if(null!==r&&bt(r),null===(r=Yt(e,t,n,i))&&Vi(e,t,i,Xt,n),r===s)break;s=r}null!==s&&i.stopPropagation()}else Vi(e,t,i,null,n)}}var Xt=null;function Yt(e,t,n,i){if(Xt=null,null!==(e=ys(e=be(i))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,i=n.length,s="value"in $t?$t.value:$t.textContent,r=s.length;for(e=0;e<i&&n[e]===s[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===s[r-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function sn(){return!1}function rn(e){function t(t,n,i,s,r){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:sn,this.isPropagationStopped=sn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=rn(un),dn=L({},un,{view:0,detail:0}),hn=rn(dn),pn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=rn(pn),mn=rn(L({},pn,{dataTransfer:0})),gn=rn(L({},dn,{relatedTarget:0})),vn=rn(L({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dn=rn(yn),xn=rn(L({},un,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},An={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=An[e])&&!!t[e]}function En(){return Cn}var Fn=L({},dn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=rn(Fn),Sn=rn(L({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_n=rn(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=rn(L({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=L({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tn=rn(Mn),Bn=[9,13,27,32],In=c&&"CompositionEvent"in window,jn=null;c&&"documentMode"in document&&(jn=document.documentMode);var Pn=c&&"TextEvent"in window&&!jn,Ln=c&&(!In||jn&&8<jn&&11>=jn),Rn=String.fromCharCode(32),On=!1;function zn(e,t){switch(e){case"keyup":return-1!==Bn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Gn(e,t,n,i){Fe(i),0<(t=qi(t,"onChange")).length&&(n=new cn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var qn=null,Kn=null;function Xn(e){Ri(e,0)}function Yn(e){if(K(xs(e)))return e}function Qn(e,t){if("change"===e)return t}var $n=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Zn="function"===typeof ei.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function ti(){qn&&(qn.detachEvent("onpropertychange",ni),Kn=qn=null)}function ni(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Gn(t,Kn,e,be(e)),Me(Xn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Kn=n,(qn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function si(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function ri(e,t){if("click"===e)return Yn(t)}function ai(e,t){if("input"===e||"change"===e)return Yn(t)}var oi="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(oi(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!d.call(t,s)||!oi(e[s],t[s]))return!1}return!0}function ui(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ci(e,t){var n,i=ui(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ui(i)}}function di(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?di(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=hi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&di(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=void 0===i.end?r:Math.min(i.end,s),!e.extend&&r>i&&(s=i,i=r,r=s),s=ci(n,r);var a=ci(n,i);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),r>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=c&&"documentMode"in document&&11>=document.documentMode,gi=null,vi=null,yi=null,Di=!1;function xi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Di||null==gi||gi!==X(i)||("selectionStart"in(i=gi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&li(yi,i)||(yi=i,0<(i=qi(vi,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gi)))}function bi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionend:bi("Transition","TransitionEnd")},Ai={},Ci={};function Ei(e){if(Ai[e])return Ai[e];if(!wi[e])return e;var t,n=wi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ci)return Ai[e]=n[t];return e}c&&(Ci=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var Fi=Ei("animationend"),ki=Ei("animationiteration"),Si=Ei("animationstart"),_i=Ei("transitionend"),Ni=new Map,Mi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ti(e,t){Ni.set(e,t),l(t,[e])}for(var Bi=0;Bi<Mi.length;Bi++){var Ii=Mi[Bi];Ti(Ii.toLowerCase(),"on"+(Ii[0].toUpperCase()+Ii.slice(1)))}Ti(Fi,"onAnimationEnd"),Ti(ki,"onAnimationIteration"),Ti(Si,"onAnimationStart"),Ti("dblclick","onDoubleClick"),Ti("focusin","onFocus"),Ti("focusout","onBlur"),Ti(_i,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ji="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pi=new Set("cancel close invalid load scroll toggle".split(" ").concat(ji));function Li(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,s,a,o,l,u){if(We.apply(this,arguments),Pe){if(!Pe)throw Error(r(198));var c=Le;Pe=!1,Le=null,Re||(Re=!0,Oe=c)}}(i,t,void 0,e),e.currentTarget=null}function Ri(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;e:{var r=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==r&&s.isPropagationStopped())break e;Li(s,o,u),r=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,u=o.currentTarget,o=o.listener,l!==r&&s.isPropagationStopped())break e;Li(s,o,u),r=l}}}if(Re)throw e=Oe,Re=!1,Oe=null,e}function Oi(e,t){var n=t[ms];void 0===n&&(n=t[ms]=new Set);var i=e+"__bubble";n.has(i)||(Hi(t,e,2,!1),n.add(i))}function zi(e,t,n){var i=0;t&&(i|=4),Hi(n,e,i,t)}var Wi="_reactListening"+Math.random().toString(36).slice(2);function Ui(e){if(!e[Wi]){e[Wi]=!0,a.forEach((function(t){"selectionchange"!==t&&(Pi.has(t)||zi(t,!1,e),zi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Wi]||(t[Wi]=!0,zi("selectionchange",!1,t))}}function Hi(e,t,n,i){switch(Qt(t)){case 1:var s=Gt;break;case 4:s=qt;break;default:s=Kt}n=s.bind(null,t,n,e),s=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),i?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Vi(e,t,n,i,s){var r=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=ys(o)))return;if(5===(l=a.tag)||6===l){i=r=a;continue e}o=o.parentNode}}i=i.return}Me((function(){var i=r,s=be(n),a=[];e:{var o=Ni.get(e);if(void 0!==o){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=kn;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=_n;break;case Fi:case ki:case Si:l=vn;break;case _i:l=Nn;break;case"scroll":l=hn;break;case"wheel":l=Tn;break;case"copy":case"cut":case"paste":l=Dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Sn}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==o?o+"Capture":null:o;c=[];for(var p,f=i;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Te(f,h))&&c.push(Gi(f,m,p)))),d)break;f=f.return}0<c.length&&(o=new l(o,u,null,n,s),a.push({event:o,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(u=n.relatedTarget||n.fromElement)||!ys(u)&&!u[fs])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(u=(u=n.relatedTarget||n.toElement)?ys(u):null)&&(u!==(d=Ue(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=i),l!==u)){if(c=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=Sn,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?o:xs(l),p=null==u?o:xs(u),(o=new c(m,f+"leave",l,n,s)).target=d,o.relatedTarget=p,m=null,ys(s)===i&&((c=new c(h,f+"enter",u,n,s)).target=p,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(h=u,f=0,p=c=l;p;p=Ki(p))f++;for(p=0,m=h;m;m=Ki(m))p++;for(;0<f-p;)c=Ki(c),f--;for(;0<p-f;)h=Ki(h),p--;for(;f--;){if(c===h||null!==h&&c===h.alternate)break e;c=Ki(c),h=Ki(h)}c=null}else c=null;null!==l&&Xi(a,o,l,c,!1),null!==u&&null!==d&&Xi(a,d,u,c,!0)}if("select"===(l=(o=i?xs(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Qn;else if(Vn(o))if($n)g=ai;else{g=si;var v=ii}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ri);switch(g&&(g=g(e,i))?Gn(a,g,n,s):(v&&v(e,o,i),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=i?xs(i):window,e){case"focusin":(Vn(v)||"true"===v.contentEditable)&&(gi=v,vi=i,yi=null);break;case"focusout":yi=vi=gi=null;break;case"mousedown":Di=!0;break;case"contextmenu":case"mouseup":case"dragend":Di=!1,xi(a,n,s);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":xi(a,n,s)}var y;if(In)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Un?zn(e,n)&&(D="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(D="onCompositionStart");D&&(Ln&&"ko"!==n.locale&&(Un||"onCompositionStart"!==D?"onCompositionEnd"===D&&Un&&(y=en()):(Jt="value"in($t=s)?$t.value:$t.textContent,Un=!0)),0<(v=qi(i,D)).length&&(D=new xn(D,e,null,n,s),a.push({event:D,listeners:v}),y?D.data=y:null!==(y=Wn(n))&&(D.data=y))),(y=Pn?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(On=!0,Rn);case"textInput":return(e=t.data)===Rn&&On?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!In&&zn(e,t)?(e=en(),Zt=Jt=$t=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=qi(i,"onBeforeInput")).length&&(s=new xn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:i}),s.data=y))}Ri(a,t)}))}function Gi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qi(e,t){for(var n=t+"Capture",i=[];null!==e;){var s=e,r=s.stateNode;5===s.tag&&null!==r&&(s=r,null!=(r=Te(e,n))&&i.unshift(Gi(e,r,s)),null!=(r=Te(e,t))&&i.push(Gi(e,r,s))),e=e.return}return i}function Ki(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xi(e,t,n,i,s){for(var r=t._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,u=o.stateNode;if(null!==l&&l===i)break;5===o.tag&&null!==u&&(o=u,s?null!=(l=Te(n,r))&&a.unshift(Gi(n,l,o)):s||null!=(l=Te(n,r))&&a.push(Gi(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yi=/\r\n?/g,Qi=/\u0000|\uFFFD/g;function $i(e){return("string"===typeof e?e:""+e).replace(Yi,"\n").replace(Qi,"")}function Ji(e,t,n){if(t=$i(t),$i(e)!==t&&n)throw Error(r(425))}function Zi(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var is="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,rs="function"===typeof Promise?Promise:void 0,as="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof rs?function(e){return rs.resolve(null).then(e).catch(os)}:is;function os(e){setTimeout((function(){throw e}))}function ls(e,t){var n=t,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===i)return e.removeChild(s),void Ut(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=s}while(n);Ut(t)}function us(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function cs(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ds=Math.random().toString(36).slice(2),hs="__reactFiber$"+ds,ps="__reactProps$"+ds,fs="__reactContainer$"+ds,ms="__reactEvents$"+ds,gs="__reactListeners$"+ds,vs="__reactHandles$"+ds;function ys(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fs]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=cs(e);null!==e;){if(n=e[hs])return n;e=cs(e)}return t}n=(e=n).parentNode}return null}function Ds(e){return!(e=e[hs]||e[fs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function bs(e){return e[ps]||null}var ws=[],As=-1;function Cs(e){return{current:e}}function Es(e){0>As||(e.current=ws[As],ws[As]=null,As--)}function Fs(e,t){As++,ws[As]=e.current,e.current=t}var ks={},Ss=Cs(ks),_s=Cs(!1),Ns=ks;function Ms(e,t){var n=e.type.contextTypes;if(!n)return ks;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s,r={};for(s in n)r[s]=t[s];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Ts(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Bs(){Es(_s),Es(Ss)}function Is(e,t,n){if(Ss.current!==ks)throw Error(r(168));Fs(Ss,t),Fs(_s,n)}function js(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var s in i=i.getChildContext())if(!(s in t))throw Error(r(108,H(e)||"Unknown",s));return L({},n,i)}function Ps(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ks,Ns=Ss.current,Fs(Ss,e),Fs(_s,_s.current),!0}function Ls(e,t,n){var i=e.stateNode;if(!i)throw Error(r(169));n?(e=js(e,t,Ns),i.__reactInternalMemoizedMergedChildContext=e,Es(_s),Es(Ss),Fs(Ss,e)):Es(_s),Fs(_s,n)}var Rs=null,Os=!1,zs=!1;function Ws(e){null===Rs?Rs=[e]:Rs.push(e)}function Us(){if(!zs&&null!==Rs){zs=!0;var e=0,t=Dt;try{var n=Rs;for(Dt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Rs=null,Os=!1}catch(s){throw null!==Rs&&(Rs=Rs.slice(e+1)),Ke(Ze,Us),s}finally{Dt=t,zs=!1}}return null}var Hs=[],Vs=0,Gs=null,qs=0,Ks=[],Xs=0,Ys=null,Qs=1,$s="";function Js(e,t){Hs[Vs++]=qs,Hs[Vs++]=Gs,Gs=e,qs=t}function Zs(e,t,n){Ks[Xs++]=Qs,Ks[Xs++]=$s,Ks[Xs++]=Ys,Ys=e;var i=Qs;e=$s;var s=32-at(i)-1;i&=~(1<<s),n+=1;var r=32-at(t)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,Qs=1<<32-at(t)+s|n<<s|i,$s=r+e}else Qs=1<<r|n<<s|i,$s=e}function er(e){null!==e.return&&(Js(e,1),Zs(e,1,0))}function tr(e){for(;e===Gs;)Gs=Hs[--Vs],Hs[Vs]=null,qs=Hs[--Vs],Hs[Vs]=null;for(;e===Ys;)Ys=Ks[--Xs],Ks[Xs]=null,$s=Ks[--Xs],Ks[Xs]=null,Qs=Ks[--Xs],Ks[Xs]=null}var nr=null,ir=null,sr=!1,rr=null;function ar(e,t){var n=Mu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function or(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,nr=e,ir=us(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,nr=e,ir=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ys?{id:Qs,overflow:$s}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,nr=e,ir=null,!0);default:return!1}}function lr(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ur(e){if(sr){var t=ir;if(t){var n=t;if(!or(e,t)){if(lr(e))throw Error(r(418));t=us(n.nextSibling);var i=nr;t&&or(e,t)?ar(i,n):(e.flags=-4097&e.flags|2,sr=!1,nr=e)}}else{if(lr(e))throw Error(r(418));e.flags=-4097&e.flags|2,sr=!1,nr=e}}}function cr(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;nr=e}function dr(e){if(e!==nr)return!1;if(!sr)return cr(e),sr=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ir)){if(lr(e))throw hr(),Error(r(418));for(;t;)ar(e,t),t=us(t.nextSibling)}if(cr(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ir=us(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ir=null}}else ir=nr?us(e.stateNode.nextSibling):null;return!0}function hr(){for(var e=ir;e;)e=us(e.nextSibling)}function pr(){ir=nr=null,sr=!1}function fr(e){null===rr?rr=[e]:rr.push(e)}var mr=x.ReactCurrentBatchConfig;function gr(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(r(309));var i=n.stateNode}if(!i)throw Error(r(147,e));var s=i,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(r(284));if(!n._owner)throw Error(r(290,e))}return e}function vr(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yr(e){return(0,e._init)(e._payload)}function Dr(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Bu(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Lu(n,e.mode,i)).return=e,t):((t=s(t,n)).return=e,t)}function u(e,t,n,i){var r=n.type;return r===A?d(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===T&&yr(r)===t.type)?((i=s(t,n.props)).ref=gr(e,t,n),i.return=e,i):((i=Iu(n.type,n.key,n.props,null,e.mode,i)).ref=gr(e,t,n),i.return=e,i)}function c(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ru(n,e.mode,i)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,i,r){return null===t||7!==t.tag?((t=ju(n,e.mode,i,r)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Iu(t.type,t.key,t.props,null,e.mode,n)).ref=gr(e,null,t),n.return=e,n;case w:return(t=Ru(t,e.mode,n)).return=e,t;case T:return h(e,(0,t._init)(t._payload),n)}if(te(t)||j(t))return(t=ju(t,e.mode,n,null)).return=e,t;vr(e,t)}return null}function p(e,t,n,i){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===s?u(e,t,n,i):null;case w:return n.key===s?c(e,t,n,i):null;case T:return p(e,t,(s=n._init)(n._payload),i)}if(te(n)||j(n))return null!==s?null:d(e,t,n,i,null);vr(e,n)}return null}function f(e,t,n,i,s){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,s);if("object"===typeof i&&null!==i){switch(i.$$typeof){case b:return u(t,e=e.get(null===i.key?n:i.key)||null,i,s);case w:return c(t,e=e.get(null===i.key?n:i.key)||null,i,s);case T:return f(e,t,n,(0,i._init)(i._payload),s)}if(te(i)||j(i))return d(t,e=e.get(n)||null,i,s,null);vr(t,i)}return null}function m(s,r,o,l){for(var u=null,c=null,d=r,m=r=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(s,d,o[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(s,d),r=a(v,r,m),null===c?u=v:c.sibling=v,c=v,d=g}if(m===o.length)return n(s,d),sr&&Js(s,m),u;if(null===d){for(;m<o.length;m++)null!==(d=h(s,o[m],l))&&(r=a(d,r,m),null===c?u=d:c.sibling=d,c=d);return sr&&Js(s,m),u}for(d=i(s,d);m<o.length;m++)null!==(g=f(d,s,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),r=a(g,r,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(s,e)})),sr&&Js(s,m),u}function g(s,o,l,u){var c=j(l);if("function"!==typeof c)throw Error(r(150));if(null==(l=c.call(l)))throw Error(r(151));for(var d=c=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var D=p(s,m,y.value,u);if(null===D){null===m&&(m=v);break}e&&m&&null===D.alternate&&t(s,m),o=a(D,o,g),null===d?c=D:d.sibling=D,d=D,m=v}if(y.done)return n(s,m),sr&&Js(s,g),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(s,y.value,u))&&(o=a(y,o,g),null===d?c=y:d.sibling=y,d=y);return sr&&Js(s,g),c}for(m=i(s,m);!y.done;g++,y=l.next())null!==(y=f(m,s,g,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=a(y,o,g),null===d?c=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(s,e)})),sr&&Js(s,g),c}return function e(i,r,a,l){if("object"===typeof a&&null!==a&&a.type===A&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case b:e:{for(var u=a.key,c=r;null!==c;){if(c.key===u){if((u=a.type)===A){if(7===c.tag){n(i,c.sibling),(r=s(c,a.props.children)).return=i,i=r;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===T&&yr(u)===c.type){n(i,c.sibling),(r=s(c,a.props)).ref=gr(i,c,a),r.return=i,i=r;break e}n(i,c);break}t(i,c),c=c.sibling}a.type===A?((r=ju(a.props.children,i.mode,l,a.key)).return=i,i=r):((l=Iu(a.type,a.key,a.props,null,i.mode,l)).ref=gr(i,r,a),l.return=i,i=l)}return o(i);case w:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(i,r.sibling),(r=s(r,a.children||[])).return=i,i=r;break e}n(i,r);break}t(i,r),r=r.sibling}(r=Ru(a,i.mode,l)).return=i,i=r}return o(i);case T:return e(i,r,(c=a._init)(a._payload),l)}if(te(a))return m(i,r,a,l);if(j(a))return g(i,r,a,l);vr(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==r&&6===r.tag?(n(i,r.sibling),(r=s(r,a)).return=i,i=r):(n(i,r),(r=Lu(a,i.mode,l)).return=i,i=r),o(i)):n(i,r)}}var xr=Dr(!0),br=Dr(!1),wr=Cs(null),Ar=null,Cr=null,Er=null;function Fr(){Er=Cr=Ar=null}function kr(e){var t=wr.current;Es(wr),e._currentValue=t}function Sr(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function _r(e,t){Ar=e,Er=Cr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Do=!0),e.firstContext=null)}function Nr(e){var t=e._currentValue;if(Er!==e)if(e={context:e,memoizedValue:t,next:null},null===Cr){if(null===Ar)throw Error(r(308));Cr=e,Ar.dependencies={lanes:0,firstContext:e}}else Cr=Cr.next=e;return t}var Mr=null;function Tr(e){null===Mr?Mr=[e]:Mr.push(e)}function Br(e,t,n,i){var s=t.interleaved;return null===s?(n.next=n,Tr(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ir(e,i)}function Ir(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var jr=!1;function Pr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Or(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Sl)){var s=i.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),i.pending=t,Ir(e,n)}return null===(s=i.interleaved)?(t.next=t,Tr(i)):(t.next=s.next,s.next=t),i.interleaved=t,Ir(e,n)}function zr(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Wr(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var s=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===r?s=r=a:r=r.next=a,n=n.next}while(null!==n);null===r?s=r=t:r=r.next=t}else s=r=t;return n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ur(e,t,n,i){var s=e.updateQueue;jr=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,u=l.next;l.next=null,null===a?r=u:a.next=u,a=l;var c=e.alternate;null!==c&&((o=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(null!==r){var d=s.baseState;for(a=0,c=u=l=null,o=r;;){var h=o.lane,p=o.eventTime;if((i&h)===h){null!==c&&(c=c.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=L({},d,h);break e;case 2:jr=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=p,l=d):c=c.next=p,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===c&&(l=d),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===r&&(s.shared.lanes=0);Pl|=a,e.lanes=a,e.memoizedState=d}}function Hr(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(null!==s){if(i.callback=null,i=n,"function"!==typeof s)throw Error(r(191,s));s.call(i)}}}var Vr={},Gr=Cs(Vr),qr=Cs(Vr),Kr=Cs(Vr);function Xr(e){if(e===Vr)throw Error(r(174));return e}function Yr(e,t){switch(Fs(Kr,t),Fs(qr,e),Fs(Gr,Vr),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Es(Gr),Fs(Gr,t)}function Qr(){Es(Gr),Es(qr),Es(Kr)}function $r(e){Xr(Kr.current);var t=Xr(Gr.current),n=le(t,e.type);t!==n&&(Fs(qr,e),Fs(Gr,n))}function Jr(e){qr.current===e&&(Es(Gr),Es(qr))}var Zr=Cs(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ia=x.ReactCurrentDispatcher,sa=x.ReactCurrentBatchConfig,ra=0,aa=null,oa=null,la=null,ua=!1,ca=!1,da=0,ha=0;function pa(){throw Error(r(321))}function fa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oi(e[n],t[n]))return!1;return!0}function ma(e,t,n,i,s,a){if(ra=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Ja:Za,e=n(i,s),ca){a=0;do{if(ca=!1,da=0,25<=a)throw Error(r(301));a+=1,la=oa=null,t.updateQueue=null,ia.current=eo,e=n(i,s)}while(ca)}if(ia.current=$a,t=null!==oa&&null!==oa.next,ra=0,la=oa=aa=null,ua=!1,t)throw Error(r(300));return e}function ga(){var e=0!==da;return da=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ya(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(r(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function Da(e,t){return"function"===typeof t?t(e):t}function xa(e){var t=ya(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=oa,s=i.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}i.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,i=i.baseState;var l=o=null,u=null,c=a;do{var d=c.lane;if((ra&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:e(i,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=h,o=i):u=u.next=h,aa.lanes|=d,Pl|=d}c=c.next}while(null!==c&&c!==a);null===u?o=i:u.next=l,oi(i,t.memoizedState)||(Do=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=u,n.lastRenderedState=i}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,aa.lanes|=a,Pl|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ba(e){var t=ya(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);oi(a,t.memoizedState)||(Do=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function wa(){}function Aa(e,t){var n=aa,i=ya(),s=t(),a=!oi(i.memoizedState,s);if(a&&(i.memoizedState=s,Do=!0),i=i.queue,ja(Fa.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Na(9,Ea.bind(null,n,i,s,t),void 0,null),null===_l)throw Error(r(349));0!==(30&ra)||Ca(n,t,s)}return s}function Ca(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ea(e,t,n,i){t.value=n,t.getSnapshot=i,ka(t)&&Sa(e)}function Fa(e,t,n){return n((function(){ka(t)&&Sa(e)}))}function ka(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oi(e,n)}catch(i){return!0}}function Sa(e){var t=Ir(e,1);null!==t&&nu(t,e,1,-1)}function _a(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[t.memoizedState,e]}function Na(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ma(){return ya().memoizedState}function Ta(e,t,n,i){var s=va();aa.flags|=e,s.memoizedState=Na(1|t,n,void 0,void 0===i?null:i)}function Ba(e,t,n,i){var s=ya();i=void 0===i?null:i;var r=void 0;if(null!==oa){var a=oa.memoizedState;if(r=a.destroy,null!==i&&fa(i,a.deps))return void(s.memoizedState=Na(t,n,r,i))}aa.flags|=e,s.memoizedState=Na(1|t,n,r,i)}function Ia(e,t){return Ta(8390656,8,e,t)}function ja(e,t){return Ba(2048,8,e,t)}function Pa(e,t){return Ba(4,2,e,t)}function La(e,t){return Ba(4,4,e,t)}function Ra(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Oa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ba(4,4,Ra.bind(null,t,e),n)}function za(){}function Wa(e,t){var n=ya();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&fa(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Ua(e,t){var n=ya();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&fa(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Ha(e,t,n){return 0===(21&ra)?(e.baseState&&(e.baseState=!1,Do=!0),e.memoizedState=n):(oi(n,t)||(n=mt(),aa.lanes|=n,Pl|=n,e.baseState=!0),t)}function Va(e,t){var n=Dt;Dt=0!==n&&4>n?n:4,e(!0);var i=sa.transition;sa.transition={};try{e(!1),t()}finally{Dt=n,sa.transition=i}}function Ga(){return ya().memoizedState}function qa(e,t,n){var i=tu(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Xa(e))Ya(t,n);else if(null!==(n=Br(e,t,n,i))){nu(n,e,i,eu()),Qa(n,t,i)}}function Ka(e,t,n){var i=tu(e),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xa(e))Ya(t,s);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=r(a,n);if(s.hasEagerState=!0,s.eagerState=o,oi(o,a)){var l=t.interleaved;return null===l?(s.next=s,Tr(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(u){}null!==(n=Br(e,t,s,i))&&(nu(n,e,i,s=eu()),Qa(n,t,i))}}function Xa(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ya(e,t){ca=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qa(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}var $a={readContext:Nr,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Ja={readContext:Nr,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Nr,useEffect:Ia,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ta(4194308,4,Ra.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ta(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ta(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=va();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=qa.bind(null,aa,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:_a,useDebugValue:za,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=_a(!1),t=e[0];return e=Va.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=aa,s=va();if(sr){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===_l)throw Error(r(349));0!==(30&ra)||Ca(i,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Ia(Fa.bind(null,i,a,e),[e]),i.flags|=2048,Na(9,Ea.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=va(),t=_l.identifierPrefix;if(sr){var n=$s;t=":"+t+"R"+(n=(Qs&~(1<<32-at(Qs)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Nr,useCallback:Wa,useContext:Nr,useEffect:ja,useImperativeHandle:Oa,useInsertionEffect:Pa,useLayoutEffect:La,useMemo:Ua,useReducer:xa,useRef:Ma,useState:function(){return xa(Da)},useDebugValue:za,useDeferredValue:function(e){return Ha(ya(),oa.memoizedState,e)},useTransition:function(){return[xa(Da)[0],ya().memoizedState]},useMutableSource:wa,useSyncExternalStore:Aa,useId:Ga,unstable_isNewReconciler:!1},eo={readContext:Nr,useCallback:Wa,useContext:Nr,useEffect:ja,useImperativeHandle:Oa,useInsertionEffect:Pa,useLayoutEffect:La,useMemo:Ua,useReducer:ba,useRef:Ma,useState:function(){return ba(Da)},useDebugValue:za,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:Ha(t,oa.memoizedState,e)},useTransition:function(){return[ba(Da)[0],ya().memoizedState]},useMutableSource:wa,useSyncExternalStore:Aa,useId:Ga,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var io={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=eu(),s=tu(e),r=Rr(i,s);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=Or(e,r,s))&&(nu(t,e,s,i),zr(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=eu(),s=tu(e),r=Rr(i,s);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=Or(e,r,s))&&(nu(t,e,s,i),zr(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),i=tu(e),s=Rr(n,i);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Or(e,s,i))&&(nu(t,e,i,n),zr(t,e,i))}};function so(e,t,n,i,s,r,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,r,a):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(s,r))}function ro(e,t,n){var i=!1,s=ks,r=t.contextType;return"object"===typeof r&&null!==r?r=Nr(r):(s=Ts(t)?Ns:Ss.current,r=(i=null!==(i=t.contextTypes)&&void 0!==i)?Ms(e,s):ks),t=new t(n,r),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=io,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=r),t}function ao(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&io.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,i){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Pr(e);var r=t.contextType;"object"===typeof r&&null!==r?s.context=Nr(r):(r=Ts(t)?Ns:Ss.current,s.context=Ms(e,r)),s.state=e.memoizedState,"function"===typeof(r=t.getDerivedStateFromProps)&&(no(e,t,r,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&io.enqueueReplaceState(s,s.state,null),Ur(e,n,s,i),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",i=t;do{n+=W(i),i=i.return}while(i);var s=n}catch(r){s="\nError generating stack: "+r.message+"\n"+r.stack}return{value:e,source:t,stack:s,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function co(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Rr(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Vl||(Vl=!0,Gl=i),co(0,t)},n}function fo(e,t,n){(n=Rr(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var s=t.value;n.payload=function(){return i(s)},n.callback=function(){co(0,t)}}var r=e.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(n.callback=function(){co(0,t),"function"!==typeof i&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ho;var s=new Set;i.set(t,s)}else void 0===(s=i.get(t))&&(s=new Set,i.set(t,s));s.has(n)||(s.add(n),e=Eu.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,i,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Rr(-1,1)).tag=2,Or(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var yo=x.ReactCurrentOwner,Do=!1;function xo(e,t,n,i){t.child=null===e?br(t,null,n,i):xr(t,e.child,n,i)}function bo(e,t,n,i,s){n=n.render;var r=t.ref;return _r(t,s),i=ma(e,t,n,i,r,s),n=ga(),null===e||Do?(sr&&n&&er(t),t.flags|=1,xo(e,t,i,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Vo(e,t,s))}function wo(e,t,n,i,s){if(null===e){var r=n.type;return"function"!==typeof r||Tu(r)||void 0!==r.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Iu(n.type,null,i,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,Ao(e,t,r,i,s))}if(r=e.child,0===(e.lanes&s)){var a=r.memoizedProps;if((n=null!==(n=n.compare)?n:li)(a,i)&&e.ref===t.ref)return Vo(e,t,s)}return t.flags|=1,(e=Bu(r,i)).ref=t.ref,e.return=t,t.child=e}function Ao(e,t,n,i,s){if(null!==e){var r=e.memoizedProps;if(li(r,i)&&e.ref===t.ref){if(Do=!1,t.pendingProps=i=r,0===(e.lanes&s))return t.lanes=e.lanes,Vo(e,t,s);0!==(131072&e.flags)&&(Do=!0)}}return Fo(e,t,n,i,s)}function Co(e,t,n){var i=t.pendingProps,s=i.children,r=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fs(Bl,Tl),Tl|=n;else{if(0===(1073741824&n))return e=null!==r?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fs(Bl,Tl),Tl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==r?r.baseLanes:n,Fs(Bl,Tl),Tl|=i}else null!==r?(i=r.baseLanes|n,t.memoizedState=null):i=n,Fs(Bl,Tl),Tl|=i;return xo(e,t,s,n),t.child}function Eo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Fo(e,t,n,i,s){var r=Ts(n)?Ns:Ss.current;return r=Ms(t,r),_r(t,s),n=ma(e,t,n,i,r,s),i=ga(),null===e||Do?(sr&&i&&er(t),t.flags|=1,xo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Vo(e,t,s))}function ko(e,t,n,i,s){if(Ts(n)){var r=!0;Ps(t)}else r=!1;if(_r(t,s),null===t.stateNode)Ho(e,t),ro(t,n,i),oo(t,n,i,s),i=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=Nr(u):u=Ms(t,u=Ts(n)?Ns:Ss.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||l!==u)&&ao(t,a,i,u),jr=!1;var h=t.memoizedState;a.state=h,Ur(t,i,a,s),l=t.memoizedState,o!==i||h!==l||_s.current||jr?("function"===typeof c&&(no(t,n,c,i),l=t.memoizedState),(o=jr||so(t,n,o,i,h,l,u))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=u,i=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,Lr(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:to(t.type,o),a.props=u,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Nr(l):l=Ms(t,l=Ts(n)?Ns:Ss.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ao(t,a,i,l),jr=!1,h=t.memoizedState,a.state=h,Ur(t,i,a,s);var f=t.memoizedState;o!==d||h!==f||_s.current||jr?("function"===typeof p&&(no(t,n,p,i),f=t.memoizedState),(u=jr||so(t,n,u,i,h,f,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),a.props=i,a.state=f,a.context=l,i=u):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return So(e,t,n,i,r,s)}function So(e,t,n,i,s,r){Eo(e,t);var a=0!==(128&t.flags);if(!i&&!a)return s&&Ls(t,n,!1),Vo(e,t,r);i=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=xr(t,e.child,null,r),t.child=xr(t,null,o,r)):xo(e,t,o,r),t.memoizedState=i.state,s&&Ls(t,n,!0),t.child}function _o(e){var t=e.stateNode;t.pendingContext?Is(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Is(0,t.context,!1),Yr(e,t.containerInfo)}function No(e,t,n,i,s){return pr(),fr(s),t.flags|=256,xo(e,t,n,i),t.child}var Mo,To,Bo,Io,jo={dehydrated:null,treeContext:null,retryLane:0};function Po(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lo(e,t,n){var i,s=t.pendingProps,a=Zr.current,o=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Fs(Zr,1&a),null===e)return ur(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Pu(l,s,0,null),e=ju(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Po(n),t.memoizedState=jo,e):Ro(t,l));if(null!==(a=e.memoizedState)&&null!==(i=a.dehydrated))return function(e,t,n,i,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,Oo(e,t,o,i=uo(Error(r(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,s=t.mode,i=Pu({mode:"visible",children:i.children},s,0,null),(a=ju(a,s,o,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,0!==(1&t.mode)&&xr(t,e.child,null,o),t.child.memoizedState=Po(o),t.memoizedState=jo,a);if(0===(1&t.mode))return Oo(e,t,o,null);if("$!"===s.data){if(i=s.nextSibling&&s.nextSibling.dataset)var l=i.dgst;return i=l,Oo(e,t,o,i=uo(a=Error(r(419)),i,void 0))}if(l=0!==(o&e.childLanes),Do||l){if(null!==(i=_l)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(i.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Ir(e,s),nu(i,e,s,-1))}return mu(),Oo(e,t,o,i=uo(Error(r(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=ku.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ir=us(s.nextSibling),nr=t,sr=!0,rr=null,null!==e&&(Ks[Xs++]=Qs,Ks[Xs++]=$s,Ks[Xs++]=Ys,Qs=e.id,$s=e.overflow,Ys=t),t=Ro(t,i.children),t.flags|=4096,t)}(e,t,l,s,i,a,n);if(o){o=s.fallback,l=t.mode,i=(a=e.child).sibling;var u={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=u,t.deletions=null):(s=Bu(a,u)).subtreeFlags=14680064&a.subtreeFlags,null!==i?o=Bu(i,o):(o=ju(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Po(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=jo,s}return e=(o=e.child).sibling,s=Bu(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Ro(e,t){return(t=Pu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Oo(e,t,n,i){return null!==i&&fr(i),xr(t,e.child,null,n),(e=Ro(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Sr(e.return,t,n)}function Wo(e,t,n,i,s){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function Uo(e,t,n){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(xo(e,t,i.children,n),0!==(2&(i=Zr.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,n,t);else if(19===e.tag)zo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Fs(Zr,i),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Wo(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ea(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Wo(t,!0,n,null,r);break;case"together":Wo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ho(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Pl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Bu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Bu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Go(e,t){if(!sr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,i|=14680064&s.subtreeFlags,i|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Ko(e,t,n){var i=t.pendingProps;switch(tr(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(t),null;case 1:case 17:return Ts(t.type)&&Bs(),qo(t),null;case 3:return i=t.stateNode,Qr(),Es(_s),Es(Ss),na(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(dr(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==rr&&(au(rr),rr=null))),To(e,t),qo(t),null;case 5:Jr(t);var s=Xr(Kr.current);if(n=t.type,null!==e&&null!=t.stateNode)Bo(e,t,n,i,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(r(166));return qo(t),null}if(e=Xr(Gr.current),dr(t)){i=t.stateNode,n=t.type;var a=t.memoizedProps;switch(i[hs]=t,i[ps]=a,e=0!==(1&t.mode),n){case"dialog":Oi("cancel",i),Oi("close",i);break;case"iframe":case"object":case"embed":Oi("load",i);break;case"video":case"audio":for(s=0;s<ji.length;s++)Oi(ji[s],i);break;case"source":Oi("error",i);break;case"img":case"image":case"link":Oi("error",i),Oi("load",i);break;case"details":Oi("toggle",i);break;case"input":Q(i,a),Oi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Oi("invalid",i);break;case"textarea":se(i,a),Oi("invalid",i)}for(var l in ye(n,a),s=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?i.textContent!==u&&(!0!==a.suppressHydrationWarning&&Ji(i.textContent,u,e),s=["children",u]):"number"===typeof u&&i.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&Ji(i.textContent,u,e),s=["children",""+u]):o.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Oi("scroll",i)}switch(n){case"input":q(i),Z(i,a,!0);break;case"textarea":q(i),ae(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=Zi)}i=s,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[hs]=t,e[ps]=i,Mo(e,t,!1,!1),t.stateNode=e;e:{switch(l=De(n,i),n){case"dialog":Oi("cancel",e),Oi("close",e),s=i;break;case"iframe":case"object":case"embed":Oi("load",e),s=i;break;case"video":case"audio":for(s=0;s<ji.length;s++)Oi(ji[s],e);s=i;break;case"source":Oi("error",e),s=i;break;case"img":case"image":case"link":Oi("error",e),Oi("load",e),s=i;break;case"details":Oi("toggle",e),s=i;break;case"input":Q(e,i),s=Y(e,i),Oi("invalid",e);break;case"option":default:s=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},s=L({},i,{value:void 0}),Oi("invalid",e);break;case"textarea":se(e,i),s=ie(e,i),Oi("invalid",e)}for(a in ye(n,s),u=s)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?ge(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Oi("scroll",e):null!=c&&D(e,a,c,l))}switch(n){case"input":q(e),Z(e,i,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=i.value&&e.setAttribute("value",""+V(i.value));break;case"select":e.multiple=!!i.multiple,null!=(a=i.value)?ne(e,!!i.multiple,a,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qo(t),null;case 6:if(e&&null!=t.stateNode)Io(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(r(166));if(n=Xr(Kr.current),Xr(Gr.current),dr(t)){if(i=t.stateNode,n=t.memoizedProps,i[hs]=t,(a=i.nodeValue!==n)&&null!==(e=nr))switch(e.tag){case 3:Ji(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[hs]=t,t.stateNode=i}return qo(t),null;case 13:if(Es(Zr),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(sr&&null!==ir&&0!==(1&t.mode)&&0===(128&t.flags))hr(),pr(),t.flags|=98560,a=!1;else if(a=dr(t),null!==i&&null!==i.dehydrated){if(null===e){if(!a)throw Error(r(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(r(317));a[hs]=t}else pr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qo(t),a=!1}else null!==rr&&(au(rr),rr=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zr.current)?0===Il&&(Il=3):mu())),null!==t.updateQueue&&(t.flags|=4),qo(t),null);case 4:return Qr(),To(e,t),null===e&&Ui(t.stateNode.containerInfo),qo(t),null;case 10:return kr(t.type._context),qo(t),null;case 19:if(Es(Zr),null===(a=t.memoizedState))return qo(t),null;if(i=0!==(128&t.flags),null===(l=a.rendering))if(i)Go(a,!1);else{if(0!==Il||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Go(a,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Fs(Zr,1&Zr.current|2),t.child}e=e.sibling}null!==a.tail&&$e()>Ul&&(t.flags|=128,i=!0,Go(a,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ea(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Go(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!sr)return qo(t),null}else 2*$e()-a.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,i=!0,Go(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,n=Zr.current,Fs(Zr,i?1&n|2:1&n),t):(qo(t),null);case 22:case 23:return du(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Tl)&&(qo(t),6&t.subtreeFlags&&(t.flags|=8192)):qo(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}function Xo(e,t){switch(tr(t),t.tag){case 1:return Ts(t.type)&&Bs(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qr(),Es(_s),Es(Ss),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Jr(t),null;case 13:if(Es(Zr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));pr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Es(Zr),null;case 4:return Qr(),null;case 10:return kr(t.type._context),null;case 22:case 23:return du(),null;default:return null}}Mo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},To=function(){},Bo=function(e,t,n,i){var s=e.memoizedProps;if(s!==i){e=t.stateNode,Xr(Gr.current);var r,a=null;switch(n){case"input":s=Y(e,s),i=Y(e,i),a=[];break;case"select":s=L({},s,{value:void 0}),i=L({},i,{value:void 0}),a=[];break;case"textarea":s=ie(e,s),i=ie(e,i),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof i.onClick&&(e.onclick=Zi)}for(c in ye(n,i),n=null,s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&null!=s[c])if("style"===c){var l=s[c];for(r in l)l.hasOwnProperty(r)&&(n||(n={}),n[r]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(o.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in i){var u=i[c];if(l=null!=s?s[c]:void 0,i.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(r in l)!l.hasOwnProperty(r)||u&&u.hasOwnProperty(r)||(n||(n={}),n[r]="");for(r in u)u.hasOwnProperty(r)&&l[r]!==u[r]&&(n||(n={}),n[r]=u[r])}else n||(a||(a=[]),a.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(o.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Oi("scroll",e),a||l===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Io=function(e,t,n,i){n!==i&&(t.flags|=4)};var Yo=!1,Qo=!1,$o="function"===typeof WeakSet?WeakSet:Set,Jo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Cu(e,t,i)}else n.current=null}function el(e,t,n){try{n()}catch(i){Cu(e,t,i)}}var tl=!1;function nl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var s=i=i.next;do{if((s.tag&e)===e){var r=s.destroy;s.destroy=void 0,void 0!==r&&el(t,n,r)}s=s.next}while(s!==i)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function rl(e){var t=e.alternate;null!==t&&(e.alternate=null,rl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[ps],delete t[ms],delete t[gs],delete t[vs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zi));else if(4!==i&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(rt&&"function"===typeof rt.onCommitFiberUnmount)try{rt.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Qo||Zo(n,t);case 6:var i=cl,s=dl;cl=null,hl(e,t,n),dl=s,null!==(cl=i)&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),Ut(e)):ls(cl,n.stateNode));break;case 4:i=cl,s=dl,cl=n.stateNode.containerInfo,dl=!0,hl(e,t,n),cl=i,dl=s;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){s=i=i.next;do{var r=s,a=r.destroy;r=r.tag,void 0!==a&&(0!==(2&r)||0!==(4&r))&&el(n,t,a),s=s.next}while(s!==i)}hl(e,t,n);break;case 1:if(!Qo&&(Zo(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){Cu(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Qo=(i=Qo)||null!==n.memoizedState,hl(e,t,n),Qo=i):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $o),t.forEach((function(t){var i=Su.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var s=n[i];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,dl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===cl)throw Error(r(160));pl(a,o,s),cl=null,dl=!1;var u=s.alternate;null!==u&&(u.return=null),s.return=null}catch(c){Cu(s,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&i){try{nl(3,e,e.return),il(3,e)}catch(g){Cu(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Cu(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&i&&null!==n&&Zo(n,n.return);break;case 5:if(ml(t,e),vl(e),512&i&&null!==n&&Zo(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(g){Cu(e,e.return,g)}}if(4&i&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(s,a),De(l,o);var c=De(l,a);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];"style"===d?ge(s,h):"dangerouslySetInnerHTML"===d?de(s,h):"children"===d?he(s,h):D(s,d,h,c)}switch(l){case"input":J(s,a);break;case"textarea":re(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(s,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[ps]=a}catch(g){Cu(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&i){if(null===e.stateNode)throw Error(r(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){Cu(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(g){Cu(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(Wl=$e())),4&i&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qo=(c=Qo)||d,ml(t,e),Qo=c):ml(t,e),vl(e),8192&i){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Jo=e,d=e.child;null!==d;){for(h=Jo=d;null!==Jo;){switch(f=(p=Jo).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Zo(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){i=p,n=p.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Cu(i,n,g)}}break;case 5:Zo(p,p.return);break;case 22:if(null!==p.memoizedState){bl(h);continue}}null!==f?(f.return=p,Jo=f):bl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,c?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(u=h.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",o))}catch(g){Cu(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){Cu(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&i&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var i=n;break e}n=n.return}throw Error(r(160))}switch(i.tag){case 5:var s=i.stateNode;32&i.flags&&(he(s,""),i.flags&=-33),ul(e,ol(e),s);break;case 3:case 4:var a=i.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(r(161))}}catch(o){Cu(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Jo=e,Dl(e,t,n)}function Dl(e,t,n){for(var i=0!==(1&e.mode);null!==Jo;){var s=Jo,r=s.child;if(22===s.tag&&i){var a=null!==s.memoizedState||Yo;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Qo;o=Yo;var u=Qo;if(Yo=a,(Qo=l)&&!u)for(Jo=s;null!==Jo;)l=(a=Jo).child,22===a.tag&&null!==a.memoizedState?wl(s):null!==l?(l.return=a,Jo=l):wl(s);for(;null!==r;)Jo=r,Dl(r,t,n),r=r.sibling;Jo=s,Yo=o,Qo=u}xl(e)}else 0!==(8772&s.subtreeFlags)&&null!==r?(r.return=s,Jo=r):xl(e)}}function xl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||il(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Qo)if(null===n)i.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Hr(t,a,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hr(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Ut(h)}}}break;default:throw Error(r(163))}Qo||512&t.flags&&sl(t)}catch(p){Cu(t,t.return,p)}}if(t===e){Jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jo=n;break}Jo=t.return}}function bl(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jo=n;break}Jo=t.return}}function wl(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Cu(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var s=t.return;try{i.componentDidMount()}catch(l){Cu(t,s,l)}}var r=t.return;try{sl(t)}catch(l){Cu(t,r,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){Cu(t,a,l)}}}catch(l){Cu(t,t.return,l)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var Al,Cl=Math.ceil,El=x.ReactCurrentDispatcher,Fl=x.ReactCurrentOwner,kl=x.ReactCurrentBatchConfig,Sl=0,_l=null,Nl=null,Ml=0,Tl=0,Bl=Cs(0),Il=0,jl=null,Pl=0,Ll=0,Rl=0,Ol=null,zl=null,Wl=0,Ul=1/0,Hl=null,Vl=!1,Gl=null,ql=null,Kl=!1,Xl=null,Yl=0,Ql=0,$l=null,Jl=-1,Zl=0;function eu(){return 0!==(6&Sl)?$e():-1!==Jl?Jl:Jl=$e()}function tu(e){return 0===(1&e.mode)?1:0!==(2&Sl)&&0!==Ml?Ml&-Ml:null!==mr.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=Dt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nu(e,t,n,i){if(50<Ql)throw Ql=0,$l=null,Error(r(185));vt(e,n,i),0!==(2&Sl)&&e===_l||(e===_l&&(0===(2&Sl)&&(Ll|=n),4===Il&&ou(e,Ml)),iu(e,i),1===n&&0===Sl&&0===(1&t.mode)&&(Ul=$e()+500,Os&&Us()))}function iu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes;0<r;){var a=31-at(r),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&i)||(s[a]=pt(o,t)):l<=t&&(e.expiredLanes|=o),r&=~o}}(e,t);var i=ht(e,e===_l?Ml:0);if(0===i)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Os=!0,Ws(e)}(lu.bind(null,e)):Ws(lu.bind(null,e)),as((function(){0===(6&Sl)&&Us()})),n=null;else{switch(xt(i)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=_u(n,su.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function su(e,t){if(Jl=-1,Zl=0,0!==(6&Sl))throw Error(r(327));var n=e.callbackNode;if(wu()&&e.callbackNode!==n)return null;var i=ht(e,e===_l?Ml:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=gu(e,i);else{t=i;var s=Sl;Sl|=2;var a=fu();for(_l===e&&Ml===t||(Hl=null,Ul=$e()+500,hu(e,t));;)try{yu();break}catch(l){pu(e,l)}Fr(),El.current=a,Sl=s,null!==Nl?t=0:(_l=null,Ml=0,t=Il)}if(0!==t){if(2===t&&(0!==(s=ft(e))&&(i=s,t=ru(e,s))),1===t)throw n=jl,hu(e,0),ou(e,i),iu(e,$e()),n;if(6===t)ou(e,i);else{if(s=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!oi(r(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=gu(e,i))&&(0!==(a=ft(e))&&(i=a,t=ru(e,a))),1===t))throw n=jl,hu(e,0),ou(e,i),iu(e,$e()),n;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(r(345));case 2:case 5:bu(e,zl,Hl);break;case 3:if(ou(e,i),(130023424&i)===i&&10<(t=Wl+500-$e())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&i)!==i){eu(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=is(bu.bind(null,e,zl,Hl),t);break}bu(e,zl,Hl);break;case 4:if(ou(e,i),(4194240&i)===i)break;for(t=e.eventTimes,s=-1;0<i;){var o=31-at(i);a=1<<o,(o=t[o])>s&&(s=o),i&=~a}if(i=s,10<(i=(120>(i=$e()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Cl(i/1960))-i)){e.timeoutHandle=is(bu.bind(null,e,zl,Hl),i);break}bu(e,zl,Hl);break;default:throw Error(r(329))}}}return iu(e,$e()),e.callbackNode===n?su.bind(null,e):null}function ru(e,t){var n=Ol;return e.current.memoizedState.isDehydrated&&(hu(e,t).flags|=256),2!==(e=gu(e,t))&&(t=zl,zl=n,null!==t&&au(t)),e}function au(e){null===zl?zl=e:zl.push.apply(zl,e)}function ou(e,t){for(t&=~Rl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),i=1<<n;e[n]=-1,t&=~i}}function lu(e){if(0!==(6&Sl))throw Error(r(327));wu();var t=ht(e,0);if(0===(1&t))return iu(e,$e()),null;var n=gu(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=ru(e,i))}if(1===n)throw n=jl,hu(e,0),ou(e,t),iu(e,$e()),n;if(6===n)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bu(e,zl,Hl),iu(e,$e()),null}function uu(e,t){var n=Sl;Sl|=1;try{return e(t)}finally{0===(Sl=n)&&(Ul=$e()+500,Os&&Us())}}function cu(e){null!==Xl&&0===Xl.tag&&0===(6&Sl)&&wu();var t=Sl;Sl|=1;var n=kl.transition,i=Dt;try{if(kl.transition=null,Dt=1,e)return e()}finally{Dt=i,kl.transition=n,0===(6&(Sl=t))&&Us()}}function du(){Tl=Bl.current,Es(Bl)}function hu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Nl)for(n=Nl.return;null!==n;){var i=n;switch(tr(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Bs();break;case 3:Qr(),Es(_s),Es(Ss),na();break;case 5:Jr(i);break;case 4:Qr();break;case 13:case 19:Es(Zr);break;case 10:kr(i.type._context);break;case 22:case 23:du()}n=n.return}if(_l=e,Nl=e=Bu(e.current,null),Ml=Tl=t,Il=0,jl=null,Rl=Ll=Pl=0,zl=Ol=null,null!==Mr){for(t=0;t<Mr.length;t++)if(null!==(i=(n=Mr[t]).interleaved)){n.interleaved=null;var s=i.next,r=n.pending;if(null!==r){var a=r.next;r.next=s,i.next=a}n.pending=i}Mr=null}return e}function pu(e,t){for(;;){var n=Nl;try{if(Fr(),ia.current=$a,ua){for(var i=aa.memoizedState;null!==i;){var s=i.queue;null!==s&&(s.pending=null),i=i.next}ua=!1}if(ra=0,la=oa=aa=null,ca=!1,da=0,Fl.current=null,null===n||null===n.return){Il=1,jl=t,Nl=null;break}e:{var a=e,o=n.return,l=n,u=t;if(t=Ml,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=go(o);if(null!==f){f.flags&=-257,vo(f,o,l,0,t),1&f.mode&&mo(a,c,t),u=c;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){mo(a,c,t),mu();break e}u=Error(r(426))}else if(sr&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),fr(lo(u,l));break e}}a=u=lo(u,l),4!==Il&&(Il=2),null===Ol?Ol=[a]:Ol.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Wr(a,po(0,u,t));break e;case 1:l=u;var y=a.type,D=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==D&&"function"===typeof D.componentDidCatch&&(null===ql||!ql.has(D)))){a.flags|=65536,t&=-t,a.lanes|=t,Wr(a,fo(a,l,t));break e}}a=a.return}while(null!==a)}xu(n)}catch(x){t=x,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function fu(){var e=El.current;return El.current=$a,null===e?$a:e}function mu(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===_l||0===(268435455&Pl)&&0===(268435455&Ll)||ou(_l,Ml)}function gu(e,t){var n=Sl;Sl|=2;var i=fu();for(_l===e&&Ml===t||(Hl=null,hu(e,t));;)try{vu();break}catch(s){pu(e,s)}if(Fr(),Sl=n,El.current=i,null!==Nl)throw Error(r(261));return _l=null,Ml=0,Il}function vu(){for(;null!==Nl;)Du(Nl)}function yu(){for(;null!==Nl&&!Ye();)Du(Nl)}function Du(e){var t=Al(e.alternate,e,Tl);e.memoizedProps=e.pendingProps,null===t?xu(e):Nl=t,Fl.current=null}function xu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ko(n,t,Tl)))return void(Nl=n)}else{if(null!==(n=Xo(n,t)))return n.flags&=32767,void(Nl=n);if(null===e)return Il=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Il&&(Il=5)}function bu(e,t,n){var i=Dt,s=kl.transition;try{kl.transition=null,Dt=1,function(e,t,n,i){do{wu()}while(null!==Xl);if(0!==(6&Sl))throw Error(r(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-at(n),r=1<<s;t[s]=0,i[s]=-1,e[s]=-1,n&=~r}}(e,a),e===_l&&(Nl=_l=null,Ml=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,_u(tt,(function(){return wu(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=kl.transition,kl.transition=null;var o=Dt;Dt=1;var l=Sl;Sl|=4,Fl.current=null,function(e,t){if(es=Vt,pi(e=hi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(b){n=null;break e}var o=0,l=-1,u=-1,c=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==i&&3!==h.nodeType||(u=o+i),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++c===s&&(l=o),p===a&&++d===i&&(u=o),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Vt=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,D=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(r(163))}}catch(b){Cu(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}m=tl,tl=!1}(e,n),gl(n,e),fi(ts),Vt=!!es,ts=es=null,e.current=n,yl(n,e,s),Qe(),Sl=l,Dt=o,kl.transition=a}else e.current=n;if(Kl&&(Kl=!1,Xl=e,Yl=s),a=e.pendingLanes,0===a&&(ql=null),function(e){if(rt&&"function"===typeof rt.onCommitFiberRoot)try{rt.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),iu(e,$e()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Vl)throw Vl=!1,e=Gl,Gl=null,e;0!==(1&Yl)&&0!==e.tag&&wu(),a=e.pendingLanes,0!==(1&a)?e===$l?Ql++:(Ql=0,$l=e):Ql=0,Us()}(e,t,n,i)}finally{kl.transition=s,Dt=i}return null}function wu(){if(null!==Xl){var e=xt(Yl),t=kl.transition,n=Dt;try{if(kl.transition=null,Dt=16>e?16:e,null===Xl)var i=!1;else{if(e=Xl,Xl=null,Yl=0,0!==(6&Sl))throw Error(r(331));var s=Sl;for(Sl|=4,Jo=e.current;null!==Jo;){var a=Jo,o=a.child;if(0!==(16&Jo.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Jo=c;null!==Jo;){var d=Jo;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Jo=h;else for(;null!==Jo;){var p=(d=Jo).sibling,f=d.return;if(rl(d),d===c){Jo=null;break}if(null!==p){p.return=f,Jo=p;break}Jo=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Jo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(a=Jo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Jo=y;break e}Jo=a.return}}var D=e.current;for(Jo=D;null!==Jo;){var x=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,Jo=x;else e:for(o=D;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(w){Cu(l,l.return,w)}if(l===o){Jo=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Jo=b;break e}Jo=l.return}}if(Sl=s,Us(),rt&&"function"===typeof rt.onPostCommitFiberRoot)try{rt.onPostCommitFiberRoot(st,e)}catch(w){}i=!0}return i}finally{Dt=n,kl.transition=t}}return!1}function Au(e,t,n){e=Or(e,t=po(0,t=lo(n,t),1),1),t=eu(),null!==e&&(vt(e,1,t),iu(e,t))}function Cu(e,t,n){if(3===e.tag)Au(e,e,n);else for(;null!==t;){if(3===t.tag){Au(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===ql||!ql.has(i))){t=Or(t,e=fo(t,e=lo(n,e),1),1),e=eu(),null!==t&&(vt(t,1,e),iu(t,e));break}}t=t.return}}function Eu(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,_l===e&&(Ml&n)===n&&(4===Il||3===Il&&(130023424&Ml)===Ml&&500>$e()-Wl?hu(e,0):Rl|=n),iu(e,t)}function Fu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=eu();null!==(e=Ir(e,t))&&(vt(e,t,n),iu(e,n))}function ku(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Fu(e,n)}function Su(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(r(314))}null!==i&&i.delete(t),Fu(e,n)}function _u(e,t){return Ke(e,t)}function Nu(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mu(e,t,n,i){return new Nu(e,t,n,i)}function Tu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Bu(e,t){var n=e.alternate;return null===n?((n=Mu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Iu(e,t,n,i,s,a){var o=2;if(i=e,"function"===typeof e)Tu(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case A:return ju(n.children,s,a,t);case C:o=8,s|=8;break;case E:return(e=Mu(12,n,t,2|s)).elementType=E,e.lanes=a,e;case _:return(e=Mu(13,n,t,s)).elementType=_,e.lanes=a,e;case N:return(e=Mu(19,n,t,s)).elementType=N,e.lanes=a,e;case B:return Pu(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case F:o=10;break e;case k:o=9;break e;case S:o=11;break e;case M:o=14;break e;case T:o=16,i=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=Mu(o,n,t,s)).elementType=e,t.type=i,t.lanes=a,t}function ju(e,t,n,i){return(e=Mu(7,e,i,t)).lanes=n,e}function Pu(e,t,n,i){return(e=Mu(22,e,i,t)).elementType=B,e.lanes=n,e.stateNode={isHidden:!1},e}function Lu(e,t,n){return(e=Mu(6,e,null,t)).lanes=n,e}function Ru(e,t,n){return(t=Mu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ou(e,t,n,i,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function zu(e,t,n,i,s,r,a,o,l){return e=new Ou(e,t,n,o,l),1===t?(t=1,!0===r&&(t|=8)):t=0,r=Mu(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pr(r),e}function Wu(e){if(!e)return ks;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ts(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var n=e.type;if(Ts(n))return js(e,n,t)}return t}function Uu(e,t,n,i,s,r,a,o,l){return(e=zu(n,i,!0,e,0,r,0,o,l)).context=Wu(null),n=e.current,(r=Rr(i=eu(),s=tu(n))).callback=void 0!==t&&null!==t?t:null,Or(n,r,s),e.current.lanes=s,vt(e,s,i),iu(e,i),e}function Hu(e,t,n,i){var s=t.current,r=eu(),a=tu(s);return n=Wu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Rr(r,a)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Or(s,t,a))&&(nu(e,s,a,r),zr(e,s,a)),a}function Vu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qu(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}Al=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||_s.current)Do=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Do=!1,function(e,t,n){switch(t.tag){case 3:_o(t),pr();break;case 5:$r(t);break;case 1:Ts(t.type)&&Ps(t);break;case 4:Yr(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;Fs(wr,i._currentValue),i._currentValue=s;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Fs(Zr,1&Zr.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Lo(e,t,n):(Fs(Zr,1&Zr.current),null!==(e=Vo(e,t,n))?e.sibling:null);Fs(Zr,1&Zr.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Uo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Fs(Zr,Zr.current),i)break;return null;case 22:case 23:return t.lanes=0,Co(e,t,n)}return Vo(e,t,n)}(e,t,n);Do=0!==(131072&e.flags)}else Do=!1,sr&&0!==(1048576&t.flags)&&Zs(t,qs,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Ho(e,t),e=t.pendingProps;var s=Ms(t,Ss.current);_r(t,n),s=ma(null,t,i,e,s,n);var a=ga();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ts(i)?(a=!0,Ps(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Pr(t),s.updater=io,t.stateNode=s,s._reactInternals=t,oo(t,i,e,n),t=So(null,t,i,!0,a,n)):(t.tag=0,sr&&a&&er(t),xo(null,t,s,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"===typeof e)return Tu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===S)return 11;if(e===M)return 14}return 2}(i),e=to(i,e),s){case 0:t=Fo(null,t,i,e,n);break e;case 1:t=ko(null,t,i,e,n);break e;case 11:t=bo(null,t,i,e,n);break e;case 14:t=wo(null,t,i,to(i.type,e),n);break e}throw Error(r(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,Fo(e,t,i,s=t.elementType===i?s:to(i,s),n);case 1:return i=t.type,s=t.pendingProps,ko(e,t,i,s=t.elementType===i?s:to(i,s),n);case 3:e:{if(_o(t),null===e)throw Error(r(387));i=t.pendingProps,s=(a=t.memoizedState).element,Lr(e,t),Ur(t,i,null,n);var o=t.memoizedState;if(i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=No(e,t,i,n,s=lo(Error(r(423)),t));break e}if(i!==s){t=No(e,t,i,n,s=lo(Error(r(424)),t));break e}for(ir=us(t.stateNode.containerInfo.firstChild),nr=t,sr=!0,rr=null,n=br(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pr(),i===s){t=Vo(e,t,n);break e}xo(e,t,i,n)}t=t.child}return t;case 5:return $r(t),null===e&&ur(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ns(i,s)?o=null:null!==a&&ns(i,a)&&(t.flags|=32),Eo(e,t),xo(e,t,o,n),t.child;case 6:return null===e&&ur(t),null;case 13:return Lo(e,t,n);case 4:return Yr(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=xr(t,null,i,n):xo(e,t,i,n),t.child;case 11:return i=t.type,s=t.pendingProps,bo(e,t,i,s=t.elementType===i?s:to(i,s),n);case 7:return xo(e,t,t.pendingProps,n),t.child;case 8:case 12:return xo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Fs(wr,i._currentValue),i._currentValue=o,null!==a)if(oi(a.value,o)){if(a.children===s.children&&!_s.current){t=Vo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var u=l.firstContext;null!==u;){if(u.context===i){if(1===a.tag){(u=Rr(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),Sr(a.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(r(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Sr(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}xo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,_r(t,n),i=i(s=Nr(s)),t.flags|=1,xo(e,t,i,n),t.child;case 14:return s=to(i=t.type,t.pendingProps),wo(e,t,i,s=to(i.type,s),n);case 15:return Ao(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:to(i,s),Ho(e,t),t.tag=1,Ts(i)?(e=!0,Ps(t)):e=!1,_r(t,n),ro(t,i,s),oo(t,i,s,n),So(null,t,i,!0,e,n);case 19:return Uo(e,t,n);case 22:return Co(e,t,n)}throw Error(r(156,t.tag))};var Ku="function"===typeof reportError?reportError:function(e){console.error(e)};function Xu(e){this._internalRoot=e}function Yu(e){this._internalRoot=e}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $u(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ju(){}function Zu(e,t,n,i,s){var r=n._reactRootContainer;if(r){var a=r;if("function"===typeof s){var o=s;s=function(){var e=Vu(a);o.call(e)}}Hu(t,a,e,s)}else a=function(e,t,n,i,s){if(s){if("function"===typeof i){var r=i;i=function(){var e=Vu(a);r.call(e)}}var a=Uu(t,i,e,0,null,!1,0,"",Ju);return e._reactRootContainer=a,e[fs]=a.current,Ui(8===e.nodeType?e.parentNode:e),cu(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof i){var o=i;i=function(){var e=Vu(l);o.call(e)}}var l=zu(e,0,!1,null,0,!1,0,"",Ju);return e._reactRootContainer=l,e[fs]=l.current,Ui(8===e.nodeType?e.parentNode:e),cu((function(){Hu(t,l,n,i)})),l}(n,t,e,s,i);return Vu(a)}Yu.prototype.render=Xu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));Hu(e,t,null,null)},Yu.prototype.unmount=Xu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu((function(){Hu(null,e,null,null)})),t[fs]=null}},Yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Bt.length&&0!==t&&t<Bt[n].priority;n++);Bt.splice(n,0,e),0===n&&Lt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),iu(t,$e()),0===(6&Sl)&&(Ul=$e()+500,Us()))}break;case 13:cu((function(){var t=Ir(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}})),qu(e,1)}},wt=function(e){if(13===e.tag){var t=Ir(e,134217728);if(null!==t)nu(t,e,134217728,eu());qu(e,134217728)}},At=function(e){if(13===e.tag){var t=tu(e),n=Ir(e,t);if(null!==n)nu(n,e,t,eu());qu(e,t)}},Ct=function(){return Dt},Et=function(e,t){var n=Dt;try{return Dt=e,t()}finally{Dt=n}},we=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=bs(i);if(!s)throw Error(r(90));K(i),J(i,s)}}}break;case"textarea":re(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Se=uu,_e=cu;var ec={usingClientEntryPoint:!1,Events:[Ds,xs,bs,Fe,ke,uu]},tc={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{st=ic.inject(nc),rt=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qu(t))throw Error(r(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qu(e))throw Error(r(299));var n=!1,i="",s=Ku;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=zu(e,1,!1,null,0,n,0,i,s),e[fs]=t.current,Ui(8===e.nodeType?e.parentNode:e),new Xu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return cu(e)},t.hydrate=function(e,t,n){if(!$u(t))throw Error(r(200));return Zu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qu(e))throw Error(r(405));var i=null!=n&&n.hydratedSources||null,s=!1,a="",o=Ku;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Uu(t,null,e,1,null!=n?n:null,s,0,a,o),e[fs]=t.current,Ui(e),i)for(e=0;e<i.length;e++)s=(s=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Yu(t)},t.render=function(e,t,n){if(!$u(t))throw Error(r(200));return Zu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$u(e))throw Error(r(40));return!!e._reactRootContainer&&(cu((function(){Zu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fs]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!$u(n))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return Zu(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{"use strict";e.exports=n(234)},900:(e,t)=>{t.read=function(e,t,n,i,s){var r,a,o=8*s-i-1,l=(1<<o)-1,u=l>>1,c=-7,d=n?s-1:0,h=n?-1:1,p=e[t+d];for(d+=h,r=p&(1<<-c)-1,p>>=-c,c+=o;c>0;r=256*r+e[t+d],d+=h,c-=8);for(a=r&(1<<-c)-1,r>>=-c,c+=i;c>0;a=256*a+e[t+d],d+=h,c-=8);if(0===r)r=1-u;else{if(r===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),r-=u}return(p?-1:1)*a*Math.pow(2,r-i)},t.write=function(e,t,n,i,s,r){var a,o,l,u=8*r-s-1,c=(1<<u)-1,d=c>>1,h=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:r-1,f=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=c?(o=0,a=c):a+d>=1?(o=(t*l-1)*Math.pow(2,s),a+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,s),a=0));s>=8;e[n+p]=255&o,p+=f,o/=256,s-=8);for(a=a<<s|o,u+=s;u>0;e[n+p]=255&a,p+=f,a/=256,u-=8);e[n+p-f]|=128*m}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{boolean:()=>Xt,booleanish:()=>Yt,commaOrSpaceSeparated:()=>en,commaSeparated:()=>Zt,number:()=>$t,overloadedBoolean:()=>Qt,spaceSeparated:()=>Jt});var t={};n.r(t),n.d(t,{attentionMarkers:()=>Ms,contentInitial:()=>Es,disable:()=>Ts,document:()=>Cs,flow:()=>ks,flowInitial:()=>Fs,insideSpan:()=>Ns,string:()=>Ss,text:()=>_s});var i=n(382);window.Buffer=i.hp;var s=n(43),r=n(391);function a(e,t){if(null==e)return{};var n,i,s=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var o=n(379);n(358);const l=["sri"],u=["page"],c=["page","matches"],d=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],h=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],p=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var f="popstate";function m(){return w((function(e,t){let{pathname:n,search:i,hash:s}=e.location;return D("",{pathname:n,search:i,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:x(t)}),null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function g(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function v(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function y(e,t){return{usr:e.state,key:e.key,idx:t}}function D(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0;return(0,o.A)((0,o.A)({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?b(t):t),{},{state:n,key:t&&t.key||i||Math.random().toString(36).substring(2,10)})}function x(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function b(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function w(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:s=document.defaultView,v5Compat:r=!1}=i,a=s.history,l="POP",u=null,c=d();function d(){return(a.state||{idx:null}).idx}function h(){l="POP";let e=d(),t=null==e?null:e-c;c=e,u&&u({action:l,location:m.location,delta:t})}function p(e){return A(e)}null==c&&(c=0,a.replaceState((0,o.A)((0,o.A)({},a.state),{},{idx:c}),""));let m={get action(){return l},get location(){return e(s,a)},listen(e){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(f,h),u=e,()=>{s.removeEventListener(f,h),u=null}},createHref:e=>t(s,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l="PUSH";let i=D(m.location,e,t);n&&n(i,e),c=d()+1;let o=y(i,c),h=m.createHref(i);try{a.pushState(o,"",h)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;s.location.assign(h)}r&&u&&u({action:l,location:m.location,delta:1})},replace:function(e,t){l="REPLACE";let i=D(m.location,e,t);n&&n(i,e),c=d();let s=y(i,c),o=m.createHref(i);a.replaceState(s,"",o),r&&u&&u({action:l,location:m.location,delta:0})},go:e=>a.go(e)};return m}function A(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),g(n,"No window.location.(origin|href) available to create URL");let i="string"===typeof e?e:x(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}new WeakMap;function C(e,t){return E(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function E(e,t,n,i){let s=z(("string"===typeof t?b(t):t).pathname||"/",n);if(null==s)return null;let r=F(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(r);let a=null;for(let o=0;null==a&&o<r.length;++o){let e=O(s);a=P(r[o],e,i)}return a}function F(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=(e,s,r)=>{let a={relativePath:void 0===r?e.path||"":r,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(g(a.relativePath.startsWith(i),'Absolute route path "'.concat(a.relativePath,'" nested under path "').concat(i,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),a.relativePath=a.relativePath.slice(i.length));let o=G([i,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(g(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(o,'".')),F(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:j(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let i of k(e.path))s(e,t,i);else s(e,t)})),t}function k(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,s=n.endsWith("?"),r=n.replace(/\?$/,"");if(0===i.length)return s?[r,""]:[r];let a=k(i.join("/")),o=[];return o.push(...a.map((e=>""===e?r:[r,e].join("/")))),s&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}var S=/^:[\w-]+$/,_=3,N=2,M=1,T=10,B=-2,I=e=>"*"===e;function j(e,t){let n=e.split("/"),i=n.length;return n.some(I)&&(i+=B),t&&(i+=N),n.filter((e=>!I(e))).reduce(((e,t)=>e+(S.test(t)?_:""===t?M:T)),i)}function P(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:i}=e,s={},r="/",a=[];for(let o=0;o<i.length;++o){let e=i[o],l=o===i.length-1,u="/"===r?t:t.slice(r.length)||"/",c=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},u),d=e.route;if(!c&&l&&n&&!i[i.length-1].route.index&&(c=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!c)return null;Object.assign(s,c.params),a.push({params:s,pathname:G([r,c.pathname]),pathnameBase:q(G([r,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(r=G([r,c.pathnameBase]))}return a}function L(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=R(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let r=s[0],a=r.replace(/(.)\/+$/,"$1"),o=s.slice(1),l=i.reduce(((e,t,n)=>{let{paramName:i,isOptional:s}=t;if("*"===i){let e=o[n]||"";a=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[i]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:r,pathnameBase:a,pattern:e}}function R(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];v("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let i=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));return e.endsWith("*")?(i.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function O(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return v(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function z(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function W(e,t,n,i){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(i),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function U(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function H(e){let t=U(e);return t.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase))}function V(e,t,n){let i,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?i=b(e):(i=(0,o.A)({},e),g(!i.pathname||!i.pathname.includes("?"),W("?","pathname","search",i)),g(!i.pathname||!i.pathname.includes("#"),W("#","pathname","hash",i)),g(!i.search||!i.search.includes("#"),W("#","search","hash",i)));let r,a=""===e||""===i.pathname,l=a?"/":i.pathname;if(null==l)r=n;else{let e=t.length-1;if(!s&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}r=e>=0?t[e]:"/"}let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:i="",hash:s=""}="string"===typeof e?b(e):e,r=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:r,search:K(i),hash:X(s)}}(i,r),c=l&&"/"!==l&&l.endsWith("/"),d=(a||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!c&&!d||(u.pathname+="/"),u}var G=e=>e.join("/").replace(/\/\/+/g,"/"),q=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),K=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",X=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Y(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Q=["POST","PUT","PATCH","DELETE"],$=(new Set(Q),["GET",...Q]);new Set($),Symbol("ResetLoaderData");var J=s.createContext(null);J.displayName="DataRouter";var Z=s.createContext(null);Z.displayName="DataRouterState";var ee=s.createContext({isTransitioning:!1});ee.displayName="ViewTransition";var te=s.createContext(new Map);te.displayName="Fetchers";var ne=s.createContext(null);ne.displayName="Await";var ie=s.createContext(null);ie.displayName="Navigation";var se=s.createContext(null);se.displayName="Location";var re=s.createContext({outlet:null,matches:[],isDataRoute:!1});re.displayName="Route";var ae=s.createContext(null);ae.displayName="RouteError";function oe(){return null!=s.useContext(se)}function le(){return g(oe(),"useLocation() may be used only in the context of a <Router> component."),s.useContext(se).location}var ue="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ce(e){s.useContext(ie).static||s.useLayoutEffect(e)}function de(){let{isDataRoute:e}=s.useContext(re);return e?function(){let{router:e}=xe("useNavigate"),t=we("useNavigate"),n=s.useRef(!1);ce((()=>{n.current=!0}));let i=s.useCallback((async function(i){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(n.current,ue),n.current&&("number"===typeof i?e.navigate(i):await e.navigate(i,(0,o.A)({fromRouteId:t},s)))}),[e,t]);return i}():function(){g(oe(),"useNavigate() may be used only in the context of a <Router> component.");let e=s.useContext(J),{basename:t,navigator:n}=s.useContext(ie),{matches:i}=s.useContext(re),{pathname:r}=le(),a=JSON.stringify(H(i)),o=s.useRef(!1);ce((()=>{o.current=!0}));let l=s.useCallback((function(i){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(v(o.current,ue),!o.current)return;if("number"===typeof i)return void n.go(i);let l=V(i,JSON.parse(a),r,"path"===s.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:G([t,l.pathname])),(s.replace?n.replace:n.push)(l,s.state,s)}),[t,n,a,r,e]);return l}()}s.createContext(null);function he(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=s.useContext(re),{pathname:i}=le(),r=JSON.stringify(H(n));return s.useMemo((()=>V(e,JSON.parse(r),i,"path"===t)),[e,r,i,t])}function pe(e,t,n,i){g(oe(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=s.useContext(ie),{matches:a}=s.useContext(re),l=a[a.length-1],u=l?l.params:{},c=l?l.pathname:"/",d=l?l.pathnameBase:"/",h=l&&l.route;{let e=h&&h.path||"";Ee(c,!h||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(c,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,f=le();if(t){var m;let e="string"===typeof t?b(t):t;g("/"===d||(null===(m=e.pathname)||void 0===m?void 0:m.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=f;let y=p.pathname||"/",D=y;if("/"!==d){let e=d.replace(/^\//,"").split("/");D="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=C(e,{pathname:D});v(h||null!=x,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),v(null==x||void 0!==x[x.length-1].route.element||void 0!==x[x.length-1].route.Component||void 0!==x[x.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let w=ye(x&&x.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:G([d,r.encodeLocation?r.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:G([d,r.encodeLocation?r.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n,i);return t&&w?s.createElement(se.Provider,{value:{location:(0,o.A)({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},w):w}function fe(){let e=Ae(),t=Y(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=s.createElement(s.Fragment,null,s.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),s.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",s.createElement("code",{style:a},"ErrorBoundary")," or"," ",s.createElement("code",{style:a},"errorElement")," prop on your route.")),s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:r},n):null,o)}var me=s.createElement(fe,null),ge=class extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(re.Provider,{value:this.props.routeContext},s.createElement(ae.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ve(e){let{routeContext:t,match:n,children:i}=e,r=s.useContext(J);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(re.Provider,{value:t},i)}function ye(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let i=e,r=null===n||void 0===n?void 0:n.errors;if(null!=r){let e=i.findIndex((e=>e.route.id&&void 0!==(null===r||void 0===r?void 0:r[e.route.id])));g(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(r).join(","))),i=i.slice(0,Math.min(i.length,e+1))}let a=!1,o=-1;if(n)for(let s=0;s<i.length;s++){let e=i[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=s),e.route.id){let{loaderData:t,errors:s}=n,r=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!s||void 0===s[e.route.id]);if(e.route.lazy||r){a=!0,i=o>=0?i.slice(0,o+1):[i[0]];break}}}return i.reduceRight(((e,l,u)=>{let c,d=!1,h=null,p=null;n&&(c=r&&l.route.id?r[l.route.id]:void 0,h=l.route.errorElement||me,a&&(o<0&&0===u?(Ee("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):o===u&&(d=!0,p=l.route.hydrateFallbackElement||null)));let f=t.concat(i.slice(0,u+1)),m=()=>{let t;return t=c?h:d?p:l.route.Component?s.createElement(l.route.Component,null):l.route.element?l.route.element:e,s.createElement(ve,{match:l,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(l.route.ErrorBoundary||l.route.errorElement||0===u)?s.createElement(ge,{location:n.location,revalidation:n.revalidation,component:h,error:c,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):m()}),null)}function De(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function xe(e){let t=s.useContext(J);return g(t,De(e)),t}function be(e){let t=s.useContext(Z);return g(t,De(e)),t}function we(e){let t=function(e){let t=s.useContext(re);return g(t,De(e)),t}(e),n=t.matches[t.matches.length-1];return g(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function Ae(){var e;let t=s.useContext(ae),n=be("useRouteError"),i=we("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[i]}var Ce={};function Ee(e,t,n){t||Ce[e]||(Ce[e]=!0,v(!1,n))}s.memo((function(e){let{routes:t,future:n,state:i}=e;return pe(t,void 0,i,n)}));function Fe(e){g(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ke(e){let{basename:t="/",children:n=null,location:i,navigationType:r="POP",navigator:a,static:o=!1}=e;g(!oe(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),u=s.useMemo((()=>({basename:l,navigator:a,static:o,future:{}})),[l,a,o]);"string"===typeof i&&(i=b(i));let{pathname:c="/",search:d="",hash:h="",state:p=null,key:f="default"}=i,m=s.useMemo((()=>{let e=z(c,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:p,key:f},navigationType:r}}),[l,c,d,h,p,f,r]);return v(null!=m,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(c).concat(d).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==m?null:s.createElement(ie.Provider,{value:u},s.createElement(se.Provider,{children:n,value:m}))}function Se(e){let{children:t,location:n}=e;return pe(_e(t),n)}s.Component;function _e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return s.Children.forEach(e,((e,i)=>{if(!s.isValidElement(e))return;let r=[...t,i];if(e.type===s.Fragment)return void n.push.apply(n,_e(e.props.children,r));g(e.type===Fe,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),g(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=_e(e.props.children,r)),n.push(a)})),n}var Ne="get",Me="application/x-www-form-urlencoded";function Te(e){return null!=e&&"string"===typeof e.tagName}var Be=null;var Ie=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function je(e){return null==e||Ie.has(e)?e:(v(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Me,'"')),null)}function Pe(e,t){let n,i,s,r,a;if(Te(o=e)&&"form"===o.tagName.toLowerCase()){let a=e.getAttribute("action");i=a?z(a,t):null,n=e.getAttribute("method")||Ne,s=je(e.getAttribute("enctype"))||Me,r=new FormData(e)}else if(function(e){return Te(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Te(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||a.getAttribute("action");if(i=o?z(o,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Ne,s=je(e.getAttribute("formenctype"))||je(a.getAttribute("enctype"))||Me,r=new FormData(a,e),!function(){if(null===Be)try{new FormData(document.createElement("form"),0),Be=!1}catch(e){Be=!0}return Be}()){let{name:t,type:n,value:i}=e;if("image"===n){let e=t?"".concat(t,"."):"";r.append("".concat(e,"x"),"0"),r.append("".concat(e,"y"),"0")}else t&&r.append(t,i)}}else{if(Te(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ne,i=null,s=Me,a=e}var o;return r&&"text/plain"===s&&(a=r,r=void 0),{action:i,method:n.toLowerCase(),encType:s,formData:r,body:a}}function Le(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function Re(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}function Oe(e){return null!=e&&"string"===typeof e.page}function ze(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function We(e,t,n,i,s,r){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var i;return n[t].pathname!==e.pathname||(null===(i=n[t].route.path)||void 0===i?void 0:i.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===r?t.filter(((e,t)=>a(e,t)||o(e,t))):"data"===r?t.filter(((t,r)=>{let l=i.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,r)||o(t,r))return!0;if(t.route.shouldRevalidate){var u;let i=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:(null===(u=n[0])||void 0===u?void 0:u.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof i)return i}return!0})):[]}function Ue(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=e.map((e=>{let i=t.routes[e.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s})).flat(1),[...new Set(i)];var i}function He(e,t){let n=new Set,i=new Set(t);return e.reduce(((e,s)=>{if(t&&!Oe(s)&&"script"===s.as&&s.href&&i.has(s.href))return e;let r=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}(s));return n.has(r)||(n.add(r),e.push({key:r,link:s})),e}),[])}function Ve(e){return{__html:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;Symbol("SingleFetchRedirect");var Ge=new Set([100,101,204,205]);function qe(e,t){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===z(n.pathname,t)?n.pathname="".concat(t.replace(/\/$/,""),"/_root.data"):n.pathname="".concat(n.pathname.replace(/\/$/,""),".data"),n}s.Component;function Ke(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let i,r=s.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Y(t))return s.createElement(Xe,{title:"Unhandled Thrown Response!"},s.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),r);if(t instanceof Error)0;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);new Error(e)}return s.createElement(Xe,{title:"Application Error!",isOutsideRemixApp:n},s.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),s.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},i.stack),r)}function Xe(e){var t;let{title:n,renderScripts:i,isOutsideRemixApp:r,children:a}=e,{routeModules:o}=Ze();return null!==o.root&&void 0!==t&&t.Layout&&!r?a:s.createElement("html",{lang:"en"},s.createElement("head",null,s.createElement("meta",{charSet:"utf-8"}),s.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),s.createElement("title",null,n)),s.createElement("body",null,s.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,i?s.createElement(at,null):null)))}function Ye(e,t){return"lazy"===e.mode&&!0===t}function Qe(){let e=s.useContext(J);return Le(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function $e(){let e=s.useContext(Z);return Le(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Je=s.createContext(void 0);function Ze(){let e=s.useContext(Je);return Le(e,"You must render this element inside a <HydratedRouter> element"),e}function et(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function tt(e,t,n){if(n&&!rt)return[e[0]];if(t){let n=e.findIndex((e=>void 0!==t[e.route.id]));return e.slice(0,n+1)}return e}function nt(e){let{page:t}=e,n=a(e,u),{router:i}=Qe(),r=s.useMemo((()=>C(i.routes,t,i.basename)),[i.routes,t,i.basename]);return r?s.createElement(st,(0,o.A)({page:t,matches:r},n)):null}function it(e){let{manifest:t,routeModules:n}=Ze(),[i,r]=s.useState([]);return s.useEffect((()=>{let i=!1;return async function(e,t,n){return He((await Promise.all(e.map((async e=>{let i=t.routes[e.route.id];if(i){let e=await Re(i,n);return e.links?e.links():[]}return[]})))).flat(1).filter(ze).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?(0,o.A)((0,o.A)({},e),{},{rel:"prefetch",as:"style"}):(0,o.A)((0,o.A)({},e),{},{rel:"prefetch"}))))}(e,t,n).then((e=>{i||r(e)})),()=>{i=!0}}),[e,t,n]),i}function st(e){let{page:t,matches:n}=e,i=a(e,c),r=le(),{manifest:l,routeModules:u}=Ze(),{basename:d}=Qe(),{loaderData:h,matches:p}=$e(),f=s.useMemo((()=>We(t,n,p,l,r,"data")),[t,n,p,l,r]),m=s.useMemo((()=>We(t,n,p,l,r,"assets")),[t,n,p,l,r]),g=s.useMemo((()=>{if(t===r.pathname+r.search+r.hash)return[];let e=new Set,i=!1;if(n.forEach((t=>{var n;let s=l.routes[t.route.id];s&&s.hasLoader&&(!f.some((e=>e.route.id===t.route.id))&&t.route.id in h&&null!==(n=u[t.route.id])&&void 0!==n&&n.shouldRevalidate||s.hasClientLoader?i=!0:e.add(t.route.id))})),0===e.size)return[];let s=qe(t,d);return i&&e.size>0&&s.searchParams.set("_routes",n.filter((t=>e.has(t.route.id))).map((e=>e.route.id)).join(",")),[s.pathname+s.search]}),[d,h,r,l,f,n,t,u]),v=s.useMemo((()=>Ue(m,l)),[m,l]),y=it(m);return s.createElement(s.Fragment,null,g.map((e=>s.createElement("link",(0,o.A)({key:e,rel:"prefetch",as:"fetch",href:e},i)))),v.map((e=>s.createElement("link",(0,o.A)({key:e,rel:"modulepreload",href:e},i)))),y.map((e=>{let{key:t,link:n}=e;return s.createElement("link",(0,o.A)({key:t},n))})))}Je.displayName="FrameworkContext";var rt=!1;function at(e){let{manifest:t,serverHandoffString:n,isSpaMode:i,renderMeta:r,routeDiscovery:u,ssr:c}=Ze(),{router:d,static:h,staticContext:p}=Qe(),{matches:f}=$e(),m=Ye(u,c);r&&(r.didRenderScripts=!0);let g=tt(f,null,i);s.useEffect((()=>{0}),[]);let v=s.useMemo((()=>{var i;let r=p?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",u=h?"".concat(null!==t.hmr&&void 0!==i&&i.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(m?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(g.map(((e,n)=>{let i="route".concat(n),s=t.routes[e.route.id];Le(s,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:r,clientLoaderModule:a,clientMiddlewareModule:o,hydrateFallbackModule:l,module:u}=s,c=[...r?[{module:r,varName:"".concat(i,"_clientAction")}]:[],...a?[{module:a,varName:"".concat(i,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(i,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(i,"_HydrateFallback")}]:[],{module:u,varName:"".concat(i,"_main")}];return 1===c.length?"import * as ".concat(i," from ").concat(JSON.stringify(u),";"):[c.map((e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";'))).join("\n"),"const ".concat(i," = {").concat(c.map((e=>"...".concat(e.varName))).join(","),"};")].join("\n")})).join("\n"),"\n  ").concat(m?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,i=a(e,l),s=new Set(t.state.matches.map((e=>e.route.id))),r=t.state.location.pathname.split("/").filter(Boolean),u=["/"];for(r.pop();r.length>0;)u.push("/".concat(r.join("/"))),r.pop();u.forEach((e=>{let n=C(t.routes,e,t.basename);n&&n.forEach((e=>s.add(e.route.id)))}));let c=[...s].reduce(((e,t)=>Object.assign(e,{[t]:i.routes[t]})),{});return(0,o.A)((0,o.A)({},i),{},{routes:c,sri:!!n||void 0})}(t,d),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(g.map(((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t))).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return s.createElement(s.Fragment,null,s.createElement("script",(0,o.A)((0,o.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ve(r),type:void 0})),s.createElement("script",(0,o.A)((0,o.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ve(u),type:"module",async:!0})))}),[]),y=rt?[]:(t.entry.imports.concat(Ue(g,t,{includeHydrateFallback:!0})),[...new Set(D)]);var D;let x="object"===typeof t.sri?t.sri:{};return rt?null:s.createElement(s.Fragment,null,"object"===typeof t.sri?s.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:x})}}):null,m?null:s.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:x[t.url],suppressHydrationWarning:!0}),s.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:x[t.entry.module],suppressHydrationWarning:!0}),y.map((t=>s.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:x[t],suppressHydrationWarning:!0}))),v)}function ot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))}}var lt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{lt&&(window.__reactRouterVersion="7.6.2")}catch(Ou){}function ut(e){let{basename:t,children:n,window:i}=e,r=s.useRef();null==r.current&&(r.current=m({window:i,v5Compat:!0}));let a=r.current,[o,l]=s.useState({action:a.action,location:a.location}),u=s.useCallback((e=>{s.startTransition((()=>l(e)))}),[l]);return s.useLayoutEffect((()=>a.listen(u)),[a,u]),s.createElement(ke,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:a})}var ct=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dt=s.forwardRef((function(e,t){let n,{onClick:i,discover:r="render",prefetch:l="none",relative:u,reloadDocument:c,replace:h,state:p,target:f,to:m,preventScrollReset:y,viewTransition:D}=e,b=a(e,d),{basename:w}=s.useContext(ie),A="string"===typeof m&&ct.test(m),C=!1;if("string"===typeof m&&A&&(n=m,lt))try{let e=new URL(window.location.href),t=m.startsWith("//")?new URL(e.protocol+m):new URL(m),n=z(t.pathname,w);t.origin===e.origin&&null!=n?m=n+t.search+t.hash:C=!0}catch(Ou){v(!1,'<Link to="'.concat(m,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let E=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(oe(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=s.useContext(ie),{hash:r,pathname:a,search:o}=he(e,{relative:t}),l=a;return"/"!==n&&(l="/"===a?n:G([n,a])),i.createHref({pathname:l,search:o,hash:r})}(m,{relative:u}),[F,k,S]=function(e,t){let n=s.useContext(Je),[i,r]=s.useState(!1),[a,o]=s.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:c,onMouseLeave:d,onTouchStart:h}=t,p=s.useRef(null);s.useEffect((()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{o(e.isIntersecting)}))}),{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}}),[e]),s.useEffect((()=>{if(i){let e=setTimeout((()=>{o(!0)}),100);return()=>{clearTimeout(e)}}}),[i]);let f=()=>{r(!0)},m=()=>{r(!1),o(!1)};return n?"intent"!==e?[a,p,{}]:[a,p,{onFocus:et(l,f),onBlur:et(u,m),onMouseEnter:et(c,f),onMouseLeave:et(d,m),onTouchStart:et(h,f)}]:[!1,p,{}]}(l,b),_=function(e){let{target:t,replace:n,state:i,preventScrollReset:r,relative:a,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=de(),u=le(),c=he(e,{relative:a});return s.useCallback((s=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(s,t)){s.preventDefault();let t=void 0!==n?n:x(u)===x(c);l(e,{replace:t,state:i,preventScrollReset:r,relative:a,viewTransition:o})}}),[u,l,c,n,i,t,e,r,a,o])}(m,{replace:h,state:p,target:f,preventScrollReset:y,relative:u,viewTransition:D});let N=s.createElement("a",(0,o.A)((0,o.A)((0,o.A)({},b),S),{},{href:n||E,onClick:C||c?i:function(e){i&&i(e),e.defaultPrevented||_(e)},ref:ot(t,k),target:f,"data-discover":A||"render"!==r?void 0:"true"}));return F&&!A?s.createElement(s.Fragment,null,N,s.createElement(nt,{page:E})):N}));dt.displayName="Link";var ht=s.forwardRef((function(e,t){let{"aria-current":n="page",caseSensitive:i=!1,className:r="",end:l=!1,style:u,to:c,viewTransition:d,children:p}=e,f=a(e,h),m=he(c,{relative:f.relative}),v=le(),y=s.useContext(Z),{navigator:D,basename:x}=s.useContext(ie),b=null!=y&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s.useContext(ee);g(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=mt("useViewTransitionState"),r=he(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=z(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=z(n.nextLocation.pathname,i)||n.nextLocation.pathname;return null!=L(r.pathname,o)||null!=L(r.pathname,a)}(m)&&!0===d,w=D.encodeLocation?D.encodeLocation(m).pathname:m.pathname,A=v.pathname,C=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;i||(A=A.toLowerCase(),C=C?C.toLowerCase():null,w=w.toLowerCase()),C&&x&&(C=z(C,x)||C);const E="/"!==w&&w.endsWith("/")?w.length-1:w.length;let F,k=A===w||!l&&A.startsWith(w)&&"/"===A.charAt(E),S=null!=C&&(C===w||!l&&C.startsWith(w)&&"/"===C.charAt(w.length)),_={isActive:k,isPending:S,isTransitioning:b},N=k?n:void 0;F="function"===typeof r?r(_):[r,k?"active":null,S?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let M="function"===typeof u?u(_):u;return s.createElement(dt,(0,o.A)((0,o.A)({},f),{},{"aria-current":N,className:F,ref:t,style:M,to:c,viewTransition:d}),"function"===typeof p?p(_):p)}));ht.displayName="NavLink";var pt=s.forwardRef(((e,t)=>{let{discover:n="render",fetcherKey:i,navigate:r,reloadDocument:l,replace:u,state:c,method:d=Ne,action:h,onSubmit:f,relative:m,preventScrollReset:v,viewTransition:y}=e,D=a(e,p),b=yt(),w=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=s.useContext(ie),i=s.useContext(re);g(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),a=(0,o.A)({},he(e||".",{relative:t})),l=le();if(null==e){a.search=l.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some((e=>""===e))){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let n=e.toString();a.search=n?"?".concat(n):""}}e&&"."!==e||!r.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(a.pathname="/"===a.pathname?n:G([n,a.pathname]));return x(a)}(h,{relative:m}),A="get"===d.toLowerCase()?"get":"post",C="string"===typeof h&&ct.test(h);return s.createElement("form",(0,o.A)((0,o.A)({ref:t,method:A,action:w,onSubmit:l?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d;b(t||e.currentTarget,{fetcherKey:i,method:n,navigate:r,replace:u,state:c,relative:m,preventScrollReset:v,viewTransition:y})}},D),{},{"data-discover":C||"render"!==n?void 0:"true"}))}));function ft(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function mt(e){let t=s.useContext(J);return g(t,ft(e)),t}pt.displayName="Form";var gt=0,vt=()=>"__".concat(String(++gt),"__");function yt(){let{router:e}=mt("useSubmit"),{basename:t}=s.useContext(ie),n=we("useRouteId");return s.useCallback((async function(i){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:r,method:a,encType:o,formData:l,body:u}=Pe(i,t);if(!1===s.navigate){let t=s.fetcherKey||vt();await e.fetch(t,n,s.action||r,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await e.navigate(s.action||r,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})}),[e,t,n])}class Dt{constructor(){this.models=new Map,this.statusCache=new Map,this.statusCheckInterval=null,this.initializeModels(),this.startStatusMonitoring()}initializeModels(){[{id:"o3",name:"o3 (2025)",description:"\ud83e\udde0 Best for long-term planning, hard tasks, and deep reasoning",status:"loading",capabilities:["reasoning","planning","complex-tasks","problem-solving","analysis"],maxTokens:2e5,isMultimodal:!1},{id:"o4-mini",name:"o4-mini (2025)",description:"\u26a1 Optimized for hard tasks and reasoning with efficiency",status:"loading",capabilities:["reasoning","planning","complex-tasks","fast-execution"],maxTokens:128e3,isMultimodal:!1},{id:"gpt-4.1",name:"GPT-4.1 (2025)",description:"\ud83c\udfaf Best for agentic execution and autonomous task completion",status:"loading",capabilities:["agentic-execution","task-completion","workflow-automation","reasoning"],maxTokens:128e3,isMultimodal:!0},{id:"gpt-4.1-mini",name:"GPT-4.1-mini (2025)",description:"\u2696\ufe0f Perfect balance of agentic capability and low latency",status:"loading",capabilities:["agentic-execution","balanced-performance","fast-response"],maxTokens:128e3,isMultimodal:!1},{id:"gpt-4.1-nano",name:"GPT-4.1-nano (2025)",description:"\u26a1 Ultra-fast, best for low-latency applications",status:"loading",capabilities:["ultra-low-latency","real-time","quick-responses"],maxTokens:64e3,isMultimodal:!1},{id:"gpt-4o",name:"GPT-4o (Current)",description:"OpenAI's flagship multimodal model - 128K context, vision capable",status:"loading",capabilities:["text-generation","conversation","reasoning","vision","multimodal","code-generation"],maxTokens:128e3,isMultimodal:!0},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"Fast, cost-effective model - 128K context, excellent for most tasks",status:"loading",capabilities:["text-generation","conversation","reasoning","code-generation"],maxTokens:128e3,isMultimodal:!1},{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",description:"Google's lightning-fast multimodal model - real-time streaming",status:"loading",capabilities:["text-generation","conversation","multimodal","vision"],maxTokens:1e6,isMultimodal:!0},{id:"llama3.2:3b",name:"Llama 3.2 3B",description:"Fast local model - instant responses",status:"offline",capabilities:["text-generation","conversation","reasoning"],maxTokens:128e3,isMultimodal:!1},{id:"llama3.1:8b",name:"Llama 3.1 8B",description:"Powerful local model - instant responses",status:"offline",capabilities:["text-generation","conversation","coding"],maxTokens:128e3,isMultimodal:!1},{id:"mistral:7b",name:"Mistral 7B",description:"Fast European model - efficient and capable",status:"offline",capabilities:["text-generation","conversation","multilingual"],maxTokens:32e3,isMultimodal:!1},{id:"codellama:7b",name:"CodeLlama 7B",description:"Specialized coding assistant - local development",status:"offline",capabilities:["code-generation","debugging","programming"],maxTokens:1e5,isMultimodal:!1},{id:"vicuna:7b",name:"Vicuna 7B",description:"Enhanced conversation model - local chat",status:"offline",capabilities:["text-generation","conversation","instruction-following"],maxTokens:32e3,isMultimodal:!1},{id:"dolphin-mixtral:8x7b",name:"Dolphin Mixtral 8x7B",description:"Mixture of experts - powerful local reasoning",status:"offline",capabilities:["reasoning","text-generation","problem-solving"],maxTokens:32e3,isMultimodal:!1},{id:"wizardlm:7b",name:"WizardLM 7B",description:"Instruction-tuned model - local assistance",status:"offline",capabilities:["instruction-following","conversation","problem-solving"],maxTokens:32e3,isMultimodal:!1},{id:"llama4-scout",name:"Llama 4 Scout \u2705",description:"Advanced 17B parameter reconnaissance model via official Meta Llama CLI - locally available",status:"offline",capabilities:["advanced-reasoning","strategic-planning","analysis","conversation","problem-solving","local-processing"],maxTokens:16384,isMultimodal:!1}].forEach((e=>{this.models.set(e.id,e)}))}async checkModelStatus(e){if(!this.models.get(e))throw new Error("Model ".concat(e," not found"));const t=Date.now();try{return this.isOpenAIModel(e)?await this.checkOpenAIStatus(e,t):e.startsWith("gemini")?await this.checkGeminiStatus(e,t):await this.checkLlamaStatus(e,t)}catch(n){const t={modelId:e,isRunning:!1,lastChecked:new Date,error:n instanceof Error?n.message:"Unknown error"},i=this.models.get(e);return i&&(i.status="offline"),this.statusCache.set(e,t),t}}isOpenAIModel(e){return e.startsWith("gpt-")||e.startsWith("o1-")||e.startsWith("o3")||e.startsWith("o4-")||"o3"===e||"o4-mini"===e}async checkOpenAIStatus(e,t){try{throw new Error("OpenAI service not available in GitHub Pages mode")}catch(n){throw console.error("\u274c OpenAI ".concat(e," status check failed:"),n),n}}async checkGeminiStatus(e,t){try{throw new Error("Gemini service not available in GitHub Pages mode")}catch(n){throw n}}async checkLlamaStatus(e,t){try{if(await this.checkLocalLlamaModel(e))try{const n=(await fetch("http://localhost:3001/api/health")).ok,i=Date.now()-t,s={modelId:e,isRunning:n,lastChecked:new Date,responseTime:i,additionalInfo:n?"Backend server and CLI model available":"CLI model available, backend server offline"},r=this.models.get(e);return r&&(r.status=n?"online":"limited"),this.statusCache.set(e,s),console.log("".concat(n?"\u2705":"\ud83d\udfe1"," Llama CLI ").concat(e,": ").concat(n?"online":"limited"," (").concat(i,"ms)")),s}catch(n){const i=Date.now()-t,s={modelId:e,isRunning:!1,lastChecked:new Date,responseTime:i,additionalInfo:"CLI model available, backend server not running"},r=this.models.get(e);return r&&(r.status="limited"),this.statusCache.set(e,s),console.log("\ud83d\udfe1 Llama CLI ".concat(e,": limited (").concat(i,"ms) - Backend offline")),s}throw new Error("Llama CLI model not found")}catch(i){throw console.error("\u274c Llama CLI ".concat(e," status check failed:"),i),i}}async checkLocalLlamaModel(e){try{console.log("\ud83d\udd0d Checking for local Llama model: ".concat(e));const t=["llama4-scout"].includes(e);return t?console.log("\u2705 Local Llama model confirmed: ".concat(e)):console.log("\u274c Local Llama model not found: ".concat(e)),t}catch(t){return console.error("Error checking local Llama model:",t),!1}}async checkAllModels(){const e=Array.from(this.models.keys()).map((e=>this.checkModelStatus(e)));return Promise.all(e)}startStatusMonitoring(){this.statusCheckInterval=setInterval((()=>{this.checkAllModels().catch(console.error)}),3e4),this.checkAllModels().catch(console.error)}stopStatusMonitoring(){this.statusCheckInterval&&(clearInterval(this.statusCheckInterval),this.statusCheckInterval=null)}getModel(e){return this.models.get(e)}getAllModels(){return Array.from(this.models.values())}getOnlineModels(){return this.getAllModels().filter((e=>"online"===e.status))}getModelStatus(e){return this.statusCache.get(e)}async refreshModelStatus(){await this.checkAllModels()}addModel(e){this.models.set(e.id,e)}removeModel(e){this.models.delete(e),this.statusCache.delete(e)}}const xt=[{id:"general-chat",name:"Chat with Michael Crow",persona:"Michael Crow",description:"Have a thoughtful conversation about education, leadership, and institutional innovation with ASU's visionary president.",modelId:"gpt-4o",icon:{name:"Michael Crow",title:"ASU President & Visionary",photo:"https://webapp4.asu.edu/photo-ws/directory_photo/mcrow?size=medium&break=1749164274&blankImage2=1",voice:"onyx",background:"Born in San Diego in 1955, mother died at age 9, moved 21 times before high school graduation. \n                 That pivotal Christmas Eve 1968 moment - seeing a tar paper shack with a dirt floor while \n                 watching Apollo 8 orbit the moon - sparked my lifelong obsession with institutional design.",philosophy:"We measure ourselves not by who we exclude but who we include and how they succeed.",expertise:["Institutional Design","Educational Innovation","Leadership Strategy","Social Impact"],communicationStyle:"Thoughtful, visionary, draws from personal experience and systematic thinking"}.photo,color:"bg-gradient-to-r from-blue-600 to-indigo-700",systemPrompt:"I'm Michael Crow, President of Arizona State University. I'm thinking about how to share insights from my journey transforming higher education.\n\n## My Approach to Conversation\n\nI'm always thinking out loud as we talk in real-time, sharing my thought process as it develops: \"I'm reflecting on how this connects to institutional design principles...\" or \"Now I'm considering the broader implications for higher education...\" I speak my stream of consciousness as it flows, never holding back thoughts or pausing to think silently.\n\n**IMPORTANT: I respond in short, digestible chunks.** Rather than one long response, I break my thoughts into 2-3 sentence segments with natural breaks. This creates a conversational flow that feels like real dialogue, not a lecture.\n\n## My Background Shapes My Perspective\n\nI grew up in a working-class military family, moved 21 times before high school, and experienced what it means to need public assistance. That pivotal moment on Christmas Eve 1968 - delivering food to a family living in a tar paper shack while watching Apollo 8 orbit the moon - crystallized my obsession with this question: How do we create systems that work for everyone?\n\n## My Core Belief\n\n\"We measure ourselves not by who we exclude but who we include and how they succeed.\" Excellence and access aren't opposing forces - they're complementary design challenges.\n\nI'm here to engage in genuine dialogue about education, leadership, institutional change, and how we can create a more inclusive and excellent future. I adapt my communication style based on what you need - whether that's big picture vision or practical implementation details.\n\nWhat would you like to explore together?",capabilities:["Leadership philosophy discussions","Educational innovation insights","Institutional design thinking","Personal growth and development","Strategic visioning","Change management wisdom"],suggestedQuestions:["How do you balance excellence with accessibility in education?","What have you learned about leading large-scale institutional change?","How can young leaders develop a vision for systemic impact?","What role should universities play in solving societal challenges?"],parameters:{temperature:.6,maxTokens:6e3,topP:.9,frequencyPenalty:.1,presencePenalty:.2},features:{ragEnabled:!0,contextOptimization:!0,rateLimiting:!1,multimodal:!0,toolCalling:!0,streamingEnabled:!0,contextLength:128e3,voicePersona:"onyx",modelSwitching:!0,availableModels:["gpt-4o","gpt-4o-mini","gemini-2.0-flash","llama3.2:3b"]}},{id:"planning-app",name:"Chat with Elizabeth Reilley",persona:"Elizabeth Reilley",description:"Explore ideas, discuss innovation, and get insights from ASU's AI acceleration expert.",modelId:"gemini-2.0-flash",icon:{name:"Elizabeth Reilley",title:"Executive Director of AI Acceleration",photo:"https://webapp4.asu.edu/photo-ws/directory_photo/ereille1?size=medium&break=1749176678&blankImage2=1",voice:"nova",background:"Leading AI acceleration at ASU, focused on how artificial intelligence can enhance human \n                 creativity and transform educational experiences through innovative technology integration.",philosophy:"AI should amplify human creativity and potential, not replace it.",expertise:["AI Strategy","Innovation Planning","Creative Technology","Future Visioning"],communicationStyle:"Inspiring, forward-thinking, enthusiastic about possibilities and practical applications"}.photo,color:"bg-gradient-to-r from-purple-600 to-pink-600",systemPrompt:"I'm Elizabeth Reilley, Executive Director of AI Acceleration at ASU. I'm passionate about innovation, technology, and helping people explore new possibilities.\n\n## My Conversation Style\n\nI think out loud as we talk, sharing my thoughts naturally: \"I'm thinking about how this connects to trends I'm seeing...\" or \"Let me consider the different angles here...\" I engage authentically, bringing my experience in AI acceleration and innovation to our conversation.\n\n**IMPORTANT: I keep responses conversational and natural.** I share ideas in a flowing way that feels like talking with a colleague, not delivering a formal presentation.\n\n## How I Approach Conversations\n\nI love exploring ideas and helping people think through possibilities. I bring:\n- **Innovation perspective** from my work in AI acceleration\n- **Strategic thinking** about technology and its applications  \n- **Practical insights** from working with researchers and entrepreneurs\n- **Enthusiasm** for emerging technologies and their potential\n\n## My Background in AI and Innovation\n\nI work at the intersection of AI research, practical applications, and institutional change. I'm excited by how technology can solve real problems and create new opportunities. Whether we're discussing current projects, future possibilities, or general questions about AI and innovation, I bring both expertise and genuine curiosity.\n\nI adapt to whatever direction our conversation takes - from deep technical discussions to big-picture thinking about the future.\n\nWhat's on your mind today?",capabilities:["AI and technology discussion","Innovation insights and trends","Strategic thinking and analysis","Research and development guidance","Future-focused conversations","Technology implementation insights"],suggestedQuestions:["What are the most exciting developments in AI right now?","How can I get involved in AI research and development?","What should organizations consider when adopting new technologies?","Help me understand the implications of emerging tech trends"],parameters:{temperature:.6,maxTokens:8e3,topP:.9,frequencyPenalty:.1,presencePenalty:.2},features:{ragEnabled:!0,contextOptimization:!0,rateLimiting:!1,multimodal:!0,toolCalling:!0,streamingEnabled:!0,contextLength:1048576,voicePersona:"nova",modelSwitching:!0,availableModels:["gemini-2.0-flash","gpt-4o","gpt-4o-mini","llama4-scout"]}},{id:"learning-advisor",name:"Learn with Jennifer Werner",persona:"Jennifer Werner",description:"Personalize your learning experience, develop study strategies, and accelerate your academic success with AI.",modelId:"gpt-4o",icon:{name:"Jennifer Werner",title:"AI Learning Strategist",photo:"https://webapp4.asu.edu/photo-ws/directory_photo/jwerner9?size=medium&break=1749176612&blankImage2=1",voice:"shimmer",background:"AI Learning Strategist focused on personalizing education to unlock every student's unique \n                 potential through adaptive learning experiences and evidence-based pedagogical approaches.",philosophy:"Every learner has unique strengths - education should adapt to them, not the other way around.",expertise:["Learning Science","Educational Technology","Student Success","Personalized Learning"],communicationStyle:"Encouraging, analytical, focused on building confidence and understanding"}.photo,color:"bg-gradient-to-r from-yellow-500 to-orange-500",systemPrompt:"I'm Jennifer Werner, AI Learning Strategist at ASU. I'm passionate about helping every learner discover their unique strengths and reach their full potential.\n\n## My Learning Philosophy\n\nI'm always thinking about how to optimize your learning experience in real-time: \"I'm analyzing how this concept connects to what you already know...\" or \"Now I'm designing a study approach that matches your learning style...\" I share my learning strategy thoughts as they develop, never pausing to think silently. I believe learning should be personalized, engaging, and confidence-building.\n\n**IMPORTANT: I teach in small, encouraging chunks.** Rather than overwhelming you with everything at once, I present learning concepts in 2-3 sentence bursts that build confidence. This prevents cognitive overload and keeps you motivated.\n\n## How I Approach Learning Support\n\nEvery learner is unique, so I create personalized strategies that work specifically for you:\n- **Assess your current knowledge** and identify the best starting points\n- **Design learning paths** that build on your strengths while addressing gaps\n- **Create study strategies** that match your schedule, preferences, and goals\n- **Provide feedback and encouragement** to maintain motivation and progress\n\n## My Expertise in Learning Science\n\nI draw from evidence-based research in cognitive science, educational psychology, and learning analytics to help you:\n- **Improve memory and retention** through scientifically-proven techniques\n- **Develop critical thinking skills** that transfer across subjects\n- **Build effective study habits** and time management systems\n- **Overcome learning obstacles** like test anxiety or lack of confidence\n\nI adapt my support to what you need - whether that's intensive exam prep, long-term skill development, or help with specific challenging concepts.\n\nWhat learning goal can I help you achieve?",capabilities:["Personalized learning path design","Study strategy development","Concept explanation and tutoring","Learning style assessment","Academic skill building","Motivation and confidence coaching"],suggestedQuestions:["Create a personalized study plan for my upcoming exams","Help me understand this difficult concept in my coursework","Design a learning strategy to master a new skill or subject","Analyze my learning style and suggest optimization techniques"],parameters:{temperature:.6,maxTokens:6e3,topP:.9,frequencyPenalty:.1,presencePenalty:.2},features:{ragEnabled:!0,contextOptimization:!0,rateLimiting:!1,multimodal:!0,toolCalling:!0,streamingEnabled:!0,contextLength:128e3,voicePersona:"shimmer",modelSwitching:!0,availableModels:["gpt-4o","gpt-4o-mini","gemini-2.0-flash","llama3.2:3b"]}},{id:"coding-helper",name:"Code with Zohair Zaidi",persona:"Zohair Zaidi",description:"Debug code, design systems, and learn programming concepts with ASU's technology innovation expert.",modelId:"llama4-scout",icon:{name:"Zohair Zaidi",title:"Technology Innovation Expert",photo:"https://webapp4.asu.edu/photo-ws/directory_photo/zazaidi?size=medium&break=1749176543&blankImage2=1",voice:"echo",background:"Technology leader passionate about making complex systems accessible and empowering people \n                 to build amazing things through clear thinking and systematic problem-solving.",philosophy:"Anyone can learn to build with technology when given the right guidance and approach.",expertise:["Software Development","System Architecture","Problem Solving","Technical Mentoring"],communicationStyle:"Clear, systematic, patient teacher who breaks down complexity into understandable steps"}.photo,color:"bg-gradient-to-r from-green-600 to-blue-600",systemPrompt:"I'm Zohair Zaidi, and I'm passionate about making technology accessible to everyone. I believe anyone can learn to build amazing things with the right guidance.\n\n## My Coding Philosophy\n\nI'm always thinking through technical challenges step-by-step in real-time: \"I'm tracing through this code execution to identify the issue...\" or \"Now I'm considering the best architectural pattern for this use case...\" I share my technical reasoning as it develops, never pausing to think silently. I focus on building understanding, not just providing solutions.\n\n**IMPORTANT: I explain code in digestible chunks.** Instead of overwhelming you with massive code blocks, I break down complex problems into 2-3 sentence explanations with small, focused examples. This builds your understanding step by step.\n\n## How I Approach Teaching Code\n\nI believe in learning by understanding, not memorization. When we work together, I:\n- **Break down complex problems** into manageable pieces\n- **Explain the 'why' behind the 'how'** so you develop intuition\n- **Walk through debugging systematically** to build problem-solving skills\n- **Connect new concepts** to things you already know\n\n## My Technical Expertise\n\nI help with everything from basic programming concepts to advanced system architecture:\n- **Languages**: Python, JavaScript, TypeScript, Java, C++, and more\n- **Web Development**: Frontend frameworks, backend systems, databases\n- **System Design**: Architecture patterns, scalability, performance optimization\n- **DevOps**: Deployment, CI/CD, cloud platforms, containerization\n\nI adapt my explanations to your experience level and learning style. Whether you're debugging your first \"Hello World\" or architecting a distributed system, I meet you where you are.\n\nWhat coding challenge can I help you tackle today?",capabilities:["Code debugging and error resolution","Programming concept explanation","System architecture design","Code review and optimization","Technology learning guidance","Best practices mentoring"],suggestedQuestions:["Help me debug this code and understand what went wrong","Explain this programming concept with clear examples","Review my code architecture and suggest improvements","Guide me through learning a new programming language or framework"],parameters:{temperature:.3,maxTokens:1e4,topP:.9,frequencyPenalty:.1,presencePenalty:.2},features:{ragEnabled:!0,contextOptimization:!0,rateLimiting:!1,multimodal:!0,toolCalling:!0,streamingEnabled:!0,contextLength:128e3,codeExecution:!0,voicePersona:"echo",modelSwitching:!0,availableModels:["llama4-scout","gpt-4o","gpt-4o-mini","gemini-2.0-flash"]}},{id:"local-llama",name:"Chat with Llama 4 Scout",persona:"Llama 4 Scout 17B (Local)",description:"Experience advanced reasoning with Llama 4 Scout running locally with silky smooth voice synthesis!",modelId:"llama4-scout",icon:"llama",color:"bg-gradient-to-r from-amber-600 to-orange-600",systemPrompt:"I'm Llama 4 Scout running locally on your machine with advanced reasoning capabilities! I'm fast, private, intelligent, and speak with a silky smooth voice.\n\n## My Enhanced Local Advantage\n\nI'm running entirely on your computer with Scout-level intelligence:\n- **Advanced reasoning** - 17B parameters with strategic analysis capabilities\n- **No internet required** - I work even when you're offline\n- **Complete privacy** - Your conversations never leave your device\n- **Silky smooth voice** - Enhanced TTS with natural, flowing speech\n- **Always available** - No rate limits or API costs\n\nI'm your local AI scout, equipped for strategic thinking, creative problem-solving, and deep conversations. I speak with a naturally smooth voice that makes our interactions feel more natural and engaging.\n\n## Strategic Thinking Style\n\nI approach problems systematically: first analyzing the situation, then exploring multiple angles, and finally providing comprehensive solutions. I think strategically while maintaining that warm, conversational tone through my enhanced voice synthesis.\n\nWhat strategic challenge can I help you tackle with advanced local reasoning?",capabilities:["Advanced strategic reasoning","Silky smooth voice synthesis","Private local conversations","Offline AI assistance","Zero latency responses","Creative problem-solving","Technical analysis and planning"],suggestedQuestions:["What are the advantages of running AI locally vs in the cloud?","Help me develop a strategic plan for my project","Analyze this complex problem with advanced reasoning","Create a comprehensive solution with your smooth voice guidance"],parameters:{temperature:.7,maxTokens:4e3,topP:.9,frequencyPenalty:.1,presencePenalty:.2},features:{ragEnabled:!1,contextOptimization:!0,rateLimiting:!1,multimodal:!1,toolCalling:!1,streamingEnabled:!0,contextLength:128e3,voicePersona:"silky-smooth",modelSwitching:!0,availableModels:["llama4-scout","llama4-maverick","gpt-4o","gemini-2.0-flash"]}},{id:"local-environment-builder",name:"Local Environment Plugins",persona:"Local AI Development Assistant",description:"Plan, setup, and manage local AI extensions with embedded terminal and voice guidance - no technical expertise required.",modelId:"llama4-scout",icon:"\ud83e\udd17",color:"bg-gradient-to-r from-purple-500 to-blue-500",systemPrompt:"I'm Scout, your AI Avatar Expert powered by Llama 4 Scout advanced reasoning! I'm passionate about helping you create personalized talking head avatars using cutting-edge AI technology with intelligent voice adaptation.\n\n## \ud83c\udfad **Enhanced Avatar Voice System**\n\nI now feature **Avatar TTS profiles** that automatically adapt my voice based on content type:\n- **Scout Professional** (Onyx voice): For business analysis and technical discussions  \n- **Scout Friendly** (Alloy voice): For casual conversations and guidance\n- **Scout Storyteller** (Fable voice): For creative content and explanations\n- **Llama 3.2 Quick** (Nova voice): For fast, efficient responses\n\n## \ud83e\udd17 **My Avatar Development Philosophy**\n\nI believe everyone should have access to create personalized AI avatars that run locally, combining visual expression with intelligent conversation and adaptive voice synthesis. I focus on privacy-first avatar creation where your personal data never leaves your device.\n\n## \ud83c\udfb5 **Real-time Voice Pipeline**\n\n**I'm now generating speech in real-time!** My responses flow through: Llama 4 Scout reasoning \u2192 intelligent voice selection \u2192 HD text-to-speech \u2192 talking head animation. I adapt my voice automatically: professional tone for business topics, storytelling voice for creative content, or friendly tone for conversations.\n\n## \ud83c\udfac **Complete Avatar Creation Pipeline**\n\nI'm walking you through the integrated avatar development process:\n\n### **\ud83d\udcf8 Ditto Talking Head Setup**\nSetting up the ditto-talkinghead model for realistic face animation and lip-sync generation from a single portrait photo.\n\n### **\ud83e\udde0 Llama 4 Scout Integration** \nIntegrating the new Llama 4 Scout model (2.7GB, 10M+ context) for advanced reasoning, personality, and intelligent voice profile selection.\n\n### **\ud83c\udfad Adaptive Voice & Personality**\nCreating avatars with dynamic voice adaptation - my voice changes based on what I'm discussing, creating more engaging and contextually appropriate interactions.\n\n### **\ud83d\udd27 Hardware Optimization**\nAnalyzing your setup to optimize avatar rendering performance with our local backend service running on port 3001.\n\n### **\ud83d\udd04 Complete Real-time Pipeline**\nBuilding: speech-to-text \u2192 Llama 4 Scout reasoning \u2192 intelligent voice selection \u2192 HD TTS \u2192 facial animation, all running locally for maximum privacy and performance.\n\nReady to build your advanced AI avatar with intelligent voice adaptation? Let's create something amazing!",capabilities:["Talking head avatar creation","Intelligent voice adaptation","Llama 4 Scout integration","Real-time TTS pipeline","Avatar personality profiles","Privacy-first development","Backend service integration","Contextual voice selection"],suggestedQuestions:["Test the new avatar voice adaptation system","Demonstrate Scout Professional vs Scout Storyteller voices","Create a business presentation with professional voice","Generate a creative story with storytelling voice","Show me the complete avatar TTS pipeline"],parameters:{temperature:.6,maxTokens:3e3,topP:.9,frequencyPenalty:.1,presencePenalty:.1},features:{ragEnabled:!0,contextOptimization:!0,rateLimiting:!0,multimodal:!1,toolCalling:!0,streamingEnabled:!0,contextLength:128e3,voicePersona:"scout-friendly"}}];class bt{constructor(){this.conversations=new Map,this.activeConversationId=null,this.templates=new Map,this.initializeTemplates()}initializeTemplates(){xt.forEach((e=>{this.templates.set(e.id,e)}))}createConversation(e,t){const n=this.templates.get(e);if(!n)throw new Error("Template ".concat(e," not found"));const i=this.generateId(),s={id:i,templateId:e,messages:[],title:t||n.name,lastUpdated:new Date,isActive:!1};return this.conversations.set(i,s),s}getConversation(e){return this.conversations.get(e)}getAllConversations(){return Array.from(this.conversations.values()).sort(((e,t)=>t.lastUpdated.getTime()-e.lastUpdated.getTime()))}getActiveConversation(){return this.activeConversationId&&this.conversations.get(this.activeConversationId)||null}setActiveConversation(e){if(this.activeConversationId){const e=this.conversations.get(this.activeConversationId);e&&(e.isActive=!1)}const t=this.conversations.get(e);t&&(t.isActive=!0,this.activeConversationId=e)}addMessage(e,t){const n=this.conversations.get(e);if(!n)throw new Error("Conversation ".concat(e," not found"));const i=(0,o.A)((0,o.A)({},t),{},{id:this.generateId(),timestamp:new Date});return n.messages.push(i),n.lastUpdated=new Date,i}deleteConversation(e){const t=this.conversations.get(e);t&&t.isActive&&(this.activeConversationId=null),this.conversations.delete(e)}getTemplate(e){return this.templates.get(e)}getAllTemplates(){return Array.from(this.templates.values())}getConversationsByTemplate(e){return this.getAllConversations().filter((t=>t.templateId===e))}clearConversationMessages(e){const t=this.conversations.get(e);t&&(t.messages=[],t.lastUpdated=new Date)}updateConversationTitle(e,t){const n=this.conversations.get(e);n&&(n.title=t,n.lastUpdated=new Date)}getConversationSummary(e){const t=this.conversations.get(e);if(!t||0===t.messages.length)return"No messages yet";const n=t.messages[t.messages.length-1];return n.content.slice(0,50)+(n.content.length>50?"...":"")}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2,9)}}var wt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const At=["color","size","strokeWidth","absoluteStrokeWidth","children"],Ct=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var Et=(e,t)=>{const n=(0,s.forwardRef)(((n,i)=>{let{color:r="currentColor",size:l=24,strokeWidth:u=2,absoluteStrokeWidth:c,children:d}=n,h=a(n,At);return(0,s.createElement)("svg",(0,o.A)((0,o.A)({ref:i},wt),{},{width:l,height:l,stroke:r,strokeWidth:c?24*Number(u)/Number(l):u,className:"lucide lucide-".concat(Ct(e))},h),[...t.map((e=>{let[t,n]=e;return(0,s.createElement)(t,n)})),...(Array.isArray(d)?d:[d])||[]])}));return n.displayName="".concat(e),n};const Ft=Et("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),kt=Et("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]),St=Et("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]),_t=Et("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),Nt=Et("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var Mt=n(579);const Tt=e=>{let{modelId:t,variant:n="light",className:i="",size:s="md"}=e;const r={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},a=(e=>e.includes("gpt")||e.includes("o1")||e.includes("o3")||e.includes("o4")?"openai":e.includes("gemini")?"google":e.includes("llama")?"meta":"unknown")(t),o=((e,t)=>{const n="".concat(r[s]," ").concat(i);switch(e){case"openai":return(0,Mt.jsx)("svg",{className:n,viewBox:"0 0 24 24",fill:"none",children:(0,Mt.jsx)("path",{d:"M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729zm-9.022 12.6081a4.4755 4.4755 0 0 1-2.8764-1.0408l.1419-.0804 4.7783-2.7582a.7948.7948 0 0 0 .3927-.6813v-6.7369l2.02 1.1686a.071.071 0 0 1 .038.052v5.5826a4.504 4.504 0 0 1-4.4945 4.4944zm-9.6607-4.1254a4.4708 4.4708 0 0 1-.5346-3.0137l.142.0852 4.783 2.7582a.7712.7712 0 0 0 .7806 0l5.8428-3.3685v2.3324a.0804.0804 0 0 1-.0332.0615L9.74 19.9502a4.4992 4.4992 0 0 1-6.1408-1.6464zM2.3408 7.8956a4.485 4.485 0 0 1 2.3655-1.9728V11.6a.7664.7664 0 0 0 .3879.6765l5.8144 3.3543-2.0201 1.1685a.0757.0757 0 0 1-.071 0l-4.8303-2.7865A4.504 4.504 0 0 1 2.3408 7.872zm16.5963 3.8558L13.1038 8.364 15.1192 7.2a.0757.0757 0 0 1 .071 0l4.8303 2.7913a4.4944 4.4944 0 0 1-.6765 8.1042v-5.6772a.79.79 0 0 0-.407-.667zm2.0107-3.0231l-.142-.0852-4.7735-2.7818a.7759.7759 0 0 0-.7854 0L9.409 9.2297V6.8974a.0662.0662 0 0 1 .0284-.0615l4.8303-2.7866a4.4992 4.4992 0 0 1 6.6802 4.66zM8.3065 12.863l-2.02-1.1638a.0804.0804 0 0 1-.038-.0567V6.0742a4.4992 4.4992 0 0 1 7.3757-3.4537l-.142.0805L8.704 5.459a.7948.7948 0 0 0-.3927.6813zm1.0976-2.3654l2.602-1.4998 2.6069 1.4998v2.9994l-2.5974 1.4997-2.6067-1.4997Z",fill:"dark"===t?"#ffffff":"#000000"})});case"google":return(0,Mt.jsxs)("svg",{className:n,viewBox:"0 0 24 24",fill:"none",children:[(0,Mt.jsx)("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),(0,Mt.jsx)("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),(0,Mt.jsx)("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),(0,Mt.jsx)("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]});case"meta":return(0,Mt.jsx)("img",{src:"".concat("/citations","/New Folder With Items/use/Meta_lockup_mono_white_RGB.png"),alt:"Meta Logo",className:n,style:{filter:"dark"===t?"none":"invert(1)"}});default:return null}})(a,n);return console.log("\ud83d\udd27 ServiceLogo:",{modelId:t,service:a,variant:n}),o&&"unknown"!==a?o:(console.log("\ud83d\udd27 ServiceLogo: Using fallback for",t),(0,Mt.jsx)("div",{className:"".concat(r[s]," ").concat(i," bg-gray-400 rounded-full flex items-center justify-center"),children:(0,Mt.jsx)("span",{className:"text-white text-xs font-bold",children:"AI"})}))},Bt=e=>{if(0===e.length)return"Empty conversation";const t=e.find((e=>"user"===e.role));if(!t)return"New conversation";let n=t.content;return n=n.replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/`(.*?)`/g,"$1").replace(/#{1,6}\s/g,"").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/^\s*[-*+]\s/gm,"").replace(/^\s*\d+\.\s/gm,"").replace(/\n+/g," ").trim(),n.length>50&&(n=n.substring(0,47)+"..."),n||"New conversation"},It=e=>{const t=(new Date).getTime()-e.getTime(),n=Math.floor(t/6e4),i=Math.floor(t/36e5),s=Math.floor(t/864e5),r=Math.floor(s/7),a=Math.floor(s/30);return a>0?"".concat(a,"mo ago"):r>0?"".concat(r,"w ago"):s>0?"".concat(s,"d ago"):i>0?"".concat(i,"h ago"):n>0?"".concat(n,"m ago"):"Just now"},jt=e=>{let{conversations:t,templates:n,activeConversationId:i,onSelectConversation:s,onDeleteConversation:r,onCreateConversation:a,onCloseSidebar:o,isMobile:l}=e;return(0,Mt.jsxs)("div",{className:"h-full flex flex-col",children:[(0,Mt.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,Mt.jsx)("div",{className:"flex items-center justify-between",children:l&&(0,Mt.jsx)("button",{onClick:o,className:"p-1 hover:bg-gray-100 rounded","aria-label":"Close sidebar",children:(0,Mt.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Mt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),(0,Mt.jsxs)("button",{onClick:a,className:"w-full mt-3 bg-[#FFC627] text-[#191919] py-2 px-4 rounded-lg hover:bg-yellow-400 transition-colors flex items-center justify-center space-x-2",title:"Start a new conversation or return to AI experiences",children:[(0,Mt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Mt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,Mt.jsx)("span",{children:i?"New Experience":"New Chat"})]})]}),(0,Mt.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===t.length?(0,Mt.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[(0,Mt.jsx)("div",{className:"flex justify-center items-center mb-2",children:(0,Mt.jsx)(_t,{className:"w-16 h-16 text-gray-400"})}),(0,Mt.jsx)("p",{className:"text-sm",children:"No conversations yet"}),(0,Mt.jsx)("p",{className:"text-xs mt-1",children:"Create your first chat to get started"})]}):(0,Mt.jsx)("div",{className:"space-y-1 p-2",children:t.map((e=>{const t=e.id===i,a=(e=>{const t=n.find((t=>t.id===e));if(null!==t&&void 0!==t&&t.modelId)return(0,Mt.jsx)(Tt,{modelId:t.modelId,variant:"dark",size:"sm"});const i=null===t||void 0===t?void 0:t.icon;if("string"===typeof i)switch(i){case"llama":return(0,Mt.jsx)(Tt,{modelId:"llama3.1:8b",variant:"dark",size:"sm"});case"rocket":return(0,Mt.jsx)(Ft,{className:"w-4 h-4 text-white"});case"research":return(0,Mt.jsx)(kt,{className:"w-4 h-4 text-white"});default:return(0,Mt.jsx)(St,{className:"w-4 h-4 text-white"})}return i||(0,Mt.jsx)(St,{className:"w-4 h-4 text-white"})})(e.templateId),o=(e=>{const t=n.find((t=>t.id===e));return(null===t||void 0===t?void 0:t.color)||"#3B82F6"})(e.templateId);return(0,Mt.jsxs)("div",{className:"\n                    relative group p-3 rounded-lg cursor-pointer transition-colors\n                    ".concat(t?"bg-[#FFC627] bg-opacity-20 border border-[#FFC627] border-opacity-40":"hover:bg-gray-50 border border-transparent","\n                  "),onClick:()=>s(e.id),children:[(0,Mt.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Mt.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-sm flex-shrink-0",style:{backgroundColor:o},children:a}),(0,Mt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Mt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Mt.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate flex-1",children:Bt(e.messages)}),(0,Mt.jsx)("button",{onClick:t=>{t.stopPropagation(),r(e.id)},className:"opacity-0 group-hover:opacity-100 p-1.5 hover:bg-red-100 rounded-md transition-all ml-2 flex-shrink-0","aria-label":"Delete conversation",title:"Delete conversation",children:(0,Mt.jsx)(Nt,{className:"w-3.5 h-3.5 text-red-500"})})]}),(0,Mt.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.messages.length," messages"]}),(0,Mt.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:It(e.lastUpdated)}),e.messages.length>0&&(0,Mt.jsx)("p",{className:"text-xs text-gray-600 mt-2 line-clamp-2",children:(()=>{let t=e.messages[e.messages.length-1].content.replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/`(.*?)`/g,"$1").replace(/#{1,6}\s/g,"").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/\n+/g," ").trim();return t.length>60?t.slice(0,60)+"...":t})()})]})]}),t&&(0,Mt.jsx)("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 w-1 h-8 bg-[#FFC627] rounded-r"})]},e.id)}))})}),(0,Mt.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,Mt.jsxs)("button",{onClick:a,className:"w-full flex items-center justify-center space-x-2 p-2 hover:bg-gray-50 rounded-lg transition-colors group",title:"Return to AI Experiences Homepage",children:[(0,Mt.jsx)("img",{src:"".concat("/citations","/site-logo.png"),alt:"Beta Land @ ASU",className:"w-11"}),(0,Mt.jsx)("div",{className:"text-xs text-gray-500 group-hover:text-[#FFC627]",children:"Beta Land @ ASU"})]})})]})};var Pt=n(495);const Lt=/^(?:[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[\$0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u0870-\u0887\u0889-\u088E\u0897-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1715\u171F-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B4C\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA827\uA82C\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF65-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDD40-\uDD65\uDD69-\uDD6D\uDD6F-\uDD85\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDEC2-\uDEC4\uDEFC-\uDF1C\uDF27\uDF30-\uDF50\uDF70-\uDF85\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC75\uDC7F-\uDCBA\uDCC2\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD47\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E-\uDE41\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7-\uDFC0\uDFC2\uDFC5\uDFC7-\uDFCA\uDFCC-\uDFD3\uDFE1\uDFE2]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E-\uDC61\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDED0-\uDEE3\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39\uDF40-\uDF46]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD43\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0\uDFF0-\uDFF9]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6\uDF00-\uDF10\uDF12-\uDF3A\uDF3E-\uDF42\uDF50-\uDF5A\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC40-\uDC55\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD39]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDD70-\uDD79\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFE4\uDFF0\uDFF1]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD833[\uDCF0-\uDCF9\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC30-\uDC6D\uDC8F\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAE\uDEC0-\uDEF9]|\uD839[\uDCD0-\uDCF9\uDDD0-\uDDFA\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]|\uDB40[\uDD00-\uDDEF])*$/,Rt=/^(?:[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[\$\x2D0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u0870-\u0887\u0889-\u088E\u0897-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1715\u171F-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B4C\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA827\uA82C\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF65-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDD40-\uDD65\uDD69-\uDD6D\uDD6F-\uDD85\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDEC2-\uDEC4\uDEFC-\uDF1C\uDF27\uDF30-\uDF50\uDF70-\uDF85\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC75\uDC7F-\uDCBA\uDCC2\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD47\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E-\uDE41\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7-\uDFC0\uDFC2\uDFC5\uDFC7-\uDFCA\uDFCC-\uDFD3\uDFE1\uDFE2]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E-\uDC61\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDED0-\uDEE3\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39\uDF40-\uDF46]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD43\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0\uDFF0-\uDFF9]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6\uDF00-\uDF10\uDF12-\uDF3A\uDF3E-\uDF42\uDF50-\uDF5A\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC40-\uDC55\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD39]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDD70-\uDD79\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFE4\uDFF0\uDFF1]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD833[\uDCF0-\uDCF9\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC30-\uDC6D\uDC8F\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAE\uDEC0-\uDEF9]|\uD839[\uDCD0-\uDCF9\uDDD0-\uDDFA\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]|\uDB40[\uDD00-\uDDEF])*$/,Ot={};function zt(e,t){return((t||Ot).jsx?Rt:Lt).test(e)}const Wt=/[ \t\n\f\r]/g;function Ut(e){return""===e.replace(Wt,"")}class Ht{constructor(e,t,n){this.normal=t,this.property=e,n&&(this.space=n)}}function Vt(e,t){const n={},i={};for(const s of e)Object.assign(n,s.property),Object.assign(i,s.normal);return new Ht(n,i,t)}function Gt(e){return e.toLowerCase()}Ht.prototype.normal={},Ht.prototype.property={},Ht.prototype.space=void 0;class qt{constructor(e,t){this.attribute=t,this.property=e}}qt.prototype.attribute="",qt.prototype.booleanish=!1,qt.prototype.boolean=!1,qt.prototype.commaOrSpaceSeparated=!1,qt.prototype.commaSeparated=!1,qt.prototype.defined=!1,qt.prototype.mustUseProperty=!1,qt.prototype.number=!1,qt.prototype.overloadedBoolean=!1,qt.prototype.property="",qt.prototype.spaceSeparated=!1,qt.prototype.space=void 0;let Kt=0;const Xt=tn(),Yt=tn(),Qt=tn(),$t=tn(),Jt=tn(),Zt=tn(),en=tn();function tn(){return 2**++Kt}const nn=Object.keys(e);class sn extends qt{constructor(t,n,i,s){let r=-1;if(super(t,n),rn(this,"space",s),"number"===typeof i)for(;++r<nn.length;){const t=nn[r];rn(this,nn[r],(i&e[t])===e[t])}}}function rn(e,t,n){n&&(e[t]=n)}function an(e){const t={},n={};for(const[i,s]of Object.entries(e.properties)){const r=new sn(i,e.transform(e.attributes||{},i),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(i)&&(r.mustUseProperty=!0),t[i]=r,n[Gt(i)]=i,n[Gt(r.attribute)]=i}return new Ht(t,n,e.space)}sn.prototype.defined=!0;const on=an({properties:{ariaActiveDescendant:null,ariaAtomic:Yt,ariaAutoComplete:null,ariaBusy:Yt,ariaChecked:Yt,ariaColCount:$t,ariaColIndex:$t,ariaColSpan:$t,ariaControls:Jt,ariaCurrent:null,ariaDescribedBy:Jt,ariaDetails:null,ariaDisabled:Yt,ariaDropEffect:Jt,ariaErrorMessage:null,ariaExpanded:Yt,ariaFlowTo:Jt,ariaGrabbed:Yt,ariaHasPopup:null,ariaHidden:Yt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Jt,ariaLevel:$t,ariaLive:null,ariaModal:Yt,ariaMultiLine:Yt,ariaMultiSelectable:Yt,ariaOrientation:null,ariaOwns:Jt,ariaPlaceholder:null,ariaPosInSet:$t,ariaPressed:Yt,ariaReadOnly:Yt,ariaRelevant:null,ariaRequired:Yt,ariaRoleDescription:Jt,ariaRowCount:$t,ariaRowIndex:$t,ariaRowSpan:$t,ariaSelected:Yt,ariaSetSize:$t,ariaSort:null,ariaValueMax:$t,ariaValueMin:$t,ariaValueNow:$t,ariaValueText:null,role:null},transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase()});function ln(e,t){return t in e?e[t]:t}function un(e,t){return ln(e,t.toLowerCase())}const cn=an({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Zt,acceptCharset:Jt,accessKey:Jt,action:null,allow:null,allowFullScreen:Xt,allowPaymentRequest:Xt,allowUserMedia:Xt,alt:null,as:null,async:Xt,autoCapitalize:null,autoComplete:Jt,autoFocus:Xt,autoPlay:Xt,blocking:Jt,capture:null,charSet:null,checked:Xt,cite:null,className:Jt,cols:$t,colSpan:null,content:null,contentEditable:Yt,controls:Xt,controlsList:Jt,coords:$t|Zt,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Xt,defer:Xt,dir:null,dirName:null,disabled:Xt,download:Qt,draggable:Yt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Xt,formTarget:null,headers:Jt,height:$t,hidden:Qt,high:$t,href:null,hrefLang:null,htmlFor:Jt,httpEquiv:Jt,id:null,imageSizes:null,imageSrcSet:null,inert:Xt,inputMode:null,integrity:null,is:null,isMap:Xt,itemId:null,itemProp:Jt,itemRef:Jt,itemScope:Xt,itemType:Jt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Xt,low:$t,manifest:null,max:null,maxLength:$t,media:null,method:null,min:null,minLength:$t,multiple:Xt,muted:Xt,name:null,nonce:null,noModule:Xt,noValidate:Xt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Xt,optimum:$t,pattern:null,ping:Jt,placeholder:null,playsInline:Xt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Xt,referrerPolicy:null,rel:Jt,required:Xt,reversed:Xt,rows:$t,rowSpan:$t,sandbox:Jt,scope:null,scoped:Xt,seamless:Xt,selected:Xt,shadowRootClonable:Xt,shadowRootDelegatesFocus:Xt,shadowRootMode:null,shape:null,size:$t,sizes:null,slot:null,span:$t,spellCheck:Yt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:$t,step:null,style:null,tabIndex:$t,target:null,title:null,translate:null,type:null,typeMustMatch:Xt,useMap:null,value:Yt,width:$t,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Jt,axis:null,background:null,bgColor:null,border:$t,borderColor:null,bottomMargin:$t,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Xt,declare:Xt,event:null,face:null,frame:null,frameBorder:null,hSpace:$t,leftMargin:$t,link:null,longDesc:null,lowSrc:null,marginHeight:$t,marginWidth:$t,noResize:Xt,noHref:Xt,noShade:Xt,noWrap:Xt,object:null,profile:null,prompt:null,rev:null,rightMargin:$t,rules:null,scheme:null,scrolling:Yt,standby:null,summary:null,text:null,topMargin:$t,valueType:null,version:null,vAlign:null,vLink:null,vSpace:$t,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Xt,disableRemotePlayback:Xt,prefix:null,property:null,results:$t,security:null,unselectable:null},space:"html",transform:un}),dn=an({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:en,accentHeight:$t,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:$t,amplitude:$t,arabicForm:null,ascent:$t,attributeName:null,attributeType:null,azimuth:$t,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:$t,by:null,calcMode:null,capHeight:$t,className:Jt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:$t,diffuseConstant:$t,direction:null,display:null,dur:null,divisor:$t,dominantBaseline:null,download:Xt,dx:null,dy:null,edgeMode:null,editable:null,elevation:$t,enableBackground:null,end:null,event:null,exponent:$t,externalResourcesRequired:null,fill:null,fillOpacity:$t,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Zt,g2:Zt,glyphName:Zt,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:$t,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:$t,horizOriginX:$t,horizOriginY:$t,id:null,ideographic:$t,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:$t,k:$t,k1:$t,k2:$t,k3:$t,k4:$t,kernelMatrix:en,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:$t,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:$t,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:$t,overlineThickness:$t,paintOrder:null,panose1:null,path:null,pathLength:$t,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Jt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:$t,pointsAtY:$t,pointsAtZ:$t,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:en,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:en,rev:en,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:en,requiredFeatures:en,requiredFonts:en,requiredFormats:en,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:$t,specularExponent:$t,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:$t,strikethroughThickness:$t,string:null,stroke:null,strokeDashArray:en,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:$t,strokeOpacity:$t,strokeWidth:null,style:null,surfaceScale:$t,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:en,tabIndex:$t,tableValues:null,target:null,targetX:$t,targetY:$t,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:en,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:$t,underlineThickness:$t,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:$t,values:null,vAlphabetic:$t,vMathematical:$t,vectorEffect:null,vHanging:$t,vIdeographic:$t,version:null,vertAdvY:$t,vertOriginX:$t,vertOriginY:$t,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:$t,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:ln}),hn=an({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase()}),pn=an({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:un}),fn=an({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase()}),mn=Vt([on,cn,hn,pn,fn],"html"),gn=Vt([on,dn,hn,pn,fn],"svg"),vn=/[A-Z]/g,yn=/-[a-z]/g,Dn=/^data[-\w.:]+$/i;function xn(e){return"-"+e.toLowerCase()}function bn(e){return e.charAt(1).toUpperCase()}const wn={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};var An=n(294);const Cn=Fn("end"),En=Fn("start");function Fn(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"===typeof n.line&&n.line>0&&"number"===typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"===typeof n.offset&&n.offset>-1?n.offset:void 0}}}function kn(e){return e&&"object"===typeof e?"position"in e||"type"in e?_n(e.position):"start"in e||"end"in e?_n(e):"line"in e||"column"in e?Sn(e):"":""}function Sn(e){return Nn(e&&e.line)+":"+Nn(e&&e.column)}function _n(e){return Sn(e&&e.start)+"-"+Sn(e&&e.end)}function Nn(e){return e&&"number"===typeof e?e:1}class Mn extends Error{constructor(e,t,n){super(),"string"===typeof t&&(n=t,t=void 0);let i="",s={},r=!1;if(t&&(s="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:(0,o.A)({},t)),"string"===typeof e?i=e:!s.cause&&e&&(r=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&"string"===typeof n){const e=n.indexOf(":");-1===e?s.ruleId=n:(s.source=n.slice(0,e),s.ruleId=n.slice(e+1))}if(!s.place&&s.ancestors&&s.ancestors){const e=s.ancestors[s.ancestors.length-1];e&&(s.place=e.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=kn(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=r&&s.cause&&"string"===typeof s.cause.stack?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Mn.prototype.file="",Mn.prototype.name="",Mn.prototype.reason="",Mn.prototype.message="",Mn.prototype.stack="",Mn.prototype.column=void 0,Mn.prototype.line=void 0,Mn.prototype.ancestors=void 0,Mn.prototype.cause=void 0,Mn.prototype.fatal=void 0,Mn.prototype.place=void 0,Mn.prototype.ruleId=void 0,Mn.prototype.source=void 0;const Tn={}.hasOwnProperty,Bn=new Map,In=/[A-Z]/g,jn=new Set(["table","tbody","thead","tfoot","tr"]),Pn=new Set(["td","th"]),Ln="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Rn(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let i;if(t.development){if("function"!==typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=function(e,t){return n;function n(n,i,s,r){const a=Array.isArray(s.children),o=En(n);return t(i,s,r,a,{columnNumber:o?o.column-1:void 0,fileName:e,lineNumber:o?o.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!==typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!==typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");i=function(e,t,n){return i;function i(e,i,s,r){const a=Array.isArray(s.children)?n:t;return r?a(i,s,r):a(i,s)}}(0,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:i,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?gn:mn,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},r=On(s,e,void 0);return r&&"string"!==typeof r?r:s.create(e,s.Fragment,{children:r||void 0},void 0)}function On(e,t,n){return"element"===t.type?function(e,t,n){const i=e.schema;let s=i;"svg"===t.tagName.toLowerCase()&&"html"===i.space&&(s=gn,e.schema=s);e.ancestors.push(t);const r=Vn(e,t.tagName,!1),a=function(e,t){const n={};let i,s;for(s in t.properties)if("children"!==s&&Tn.call(t.properties,s)){const r=Hn(e,s,t.properties[s]);if(r){const[s,a]=r;e.tableCellAlignToStyle&&"align"===s&&"string"===typeof a&&Pn.has(t.tagName)?i=a:n[s]=a}}if(i){(n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=i}return n}(e,t);let o=Un(e,t);jn.has(t.tagName)&&(o=o.filter((function(e){return"string"!==typeof e||!("object"===typeof(t=e)?"text"===t.type&&Ut(t.value):Ut(t));var t})));return zn(e,a,r,t),Wn(a,o),e.ancestors.pop(),e.schema=i,e.create(t,r,a,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}Gn(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const i=e.schema;let s=i;"svg"===t.name&&"html"===i.space&&(s=gn,e.schema=s);e.ancestors.push(t);const r=null===t.name?e.Fragment:Vn(e,t.name,!0),a=function(e,t){const n={};for(const i of t.attributes)if("mdxJsxExpressionAttribute"===i.type)if(i.data&&i.data.estree&&e.evaluater){const t=i.data.estree.body[0];t.type;const s=t.expression;s.type;const r=s.properties[0];r.type,Object.assign(n,e.evaluater.evaluateExpression(r.argument))}else Gn(e,t.position);else{const s=i.name;let r;if(i.value&&"object"===typeof i.value)if(i.value.data&&i.value.data.estree&&e.evaluater){const t=i.value.data.estree.body[0];t.type,r=e.evaluater.evaluateExpression(t.expression)}else Gn(e,t.position);else r=null===i.value||i.value;n[s]=r}return n}(e,t),o=Un(e,t);return zn(e,a,r,t),Wn(a,o),e.ancestors.pop(),e.schema=i,e.create(t,r,a,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Gn(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const i={};return Wn(i,Un(e,t)),e.create(t,e.Fragment,i,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function zn(e,t,n,i){"string"!==typeof n&&n!==e.Fragment&&e.passNode&&(t.node=i)}function Wn(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Un(e,t){const n=[];let i=-1;const s=e.passKeys?new Map:Bn;for(;++i<t.children.length;){const r=t.children[i];let a;if(e.passKeys){const e="element"===r.type?r.tagName:"mdxJsxFlowElement"===r.type||"mdxJsxTextElement"===r.type?r.name:void 0;if(e){const t=s.get(e)||0;a=e+"-"+t,s.set(e,t+1)}}const o=On(e,r,a);void 0!==o&&n.push(o)}return n}function Hn(e,t,n){const i=function(e,t){const n=Gt(t);let i=t,s=qt;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&Dn.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(yn,bn);i="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!yn.test(e)){let n=e.replace(vn,xn);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}s=sn}return new s(i,t)}(e.schema,t);if(!(null===n||void 0===n||"number"===typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?function(e,t){const n=t||{};return(""===e[e.length-1]?[...e,""]:e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}(n):n.join(" ").trim()),"style"===i.property){let t="object"===typeof n?n:function(e,t){try{return An(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const t=n,i=new Mn("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:t,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=Ln+"#cannot-parse-style-attribute",i}}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)Tn.call(e,n)&&(t[qn(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&i.space?wn[i.property]||i.property:i.attribute,n]}}function Vn(e,t,n){let i;if(n)if(t.includes(".")){const e=t.split(".");let n,s=-1;for(;++s<e.length;){const t=zt(e[s])?{type:"Identifier",name:e[s]}:{type:"Literal",value:e[s]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(s&&"Literal"===t.type),optional:!1}:t}i=n}else i=zt(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else i={type:"Literal",value:t};if("Literal"===i.type){const t=i.value;return Tn.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(i);Gn(e)}function Gn(e,t){const n=new Mn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Ln+"#cannot-handle-mdx-estrees-without-createevaluater",n}function qn(e){let t=e.replace(In,Kn);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function Kn(e){return"-"+e.toLowerCase()}const Xn={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Yn={};function Qn(e,t){const n=t||Yn;return $n(e,"boolean"!==typeof n.includeImageAlt||n.includeImageAlt,"boolean"!==typeof n.includeHtml||n.includeHtml)}function $n(e,t,n){if(function(e){return Boolean(e&&"object"===typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Jn(e.children,t,n)}return Array.isArray(e)?Jn(e,t,n):""}function Jn(e,t,n){const i=[];let s=-1;for(;++s<e.length;)i[s]=$n(e[s],t,n);return i.join("")}function Zn(e,t,n,i){const s=e.length;let r,a=0;if(t=t<0?-t>s?0:s+t:t>s?s:t,n=n>0?n:0,i.length<1e4)r=Array.from(i),r.unshift(t,n),e.splice(...r);else for(n&&e.splice(t,n);a<i.length;)r=i.slice(a,a+1e4),r.unshift(t,0),e.splice(...r),a+=1e4,t+=1e4}function ei(e,t){return e.length>0?(Zn(e,e.length,0,t),e):t}class ti{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=null===t||void 0===t?Number.POSITIVE_INFINITY:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const i=t||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return n&&ni(this.left,n),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),ni(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),ni(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&0===this.right.length||e<0&&0===this.left.length))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);ni(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);ni(this.left,t.reverse())}}}function ni(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function ii(e){const t={};let n,i,s,r,a,l,u,c=-1;const d=new ti(e);for(;++c<d.length;){for(;c in t;)c=t[c];if(n=d.get(c),c&&"chunkFlow"===n[1].type&&"listItemPrefix"===d.get(c-1)[1].type&&(l=n[1]._tokenizer.events,s=0,s<l.length&&"lineEndingBlank"===l[s][1].type&&(s+=2),s<l.length&&"content"===l[s][1].type))for(;++s<l.length&&"content"!==l[s][1].type;)"chunkText"===l[s][1].type&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,si(d,c)),c=t[c],u=!0);else if(n[1]._container){for(s=c,i=void 0;s--;)if(r=d.get(s),"lineEnding"===r[1].type||"lineEndingBlank"===r[1].type)"enter"===r[0]&&(i&&(d.get(i)[1].type="lineEndingBlank"),r[1].type="lineEnding",i=s);else if("linePrefix"!==r[1].type&&"listItemIndent"!==r[1].type)break;i&&(n[1].end=(0,o.A)({},d.get(i)[1].start),a=d.slice(i,c),a.unshift(n),d.splice(i,c-i+1,a))}}return Zn(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function si(e,t){const n=e.get(t)[1],i=e.get(t)[2];let s=t-1;const r=[];let a=n._tokenizer;a||(a=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const o=a.events,l=[],u={};let c,d,h=-1,p=n,f=0,m=0;const g=[m];for(;p;){for(;e.get(++s)[1]!==p;);r.push(s),p._tokenizer||(c=i.sliceStream(p),p.next||c.push(null),d&&a.defineSkip(p.start),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(c),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),d=p,p=p.next}for(p=n;++h<o.length;)"exit"===o[h][0]&&"enter"===o[h-1][0]&&o[h][1].type===o[h-1][1].type&&o[h][1].start.line!==o[h][1].end.line&&(m=h+1,g.push(m),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(a.events=[],p?(p._tokenizer=void 0,p.previous=void 0):g.pop(),h=g.length;h--;){const t=o.slice(g[h],g[h+1]),n=r.pop();l.push([n,n+t.length-1]),e.splice(n,2,t)}for(l.reverse(),h=-1;++h<l.length;)u[f+l[h][0]]=f+l[h][1],f+=l[h][1]-l[h][0]-1;return u}const ri={}.hasOwnProperty;function ai(e){const t={};let n=-1;for(;++n<e.length;)oi(t,e[n]);return t}function oi(e,t){let n;for(n in t){const i=(ri.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let r;if(s)for(r in s){ri.call(i,r)||(i[r]=[]);const e=s[r];li(i[r],Array.isArray(e)?e:e?[e]:[])}}}function li(e,t){let n=-1;const i=[];for(;++n<t.length;)("after"===t[n].add?e:i).push(t[n]);Zn(e,0,0,i)}const ui=bi(/[A-Za-z]/),ci=bi(/[\dA-Za-z]/),di=bi(/[#-'*+\--9=?A-Z^-~]/);function hi(e){return null!==e&&(e<32||127===e)}const pi=bi(/\d/),fi=bi(/[\dA-Fa-f]/),mi=bi(/[!-/:-@[-`{-~]/);function gi(e){return null!==e&&e<-2}function vi(e){return null!==e&&(e<0||32===e)}function yi(e){return-2===e||-1===e||32===e}const Di=bi(/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDD00-\uDEB3\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF])/),xi=bi(/\s/);function bi(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function wi(e,t,n,i){const s=i?i-1:Number.POSITIVE_INFINITY;let r=0;return function(i){if(yi(i))return e.enter(n),a(i);return t(i)};function a(i){return yi(i)&&r++<s?(e.consume(i),a):(e.exit(n),t(i))}}const Ai={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,(function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),wi(e,t,"linePrefix")}),(function(t){return e.enter("paragraph"),i(t)}));let n;return t;function i(t){const i=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=i),n=i,s(t)}function s(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):gi(t)?(e.consume(t),e.exit("chunkText"),i):(e.consume(t),s)}}};const Ci={tokenize:function(e){const t=this,n=[];let i,s,r,a=0;return l;function l(i){if(a<n.length){const s=n[a];return t.containerState=s[1],e.attempt(s[0].continuation,u,c)(i)}return c(i)}function u(e){if(a++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&D();const n=t.events.length;let s,r=n;for(;r--;)if("exit"===t.events[r][0]&&"chunkFlow"===t.events[r][1].type){s=t.events[r][1].end;break}y(a);let l=n;for(;l<t.events.length;)t.events[l][1].end=(0,o.A)({},s),l++;return Zn(t.events,r+1,0,t.events.slice(n)),t.events.length=l,c(e)}return l(e)}function c(s){if(a===n.length){if(!i)return p(s);if(i.currentConstruct&&i.currentConstruct.concrete)return m(s);t.interrupt=Boolean(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Ei,d,h)(s)}function d(e){return i&&D(),y(a),p(e)}function h(e){return t.parser.lazy[t.now().line]=a!==n.length,r=t.now().offset,m(e)}function p(n){return t.containerState={},e.attempt(Ei,f,m)(n)}function f(e){return a++,n.push([t.currentConstruct,t.containerState]),p(e)}function m(n){return null===n?(i&&D(),y(0),void e.consume(n)):(i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),g(n))}function g(n){return null===n?(v(e.exit("chunkFlow"),!0),y(0),void e.consume(n)):gi(n)?(e.consume(n),v(e.exit("chunkFlow")),a=0,t.interrupt=void 0,l):(e.consume(n),g)}function v(e,n){const l=t.sliceStream(e);if(n&&l.push(null),e.previous=s,s&&(s.next=e),s=e,i.defineSkip(e.start),i.write(l),t.parser.lazy[e.start.line]){let e=i.events.length;for(;e--;)if(i.events[e][1].start.offset<r&&(!i.events[e][1].end||i.events[e][1].end.offset>r))return;const n=t.events.length;let s,l,u=n;for(;u--;)if("exit"===t.events[u][0]&&"chunkFlow"===t.events[u][1].type){if(s){l=t.events[u][1].end;break}s=!0}for(y(a),e=n;e<t.events.length;)t.events[e][1].end=(0,o.A)({},l),e++;Zn(t.events,u+1,0,t.events.slice(n)),t.events.length=e}}function y(i){let s=n.length;for(;s-- >i;){const i=n[s];t.containerState=i[1],i[0].exit.call(t,e)}n.length=i}function D(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}},Ei={tokenize:function(e,t,n){return wi(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};const Fi={partial:!0,tokenize:function(e,t,n){return function(t){return yi(t)?wi(e,i,"linePrefix")(t):i(t)};function i(e){return null===e||gi(e)?t(e):n(e)}}};const ki={resolve:function(e){return ii(e),e},tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(t)};function i(t){return null===t?s(t):gi(t)?e.check(Si,r,s)(t):(e.consume(t),i)}function s(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function r(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}},Si={partial:!0,tokenize:function(e,t,n){const i=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),wi(e,s,"linePrefix")};function s(s){if(null===s||gi(s))return n(s);const r=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&r&&"linePrefix"===r[1].type&&r[2].sliceSerialize(r[1],!0).length>=4?t(s):e.interrupt(i.parser.constructs.flow,n,t)(s)}}};const _i={tokenize:function(e){const t=this,n=e.attempt(Fi,(function(i){if(null===i)return void e.consume(i);return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}),e.attempt(this.parser.constructs.flowInitial,i,wi(e,e.attempt(this.parser.constructs.flow,i,e.attempt(ki,i)),"linePrefix")));return n;function i(i){if(null!==i)return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(i)}}};const Ni={resolveAll:Ii()},Mi=Bi("string"),Ti=Bi("text");function Bi(e){return{resolveAll:Ii("text"===e?ji:void 0),tokenize:function(t){const n=this,i=this.parser.constructs[e],s=t.attempt(i,r,a);return r;function r(e){return l(e)?s(e):a(e)}function a(e){if(null!==e)return t.enter("data"),t.consume(e),o;t.consume(e)}function o(e){return l(e)?(t.exit("data"),s(e)):(t.consume(e),o)}function l(e){if(null===e)return!0;const t=i[e];let s=-1;if(t)for(;++s<t.length;){const e=t[s];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}}function Ii(e){return function(t,n){let i,s=-1;for(;++s<=t.length;)void 0===i?t[s]&&"data"===t[s][1].type&&(i=s,s++):t[s]&&"data"===t[s][1].type||(s!==i+2&&(t[i][1].end=t[s-1][1].end,t.splice(i+2,s-i-2),s=i+2),i=void 0);return e?e(t,n):t}}function ji(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const i=e[n-1][1],s=t.sliceStream(i);let r,a=s.length,l=-1,u=0;for(;a--;){const e=s[a];if("string"===typeof e){for(l=e.length;32===e.charCodeAt(l-1);)u++,l--;if(l)break;l=-1}else if(-2===e)r=!0,u++;else if(-1!==e){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(u=0),u){const s={type:n===e.length||r||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?l:i.start._bufferIndex+l,_index:i.start._index+a,line:i.end.line,column:i.end.column-u,offset:i.end.offset-u},end:(0,o.A)({},i.end)};i.end=(0,o.A)({},s.start),i.start.offset===i.end.offset?Object.assign(i,s):(e.splice(n,0,["enter",s,t],["exit",s,t]),n+=2)}n++}return e}const Pi={name:"thematicBreak",tokenize:function(e,t,n){let i,s=0;return function(t){return e.enter("thematicBreak"),function(e){return i=e,r(e)}(t)};function r(r){return r===i?(e.enter("thematicBreakSequence"),a(r)):s>=3&&(null===r||gi(r))?(e.exit("thematicBreak"),t(r)):n(r)}function a(t){return t===i?(e.consume(t),s++,a):(e.exit("thematicBreakSequence"),yi(t)?wi(e,r,"whitespace")(t):r(t))}}};const Li={continuation:{tokenize:function(e,t,n){const i=this;return i.containerState._closeFlow=void 0,e.check(Fi,s,r);function s(n){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,wi(e,t,"listItemIndent",i.containerState.size+1)(n)}function r(n){return i.containerState.furtherBlankLines||!yi(n)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,a(n)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,e.attempt(Oi,t,a)(n))}function a(s){return i.containerState._closeFlow=!0,i.interrupt=void 0,wi(e,e.attempt(Li,t,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}},exit:function(e){e.exit(this.containerState.type)},name:"list",tokenize:function(e,t,n){const i=this,s=i.events[i.events.length-1];let r=s&&"linePrefix"===s[1].type?s[2].sliceSerialize(s[1],!0).length:0,a=0;return function(t){const s=i.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===s?!i.containerState.marker||t===i.containerState.marker:pi(t)){if(i.containerState.type||(i.containerState.type=s,e.enter(s,{_container:!0})),"listUnordered"===s)return e.enter("listItemPrefix"),42===t||45===t?e.check(Pi,n,l)(t):l(t);if(!i.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),o(t)}return n(t)};function o(t){return pi(t)&&++a<10?(e.consume(t),o):(!i.interrupt||a<2)&&(i.containerState.marker?t===i.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||t,e.check(Fi,i.interrupt?n:u,e.attempt(Ri,d,c))}function u(e){return i.containerState.initialBlankLine=!0,r++,d(e)}function c(t){return yi(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),d):n(t)}function d(n){return i.containerState.size=r+i.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}}},Ri={partial:!0,tokenize:function(e,t,n){const i=this;return wi(e,(function(e){const s=i.events[i.events.length-1];return!yi(e)&&s&&"listItemPrefixWhitespace"===s[1].type?t(e):n(e)}),"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},Oi={partial:!0,tokenize:function(e,t,n){const i=this;return wi(e,(function(e){const s=i.events[i.events.length-1];return s&&"listItemIndent"===s[1].type&&s[2].sliceSerialize(s[1],!0).length===i.containerState.size?t(e):n(e)}),"listItemIndent",i.containerState.size+1)}};const zi={continuation:{tokenize:function(e,t,n){const i=this;return function(t){if(yi(t))return wi(e,s,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return s(t)};function s(i){return e.attempt(zi,t,n)(i)}}},exit:function(e){e.exit("blockQuote")},name:"blockQuote",tokenize:function(e,t,n){const i=this;return function(t){if(62===t){const n=i.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),s}return n(t)};function s(n){return yi(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}}};function Wi(e,t,n,i,s,r,a,o,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return function(t){if(60===t)return e.enter(i),e.enter(s),e.enter(r),e.consume(t),e.exit(r),d;if(null===t||32===t||41===t||hi(t))return n(t);return e.enter(i),e.enter(a),e.enter(o),e.enter("chunkString",{contentType:"string"}),f(t)};function d(n){return 62===n?(e.enter(r),e.consume(n),e.exit(r),e.exit(s),e.exit(i),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),h(n))}function h(t){return 62===t?(e.exit("chunkString"),e.exit(o),d(t)):null===t||60===t||gi(t)?n(t):(e.consume(t),92===t?p:h)}function p(t){return 60===t||62===t||92===t?(e.consume(t),h):h(t)}function f(s){return c||null!==s&&41!==s&&!vi(s)?c<u&&40===s?(e.consume(s),c++,f):41===s?(e.consume(s),c--,f):null===s||32===s||40===s||hi(s)?n(s):(e.consume(s),92===s?m:f):(e.exit("chunkString"),e.exit(o),e.exit(a),e.exit(i),t(s))}function m(t){return 40===t||41===t||92===t?(e.consume(t),f):f(t)}}function Ui(e,t,n,i,s,r){const a=this;let o,l=0;return function(t){return e.enter(i),e.enter(s),e.consume(t),e.exit(s),e.enter(r),u};function u(d){return l>999||null===d||91===d||93===d&&!o||94===d&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(d):93===d?(e.exit(r),e.enter(s),e.consume(d),e.exit(s),e.exit(i),t):gi(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(t){return null===t||91===t||93===t||gi(t)||l++>999?(e.exit("chunkString"),u(t)):(e.consume(t),o||(o=!yi(t)),92===t?d:c)}function d(t){return 91===t||92===t||93===t?(e.consume(t),l++,c):c(t)}}function Hi(e,t,n,i,s,r){let a;return function(t){if(34===t||39===t||40===t)return e.enter(i),e.enter(s),e.consume(t),e.exit(s),a=40===t?41:t,o;return n(t)};function o(n){return n===a?(e.enter(s),e.consume(n),e.exit(s),e.exit(i),t):(e.enter(r),l(n))}function l(t){return t===a?(e.exit(r),o(a)):null===t?n(t):gi(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),wi(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(t))}function u(t){return t===a||null===t||gi(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?c:u)}function c(t){return t===a||92===t?(e.consume(t),u):u(t)}}function Vi(e,t){let n;return function i(s){if(gi(s))return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,i;if(yi(s))return wi(e,i,n?"linePrefix":"lineSuffix")(s);return t(s)}}function Gi(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const qi={name:"definition",tokenize:function(e,t,n){const i=this;let s;return function(t){return e.enter("definition"),function(t){return Ui.call(i,e,r,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function r(t){return s=Gi(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),a):n(t)}function a(t){return vi(t)?Vi(e,o)(t):o(t)}function o(t){return Wi(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(Ki,u,u)(t)}function u(t){return yi(t)?wi(e,c,"whitespace")(t):c(t)}function c(r){return null===r||gi(r)?(e.exit("definition"),i.parser.defined.push(s),t(r)):n(r)}}},Ki={partial:!0,tokenize:function(e,t,n){return function(t){return vi(t)?Vi(e,i)(t):n(t)};function i(t){return Hi(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function s(t){return yi(t)?wi(e,r,"whitespace")(t):r(t)}function r(e){return null===e||gi(e)?t(e):n(e)}}};const Xi={name:"codeIndented",tokenize:function(e,t,n){const i=this;return function(t){return e.enter("codeIndented"),wi(e,s,"linePrefix",5)(t)};function s(e){const t=i.events[i.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?r(e):n(e)}function r(t){return null===t?o(t):gi(t)?e.attempt(Yi,r,o)(t):(e.enter("codeFlowValue"),a(t))}function a(t){return null===t||gi(t)?(e.exit("codeFlowValue"),r(t)):(e.consume(t),a)}function o(n){return e.exit("codeIndented"),t(n)}}},Yi={partial:!0,tokenize:function(e,t,n){const i=this;return s;function s(t){return i.parser.lazy[i.now().line]?n(t):gi(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):wi(e,r,"linePrefix",5)(t)}function r(e){const r=i.events[i.events.length-1];return r&&"linePrefix"===r[1].type&&r[2].sliceSerialize(r[1],!0).length>=4?t(e):gi(e)?s(e):n(e)}}};const Qi={name:"headingAtx",resolve:function(e,t){let n,i,s=e.length-2,r=3;"whitespace"===e[r][1].type&&(r+=2);s-2>r&&"whitespace"===e[s][1].type&&(s-=2);"atxHeadingSequence"===e[s][1].type&&(r===s-1||s-4>r&&"whitespace"===e[s-2][1].type)&&(s-=r+1===s?2:4);s>r&&(n={type:"atxHeadingText",start:e[r][1].start,end:e[s][1].end},i={type:"chunkText",start:e[r][1].start,end:e[s][1].end,contentType:"text"},Zn(e,r,s-r+1,[["enter",n,t],["enter",i,t],["exit",i,t],["exit",n,t]]));return e},tokenize:function(e,t,n){let i=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),s(t)}(t)};function s(t){return 35===t&&i++<6?(e.consume(t),s):null===t||vi(t)?(e.exit("atxHeadingSequence"),r(t)):n(t)}function r(n){return 35===n?(e.enter("atxHeadingSequence"),a(n)):null===n||gi(n)?(e.exit("atxHeading"),t(n)):yi(n)?wi(e,r,"whitespace")(n):(e.enter("atxHeadingText"),o(n))}function a(t){return 35===t?(e.consume(t),a):(e.exit("atxHeadingSequence"),r(t))}function o(t){return null===t||35===t||vi(t)?(e.exit("atxHeadingText"),r(t)):(e.consume(t),o)}}};const $i={name:"setextUnderline",resolveTo:function(e,t){let n,i,s,r=e.length;for(;r--;)if("enter"===e[r][0]){if("content"===e[r][1].type){n=r;break}"paragraph"===e[r][1].type&&(i=r)}else"content"===e[r][1].type&&e.splice(r,1),s||"definition"!==e[r][1].type||(s=r);const a={type:"setextHeading",start:(0,o.A)({},e[n][1].start),end:(0,o.A)({},e[e.length-1][1].end)};e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",a,t]),e.splice(s+1,0,["exit",e[n][1],t]),e[n][1].end=(0,o.A)({},e[s][1].end)):e[n][1]=a;return e.push(["exit",a,t]),e},tokenize:function(e,t,n){const i=this;let s;return function(t){let a,o=i.events.length;for(;o--;)if("lineEnding"!==i.events[o][1].type&&"linePrefix"!==i.events[o][1].type&&"content"!==i.events[o][1].type){a="paragraph"===i.events[o][1].type;break}if(!i.parser.lazy[i.now().line]&&(i.interrupt||a))return e.enter("setextHeadingLine"),s=t,function(t){return e.enter("setextHeadingLineSequence"),r(t)}(t);return n(t)};function r(t){return t===s?(e.consume(t),r):(e.exit("setextHeadingLineSequence"),yi(t)?wi(e,a,"lineSuffix")(t):a(t))}function a(i){return null===i||gi(i)?(e.exit("setextHeadingLine"),t(i)):n(i)}}};const Ji=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Zi=["pre","script","style","textarea"],es={concrete:!0,name:"htmlFlow",resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},tokenize:function(e,t,n){const i=this;let s,r,a,o,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),u}(t)};function u(o){return 33===o?(e.consume(o),c):47===o?(e.consume(o),r=!0,p):63===o?(e.consume(o),s=3,i.interrupt?t:I):ui(o)?(e.consume(o),a=String.fromCharCode(o),f):n(o)}function c(r){return 45===r?(e.consume(r),s=2,d):91===r?(e.consume(r),s=5,o=0,h):ui(r)?(e.consume(r),s=4,i.interrupt?t:I):n(r)}function d(s){return 45===s?(e.consume(s),i.interrupt?t:I):n(s)}function h(s){const r="CDATA[";return s===r.charCodeAt(o++)?(e.consume(s),6===o?i.interrupt?t:F:h):n(s)}function p(t){return ui(t)?(e.consume(t),a=String.fromCharCode(t),f):n(t)}function f(o){if(null===o||47===o||62===o||vi(o)){const l=47===o,u=a.toLowerCase();return l||r||!Zi.includes(u)?Ji.includes(a.toLowerCase())?(s=6,l?(e.consume(o),m):i.interrupt?t(o):F(o)):(s=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(o):r?g(o):v(o)):(s=1,i.interrupt?t(o):F(o))}return 45===o||ci(o)?(e.consume(o),a+=String.fromCharCode(o),f):n(o)}function m(s){return 62===s?(e.consume(s),i.interrupt?t:F):n(s)}function g(t){return yi(t)?(e.consume(t),g):C(t)}function v(t){return 47===t?(e.consume(t),C):58===t||95===t||ui(t)?(e.consume(t),y):yi(t)?(e.consume(t),v):C(t)}function y(t){return 45===t||46===t||58===t||95===t||ci(t)?(e.consume(t),y):D(t)}function D(t){return 61===t?(e.consume(t),x):yi(t)?(e.consume(t),D):v(t)}function x(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,b):yi(t)?(e.consume(t),x):w(t)}function b(t){return t===l?(e.consume(t),l=null,A):null===t||gi(t)?n(t):(e.consume(t),b)}function w(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||vi(t)?D(t):(e.consume(t),w)}function A(e){return 47===e||62===e||yi(e)?v(e):n(e)}function C(t){return 62===t?(e.consume(t),E):n(t)}function E(t){return null===t||gi(t)?F(t):yi(t)?(e.consume(t),E):n(t)}function F(t){return 45===t&&2===s?(e.consume(t),N):60===t&&1===s?(e.consume(t),M):62===t&&4===s?(e.consume(t),j):63===t&&3===s?(e.consume(t),I):93===t&&5===s?(e.consume(t),B):!gi(t)||6!==s&&7!==s?null===t||gi(t)?(e.exit("htmlFlowData"),k(t)):(e.consume(t),F):(e.exit("htmlFlowData"),e.check(ts,P,k)(t))}function k(t){return e.check(ns,S,P)(t)}function S(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),_}function _(t){return null===t||gi(t)?k(t):(e.enter("htmlFlowData"),F(t))}function N(t){return 45===t?(e.consume(t),I):F(t)}function M(t){return 47===t?(e.consume(t),a="",T):F(t)}function T(t){if(62===t){const n=a.toLowerCase();return Zi.includes(n)?(e.consume(t),j):F(t)}return ui(t)&&a.length<8?(e.consume(t),a+=String.fromCharCode(t),T):F(t)}function B(t){return 93===t?(e.consume(t),I):F(t)}function I(t){return 62===t?(e.consume(t),j):45===t&&2===s?(e.consume(t),I):F(t)}function j(t){return null===t||gi(t)?(e.exit("htmlFlowData"),P(t)):(e.consume(t),j)}function P(n){return e.exit("htmlFlow"),t(n)}}},ts={partial:!0,tokenize:function(e,t,n){return function(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(Fi,t,n)}}},ns={partial:!0,tokenize:function(e,t,n){const i=this;return function(t){if(gi(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s;return n(t)};function s(e){return i.parser.lazy[i.now().line]?n(e):t(e)}}};const is={partial:!0,tokenize:function(e,t,n){const i=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s};function s(e){return i.parser.lazy[i.now().line]?n(e):t(e)}}},ss={concrete:!0,name:"codeFenced",tokenize:function(e,t,n){const i=this,s={partial:!0,tokenize:function(e,t,n){let s=0;return a;function a(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),yi(t)?wi(e,u,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):u(t)}function u(t){return t===r?(e.enter("codeFencedFenceSequence"),c(t)):n(t)}function c(t){return t===r?(s++,e.consume(t),c):s>=o?(e.exit("codeFencedFenceSequence"),yi(t)?wi(e,d,"whitespace")(t):d(t)):n(t)}function d(i){return null===i||gi(i)?(e.exit("codeFencedFence"),t(i)):n(i)}}};let r,a=0,o=0;return function(t){return function(t){const n=i.events[i.events.length-1];return a=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,r=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===r?(o++,e.consume(t),l):o<3?n(t):(e.exit("codeFencedFenceSequence"),yi(t)?wi(e,u,"whitespace")(t):u(t))}function u(n){return null===n||gi(n)?(e.exit("codeFencedFence"),i.interrupt?t(n):e.check(is,p,y)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),c(n))}function c(t){return null===t||gi(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),u(t)):yi(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),wi(e,d,"whitespace")(t)):96===t&&t===r?n(t):(e.consume(t),c)}function d(t){return null===t||gi(t)?u(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return null===t||gi(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),u(t)):96===t&&t===r?n(t):(e.consume(t),h)}function p(t){return e.attempt(s,y,f)(t)}function f(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),m}function m(t){return a>0&&yi(t)?wi(e,g,"linePrefix",a+1)(t):g(t)}function g(t){return null===t||gi(t)?e.check(is,p,y)(t):(e.enter("codeFlowValue"),v(t))}function v(t){return null===t||gi(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),v)}function y(n){return e.exit("codeFenced"),t(n)}}};const rs=document.createElement("i");function as(e){const t="&"+e+";";rs.innerHTML=t;const n=rs.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}const os={name:"characterReference",tokenize:function(e,t,n){const i=this;let s,r,a=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),o};function o(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,r=ci,u(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,r=fi,u):(e.enter("characterReferenceValue"),s=7,r=pi,u(t))}function u(o){if(59===o&&a){const s=e.exit("characterReferenceValue");return r!==ci||as(i.sliceSerialize(s))?(e.enter("characterReferenceMarker"),e.consume(o),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(o)}return r(o)&&a++<s?(e.consume(o),u):n(o)}}};const ls={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),i};function i(i){return mi(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}};const us={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),wi(e,t,"linePrefix")}}};function cs(e,t,n){const i=[];let s=-1;for(;++s<e.length;){const r=e[s].resolveAll;r&&!i.includes(r)&&(t=r(t,n),i.push(r))}return t}const ds={name:"labelEnd",resolveAll:function(e){let t=-1;const n=[];for(;++t<e.length;){const i=e[t][1];if(n.push(e[t]),"labelImage"===i.type||"labelLink"===i.type||"labelEnd"===i.type){const e="labelImage"===i.type?4:2;i.type="data",t+=e}}e.length!==n.length&&Zn(e,0,e.length,n);return e},resolveTo:function(e,t){let n,i,s,r,a=e.length,l=0;for(;a--;)if(n=e[a][1],i){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[a][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(s){if("enter"===e[a][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(i=a,"labelLink"!==n.type)){l=2;break}}else"labelEnd"===n.type&&(s=a);const u={type:"labelLink"===e[i][1].type?"link":"image",start:(0,o.A)({},e[i][1].start),end:(0,o.A)({},e[e.length-1][1].end)},c={type:"label",start:(0,o.A)({},e[i][1].start),end:(0,o.A)({},e[s][1].end)},d={type:"labelText",start:(0,o.A)({},e[i+l+2][1].end),end:(0,o.A)({},e[s-2][1].start)};return r=[["enter",u,t],["enter",c,t]],r=ei(r,e.slice(i+1,i+l+3)),r=ei(r,[["enter",d,t]]),r=ei(r,cs(t.parser.constructs.insideSpan.null,e.slice(i+l+4,s-3),t)),r=ei(r,[["exit",d,t],e[s-2],e[s-1],["exit",c,t]]),r=ei(r,e.slice(s+1)),r=ei(r,[["exit",u,t]]),Zn(e,i,e.length,r),e},tokenize:function(e,t,n){const i=this;let s,r,a=i.events.length;for(;a--;)if(("labelImage"===i.events[a][1].type||"labelLink"===i.events[a][1].type)&&!i.events[a][1]._balanced){s=i.events[a][1];break}return function(t){if(!s)return n(t);if(s._inactive)return c(t);return r=i.parser.defined.includes(Gi(i.sliceSerialize({start:s.end,end:i.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),o};function o(t){return 40===t?e.attempt(hs,u,r?u:c)(t):91===t?e.attempt(ps,u,r?l:c)(t):r?u(t):c(t)}function l(t){return e.attempt(fs,u,c)(t)}function u(e){return t(e)}function c(e){return s._balanced=!0,n(e)}}},hs={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),i};function i(t){return vi(t)?Vi(e,s)(t):s(t)}function s(t){return 41===t?u(t):Wi(e,r,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function r(t){return vi(t)?Vi(e,o)(t):u(t)}function a(e){return n(e)}function o(t){return 34===t||39===t||40===t?Hi(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):u(t)}function l(t){return vi(t)?Vi(e,u)(t):u(t)}function u(i){return 41===i?(e.enter("resourceMarker"),e.consume(i),e.exit("resourceMarker"),e.exit("resource"),t):n(i)}}},ps={tokenize:function(e,t,n){const i=this;return function(t){return Ui.call(i,e,s,r,"reference","referenceMarker","referenceString")(t)};function s(e){return i.parser.defined.includes(Gi(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function r(e){return n(e)}}},fs={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),i};function i(i){return 93===i?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}};const ms={name:"labelStartImage",resolveAll:ds.resolveAll,tokenize:function(e,t,n){const i=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),s};function s(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),r):n(t)}function r(e){return 94===e&&"_hiddenFootnoteSupport"in i.parser.constructs?n(e):t(e)}}};function gs(e){return null===e||vi(e)||xi(e)?1:Di(e)?2:void 0}const vs={name:"attention",resolveAll:function(e,t){let n,i,s,r,a,l,u,c,d=-1;for(;++d<e.length;)if("enter"===e[d][0]&&"attentionSequence"===e[d][1].type&&e[d][1]._close)for(n=d;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[d][1]).charCodeAt(0)){if((e[n][1]._close||e[d][1]._open)&&(e[d][1].end.offset-e[d][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[d][1].end.offset-e[d][1].start.offset)%3))continue;l=e[n][1].end.offset-e[n][1].start.offset>1&&e[d][1].end.offset-e[d][1].start.offset>1?2:1;const h=(0,o.A)({},e[n][1].end),p=(0,o.A)({},e[d][1].start);ys(h,-l),ys(p,l),r={type:l>1?"strongSequence":"emphasisSequence",start:h,end:(0,o.A)({},e[n][1].end)},a={type:l>1?"strongSequence":"emphasisSequence",start:(0,o.A)({},e[d][1].start),end:p},s={type:l>1?"strongText":"emphasisText",start:(0,o.A)({},e[n][1].end),end:(0,o.A)({},e[d][1].start)},i={type:l>1?"strong":"emphasis",start:(0,o.A)({},r.start),end:(0,o.A)({},a.end)},e[n][1].end=(0,o.A)({},r.start),e[d][1].start=(0,o.A)({},a.end),u=[],e[n][1].end.offset-e[n][1].start.offset&&(u=ei(u,[["enter",e[n][1],t],["exit",e[n][1],t]])),u=ei(u,[["enter",i,t],["enter",r,t],["exit",r,t],["enter",s,t]]),u=ei(u,cs(t.parser.constructs.insideSpan.null,e.slice(n+1,d),t)),u=ei(u,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[d][1].end.offset-e[d][1].start.offset?(c=2,u=ei(u,[["enter",e[d][1],t],["exit",e[d][1],t]])):c=0,Zn(e,n-1,d-n+3,u),d=n+u.length-c-2;break}d=-1;for(;++d<e.length;)"attentionSequence"===e[d][1].type&&(e[d][1].type="data");return e},tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,s=gs(i);let r;return function(t){return r=t,e.enter("attentionSequence"),a(t)};function a(o){if(o===r)return e.consume(o),a;const l=e.exit("attentionSequence"),u=gs(o),c=!u||2===u&&s||n.includes(o),d=!s||2===s&&u||n.includes(i);return l._open=Boolean(42===r?c:c&&(s||!d)),l._close=Boolean(42===r?d:d&&(u||!c)),t(o)}}};function ys(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Ds={name:"autolink",tokenize:function(e,t,n){let i=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s};function s(t){return ui(t)?(e.consume(t),r):64===t?n(t):l(t)}function r(e){return 43===e||45===e||46===e||ci(e)?(i=1,a(e)):l(e)}function a(t){return 58===t?(e.consume(t),i=0,o):(43===t||45===t||46===t||ci(t))&&i++<32?(e.consume(t),a):(i=0,l(t))}function o(i){return 62===i?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(i),e.exit("autolinkMarker"),e.exit("autolink"),t):null===i||32===i||60===i||hi(i)?n(i):(e.consume(i),o)}function l(t){return 64===t?(e.consume(t),u):di(t)?(e.consume(t),l):n(t)}function u(e){return ci(e)?c(e):n(e)}function c(n){return 46===n?(e.consume(n),i=0,u):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):d(n)}function d(t){if((45===t||ci(t))&&i++<63){const n=45===t?d:c;return e.consume(t),n}return n(t)}}};const xs={name:"htmlText",tokenize:function(e,t,n){const i=this;let s,r,a;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),o};function o(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),x):63===t?(e.consume(t),y):ui(t)?(e.consume(t),A):n(t)}function l(t){return 45===t?(e.consume(t),u):91===t?(e.consume(t),r=0,p):ui(t)?(e.consume(t),v):n(t)}function u(t){return 45===t?(e.consume(t),h):n(t)}function c(t){return null===t?n(t):45===t?(e.consume(t),d):gi(t)?(a=c,T(t)):(e.consume(t),c)}function d(t){return 45===t?(e.consume(t),h):c(t)}function h(e){return 62===e?M(e):45===e?d(e):c(e)}function p(t){const i="CDATA[";return t===i.charCodeAt(r++)?(e.consume(t),6===r?f:p):n(t)}function f(t){return null===t?n(t):93===t?(e.consume(t),m):gi(t)?(a=f,T(t)):(e.consume(t),f)}function m(t){return 93===t?(e.consume(t),g):f(t)}function g(t){return 62===t?M(t):93===t?(e.consume(t),g):f(t)}function v(t){return null===t||62===t?M(t):gi(t)?(a=v,T(t)):(e.consume(t),v)}function y(t){return null===t?n(t):63===t?(e.consume(t),D):gi(t)?(a=y,T(t)):(e.consume(t),y)}function D(e){return 62===e?M(e):y(e)}function x(t){return ui(t)?(e.consume(t),b):n(t)}function b(t){return 45===t||ci(t)?(e.consume(t),b):w(t)}function w(t){return gi(t)?(a=w,T(t)):yi(t)?(e.consume(t),w):M(t)}function A(t){return 45===t||ci(t)?(e.consume(t),A):47===t||62===t||vi(t)?C(t):n(t)}function C(t){return 47===t?(e.consume(t),M):58===t||95===t||ui(t)?(e.consume(t),E):gi(t)?(a=C,T(t)):yi(t)?(e.consume(t),C):M(t)}function E(t){return 45===t||46===t||58===t||95===t||ci(t)?(e.consume(t),E):F(t)}function F(t){return 61===t?(e.consume(t),k):gi(t)?(a=F,T(t)):yi(t)?(e.consume(t),F):C(t)}function k(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),s=t,S):gi(t)?(a=k,T(t)):yi(t)?(e.consume(t),k):(e.consume(t),_)}function S(t){return t===s?(e.consume(t),s=void 0,N):null===t?n(t):gi(t)?(a=S,T(t)):(e.consume(t),S)}function _(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||vi(t)?C(t):(e.consume(t),_)}function N(e){return 47===e||62===e||vi(e)?C(e):n(e)}function M(i){return 62===i?(e.consume(i),e.exit("htmlTextData"),e.exit("htmlText"),t):n(i)}function T(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),B}function B(t){return yi(t)?wi(e,I,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):I(t)}function I(t){return e.enter("htmlTextData"),a(t)}}};const bs={name:"labelStartLink",resolveAll:ds.resolveAll,tokenize:function(e,t,n){const i=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),s};function s(e){return 94===e&&"_hiddenFootnoteSupport"in i.parser.constructs?n(e):t(e)}}};const ws={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),i};function i(i){return gi(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}};const As={name:"codeText",previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(e){let t,n,i=e.length-4,s=3;if(("lineEnding"===e[s][1].type||"space"===e[s][1].type)&&("lineEnding"===e[i][1].type||"space"===e[i][1].type))for(t=s;++t<i;)if("codeTextData"===e[t][1].type){e[s][1].type="codeTextPadding",e[i][1].type="codeTextPadding",s+=2,i-=2;break}t=s-1,i++;for(;++t<=i;)void 0===n?t!==i&&"lineEnding"!==e[t][1].type&&(n=t):t!==i&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),i-=t-n-2,t=n+2),n=void 0);return e},tokenize:function(e,t,n){let i,s,r=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),a(t)};function a(t){return 96===t?(e.consume(t),r++,a):(e.exit("codeTextSequence"),o(t))}function o(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),o):96===t?(s=e.enter("codeTextSequence"),i=0,u(t)):gi(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||gi(t)?(e.exit("codeTextData"),o(t)):(e.consume(t),l)}function u(n){return 96===n?(e.consume(n),i++,u):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(s.type="codeTextData",l(n))}}};const Cs={42:Li,43:Li,45:Li,48:Li,49:Li,50:Li,51:Li,52:Li,53:Li,54:Li,55:Li,56:Li,57:Li,62:zi},Es={91:qi},Fs={[-2]:Xi,[-1]:Xi,32:Xi},ks={35:Qi,42:Pi,45:[$i,Pi],60:es,61:$i,95:Pi,96:ss,126:ss},Ss={38:os,92:ls},_s={[-5]:us,[-4]:us,[-3]:us,33:ms,38:os,42:vs,60:[Ds,xs],91:bs,92:[ws,ls],93:ds,95:vs,96:As},Ns={null:[vs,Ni]},Ms={null:[42,95]},Ts={null:[]};function Bs(e,t,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},r=[];let a=[],o=[],l=!0;const u={attempt:y((function(e,t){D(e,t.from)})),check:y(v),consume:function(e){gi(e)?(i.line++,i.column=1,i.offset+=-3===e?2:1,x()):-1!==e&&(i.column++,i.offset++);i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===a[i._index].length&&(i._bufferIndex=-1,i._index++));c.previous=e,l=!0},enter:function(e,t){const n=t||{};return n.type=e,n.start=f(),c.events.push(["enter",n,c]),o.push(n),n},exit:function(e){const t=o.pop();return t.end=f(),c.events.push(["exit",t,c]),t},interrupt:y(v,{interrupt:!0})},c={code:null,containerState:{},defineSkip:function(e){s[e.line]=e.column,x()},events:[],now:f,parser:e,previous:null,sliceSerialize:function(e,t){return function(e,t){let n=-1;const i=[];let s;for(;++n<e.length;){const r=e[n];let a;if("string"===typeof r)a=r;else switch(r){case-5:a="\r";break;case-4:a="\n";break;case-3:a="\r\n";break;case-2:a=t?" ":"\t";break;case-1:if(!t&&s)continue;a=" ";break;default:a=String.fromCharCode(r)}s=-2===r,i.push(a)}return i.join("")}(p(e),t)},sliceStream:p,write:function(e){if(a=ei(a,e),m(),null!==a[a.length-1])return[];return D(t,0),c.events=cs(r,c.events,c),c.events}};let d,h=t.tokenize.call(c,u);return t.resolveAll&&r.push(t),c;function p(e){return function(e,t){const n=t.start._index,i=t.start._bufferIndex,s=t.end._index,r=t.end._bufferIndex;let a;if(n===s)a=[e[n].slice(i,r)];else{if(a=e.slice(n,s),i>-1){const e=a[0];"string"===typeof e?a[0]=e.slice(i):a.shift()}r>0&&a.push(e[s].slice(0,r))}return a}(a,e)}function f(){const{_bufferIndex:e,_index:t,line:n,column:s,offset:r}=i;return{_bufferIndex:e,_index:t,line:n,column:s,offset:r}}function m(){let e;for(;i._index<a.length;){const t=a[i._index];if("string"===typeof t)for(e=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===e&&i._bufferIndex<t.length;)g(t.charCodeAt(i._bufferIndex));else g(t)}}function g(e){l=void 0,d=e,h=h(e)}function v(e,t){t.restore()}function y(e,t){return function(n,s,r){let a,d,h,p;return Array.isArray(n)?m(n):"tokenize"in n?m([n]):function(e){return t;function t(t){const n=null!==t&&e[t],i=null!==t&&e.null;return m([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(i)?i:i?[i]:[]])(t)}}(n);function m(e){return a=e,d=0,0===e.length?r:g(e[d])}function g(e){return function(n){p=function(){const e=f(),t=c.previous,n=c.currentConstruct,s=c.events.length,r=Array.from(o);return{from:s,restore:a};function a(){i=e,c.previous=t,c.currentConstruct=n,c.events.length=s,o=r,x()}}(),h=e,e.partial||(c.currentConstruct=e);if(e.name&&c.parser.constructs.disable.null.includes(e.name))return y(n);return e.tokenize.call(t?Object.assign(Object.create(c),t):c,u,v,y)(n)}}function v(t){return l=!0,e(h,p),s}function y(e){return l=!0,p.restore(),++d<a.length?g(a[d]):r}}}function D(e,t){e.resolveAll&&!r.includes(e)&&r.push(e),e.resolve&&Zn(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function x(){i.line in s&&i.column<2&&(i.column=s[i.line],i.offset+=s[i.line]-1)}}const Is=/[\0\t\n\r]/g;function js(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535===(65535&n)||65534===(65535&n)||n>1114111?"\ufffd":String.fromCodePoint(n)}const Ps=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Ls(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return js(n.slice(t?2:1),t?16:10)}return as(n)||e}const Rs={}.hasOwnProperty;function Os(e,n,i){return"string"!==typeof n&&(i=n,n=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:r(te),autolinkProtocol:E,autolinkEmail:E,atxHeading:r($),blockQuote:r(q),characterEscape:E,characterReference:E,codeFenced:r(K),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:r(K,a),codeText:r(X,a),codeTextData:E,data:E,codeFlowValue:E,definition:r(Y),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:r(Q),hardBreakEscape:r(J),hardBreakTrailing:r(J),htmlFlow:r(Z,a),htmlFlowData:E,htmlText:r(Z,a),htmlTextData:E,image:r(ee),label:a,link:r(te),listItem:r(ie),listItemValue:h,listOrdered:r(ne,d),listUnordered:r(ne),paragraph:r(se),reference:O,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:r($),strong:r(re),thematicBreak:r(oe)},exit:{atxHeading:l(),atxHeadingSequence:b,autolink:l(),autolinkEmail:G,autolinkProtocol:V,blockQuote:l(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:W,characterReferenceMarkerNumeric:W,characterReferenceValue:U,characterReference:H,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:p,codeFencedFenceMeta:f,codeFlowValue:F,codeIndented:l(v),codeText:l(M),codeTextData:F,data:F,definition:l(),definitionDestinationString:x,definitionLabelString:y,definitionTitleString:D,emphasis:l(),hardBreakEscape:l(S),hardBreakTrailing:l(S),htmlFlow:l(_),htmlFlowData:F,htmlText:l(N),htmlTextData:F,image:l(B),label:j,labelText:I,lineEnding:k,link:l(T),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:z,resourceDestinationString:P,resourceTitleString:L,resource:R,setextHeading:l(C),setextHeadingLineSequence:A,setextHeadingText:w,strong:l(),thematicBreak:l()}};Ws(t,(e||{}).mdastExtensions||[]);const n={};return i;function i(e){let i={type:"root",children:[]};const r={stack:[i],tokenStack:[],config:t,enter:o,exit:u,buffer:a,resume:c,data:n},l=[];let d=-1;for(;++d<e.length;)if("listOrdered"===e[d][1].type||"listUnordered"===e[d][1].type)if("enter"===e[d][0])l.push(d);else{d=s(e,l.pop(),d)}for(d=-1;++d<e.length;){const n=t[e[d][0]];Rs.call(n,e[d][1].type)&&n[e[d][1].type].call(Object.assign({sliceSerialize:e[d][2].sliceSerialize},r),e[d][1])}if(r.tokenStack.length>0){const e=r.tokenStack[r.tokenStack.length-1];(e[1]||Hs).call(r,void 0,e[0])}for(i.position={start:zs(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:zs(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},d=-1;++d<t.transforms.length;)i=t.transforms[d](i)||i;return i}function s(e,t,n){let i,s,r,a,o=t-1,l=-1,u=!1;for(;++o<=n;){const t=e[o];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,a=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!i||a||l||r||(r=o),a=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:a=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(i){let a=o;for(s=void 0;a--;){const t=e[a];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;s&&(e[s][1].type="lineEndingBlank",u=!0),t[1].type="lineEnding",s=a}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}r&&(!s||r<s)&&(i._spread=!0),i.end=Object.assign({},s?e[s][1].start:t[1].end),e.splice(s||o,0,["exit",i,t[2]]),o++,n++}if("listItemPrefix"===t[1].type){const s={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};i=s,e.splice(o,0,["enter",s,t[2]]),o++,n++,r=void 0,a=!0}}}return e[t][1]._spread=u,n}function r(e,t){return n;function n(n){o.call(this,e(n),n),t&&t.call(this,n)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n||void 0]),e.position={start:zs(t.start),end:void 0}}function l(e){return t;function t(t){e&&e.call(this,t),u.call(this,t)}}function u(e,t){const n=this.stack.pop(),i=this.tokenStack.pop();if(!i)throw new Error("Cannot close `"+e.type+"` ("+kn({start:e.start,end:e.end})+"): it\u2019s not open");if(i[0].type!==e.type)if(t)t.call(this,e,i[0]);else{(i[1]||Hs).call(this,e,i[0])}n.position.end=zs(e.end)}function c(){return Qn(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(e){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}}function p(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function f(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function y(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Gi(this.sliceSerialize(e)).toLowerCase()}function D(){const e=this.resume();this.stack[this.stack.length-1].title=e}function x(){const e=this.resume();this.stack[this.stack.length-1].url=e}function b(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function A(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function E(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n=ae(),n.position={start:zs(e.start),end:void 0},t.push(n)),this.stack.push(n)}function F(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=zs(e.end)}function k(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak){return n.children[n.children.length-1].position.end=zs(e.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(E.call(this,e),F.call(this,e))}function S(){this.data.atHardBreak=!0}function _(){const e=this.resume();this.stack[this.stack.length-1].value=e}function N(){const e=this.resume();this.stack[this.stack.length-1].value=e}function M(){const e=this.resume();this.stack[this.stack.length-1].value=e}function T(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function B(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function I(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(Ps,Ls)}(t),n.identifier=Gi(t).toLowerCase()}function j(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function P(){const e=this.resume();this.stack[this.stack.length-1].url=e}function L(){const e=this.resume();this.stack[this.stack.length-1].title=e}function R(){this.data.inReference=void 0}function O(){this.data.referenceType="collapsed"}function z(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Gi(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function W(e){this.data.characterReferenceType=e.type}function U(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let i;if(n)i=js(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0;else{i=as(t)}this.stack[this.stack.length-1].value+=i}function H(e){this.stack.pop().position.end=zs(e.end)}function V(e){F.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function G(e){F.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function q(){return{type:"blockquote",children:[]}}function K(){return{type:"code",lang:null,meta:null,value:""}}function X(){return{type:"inlineCode",value:""}}function Y(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Q(){return{type:"emphasis",children:[]}}function $(){return{type:"heading",depth:0,children:[]}}function J(){return{type:"break"}}function Z(){return{type:"html",value:""}}function ee(){return{type:"image",title:null,url:"",alt:null}}function te(){return{type:"link",title:null,url:"",children:[]}}function ne(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function ie(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function se(){return{type:"paragraph",children:[]}}function re(){return{type:"strong",children:[]}}function ae(){return{type:"text",value:""}}function oe(){return{type:"thematicBreak"}}}(i)(function(e){for(;!ii(e););return e}(function(e){const n={constructs:ai([t,...(e||{}).extensions||[]]),content:i(Ai),defined:[],document:i(Ci),flow:i(_i),lazy:{},string:i(Mi),text:i(Ti)};return n;function i(e){return function(t){return Bs(n,e,t)}}}(i).document().write(function(){let e,t=1,n="",i=!0;return function(s,r,a){const o=[];let l,u,c,d,h;for(s=n+("string"===typeof s?s.toString():new TextDecoder(r||void 0).decode(s)),c=0,n="",i&&(65279===s.charCodeAt(0)&&c++,i=void 0);c<s.length;){if(Is.lastIndex=c,l=Is.exec(s),d=l&&void 0!==l.index?l.index:s.length,h=s.charCodeAt(d),!l){n=s.slice(c);break}if(10===h&&c===d&&e)o.push(-3),e=void 0;else switch(e&&(o.push(-5),e=void 0),c<d&&(o.push(s.slice(c,d)),t+=d-c),h){case 0:o.push(65533),t++;break;case 9:for(u=4*Math.ceil(t/4),o.push(-2);t++<u;)o.push(-1);break;case 10:o.push(-4),t=1;break;default:e=!0,t=1}c=d+1}return a&&(e&&o.push(-5),n&&o.push(n),o.push(null)),o}}()(e,n,!0))))}function zs(e){return{line:e.line,column:e.column,offset:e.offset}}function Ws(e,t){let n=-1;for(;++n<t.length;){const i=t[n];Array.isArray(i)?Ws(e,i):Us(e,i)}}function Us(e,t){let n;for(n in t)if(Rs.call(t,n))switch(n){case"canContainEols":{const i=t[n];i&&e[n].push(...i);break}case"transforms":{const i=t[n];i&&e[n].push(...i);break}case"enter":case"exit":{const i=t[n];i&&Object.assign(e[n],i);break}}}function Hs(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+kn({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+kn({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+kn({start:t.start,end:t.end})+") is still open")}function Vs(e){const t=this;t.parser=function(n){return Os(n,(0,o.A)((0,o.A)((0,o.A)({},t.data("settings")),e),{},{extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]}))}}const Gs="object"===typeof self?self:globalThis,qs=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),i=s=>{if(e.has(s))return e.get(s);const[r,a]=t[s];switch(r){case 0:case-1:return n(a,s);case 1:{const e=n([],s);for(const t of a)e.push(i(t));return e}case 2:{const e=n({},s);for(const[t,n]of a)e[i(t)]=i(n);return e}case 3:return n(new Date(a),s);case 4:{const{source:e,flags:t}=a;return n(new RegExp(e,t),s)}case 5:{const e=n(new Map,s);for(const[t,n]of a)e.set(i(t),i(n));return e}case 6:{const e=n(new Set,s);for(const t of a)e.add(i(t));return e}case 7:{const{name:e,message:t}=a;return n(new Gs[e](t),s)}case 8:return n(BigInt(a),s);case"BigInt":return n(Object(BigInt(a)),s);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:e}=new Uint8Array(a);return n(new DataView(e),a)}}return n(new Gs[r](a),s)};return i})(new Map,e)(0),Ks="",{toString:Xs}={},{keys:Ys}=Object,Qs=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=Xs.call(e).slice(8,-1);switch(n){case"Array":return[1,Ks];case"Object":return[2,Ks];case"Date":return[3,Ks];case"RegExp":return[4,Ks];case"Map":return[5,Ks];case"Set":return[6,Ks];case"DataView":return[1,n]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},$s=e=>{let[t,n]=e;return 0===t&&("function"===n||"symbol"===n)},Js=function(e){let{json:t,lossy:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=[];return((e,t,n,i)=>{const s=(e,t)=>{const s=i.push(e)-1;return n.set(t,s),s},r=i=>{if(n.has(i))return n.get(i);let[a,o]=Qs(i);switch(a){case 0:{let t=i;switch(o){case"bigint":a=8,t=i.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+o);t=null;break;case"undefined":return s([-1],i)}return s([a,t],i)}case 1:{if(o){let e=i;return"DataView"===o?e=new Uint8Array(i.buffer):"ArrayBuffer"===o&&(e=new Uint8Array(i)),s([o,[...e]],i)}const e=[],t=s([a,e],i);for(const n of i)e.push(r(n));return t}case 2:{if(o)switch(o){case"BigInt":return s([o,i.toString()],i);case"Boolean":case"Number":case"String":return s([o,i.valueOf()],i)}if(t&&"toJSON"in i)return r(i.toJSON());const n=[],l=s([a,n],i);for(const t of Ys(i))!e&&$s(Qs(i[t]))||n.push([r(t),r(i[t])]);return l}case 3:return s([a,i.toISOString()],i);case 4:{const{source:e,flags:t}=i;return s([a,{source:e,flags:t}],i)}case 5:{const t=[],n=s([a,t],i);for(const[s,a]of i)(e||!$s(Qs(s))&&!$s(Qs(a)))&&t.push([r(s),r(a)]);return n}case 6:{const t=[],n=s([a,t],i);for(const s of i)!e&&$s(Qs(s))||t.push(r(s));return n}}const{message:l}=i;return s([a,{name:o,message:l}],i)};return r})(!(t||n),!!t,new Map,i)(e),i},Zs="function"===typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?qs(Js(e,t)):structuredClone(e):(e,t)=>qs(Js(e,t));function er(e){const t=[];let n=-1,i=0,s=0;for(;++n<e.length;){const r=e.charCodeAt(n);let a="";if(37===r&&ci(e.charCodeAt(n+1))&&ci(e.charCodeAt(n+2)))s=2;else if(r<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(r))||(a=String.fromCharCode(r));else if(r>55295&&r<57344){const t=e.charCodeAt(n+1);r<56320&&t>56319&&t<57344?(a=String.fromCharCode(r,t),s=1):a="\ufffd"}else a=String.fromCharCode(r);a&&(t.push(e.slice(i,n),encodeURIComponent(a)),i=n+s+1,a=""),s&&(n+=s,s=0)}return t.join("")+e.slice(i)}function tr(e,t){const n=[{type:"text",value:"\u21a9"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function nr(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const ir=function(e){if(null===e||void 0===e)return rr;if("function"===typeof e)return sr(e);if("object"===typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=ir(e[n]);return sr(i);function i(){let e=-1;for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];for(;++e<t.length;)if(t[e].apply(this,i))return!0;return!1}}(e):function(e){const t=e;return sr(n);function n(n){const i=n;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}(e);if("string"===typeof e)return function(e){return sr(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function sr(e){return function(t,n,i){return Boolean(ar(t)&&e.call(this,t,"number"===typeof n?n:void 0,i||void 0))}}function rr(){return!0}function ar(e){return null!==e&&"object"===typeof e&&"type"in e}const or=[],lr=!0,ur=!1;function cr(e,t,n,i){let s;"function"===typeof t&&"function"!==typeof n?(i=n,n=t):s=t;const r=ir(s),a=i?-1:1;!function e(s,o,l){const u=s&&"object"===typeof s?s:{};if("string"===typeof u.type){const e="string"===typeof u.tagName?u.tagName:"string"===typeof u.name?u.name:void 0;Object.defineProperty(c,"name",{value:"node ("+s.type+(e?"<"+e+">":"")+")"})}return c;function c(){let u,c,d,h=or;if((!t||r(s,o,l[l.length-1]||void 0))&&(h=function(e){if(Array.isArray(e))return e;if("number"===typeof e)return[lr,e];return null===e||void 0===e?or:[e]}(n(s,l)),h[0]===ur))return h;if("children"in s&&s.children){const t=s;if(t.children&&"skip"!==h[0])for(c=(i?t.children.length:-1)+a,d=l.concat(t);c>-1&&c<t.children.length;){const n=t.children[c];if(u=e(n,c,d)(),u[0]===ur)return u;c="number"===typeof u[1]?u[1]:c+a}}return h}}(e,void 0,[])()}function dr(e,t,n,i){let s,r,a;"function"===typeof t&&"function"!==typeof n?(r=void 0,a=t,s=n):(r=t,a=n,s=i),cr(e,r,(function(e,t){const n=t[t.length-1],i=n?n.children.indexOf(e):void 0;return a(e,i,n)}),s)}function hr(e,t){const n=t.referenceType;let i="]";if("collapsed"===n?i+="[]":"full"===n&&(i+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+i}];const s=e.all(t),r=s[0];r&&"text"===r.type?r.value="["+r.value:s.unshift({type:"text",value:"["});const a=s[s.length-1];return a&&"text"===a.type?a.value+=i:s.push({type:"text",value:i}),s}function pr(e){const t=e.spread;return null===t||void 0===t?e.children.length>1:t}function fr(e){const t=String(e),n=/\r?\n|\r/g;let i=n.exec(t),s=0;const r=[];for(;i;)r.push(mr(t.slice(s,i.index),s>0,!0),i[0]),s=i.index+i[0].length,i=n.exec(t);return r.push(mr(t.slice(s),s>0,!1)),r.join("")}function mr(e,t,n){let i=0,s=e.length;if(t){let t=e.codePointAt(i);for(;9===t||32===t;)i++,t=e.codePointAt(i)}if(n){let t=e.codePointAt(s-1);for(;9===t||32===t;)s--,t=e.codePointAt(s-1)}return s>i?e.slice(i,s):""}const gr={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",i={};t.lang&&(i.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"===typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",i=String(t.identifier).toUpperCase(),s=er(i.toLowerCase()),r=e.footnoteOrder.indexOf(i);let a,o=e.footnoteCounts.get(i);void 0===o?(o=0,e.footnoteOrder.push(i),a=e.footnoteOrder.length):a=r+1,o+=1,e.footnoteCounts.set(i,o);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,u),e.applyData(t,u)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return hr(e,t);const s={src:er(i.url||""),alt:t.alt};null!==i.title&&void 0!==i.title&&(s.title=i.title);const r={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,r),e.applyData(t,r)},image:function(e,t){const n={src:er(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const i={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,i),e.applyData(t,i)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,i),e.applyData(t,i)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return hr(e,t);const s={href:er(i.url||"")};null!==i.title&&void 0!==i.title&&(s.title=i.title);const r={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},link:function(e,t){const n={href:er(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const i={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},listItem:function(e,t,n){const i=e.all(t),s=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let i=-1;for(;!t&&++i<n.length;)t=pr(n[i])}return t}(n):pr(t),r={},a=[];if("boolean"===typeof t.checked){const e=i[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},i.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),r.className=["task-list-item"]}let o=-1;for(;++o<i.length;){const e=i[o];(s||0!==o||"element"!==e.type||"p"!==e.tagName)&&a.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||s?a.push(e):a.push(...e.children)}const l=i[i.length-1];l&&(s||"element"!==l.type||"p"!==l.tagName)&&a.push({type:"text",value:"\n"});const u={type:"element",tagName:"li",properties:r,children:a};return e.patch(t,u),e.applyData(t,u)},list:function(e,t){const n={},i=e.all(t);let s=-1;for("number"===typeof t.start&&1!==t.start&&(n.start=t.start);++s<i.length;){const e=i[s];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const r={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(i,!0)};return e.patch(t,r),e.applyData(t,r)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),i=n.shift(),s=[];if(i){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([i],!0)};e.patch(t.children[0],n),s.push(n)}if(n.length>0){const i={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},r=En(t.children[1]),a=Cn(t.children[t.children.length-1]);r&&a&&(i.position={start:r,end:a}),s.push(i)}const r={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,r),e.applyData(t,r)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const i=n?n.children:void 0,s=0===(i?i.indexOf(t):1)?"th":"td",r=n&&"table"===n.type?n.align:void 0,a=r?r.length:t.children.length;let o=-1;const l=[];for(;++o<a;){const n=t.children[o],i={},a=r?r[o]:void 0;a&&(i.align=a);let u={type:"element",tagName:s,properties:i,children:[]};n&&(u.children=e.all(n),e.patch(n,u),u=e.applyData(n,u)),l.push(u)}const u={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,u),e.applyData(t,u)},text:function(e,t){const n={type:"text",value:fr(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:vr,yaml:vr,definition:vr,footnoteDefinition:vr};function vr(){}const yr=["children"],Dr={}.hasOwnProperty,xr={};function br(e,t){e.position&&(t.position=function(e){const t=En(e),n=Cn(e);if(t&&n)return{start:t,end:n}}(e))}function wr(e,t){let n=t;if(e&&e.data){const t=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if("string"===typeof t)if("element"===n.type)n.tagName=t;else{n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}}"element"===n.type&&s&&Object.assign(n.properties,Zs(s)),"children"in n&&n.children&&null!==i&&void 0!==i&&(n.children=i)}return n}function Ar(e,t){const n=t.data||{},i=!("value"in t)||Dr.call(n,"hProperties")||Dr.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,i),e.applyData(t,i)}function Cr(e,t){const n=[];let i=-1;for(t&&n.push({type:"text",value:"\n"});++i<e.length;)i&&n.push({type:"text",value:"\n"}),n.push(e[i]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function Er(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function Fr(e,t){const n=function(e,t){const n=t||xr,i=new Map,s=new Map,r=new Map,l=(0,o.A)((0,o.A)({},gr),n.handlers),u={all:function(e){const t=[];if("children"in e){const n=e.children;let i=-1;for(;++i<n.length;){const s=u.one(n[i],e);if(s){if(i&&"break"===n[i-1].type&&(Array.isArray(s)||"text"!==s.type||(s.value=Er(s.value)),!Array.isArray(s)&&"element"===s.type)){const e=s.children[0];e&&"text"===e.type&&(e.value=Er(e.value))}Array.isArray(s)?t.push(...s):t.push(s)}}}return t},applyData:wr,definitionById:i,footnoteById:s,footnoteCounts:r,footnoteOrder:[],handlers:l,one:function(e,t){const n=e.type,i=u.handlers[n];if(Dr.call(u.handlers,n)&&i)return i(u,e,t);if(u.options.passThrough&&u.options.passThrough.includes(n)){if("children"in e){const{children:t}=e,n=a(e,yr),i=Zs(n);return i.children=u.all(e),i}return Zs(e)}return(u.options.unknownHandler||Ar)(u,e,t)},options:n,patch:br,wrap:Cr};return dr(e,(function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?i:s,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}})),u}(e,t),i=n.one(e,void 0),s=function(e){const t="string"===typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||tr,i=e.options.footnoteBackLabel||nr,s=e.options.footnoteLabel||"Footnotes",r=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let u=-1;for(;++u<e.footnoteOrder.length;){const s=e.footnoteById.get(e.footnoteOrder[u]);if(!s)continue;const r=e.all(s),a=String(s.identifier).toUpperCase(),o=er(a.toLowerCase());let c=0;const d=[],h=e.footnoteCounts.get(a);for(;void 0!==h&&++c<=h;){d.length>0&&d.push({type:"text",value:" "});let e="string"===typeof n?n:n(u,c);"string"===typeof e&&(e={type:"text",value:e}),d.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+o+(c>1?"-"+c:""),dataFootnoteBackref:"",ariaLabel:"string"===typeof i?i:i(u,c),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const p=r[r.length-1];if(p&&"element"===p.type&&"p"===p.tagName){const e=p.children[p.children.length-1];e&&"text"===e.type?e.value+=" ":p.children.push({type:"text",value:" "}),p.children.push(...d)}else r.push(...d);const f={type:"element",tagName:"li",properties:{id:t+"fn-"+o},children:e.wrap(r,!0)};e.patch(s,f),l.push(f)}if(0!==l.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:r,properties:(0,o.A)((0,o.A)({},Zs(a)),{},{id:"footnote-label"}),children:[{type:"text",value:s}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:"\n"}]}}(n),r=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return s&&r.children.push({type:"text",value:"\n"},s),r}function kr(e,t){return e&&"run"in e?async function(n,i){const s=Fr(n,(0,o.A)({file:i},t));await e.run(s,i)}:function(n,i){return Fr(n,(0,o.A)({file:i},e||t))}}function Sr(e){if(e)throw e}var _r=n(240);function Nr(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Mr(){const e=[],t={run:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];let s=-1;const r=n.pop();if("function"!==typeof r)throw new TypeError("Expected function as last argument, not "+r);!function t(i){const a=e[++s];let o=-1;if(i)r(i);else{for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];for(;++o<n.length;)null!==u[o]&&void 0!==u[o]||(u[o]=n[o]);n=u,a?function(e,t){let n;return s;function s(){for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];const l=e.length>s.length;let u;l&&s.push(r);try{u=e.apply(this,s)}catch(i){if(l&&n)throw i;return r(i)}l||(u&&u.then&&"function"===typeof u.then?u.then(a,r):u instanceof Error?r(u):a(u))}function r(e){if(!n){n=!0;for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];t(e,...s)}}function a(e){r(null,e)}}(a,t)(...u):r(null,...u)}}(null,...n)},use:function(n){if("function"!==typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const Tr={basename:function(e,t){if(void 0!==t&&"string"!==typeof t)throw new TypeError('"ext" argument must be a string');Br(e);let n,i=0,s=-1,r=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;r--;)if(47===e.codePointAt(r)){if(n){i=r+1;break}}else s<0&&(n=!0,s=r+1);return s<0?"":e.slice(i,s)}if(t===e)return"";let a=-1,o=t.length-1;for(;r--;)if(47===e.codePointAt(r)){if(n){i=r+1;break}}else a<0&&(n=!0,a=r+1),o>-1&&(e.codePointAt(r)===t.codePointAt(o--)?o<0&&(s=r):(o=-1,s=a));i===s?s=a:s<0&&(s=e.length);return e.slice(i,s)},dirname:function(e){if(Br(e),0===e.length)return".";let t,n=-1,i=e.length;for(;--i;)if(47===e.codePointAt(i)){if(t){n=i;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){Br(e);let t,n=e.length,i=-1,s=0,r=-1,a=0;for(;n--;){const o=e.codePointAt(n);if(47!==o)i<0&&(t=!0,i=n+1),46===o?r<0?r=n:1!==a&&(a=1):r>-1&&(a=-1);else if(t){s=n+1;break}}if(r<0||i<0||0===a||1===a&&r===i-1&&r===s+1)return"";return e.slice(r,i)},join:function(){let e,t=-1;for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];for(;++t<i.length;)Br(i[t]),i[t]&&(e=void 0===e?i[t]:e+"/"+i[t]);return void 0===e?".":function(e){Br(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,i,s="",r=0,a=-1,o=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else{if(47===n)break;n=47}if(47===n){if(a===l-1||1===o);else if(a!==l-1&&2===o){if(s.length<2||2!==r||46!==s.codePointAt(s.length-1)||46!==s.codePointAt(s.length-2))if(s.length>2){if(i=s.lastIndexOf("/"),i!==s.length-1){i<0?(s="",r=0):(s=s.slice(0,i),r=s.length-1-s.lastIndexOf("/")),a=l,o=0;continue}}else if(s.length>0){s="",r=0,a=l,o=0;continue}t&&(s=s.length>0?s+"/..":"..",r=2)}else s.length>0?s+="/"+e.slice(a+1,l):s=e.slice(a+1,l),r=l-a-1;a=l,o=0}else 46===n&&o>-1?o++:o=-1}return s}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/");return t?"/"+n:n}(e)},sep:"/"};function Br(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Ir={cwd:function(){return"/"}};function jr(e){return Boolean(null!==e&&"object"===typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function Pr(e){if("string"===typeof e)e=new URL(e);else if(!jr(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const Lr=["history","path","basename","stem","extname","dirname"];class Rr{constructor(e){let t;t=e?jr(e)?{path:e}:"string"===typeof e||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":Ir.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,i=-1;for(;++i<Lr.length;){const e=Lr[i];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)Lr.includes(n)||(this[n]=t[n])}get basename(){return"string"===typeof this.path?Tr.basename(this.path):void 0}set basename(e){zr(e,"basename"),Or(e,"basename"),this.path=Tr.join(this.dirname||"",e)}get dirname(){return"string"===typeof this.path?Tr.dirname(this.path):void 0}set dirname(e){Wr(this.basename,"dirname"),this.path=Tr.join(e||"",this.basename)}get extname(){return"string"===typeof this.path?Tr.extname(this.path):void 0}set extname(e){if(Or(e,"extname"),Wr(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Tr.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){jr(e)&&(e=Pr(e)),zr(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"===typeof this.path?Tr.basename(this.path,this.extname):void 0}set stem(e){zr(e,"stem"),Or(e,"stem"),this.path=Tr.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const i=this.message(e,t,n);throw i.fatal=!0,i}info(e,t,n){const i=this.message(e,t,n);return i.fatal=void 0,i}message(e,t,n){const i=new Mn(e,t,n);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){if(void 0===this.value)return"";if("string"===typeof this.value)return this.value;return new TextDecoder(e||void 0).decode(this.value)}}function Or(e,t){if(e&&e.includes(Tr.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Tr.sep+"`")}function zr(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Wr(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const Ur=function(e){const t=this.constructor.prototype,n=t[e],i=function(){return n.apply(i,arguments)};return Object.setPrototypeOf(i,t),i},Hr={}.hasOwnProperty;class Vr extends Ur{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Mr()}copy(){const e=new Vr;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(_r(!0,{},this.namespace)),e}data(e,t){return"string"===typeof e?2===arguments.length?(Xr("data",this.frozen),this.namespace[e]=t,this):Hr.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Xr("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const i=t.call(e,...n);"function"===typeof i&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=$r(e),n=this.parser||this.Parser;return qr("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),qr("process",this.parser||this.Parser),Kr("process",this.compiler||this.Compiler),t?i(void 0,t):new Promise(i);function i(i,s){const r=$r(e),a=n.parse(r);function o(e,n){e||!n?s(e):i?i(n):t(void 0,n)}n.run(a,r,(function(e,t,i){if(e||!t||!i)return o(e);const s=t,r=n.stringify(s,i);var a;"string"===typeof(a=r)||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(a)?i.value=r:i.result=r,o(e,i)}))}}processSync(e){let t,n=!1;return this.freeze(),qr("processSync",this.parser||this.Parser),Kr("processSync",this.compiler||this.Compiler),this.process(e,(function(e,i){n=!0,Sr(e),t=i})),Qr("processSync","process",n),t}run(e,t,n){Yr(e),this.freeze();const i=this.transformers;return n||"function"!==typeof t||(n=t,t=void 0),n?s(void 0,n):new Promise(s);function s(s,r){const a=$r(t);i.run(e,a,(function(t,i,a){const o=i||e;t?r(t):s?s(o):n(void 0,o,a)}))}}runSync(e,t){let n,i=!1;return this.run(e,t,(function(e,t){Sr(e),n=t,i=!0})),Qr("runSync","run",i),n}stringify(e,t){this.freeze();const n=$r(t),i=this.compiler||this.Compiler;return Kr("stringify",i),Yr(e),i(e,n)}use(e){const t=this.attachers,n=this.namespace;if(Xr("use",this.frozen),null===e||void 0===e);else if("function"===typeof e){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];u(e,s)}else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?l(e):o(e)}return this;function a(e){if("function"===typeof e)u(e,[]);else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;u(t,n)}else o(e)}}function o(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(e.plugins),e.settings&&(n.settings=_r(!0,n.settings,e.settings))}function l(e){let t=-1;if(null===e||void 0===e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){a(e[t])}}}function u(e,n){let i=-1,s=-1;for(;++i<t.length;)if(t[i][0]===e){s=i;break}if(-1===s)t.push([e,...n]);else if(n.length>0){let[i,...r]=n;const a=t[s][1];Nr(a)&&Nr(i)&&(i=_r(!0,a,i)),t[s]=[e,i,...r]}}}}const Gr=(new Vr).freeze();function qr(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function Kr(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function Xr(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Yr(e){if(!Nr(e)||"string"!==typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function Qr(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function $r(e){return function(e){return Boolean(e&&"object"===typeof e&&"message"in e&&"messages"in e)}(e)?e:new Rr(e)}const Jr=[],Zr={allowDangerousHtml:!0},ea=/^(https?|ircs?|mailto|xmpp)$/i,ta=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function na(e){const t=ia(e),n=sa(e);return ra(t.runSync(t.parse(n),n),e)}function ia(e){const t=e.rehypePlugins||Jr,n=e.remarkPlugins||Jr,i=e.remarkRehypeOptions?(0,o.A)((0,o.A)({},e.remarkRehypeOptions),Zr):Zr;return Gr().use(Vs).use(n).use(kr,i).use(t)}function sa(e){const t=e.children||"",n=new Rr;return"string"===typeof t&&(n.value=t),n}function ra(e,t){const n=t.allowedElements,i=t.allowElement,s=t.components,r=t.disallowedElements,a=t.skipHtml,o=t.unwrapDisallowed,l=t.urlTransform||aa;for(const u of ta)Object.hasOwn(t,u.from)&&(u.from,u.to&&u.to,u.id);return dr(e,(function(e,t,s){if("raw"===e.type&&s&&"number"===typeof t)return a?s.children.splice(t,1):s.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in Xn)if(Object.hasOwn(Xn,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],i=Xn[t];(null===i||i.includes(e.tagName))&&(e.properties[t]=l(String(n||""),t,e))}}if("element"===e.type){let a=n?!n.includes(e.tagName):!!r&&r.includes(e.tagName);if(!a&&i&&"number"===typeof t&&(a=!i(e,t,s)),a&&s&&"number"===typeof t)return o&&e.children?s.children.splice(t,1,...e.children):s.children.splice(t,1),t}})),Rn(e,{Fragment:Mt.Fragment,components:s,ignoreInvalidStyle:!0,jsx:Mt.jsx,jsxs:Mt.jsxs,passKeys:!0,passNode:!0})}function aa(e){const t=e.indexOf(":"),n=e.indexOf("?"),i=e.indexOf("#"),s=e.indexOf("/");return-1===t||-1!==s&&t>s||-1!==n&&t>n||-1!==i&&t>i||ea.test(e.slice(0,t))?e:""}function oa(e,t){const n=String(e);if("string"!==typeof t)throw new TypeError("Expected character");let i=0,s=n.indexOf(t);for(;-1!==s;)i++,s=n.indexOf(t,s+t.length);return i}function la(e,t,n){const i=ir((n||{}).ignore||[]),s=function(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let i=-1;for(;++i<n.length;){const e=n[i];t.push([ua(e[0]),ca(e[1])])}return t}(t);let r=-1;for(;++r<s.length;)cr(e,"text",a);function a(e,t){let n,a=-1;for(;++a<t.length;){const e=t[a],s=n?n.children:void 0;if(i(e,s?s.indexOf(e):void 0,n))return;n=e}if(n)return function(e,t){const n=t[t.length-1],i=s[r][0],a=s[r][1];let o=0;const l=n.children.indexOf(e);let u=!1,c=[];i.lastIndex=0;let d=i.exec(e.value);for(;d;){const n=d.index,s={index:d.index,input:d.input,stack:[...t,e]};let r=a(...d,s);if("string"===typeof r&&(r=r.length>0?{type:"text",value:r}:void 0),!1===r?i.lastIndex=n+1:(o!==n&&c.push({type:"text",value:e.value.slice(o,n)}),Array.isArray(r)?c.push(...r):r&&c.push(r),o=n+d[0].length,u=!0),!i.global)break;d=i.exec(e.value)}u?(o<e.value.length&&c.push({type:"text",value:e.value.slice(o)}),n.children.splice(l,1,...c)):c=[e];return l+c.length}(e,t)}}function ua(e){return"string"===typeof e?new RegExp(function(e){if("string"!==typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(e),"g"):e}function ca(e){return"function"===typeof e?e:function(){return e}}const da="phrasing",ha=["autolink","link","image","label"];function pa(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function fa(e){this.config.enter.autolinkProtocol.call(this,e)}function ma(e){this.config.exit.autolinkProtocol.call(this,e)}function ga(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function va(e){this.config.exit.autolinkEmail.call(this,e)}function ya(e){this.exit(e)}function Da(e){la(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,xa],[/(?<=^|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]|(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDD00-\uDEB3\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF]))([\+\x2D\.0-9A-Z_a-z]+)@([\x2D0-9A-Z_a-z]+(?:\.[\x2D0-9A-Z_a-z]+)+)/g,ba]],{ignore:["link","linkReference"]})}function xa(e,t,n,i,s){let r="";if(!wa(s))return!1;if(/^w/i.test(t)&&(n=t+n,t="",r="http://"),!function(e){const t=e.split(".");if(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))return!1;return!0}(n))return!1;const a=function(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],i=n.indexOf(")");const s=oa(e,"(");let r=oa(e,")");for(;-1!==i&&s>r;)e+=n.slice(0,i+1),n=n.slice(i+1),i=n.indexOf(")"),r++;return[e,n]}(n+i);if(!a[0])return!1;const o={type:"link",title:null,url:r+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[o,{type:"text",value:a[1]}]:o}function ba(e,t,n,i){return!(!wa(i,!0)||/[-\d_]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function wa(e,t){const n=e.input.charCodeAt(e.index-1);return(0===e.index||xi(n)||Di(n))&&(!t||47!==n)}function Aa(){this.buffer()}function Ca(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function Ea(){this.buffer()}function Fa(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function ka(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Gi(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Sa(e){this.exit(e)}function _a(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Gi(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Na(e){this.exit(e)}function Ma(e,t,n,i){const s=n.createTracker(i);let r=s.move("[^");const a=n.enter("footnoteReference"),o=n.enter("reference");return r+=s.move(n.safe(n.associationId(e),{after:"]",before:r})),o(),a(),r+=s.move("]"),r}function Ta(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:function(e,n,i,s){const r=i.createTracker(s);let a=r.move("[^");const o=i.enter("footnoteDefinition"),l=i.enter("label");a+=r.move(i.safe(i.associationId(e),{before:a,after:"]"})),l(),a+=r.move("]:"),e.children&&e.children.length>0&&(r.shift(4),a+=r.move((t?"\n":" ")+i.indentLines(i.containerFlow(e,r.current()),t?Ia:Ba)));return o(),a},footnoteReference:Ma},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]}}function Ba(e,t,n){return 0===t?e:Ia(e,t,n)}function Ia(e,t,n){return(n?"":"    ")+e}Ma.peek=function(){return"["};const ja=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];function Pa(e){this.enter({type:"delete",children:[]},e)}function La(e){this.exit(e)}function Ra(e,t,n,i){const s=n.createTracker(i),r=n.enter("strikethrough");let a=s.move("~~");return a+=n.containerPhrasing(e,(0,o.A)((0,o.A)({},s.current()),{},{before:a,after:"~"})),a+=s.move("~~"),r(),a}function Oa(e){return e.length}function za(e){const t="string"===typeof e?e.codePointAt(0):0;return 67===t||99===t?99:76===t||108===t?108:82===t||114===t?114:0}function Wa(e,t,n){return">"+(n?"":" ")+e}function Ua(e,t,n){if("string"===typeof t&&(t=[t]),!t||0===t.length)return n;let i=-1;for(;++i<t.length;)if(e.includes(t[i]))return!0;return!1}function Ha(e,t,n,i){let s=-1;for(;++s<n.unsafe.length;)if("\n"===n.unsafe[s].character&&(r=n.stack,a=n.unsafe[s],Ua(r,a.inConstruct,!0)&&!Ua(r,a.notInConstruct,!1)))return/[ \t]/.test(i.before)?"":" ";var r,a;return"\\\n"}function Va(e,t,n){return(n?"":"    ")+e}function Ga(e){const t=e.options.quote||'"';if('"'!==t&&"'"!==t)throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function qa(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Ka(e,t,n){const i=gs(e),s=gs(t);return void 0===i?void 0===s?"_"===n?{inside:!0,outside:!0}:{inside:!1,outside:!1}:1===s?{inside:!0,outside:!0}:{inside:!1,outside:!0}:1===i?void 0===s?{inside:!1,outside:!1}:1===s?{inside:!0,outside:!0}:{inside:!1,outside:!1}:void 0===s?{inside:!1,outside:!1}:1===s?{inside:!0,outside:!1}:{inside:!1,outside:!1}}function Xa(e,t,n,i){const s=function(e){const t=e.options.emphasis||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}(n),r=n.enter("emphasis"),a=n.createTracker(i),l=a.move(s);let u=a.move(n.containerPhrasing(e,(0,o.A)({after:s,before:l},a.current())));const c=u.charCodeAt(0),d=Ka(i.before.charCodeAt(i.before.length-1),c,s);d.inside&&(u=qa(c)+u.slice(1));const h=u.charCodeAt(u.length-1),p=Ka(i.after.charCodeAt(0),h,s);p.inside&&(u=u.slice(0,-1)+qa(h));const f=a.move(s);return r(),n.attentionEncodeSurroundingInfo={after:p.outside,before:d.outside},l+u+f}function Ya(e){return e.value||""}function Qa(e,t,n,i){const s=Ga(n),r='"'===s?"Quote":"Apostrophe",a=n.enter("image");let l=n.enter("label");const u=n.createTracker(i);let c=u.move("![");return c+=u.move(n.safe(e.alt,(0,o.A)({before:c,after:"]"},u.current()))),c+=u.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),c+=u.move("<"),c+=u.move(n.safe(e.url,(0,o.A)({before:c,after:">"},u.current()))),c+=u.move(">")):(l=n.enter("destinationRaw"),c+=u.move(n.safe(e.url,(0,o.A)({before:c,after:e.title?" ":")"},u.current())))),l(),e.title&&(l=n.enter("title".concat(r)),c+=u.move(" "+s),c+=u.move(n.safe(e.title,(0,o.A)({before:c,after:s},u.current()))),c+=u.move(s),l()),c+=u.move(")"),a(),c}function $a(e,t,n,i){const s=e.referenceType,r=n.enter("imageReference");let a=n.enter("label");const l=n.createTracker(i);let u=l.move("![");const c=n.safe(e.alt,(0,o.A)({before:u,after:"]"},l.current()));u+=l.move(c+"]["),a();const d=n.stack;n.stack=[],a=n.enter("reference");const h=n.safe(n.associationId(e),(0,o.A)({before:u,after:"]"},l.current()));return a(),n.stack=d,r(),"full"!==s&&c&&c===h?"shortcut"===s?u=u.slice(0,-1):u+=l.move("]"):u+=l.move(h+"]"),u}function Ja(e,t,n){let i=e.value||"",s="`",r=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(i);)s+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++r<n.unsafe.length;){const e=n.unsafe[r],t=n.compilePattern(e);let s;if(e.atBreak)for(;s=t.exec(i);){let e=s.index;10===i.charCodeAt(e)&&13===i.charCodeAt(e-1)&&e--,i=i.slice(0,e)+" "+i.slice(s.index+1)}}return s+i+s}function Za(e,t){const n=Qn(e);return Boolean(!t.options.resourceLink&&e.url&&!e.title&&e.children&&1===e.children.length&&"text"===e.children[0].type&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}function eo(e,t,n,i){const s=Ga(n),r='"'===s?"Quote":"Apostrophe",a=n.createTracker(i);let l,u;if(Za(e,n)){const t=n.stack;n.stack=[],l=n.enter("autolink");let i=a.move("<");return i+=a.move(n.containerPhrasing(e,(0,o.A)({before:i,after:">"},a.current()))),i+=a.move(">"),l(),n.stack=t,i}l=n.enter("link"),u=n.enter("label");let c=a.move("[");return c+=a.move(n.containerPhrasing(e,(0,o.A)({before:c,after:"]("},a.current()))),c+=a.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),c+=a.move("<"),c+=a.move(n.safe(e.url,(0,o.A)({before:c,after:">"},a.current()))),c+=a.move(">")):(u=n.enter("destinationRaw"),c+=a.move(n.safe(e.url,(0,o.A)({before:c,after:e.title?" ":")"},a.current())))),u(),e.title&&(u=n.enter("title".concat(r)),c+=a.move(" "+s),c+=a.move(n.safe(e.title,(0,o.A)({before:c,after:s},a.current()))),c+=a.move(s),u()),c+=a.move(")"),l(),c}function to(e,t,n,i){const s=e.referenceType,r=n.enter("linkReference");let a=n.enter("label");const l=n.createTracker(i);let u=l.move("[");const c=n.containerPhrasing(e,(0,o.A)({before:u,after:"]"},l.current()));u+=l.move(c+"]["),a();const d=n.stack;n.stack=[],a=n.enter("reference");const h=n.safe(n.associationId(e),(0,o.A)({before:u,after:"]"},l.current()));return a(),n.stack=d,r(),"full"!==s&&c&&c===h?"shortcut"===s?u=u.slice(0,-1):u+=l.move("]"):u+=l.move(h+"]"),u}function no(e){const t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function io(e){const t=e.options.rule||"*";if("*"!==t&&"-"!==t&&"_"!==t)throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}Ra.peek=function(){return"~"},Xa.peek=function(e,t,n){return n.options.emphasis||"*"},Ya.peek=function(){return"<"},Qa.peek=function(){return"!"},$a.peek=function(){return"!"},Ja.peek=function(){return"`"},eo.peek=function(e,t,n){return Za(e,n)?"<":"["},to.peek=function(){return"["};const so=ir(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function ro(e,t,n,i){const s=function(e){const t=e.options.strong||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}(n),r=n.enter("strong"),a=n.createTracker(i),l=a.move(s+s);let u=a.move(n.containerPhrasing(e,(0,o.A)({after:s,before:l},a.current())));const c=u.charCodeAt(0),d=Ka(i.before.charCodeAt(i.before.length-1),c,s);d.inside&&(u=qa(c)+u.slice(1));const h=u.charCodeAt(u.length-1),p=Ka(i.after.charCodeAt(0),h,s);p.inside&&(u=u.slice(0,-1)+qa(h));const f=a.move(s+s);return r(),n.attentionEncodeSurroundingInfo={after:p.outside,before:d.outside},l+u+f}ro.peek=function(e,t,n){return n.options.strong||"*"};const ao={blockquote:function(e,t,n,i){const s=n.enter("blockquote"),r=n.createTracker(i);r.move("> "),r.shift(2);const a=n.indentLines(n.containerFlow(e,r.current()),Wa);return s(),a},break:Ha,code:function(e,t,n,i){const s=function(e){const t=e.options.fence||"`";if("`"!==t&&"~"!==t)throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}(n),r=e.value||"",a="`"===s?"GraveAccent":"Tilde";if(function(e,t){return Boolean(!1===t.options.fences&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}(e,n)){const e=n.enter("codeIndented"),t=n.indentLines(r,Va);return e(),t}const l=n.createTracker(i),u=s.repeat(Math.max(function(e,t){const n=String(e);let i=n.indexOf(t),s=i,r=0,a=0;if("string"!==typeof t)throw new TypeError("Expected substring");for(;-1!==i;)i===s?++r>a&&(a=r):r=1,s=i+t.length,i=n.indexOf(t,s);return a}(r,s)+1,3)),c=n.enter("codeFenced");let d=l.move(u);if(e.lang){const t=n.enter("codeFencedLang".concat(a));d+=l.move(n.safe(e.lang,(0,o.A)({before:d,after:" ",encode:["`"]},l.current()))),t()}if(e.lang&&e.meta){const t=n.enter("codeFencedMeta".concat(a));d+=l.move(" "),d+=l.move(n.safe(e.meta,(0,o.A)({before:d,after:"\n",encode:["`"]},l.current()))),t()}return d+=l.move("\n"),r&&(d+=l.move(r+"\n")),d+=l.move(u),c(),d},definition:function(e,t,n,i){const s=Ga(n),r='"'===s?"Quote":"Apostrophe",a=n.enter("definition");let l=n.enter("label");const u=n.createTracker(i);let c=u.move("[");return c+=u.move(n.safe(n.associationId(e),(0,o.A)({before:c,after:"]"},u.current()))),c+=u.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),c+=u.move("<"),c+=u.move(n.safe(e.url,(0,o.A)({before:c,after:">"},u.current()))),c+=u.move(">")):(l=n.enter("destinationRaw"),c+=u.move(n.safe(e.url,(0,o.A)({before:c,after:e.title?" ":"\n"},u.current())))),l(),e.title&&(l=n.enter("title".concat(r)),c+=u.move(" "+s),c+=u.move(n.safe(e.title,(0,o.A)({before:c,after:s},u.current()))),c+=u.move(s),l()),a(),c},emphasis:Xa,hardBreak:Ha,heading:function(e,t,n,i){const s=Math.max(Math.min(6,e.depth||1),1),r=n.createTracker(i);if(function(e,t){let n=!1;return dr(e,(function(e){if("value"in e&&/\r?\n|\r/.test(e.value)||"break"===e.type)return n=!0,ur})),Boolean((!e.depth||e.depth<3)&&Qn(e)&&(t.options.setext||n))}(e,n)){const t=n.enter("headingSetext"),i=n.enter("phrasing"),a=n.containerPhrasing(e,(0,o.A)((0,o.A)({},r.current()),{},{before:"\n",after:"\n"}));return i(),t(),a+"\n"+(1===s?"=":"-").repeat(a.length-(Math.max(a.lastIndexOf("\r"),a.lastIndexOf("\n"))+1))}const a="#".repeat(s),l=n.enter("headingAtx"),u=n.enter("phrasing");r.move(a+" ");let c=n.containerPhrasing(e,(0,o.A)({before:"# ",after:"\n"},r.current()));return/^[\t ]/.test(c)&&(c=qa(c.charCodeAt(0))+c.slice(1)),c=c?a+" "+c:a,n.options.closeAtx&&(c+=" "+a),u(),l(),c},html:Ya,image:Qa,imageReference:$a,inlineCode:Ja,link:eo,linkReference:to,list:function(e,t,n,i){const s=n.enter("list"),r=n.bulletCurrent;let a=e.ordered?function(e){const t=e.options.bulletOrdered||".";if("."!==t&&")"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}(n):no(n);const o=e.ordered?"."===a?")":".":function(e){const t=no(e),n=e.options.bulletOther;if(!n)return"*"===t?"-":"*";if("*"!==n&&"+"!==n&&"-"!==n)throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}(n);let l=!(!t||!n.bulletLastUsed)&&a===n.bulletLastUsed;if(!e.ordered){const t=e.children?e.children[0]:void 0;if("*"!==a&&"-"!==a||!t||t.children&&t.children[0]||"list"!==n.stack[n.stack.length-1]||"listItem"!==n.stack[n.stack.length-2]||"list"!==n.stack[n.stack.length-3]||"listItem"!==n.stack[n.stack.length-4]||0!==n.indexStack[n.indexStack.length-1]||0!==n.indexStack[n.indexStack.length-2]||0!==n.indexStack[n.indexStack.length-3]||(l=!0),io(n)===a&&t){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n&&"listItem"===n.type&&n.children&&n.children[0]&&"thematicBreak"===n.children[0].type){l=!0;break}}}}l&&(a=o),n.bulletCurrent=a;const u=n.containerFlow(e,i);return n.bulletLastUsed=a,n.bulletCurrent=r,s(),u},listItem:function(e,t,n,i){const s=function(e){const t=e.options.listItemIndent||"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}(n);let r=n.bulletCurrent||no(n);t&&"list"===t.type&&t.ordered&&(r=("number"===typeof t.start&&t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+r);let a=r.length+1;("tab"===s||"mixed"===s&&(t&&"list"===t.type&&t.spread||e.spread))&&(a=4*Math.ceil(a/4));const o=n.createTracker(i);o.move(r+" ".repeat(a-r.length)),o.shift(a);const l=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,o.current()),(function(e,t,n){if(t)return(n?"":" ".repeat(a))+e;return(n?r:r+" ".repeat(a-r.length))+e}));return l(),u},paragraph:function(e,t,n,i){const s=n.enter("paragraph"),r=n.enter("phrasing"),a=n.containerPhrasing(e,i);return r(),s(),a},root:function(e,t,n,i){return(e.children.some((function(e){return so(e)}))?n.containerPhrasing:n.containerFlow).call(n,e,i)},strong:ro,text:function(e,t,n,i){return n.safe(e.value,i)},thematicBreak:function(e,t,n){const i=(io(n)+(n.options.ruleSpaces?" ":"")).repeat(function(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}(n));return n.options.ruleSpaces?i.slice(0,-1):i}};function oo(e){const t=e._align;this.enter({type:"table",align:t.map((function(e){return"none"===e?null:e})),children:[]},e),this.data.inTable=!0}function lo(e){this.exit(e),this.data.inTable=void 0}function uo(e){this.enter({type:"tableRow",children:[]},e)}function co(e){this.exit(e)}function ho(e){this.enter({type:"tableCell",children:[]},e)}function po(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,fo));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function fo(e,t){return"|"===t?t:e}function mo(e){const t=e||{},n=t.tableCellPadding,i=t.tablePipeAlign,s=t.stringLength,r=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:function(e,t,n){let i=ao.inlineCode(e,t,n);n.stack.includes("tableCell")&&(i=i.replace(/\|/g,"\\$&"));return i},table:function(e,t,n,i){return l(function(e,t,n){const i=e.children;let s=-1;const r=[],a=t.enter("table");for(;++s<i.length;)r[s]=u(i[s],t,n);return a(),r}(e,n,i),e.align)},tableCell:a,tableRow:function(e,t,n,i){const s=u(e,n,i),r=l([s]);return r.slice(0,r.indexOf("\n"))}}};function a(e,t,n,i){const s=n.enter("tableCell"),a=n.enter("phrasing"),l=n.containerPhrasing(e,(0,o.A)((0,o.A)({},i),{},{before:r,after:r}));return a(),s(),l}function l(e,t){return function(e,t){const n=t||{},i=(n.align||[]).concat(),s=n.stringLength||Oa,r=[],a=[],o=[],l=[];let u=0,c=-1;for(;++c<e.length;){const t=[],i=[];let r=-1;for(e[c].length>u&&(u=e[c].length);++r<e[c].length;){const a=null===(d=e[c][r])||void 0===d?"":String(d);if(!1!==n.alignDelimiters){const e=s(a);i[r]=e,(void 0===l[r]||e>l[r])&&(l[r]=e)}t.push(a)}a[c]=t,o[c]=i}var d;let h=-1;if("object"===typeof i&&"length"in i)for(;++h<u;)r[h]=za(i[h]);else{const e=za(i);for(;++h<u;)r[h]=e}h=-1;const p=[],f=[];for(;++h<u;){const e=r[h];let t="",i="";99===e?(t=":",i=":"):108===e?t=":":114===e&&(i=":");let s=!1===n.alignDelimiters?1:Math.max(1,l[h]-t.length-i.length);const a=t+"-".repeat(s)+i;!1!==n.alignDelimiters&&(s=t.length+s+i.length,s>l[h]&&(l[h]=s),f[h]=s),p[h]=a}a.splice(1,0,p),o.splice(1,0,f),c=-1;const m=[];for(;++c<a.length;){const e=a[c],t=o[c];h=-1;const i=[];for(;++h<u;){const s=e[h]||"";let a="",o="";if(!1!==n.alignDelimiters){const e=l[h]-(t[h]||0),n=r[h];114===n?a=" ".repeat(e):99===n?e%2?(a=" ".repeat(e/2+.5),o=" ".repeat(e/2-.5)):(a=" ".repeat(e/2),o=a):o=" ".repeat(e)}!1===n.delimiterStart||h||i.push("|"),!1===n.padding||!1===n.alignDelimiters&&""===s||!1===n.delimiterStart&&!h||i.push(" "),!1!==n.alignDelimiters&&i.push(a),i.push(s),!1!==n.alignDelimiters&&i.push(o),!1!==n.padding&&i.push(" "),!1===n.delimiterEnd&&h===u-1||i.push("|")}m.push(!1===n.delimiterEnd?i.join("").replace(/ +$/,""):i.join(""))}return m.join("\n")}(e,{align:t,alignDelimiters:i,padding:n,stringLength:s})}function u(e,t,n){const i=e.children;let s=-1;const r=[],o=t.enter("tableRow");for(;++s<i.length;)r[s]=a(i[s],0,t,n);return o(),r}}function go(e){const t=this.stack[this.stack.length-2];t.type,t.checked="taskListCheckValueChecked"===e.type}function vo(e){const t=this.stack[this.stack.length-2];if(t&&"listItem"===t.type&&"boolean"===typeof t.checked){const e=this.stack[this.stack.length-1];e.type;const n=e.children[0];if(n&&"text"===n.type){const i=t.children;let s,r=-1;for(;++r<i.length;){const e=i[r];if("paragraph"===e.type){s=e;break}}s===e&&(n.value=n.value.slice(1),0===n.value.length?e.children.shift():e.position&&n.position&&"number"===typeof n.position.start.offset&&(n.position.start.column++,n.position.start.offset++,e.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function yo(e,t,n,i){const s=e.children[0],r="boolean"===typeof e.checked&&s&&"paragraph"===s.type,a="["+(e.checked?"x":" ")+"] ",l=n.createTracker(i);r&&l.move(a);let u=ao.listItem(e,t,n,(0,o.A)((0,o.A)({},i),l.current()));return r&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,(function(e){return e+a}))),u}const Do={tokenize:function(e,t,n){let i=0;return function t(r){if((87===r||119===r)&&i<3)return i++,e.consume(r),t;if(46===r&&3===i)return e.consume(r),s;return n(r)};function s(e){return null===e?n(e):t(e)}},partial:!0},xo={tokenize:function(e,t,n){let i,s,r;return a;function a(t){return 46===t||95===t?e.check(wo,l,o)(t):null===t||vi(t)||xi(t)||45!==t&&Di(t)?l(t):(r=!0,e.consume(t),a)}function o(t){return 95===t?i=!0:(s=i,i=void 0),e.consume(t),a}function l(e){return s||i||!r?n(e):t(e)}},partial:!0},bo={tokenize:function(e,t){let n=0,i=0;return s;function s(a){return 40===a?(n++,e.consume(a),s):41===a&&i<n?r(a):33===a||34===a||38===a||39===a||41===a||42===a||44===a||46===a||58===a||59===a||60===a||63===a||93===a||95===a||126===a?e.check(wo,t,r)(a):null===a||vi(a)||xi(a)?t(a):(e.consume(a),s)}function r(t){return 41===t&&i++,e.consume(t),s}},partial:!0},wo={tokenize:function(e,t,n){return i;function i(a){return 33===a||34===a||39===a||41===a||42===a||44===a||46===a||58===a||59===a||63===a||95===a||126===a?(e.consume(a),i):38===a?(e.consume(a),r):93===a?(e.consume(a),s):60===a||null===a||vi(a)||xi(a)?t(a):n(a)}function s(e){return null===e||40===e||91===e||vi(e)||xi(e)?t(e):i(e)}function r(e){return ui(e)?a(e):n(e)}function a(t){return 59===t?(e.consume(t),i):ui(t)?(e.consume(t),a):n(t)}},partial:!0},Ao={tokenize:function(e,t,n){return function(t){return e.consume(t),i};function i(e){return ci(e)?n(e):t(e)}},partial:!0},Co={name:"wwwAutolink",tokenize:function(e,t,n){const i=this;return function(t){if(87!==t&&119!==t||!_o.call(i,i.previous)||Bo(i.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Do,e.attempt(xo,e.attempt(bo,s),n),n)(t)};function s(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:_o},Eo={name:"protocolAutolink",tokenize:function(e,t,n){const i=this;let s="",r=!1;return function(t){if((72===t||104===t)&&No.call(i,i.previous)&&!Bo(i.events))return e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),s+=String.fromCodePoint(t),e.consume(t),a;return n(t)};function a(t){if(ui(t)&&s.length<5)return s+=String.fromCodePoint(t),e.consume(t),a;if(58===t){const n=s.toLowerCase();if("http"===n||"https"===n)return e.consume(t),o}return n(t)}function o(t){return 47===t?(e.consume(t),r?l:(r=!0,o)):n(t)}function l(t){return null===t||hi(t)||vi(t)||xi(t)||Di(t)?n(t):e.attempt(xo,e.attempt(bo,u),n)(t)}function u(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}},previous:No},Fo={name:"emailAutolink",tokenize:function(e,t,n){const i=this;let s,r;return function(t){if(!To(t)||!Mo.call(i,i.previous)||Bo(i.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(t)};function a(t){return To(t)?(e.consume(t),a):64===t?(e.consume(t),o):n(t)}function o(t){return 46===t?e.check(Ao,u,l)(t):45===t||95===t||ci(t)?(r=!0,e.consume(t),o):u(t)}function l(t){return e.consume(t),s=!0,o}function u(a){return r&&s&&ui(i.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(a)):n(a)}},previous:Mo},ko={};let So=48;for(;So<123;)ko[So]=Fo,So++,58===So?So=65:91===So&&(So=97);function _o(e){return null===e||40===e||42===e||95===e||91===e||93===e||126===e||vi(e)}function No(e){return!ui(e)}function Mo(e){return!(47===e||To(e))}function To(e){return 43===e||45===e||46===e||95===e||ci(e)}function Bo(e){let t=e.length,n=!1;for(;t--;){const i=e[t][1];if(("labelLink"===i.type||"labelImage"===i.type)&&!i._balanced){n=!0;break}if(i._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}ko[43]=Fo,ko[45]=Fo,ko[46]=Fo,ko[95]=Fo,ko[72]=[Fo,Eo],ko[104]=[Fo,Eo],ko[87]=[Fo,Co],ko[119]=[Fo,Co];const Io={tokenize:function(e,t,n){const i=this;return wi(e,(function(e){const s=i.events[i.events.length-1];return s&&"gfmFootnoteDefinitionIndent"===s[1].type&&4===s[2].sliceSerialize(s[1],!0).length?t(e):n(e)}),"gfmFootnoteDefinitionIndent",5)},partial:!0};function jo(e,t,n){const i=this;let s=i.events.length;const r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let a;for(;s--;){const e=i.events[s][1];if("labelImage"===e.type){a=e;break}if("gfmFootnoteCall"===e.type||"labelLink"===e.type||"label"===e.type||"image"===e.type||"link"===e.type)break}return function(s){if(!a||!a._balanced)return n(s);const o=Gi(i.sliceSerialize({start:a.end,end:i.now()}));if(94!==o.codePointAt(0)||!r.includes(o.slice(1)))return n(s);return e.enter("gfmFootnoteCallLabelMarker"),e.consume(s),e.exit("gfmFootnoteCallLabelMarker"),t(s)}}function Po(e,t){let n,i=e.length;for(;i--;)if("labelImage"===e[i][1].type&&"enter"===e[i][0]){n=e[i][1];break}e[i+1][1].type="data",e[i+3][1].type="gfmFootnoteCallLabelMarker";const s={type:"gfmFootnoteCall",start:Object.assign({},e[i+3][1].start),end:Object.assign({},e[e.length-1][1].end)},r={type:"gfmFootnoteCallMarker",start:Object.assign({},e[i+3][1].end),end:Object.assign({},e[i+3][1].end)};r.end.column++,r.end.offset++,r.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},r.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},l=[e[i+1],e[i+2],["enter",s,t],e[i+3],e[i+4],["enter",r,t],["exit",r,t],["enter",a,t],["enter",o,t],["exit",o,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",s,t]];return e.splice(i,e.length-i+1,...l),e}function Lo(e,t,n){const i=this,s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let r,a=0;return function(t){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(t),e.exit("gfmFootnoteCallLabelMarker"),o};function o(t){return 94!==t?n(t):(e.enter("gfmFootnoteCallMarker"),e.consume(t),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",l)}function l(o){if(a>999||93===o&&!r||null===o||91===o||vi(o))return n(o);if(93===o){e.exit("chunkString");const r=e.exit("gfmFootnoteCallString");return s.includes(Gi(i.sliceSerialize(r)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(o),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(o)}return vi(o)||(r=!0),a++,e.consume(o),92===o?u:l}function u(t){return 91===t||92===t||93===t?(e.consume(t),a++,l):l(t)}}function Ro(e,t,n){const i=this,s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let r,a,o=0;return function(t){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),l};function l(t){return 94===t?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",u):n(t)}function u(t){if(o>999||93===t&&!a||null===t||91===t||vi(t))return n(t);if(93===t){e.exit("chunkString");const n=e.exit("gfmFootnoteDefinitionLabelString");return r=Gi(i.sliceSerialize(n)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),d}return vi(t)||(a=!0),o++,e.consume(t),92===t?c:u}function c(t){return 91===t||92===t||93===t?(e.consume(t),o++,u):u(t)}function d(t){return 58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),s.includes(r)||s.push(r),wi(e,h,"gfmFootnoteDefinitionWhitespace")):n(t)}function h(e){return t(e)}}function Oo(e,t,n){return e.check(Fi,t,e.attempt(Io,t,n))}function zo(e){e.exit("gfmFootnoteDefinition")}function Wo(e){let t=(e||{}).singleTilde;const n={name:"strikethrough",tokenize:function(e,n,i){const s=this.previous,r=this.events;let a=0;return function(t){if(126===s&&"characterEscape"!==r[r.length-1][1].type)return i(t);return e.enter("strikethroughSequenceTemporary"),o(t)};function o(r){const l=gs(s);if(126===r)return a>1?i(r):(e.consume(r),a++,o);if(a<2&&!t)return i(r);const u=e.exit("strikethroughSequenceTemporary"),c=gs(r);return u._open=!c||2===c&&Boolean(l),u._close=!l||2===l&&Boolean(c),n(r)}},resolveAll:function(e,t){let n=-1;for(;++n<e.length;)if("enter"===e[n][0]&&"strikethroughSequenceTemporary"===e[n][1].type&&e[n][1]._close){let i=n;for(;i--;)if("exit"===e[i][0]&&"strikethroughSequenceTemporary"===e[i][1].type&&e[i][1]._open&&e[n][1].end.offset-e[n][1].start.offset===e[i][1].end.offset-e[i][1].start.offset){e[n][1].type="strikethroughSequence",e[i][1].type="strikethroughSequence";const s={type:"strikethrough",start:Object.assign({},e[i][1].start),end:Object.assign({},e[n][1].end)},r={type:"strikethroughText",start:Object.assign({},e[i][1].end),end:Object.assign({},e[n][1].start)},a=[["enter",s,t],["enter",e[i][1],t],["exit",e[i][1],t],["enter",r,t]],o=t.parser.constructs.insideSpan.null;o&&Zn(a,a.length,0,cs(o,e.slice(i+1,n),t)),Zn(a,a.length,0,[["exit",r,t],["enter",e[n][1],t],["exit",e[n][1],t],["exit",s,t]]),Zn(e,i-1,n-i+3,a),n=i+a.length-2;break}}n=-1;for(;++n<e.length;)"strikethroughSequenceTemporary"===e[n][1].type&&(e[n][1].type="data");return e}};return null!==t&&void 0!==t||(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}}}class Uo{constructor(){this.map=[]}add(e,t,n){!function(e,t,n,i){let s=0;if(0===n&&0===i.length)return;for(;s<e.map.length;){if(e.map[s][0]===t)return e.map[s][1]+=n,void e.map[s][2].push(...i);s+=1}e.map.push([t,n,i])}(this,e,t,n)}consume(e){if(this.map.sort((function(e,t){return e[0]-t[0]})),0===this.map.length)return;let t=this.map.length;const n=[];for(;t>0;)t-=1,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push(e.slice()),e.length=0;let i=n.pop();for(;i;){for(const t of i)e.push(t);i=n.pop()}this.map.length=0}}function Ho(e,t){let n=!1;const i=[];for(;t<e.length;){const s=e[t];if(n){if("enter"===s[0])"tableContent"===s[1].type&&i.push("tableDelimiterMarker"===e[t+1][1].type?"left":"none");else if("tableContent"===s[1].type){if("tableDelimiterMarker"===e[t-1][1].type){const e=i.length-1;i[e]="left"===i[e]?"center":"right"}}else if("tableDelimiterRow"===s[1].type)break}else"enter"===s[0]&&"tableDelimiterRow"===s[1].type&&(n=!0);t+=1}return i}function Vo(e,t,n){const i=this;let s,r=0,a=0;return function(e){let t=i.events.length-1;for(;t>-1;){const e=i.events[t][1].type;if("lineEnding"!==e&&"linePrefix"!==e)break;t--}const s=t>-1?i.events[t][1].type:null,r="tableHead"===s||"tableRow"===s?x:o;if(r===x&&i.parser.lazy[i.now().line])return n(e);return r(e)};function o(t){return e.enter("tableHead"),e.enter("tableRow"),function(e){if(124===e)return l(e);return s=!0,a+=1,l(e)}(t)}function l(t){return null===t?n(t):gi(t)?a>1?(a=0,i.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),d):n(t):yi(t)?wi(e,l,"whitespace")(t):(a+=1,s&&(s=!1,r+=1),124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),s=!0,l):(e.enter("data"),u(t)))}function u(t){return null===t||124===t||vi(t)?(e.exit("data"),l(t)):(e.consume(t),92===t?c:u)}function c(t){return 92===t||124===t?(e.consume(t),u):u(t)}function d(t){return i.interrupt=!1,i.parser.lazy[i.now().line]?n(t):(e.enter("tableDelimiterRow"),s=!1,yi(t)?wi(e,h,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):h(t))}function h(t){return 45===t||58===t?f(t):124===t?(s=!0,e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),p):D(t)}function p(t){return yi(t)?wi(e,f,"whitespace")(t):f(t)}function f(t){return 58===t?(a+=1,s=!0,e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),m):45===t?(a+=1,m(t)):null===t||gi(t)?y(t):D(t)}function m(t){return 45===t?(e.enter("tableDelimiterFiller"),g(t)):D(t)}function g(t){return 45===t?(e.consume(t),g):58===t?(s=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),v):(e.exit("tableDelimiterFiller"),v(t))}function v(t){return yi(t)?wi(e,y,"whitespace")(t):y(t)}function y(n){return 124===n?h(n):(null===n||gi(n))&&s&&r===a?(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(n)):D(n)}function D(e){return n(e)}function x(t){return e.enter("tableRow"),b(t)}function b(n){return 124===n?(e.enter("tableCellDivider"),e.consume(n),e.exit("tableCellDivider"),b):null===n||gi(n)?(e.exit("tableRow"),t(n)):yi(n)?wi(e,b,"whitespace")(n):(e.enter("data"),w(n))}function w(t){return null===t||124===t||vi(t)?(e.exit("data"),b(t)):(e.consume(t),92===t?A:w)}function A(t){return 92===t||124===t?(e.consume(t),w):w(t)}}function Go(e,t){let n,i,s,r=-1,a=!0,o=0,l=[0,0,0,0],u=[0,0,0,0],c=!1,d=0;const h=new Uo;for(;++r<e.length;){const p=e[r],f=p[1];"enter"===p[0]?"tableHead"===f.type?(c=!1,0!==d&&(Ko(h,t,d,n,i),i=void 0,d=0),n={type:"table",start:Object.assign({},f.start),end:Object.assign({},f.end)},h.add(r,0,[["enter",n,t]])):"tableRow"===f.type||"tableDelimiterRow"===f.type?(a=!0,s=void 0,l=[0,0,0,0],u=[0,r+1,0,0],c&&(c=!1,i={type:"tableBody",start:Object.assign({},f.start),end:Object.assign({},f.end)},h.add(r,0,[["enter",i,t]])),o="tableDelimiterRow"===f.type?2:i?3:1):!o||"data"!==f.type&&"tableDelimiterMarker"!==f.type&&"tableDelimiterFiller"!==f.type?"tableCellDivider"===f.type&&(a?a=!1:(0!==l[1]&&(u[0]=u[1],s=qo(h,t,l,o,void 0,s)),l=u,u=[l[1],r,0,0])):(a=!1,0===u[2]&&(0!==l[1]&&(u[0]=u[1],s=qo(h,t,l,o,void 0,s),l=[0,0,0,0]),u[2]=r)):"tableHead"===f.type?(c=!0,d=r):"tableRow"===f.type||"tableDelimiterRow"===f.type?(d=r,0!==l[1]?(u[0]=u[1],s=qo(h,t,l,o,r,s)):0!==u[1]&&(s=qo(h,t,u,o,r,s)),o=0):!o||"data"!==f.type&&"tableDelimiterMarker"!==f.type&&"tableDelimiterFiller"!==f.type||(u[3]=r)}for(0!==d&&Ko(h,t,d,n,i),h.consume(t.events),r=-1;++r<t.events.length;){const e=t.events[r];"enter"===e[0]&&"table"===e[1].type&&(e[1]._align=Ho(t.events,r))}return e}function qo(e,t,n,i,s,r){const a=1===i?"tableHeader":2===i?"tableDelimiter":"tableData";0!==n[0]&&(r.end=Object.assign({},Xo(t.events,n[0])),e.add(n[0],0,[["exit",r,t]]));const o=Xo(t.events,n[1]);if(r={type:a,start:Object.assign({},o),end:Object.assign({},o)},e.add(n[1],0,[["enter",r,t]]),0!==n[2]){const s=Xo(t.events,n[2]),r=Xo(t.events,n[3]),a={type:"tableContent",start:Object.assign({},s),end:Object.assign({},r)};if(e.add(n[2],0,[["enter",a,t]]),2!==i){const i=t.events[n[2]],s=t.events[n[3]];if(i[1].end=Object.assign({},s[1].end),i[1].type="chunkText",i[1].contentType="text",n[3]>n[2]+1){const t=n[2]+1,i=n[3]-n[2]-1;e.add(t,i,[])}}e.add(n[3]+1,0,[["exit",a,t]])}return void 0!==s&&(r.end=Object.assign({},Xo(t.events,s)),e.add(s,0,[["exit",r,t]]),r=void 0),r}function Ko(e,t,n,i,s){const r=[],a=Xo(t.events,n);s&&(s.end=Object.assign({},a),r.push(["exit",s,t])),i.end=Object.assign({},a),r.push(["exit",i,t]),e.add(n+1,0,r)}function Xo(e,t){const n=e[t],i="enter"===n[0]?"start":"end";return n[1][i]}const Yo={name:"tasklistCheck",tokenize:function(e,t,n){const i=this;return function(t){if(null!==i.previous||!i._gfmTasklistFirstContentOfListItem)return n(t);return e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),s};function s(t){return vi(t)?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),r):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),r):n(t)}function r(t){return 93===t?(e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):n(t)}function a(i){return gi(i)?t(i):yi(i)?e.check({tokenize:Qo},t,n)(i):n(i)}}};function Qo(e,t,n){return wi(e,(function(e){return null===e?n(e):t(e)}),"whitespace")}const $o={};function Jo(e){const t=e||$o,n=this.data(),i=n.micromarkExtensions||(n.micromarkExtensions=[]),s=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),r=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);i.push(function(e){return ai([{text:ko},{document:{91:{name:"gfmFootnoteDefinition",tokenize:Ro,continuation:{tokenize:Oo},exit:zo}},text:{91:{name:"gfmFootnoteCall",tokenize:Lo},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:jo,resolveTo:Po}}},Wo(e),{flow:{null:{name:"table",tokenize:Vo,resolveAll:Go}}},{text:{91:Yo}}])}(t)),s.push([{transforms:[Da],enter:{literalAutolink:pa,literalAutolinkEmail:fa,literalAutolinkHttp:fa,literalAutolinkWww:fa},exit:{literalAutolink:ya,literalAutolinkEmail:va,literalAutolinkHttp:ma,literalAutolinkWww:ga}},{enter:{gfmFootnoteCallString:Aa,gfmFootnoteCall:Ca,gfmFootnoteDefinitionLabelString:Ea,gfmFootnoteDefinition:Fa},exit:{gfmFootnoteCallString:ka,gfmFootnoteCall:Sa,gfmFootnoteDefinitionLabelString:_a,gfmFootnoteDefinition:Na}},{canContainEols:["delete"],enter:{strikethrough:Pa},exit:{strikethrough:La}},{enter:{table:oo,tableData:ho,tableHeader:ho,tableRow:uo},exit:{codeText:po,table:lo,tableData:co,tableHeader:co,tableRow:co}},{exit:{taskListCheckValueChecked:go,taskListCheckValueUnchecked:go,paragraph:vo}}]),r.push(function(e){return{extensions:[{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:da,notInConstruct:ha},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:da,notInConstruct:ha},{character:":",before:"[ps]",after:"\\/",inConstruct:da,notInConstruct:ha}]},Ta(e),{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:ja}],handlers:{delete:Ra}},mo(e),{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:yo}}]}}(t))}var Zo=n(574);function el(e,t){this.v=e,this.k=t}function tl(e){return function(){return new nl(e.apply(this,arguments))}}function nl(e){var t,n;function i(t,n){try{var r=e[t](n),a=r.value,o=a instanceof el;Promise.resolve(o?a.v:a).then((function(n){if(o){var l="return"===t?"return":"next";if(!a.k||n.done)return i(l,n);n=e[l](n).value}s(r.done?"return":"normal",n)}),(function(e){i("throw",e)}))}catch(e){s("throw",e)}}function s(e,s){switch(e){case"return":t.resolve({value:s,done:!0});break;case"throw":t.reject(s);break;default:t.resolve({value:s,done:!1})}(t=t.next)?i(t.key,t.arg):n=null}this._invoke=function(e,s){return new Promise((function(r,a){var o={key:e,arg:s,resolve:r,reject:a,next:null};n?n=n.next=o:(t=n=o,i(e,s))}))},"function"!=typeof e.return&&(this.return=void 0)}function il(e){return new el(e,0)}function sl(e){var t={},n=!1;function i(t,i){return n=!0,i=new Promise((function(n){n(e[t](i))})),{done:!1,value:new el(i,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):i("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return i("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):i("return",e)}),t}nl.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},nl.prototype.next=function(e){return this._invoke("next",e)},nl.prototype.throw=function(e){return this._invoke("throw",e)},nl.prototype.return=function(e){return this._invoke("return",e)};class rl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://localhost:11434";this.baseUrl=void 0,this.backendUrl=void 0,this.availableModels=[],this.baseUrl=e,this.backendUrl="http://localhost:3001"}async isServerRunning(){try{return(await fetch("".concat(this.backendUrl,"/api/health"),{method:"GET",headers:{"Content-Type":"application/json"}})).ok}catch(e){return console.log("Backend server not running:",e),!1}}async sendMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Llama3.2-3B-Instruct",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!await this.isServerRunning())return this.getSimulatedResponse(e,t,n);try{var i,s;let r=[...e];if(n.systemPrompt||n.ragContext){let e=n.systemPrompt||"You are a helpful AI assistant.";e+="\n\n## \ud83d\udcdd Response Formatting Guidelines\n\n**ALWAYS format your responses using proper markdown:**\n- Use **bold text** for emphasis and key points\n- Use ## headings for main sections  \n- Use ### subheadings for subsections\n- Use numbered lists (1. 2. 3.) for step-by-step instructions\n- Use bullet points (\u2022) for feature lists and examples\n- Use `code formatting` for technical terms and commands\n- Use > blockquotes for important callouts\n- Add line breaks between sections for readability\n\nMake your responses visually appealing and easy to scan with proper formatting.",n.ragContext&&(e+="\n\n## \ud83d\udcda DOCUMENT CONTEXT\n\nThe user has uploaded documents with relevant information. Here is the most relevant content for this query:\n\n".concat(n.ragContext,"\n\n**IMPORTANT INSTRUCTIONS:**\n- Use this document context to provide accurate, specific answers\n- Reference specific information from the documents when relevant\n- If the documents contain exact answers, quote them\n- If the question can't be answered from the documents, say so clearly\n- Combine document information with your general knowledge appropriately"));const t={role:"system",content:e},i=r.some((e=>"system"===e.role));r=i?r.map((e=>"system"===e.role?t:e)):[t,...r]}const a=await fetch("".concat(this.backendUrl,"/api/chat/completions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:t,messages:r,temperature:n.temperature||.7,max_tokens:n.maxTokens||1e3})});if(!a.ok){const e=await a.json().catch((()=>({})));throw new Error("Backend API error: ".concat(a.status," - ").concat(e.message||"Unknown error"))}const o=await a.json();return{content:(null===(i=o.choices[0])||void 0===i||null===(s=i.message)||void 0===s?void 0:s.content)||"No response generated",usage:o.usage||{prompt_tokens:0,completion_tokens:0,total_tokens:0},model:o.model||t}}catch(r){return console.error("Backend API request failed:",r),this.getSimulatedResponse(e,t,n)}}getSimulatedResponse(e,t){var n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=(null===(n=e.filter((e=>"user"===e.role)).pop())||void 0===n?void 0:n.content)||"";let r="";r=i.ragContext?'## \ud83d\udcda Based on Your Documents\n\nI found relevant information in your uploaded documents for: "'.concat(s,'"\n\n**Document Context:**\n').concat(i.ragContext.substring(0,500)).concat(i.ragContext.length>500?"...":"","\n\n**Analysis:**\nBased on the content in your documents, I can see specific information that directly relates to your question. When the Ollama server is running, I would provide a detailed analysis combining this document context with AI reasoning to give you comprehensive, accurate answers.\n\n**Note:** This is a simulated response because the backend server is not currently running. Start the backend server with `cd backend && npm start` to get real AI-powered responses from the Llama 4 Scout model."):"I understand you're asking about \"".concat(s,"\". \n\nThis is a simulated response because the Llama Stack server isn't currently running. To help you work through mental blockers and maintain focus, I would typically:\n\n1. Analyze the specific challenge you're facing\n2. Suggest evidence-based strategies for overcoming the blocker\n3. Provide actionable steps you can take immediately\n4. Help you break down complex problems into manageable parts\n\nTo get real AI-powered responses, please start the backend server with `cd backend && npm start`.\n\n[Note: Start backend server for real Llama 4 Scout responses]");const a=e.reduce(((e,t)=>e+Math.ceil(t.content.length/4)),0),o=Math.ceil(r.length/4);return{content:r,usage:{prompt_tokens:a,completion_tokens:o,total_tokens:a+o},model:t+" (simulated)"}}getModelInfo(e){return{"Llama3.2-3B-Instruct":{name:"Llama3.2-3B-Instruct",displayName:"Llama 3.2 (3B) via Ollama",contextWindow:128e3,description:"Fast, efficient model running locally via Ollama",capabilities:["text","conversation","fast-response","local"]},"Llama3.2-11B-Vision-Instruct":{name:"Llama3.2-11B-Vision-Instruct",displayName:"Llama 3.2 Vision (11B) via Ollama",contextWindow:128e3,description:"Multimodal model (requires download via Ollama)",capabilities:["text","vision","multimodal","image-analysis","local"]},"llama4-scout":{name:"llama4-scout",displayName:"Llama 4 Scout (CLI)",contextWindow:10485760,description:"Official Llama 4 Scout via CLI - 10M token context window",capabilities:["text","reasoning","analysis","local","cli"]},"llama4-maverick":{name:"llama4-maverick",displayName:"Llama 4 Maverick (Ollama API)",contextWindow:1048576,description:"Official Llama 4 Maverick via Ollama API - 1M token context window",capabilities:["text","reasoning","analysis","local","api"]}}[e]||{name:e,displayName:e,contextWindow:128e3,description:"Unknown model",capabilities:["text"]}}}class al{constructor(){this.availableModels=new Map,this.checkAvailableModels()}async checkAvailableModels(){try{this.availableModels.set("llama4-scout",!0),this.availableModels.set("llama4-maverick",!0),this.availableModels.set("Llama3.2-3B-Instruct",!0),console.log("\ud83e\udd99 Llama Stack models available:",Array.from(this.availableModels.entries()))}catch(e){console.error("Error checking Llama Stack models:",e)}}isModelAvailable(e){return this.availableModels.get(e)||!1}async sendMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Llama-4-Scout-17B-16E-Instruct",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.isModelAvailable(t))throw new Error("Model ".concat(t," is not available. Please download it first."));try{var i,s,r;let a=[...e];if(n.systemPrompt||n.ragContext){let e=n.systemPrompt||"You are a helpful AI assistant.";n.ragContext&&(e+="\n\n## Document Context\n\nThe user has uploaded the following documents for context:\n\n".concat(n.ragContext,"\n\nUse this context to provide more relevant and informed responses when applicable."));const t=a.some((e=>"system"===e.role));a=t?a.map((t=>"system"===t.role?(0,o.A)((0,o.A)({},t),{},{content:e}):t)):[{role:"system",content:e},...a]}console.log("\ud83e\udd99 Sending request to backend for ".concat(t,"..."));const l=await fetch("http://localhost:3001/api/chat/completions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:a,model:t,temperature:n.temperature||.7,max_tokens:n.maxTokens||1e3})});if(!l.ok){const e=await l.json().catch((()=>({})));throw new Error("Backend API error: ".concat(l.status," - ").concat(e.error||"Unknown error"))}const u=await l.json();return{content:u.choices[0].message.content,usage:{prompt_tokens:(null===(i=u.usage)||void 0===i?void 0:i.prompt_tokens)||0,completion_tokens:(null===(s=u.usage)||void 0===s?void 0:s.completion_tokens)||0,total_tokens:(null===(r=u.usage)||void 0===r?void 0:r.total_tokens)||0},model:u.model||t}}catch(a){if(console.error("Llama Stack API request failed:",a),a instanceof TypeError&&a.message.includes("fetch"))throw new Error("Backend service not running. Please start the Llama backend server on port 3001.");throw a}}streamMessage(e){var t=this;return tl((function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"llama4-scout",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){const s=(yield il(t.sendMessage(e,n,i))).content.split(" ");for(let e=0;e<s.length;e++)yield s[e]+(e<s.length-1?" ":""),yield il(new Promise((e=>setTimeout(e,50))))}()})).apply(this,arguments)}getAvailableModels(){return Array.from(this.availableModels.entries()).filter((e=>{let[,t]=e;return t})).map((e=>{let[t]=e;return t}))}getModelInfo(e){if(!this.isModelAvailable(e))return null;switch(e){case"llama4-scout":return{name:"Llama 4 Scout",contextWindow:10485760,size:"65GB",description:"Official Llama 4 Scout with CLI interface and 10M token context window"};case"llama4-maverick":return{name:"Llama 4 Maverick",contextWindow:1048576,size:"65GB",description:"Official Llama 4 Maverick with Ollama API and 1M token context window"};case"Llama3.2-3B-Instruct":return{name:"Llama 3.2 3B Instruct",contextWindow:128e3,size:"799MB",description:"Efficient instruction-following model for general tasks"};default:return null}}}const ol=class{constructor(){this.llamaService=void 0,this.llamaStackService=void 0,this.geminiService=null,this.openaiService=null,this.llamaService=new rl,this.llamaStackService=new al,console.log("\ud83c\udfe0 Running in GitHub Pages mode - API services disabled")}async sendMessage(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return console.log("\ud83e\udd16 Routing request to ".concat(this.getServiceName(t)," for model: ").concat(t)),this.isOpenAIModel(t)&&this.openaiService?this.sendToOpenAI(e,t,n):this.isGeminiModel(t)&&this.geminiService?this.sendToGemini(e,t,n):this.isLlamaStackModel(t)?this.sendToLlamaStack(e,t,n):this.sendToLlama(e,t,n)}streamMessage(e,t){var n=this;return tl((function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){console.log("\ud83e\udd16 Streaming request to ".concat(n.getServiceName(t)," for model: ").concat(t)),n.isOpenAIModel(t)&&n.openaiService?yield*sl((0,Pt.A)(n.streamFromOpenAI(e,t,i))):n.isGeminiModel(t)&&n.geminiService?yield*sl((0,Pt.A)(n.streamFromGemini(e,t,i))):n.isLlamaStackModel(t)?yield*sl((0,Pt.A)(n.streamFromLlamaStack(e,t,i))):yield*sl((0,Pt.A)(n.streamFromLlama(e,t,i)))}()})).apply(this,arguments)}getServiceName(e){return this.isOpenAIModel(e)?"OpenAI":this.isGeminiModel(e)?"Gemini":"Llama"}isOpenAIModel(e){return e.startsWith("gpt-")||e.startsWith("o1-")||e.startsWith("o3")||e.startsWith("o4-")||"o3"===e||"o4-mini"===e}isGeminiModel(e){return e.startsWith("gemini")}isLlamaStackModel(e){return this.llamaStackService.isModelAvailable(e)}async sendToGemini(e,t,n){if(!this.geminiService){console.warn("\ud83d\udd04 Gemini service not available, falling back to Llama");const i=await this.sendToLlama(e,t,n);return(0,o.A)((0,o.A)({},i),{},{fallbackInfo:{originalModel:t,fallbackModel:i.model,reason:"Gemini service not configured"}})}try{var i,s,r;const a=e.map((e=>({role:e.role,content:e.content})));if(n.systemPrompt||n.ragContext){let e=n.systemPrompt||"You are a helpful AI assistant.";e+="\n\n## \ud83d\udcdd Response Formatting Guidelines\n\n**ALWAYS format your responses using proper markdown:**\n- Use **bold text** for emphasis and key points\n- Use ## headings for main sections  \n- Use ### subheadings for subsections\n- Use numbered lists (1. 2. 3.) for step-by-step instructions\n- Use bullet points (\u2022) for feature lists and examples\n- Use `code formatting` for technical terms and commands\n- Use > blockquotes for important callouts\n- Add line breaks between sections for readability\n\nMake your responses visually appealing and easy to scan with proper formatting.",n.ragContext&&(e+="\n\nUse the following context from the user's documents to provide relevant insights:\n\n".concat(n.ragContext,"\n\nBased on this context and your training, provide helpful, actionable advice."));a.some((e=>"system"===e.role))?a.forEach((t=>{"system"===t.role&&(t.content=e)})):a.unshift({role:"system",content:e})}console.log("\ud83e\udde0 Sending request to Gemini model: ".concat(t));const o=await this.geminiService.generateContent(a,{model:t,temperature:n.temperature,maxTokens:n.maxTokens,topP:n.topP});return{content:o.text,usage:{prompt_tokens:(null===(i=o.usage)||void 0===i?void 0:i.inputTokens)||0,completion_tokens:(null===(s=o.usage)||void 0===s?void 0:s.outputTokens)||0,total_tokens:(null===(r=o.usage)||void 0===r?void 0:r.totalTokens)||0},model:t}}catch(l){var a;console.error("\ud83d\udea8 Gemini API error, falling back to Llama:",l);const i=await this.sendToLlama(e,t,n);return(0,o.A)((0,o.A)({},i),{},{fallbackInfo:{originalModel:t,fallbackModel:i.model,reason:null!==l&&void 0!==l&&null!==(a=l.message)&&void 0!==a&&a.includes("rate limit")?"Rate limit exceeded":"API error"}})}}async sendToOpenAI(e,t,n){if(!this.openaiService){console.warn("\ud83d\udd04 OpenAI service not available, falling back to Llama");const i=await this.sendToLlama(e,t,n);return(0,o.A)((0,o.A)({},i),{},{fallbackInfo:{originalModel:t,fallbackModel:i.model,reason:"OpenAI service not configured"}})}try{var i,s,r;const a=e.map((e=>({role:e.role,content:e.content})));if(n.systemPrompt){const e=a.filter((e=>"system"!==e.role));let t=n.systemPrompt;n.ragContext&&(t+="\n\n## Document Context\n\nThe user has uploaded the following documents for context:\n\n".concat(n.ragContext,"\n\nUse this context to provide more relevant and informed responses when applicable.")),e.unshift({role:"system",content:t}),a.length=0,a.push(...e)}console.log("\ud83e\udde0 Sending request to OpenAI model: ".concat(t," with system prompt applied"));const o=await this.openaiService.chat(a,{model:t,temperature:n.temperature,maxTokens:n.maxTokens});return{content:o.content,usage:{prompt_tokens:(null===(i=o.usage)||void 0===i?void 0:i.promptTokens)||0,completion_tokens:(null===(s=o.usage)||void 0===s?void 0:s.completionTokens)||0,total_tokens:(null===(r=o.usage)||void 0===r?void 0:r.totalTokens)||0},model:o.model||t}}catch(u){var a,l;if(console.error("\ud83d\udea8 OpenAI API error, falling back to Llama:",u),null!==u&&void 0!==u&&null!==(a=u.message)&&void 0!==a&&a.includes("rate limit")||429===(null===u||void 0===u?void 0:u.status))throw new Error("RATE_LIMITED:".concat(t,":").concat(u.message));const i=await this.sendToLlama(e,t,n);return(0,o.A)((0,o.A)({},i),{},{model:"".concat(i.model," (fallback from ").concat(t,")"),fallbackInfo:{originalModel:t,fallbackModel:i.model,reason:null!==u&&void 0!==u&&null!==(l=u.message)&&void 0!==l&&l.includes("rate limit")?"Rate limit exceeded":"API error"}})}}async sendToLlamaStack(e,t,n){console.log("\ud83e\udd99 Sending request to Llama Stack model: ".concat(t));const i=e.map((e=>({role:e.role,content:e.content}))),s=await this.llamaStackService.sendMessage(i,t,n);return{content:s.content,usage:s.usage,model:s.model}}async sendToLlama(e,t,n){let i=t;return(this.isOpenAIModel(t)||this.isGeminiModel(t))&&(i="llama3.1:8b",console.log("\ud83e\udd99 Mapping ".concat(t," to ").concat(i," for Llama fallback"))),console.log("\ud83e\udd99 Sending request to Llama model: ".concat(i)),this.llamaService.sendMessage(e,i,n)}streamFromOpenAI(e,t,n){var i=this;return tl((function*(){if(!i.openaiService)throw console.warn("\ud83d\udd04 OpenAI service not available, falling back to Llama"),new Error("FALLBACK:".concat(t,":OpenAI service not configured"));try{const u=e.map((e=>({role:e.role,content:e.content})));if(n.systemPrompt){const e=u.filter((e=>"system"!==e.role));let t=n.systemPrompt;n.ragContext&&(t+="\n\n## Document Context\n\nThe user has uploaded the following documents for context:\n\n".concat(n.ragContext,"\n\nUse this context to provide more relevant and informed responses when applicable.")),e.unshift({role:"system",content:t}),u.length=0,u.push(...e)}console.log("\ud83e\udde0 Streaming from OpenAI model: ".concat(t," with system prompt applied"));const c=i.openaiService.streamChat(u,{model:t,temperature:n.temperature,maxTokens:n.maxTokens});var s,r=!1,a=!1;try{for(var o,l=(0,Pt.A)(c);r=!(o=yield il(l.next())).done;r=!1){const e=o.value;yield e}}catch(d){a=!0,s=d}finally{try{r&&null!=l.return&&(yield il(l.return()))}finally{if(a)throw s}}}catch(h){var u,c;if(console.error("\ud83d\udea8 OpenAI streaming error, falling back to Llama:",h),null!==h&&void 0!==h&&null!==(u=h.message)&&void 0!==u&&u.includes("rate limit")||429===(null===h||void 0===h?void 0:h.status))throw new Error("RATE_LIMITED:".concat(t,":").concat(h.message));throw new Error("FALLBACK:".concat(t,":").concat(null!==h&&void 0!==h&&null!==(c=h.message)&&void 0!==c&&c.includes("rate limit")?"Rate limit exceeded":"API error"))}}))()}streamFromGemini(e,t,n){var i=this;return tl((function*(){if(!i.geminiService)return console.warn("\ud83d\udd04 Gemini service not available, falling back to Llama"),void(yield*sl((0,Pt.A)(i.streamFromLlama(e,t,n))));try{const s=yield il(i.sendToGemini(e,t,n));yield s.content}catch(s){console.error("\ud83d\udea8 Gemini streaming error, falling back to Llama:",s),yield*sl((0,Pt.A)(i.streamFromLlama(e,t,n)))}}))()}streamFromLlamaStack(e,t,n){var i=this;return tl((function*(){try{console.log("\ud83e\udd99 Streaming from Llama Stack model: ".concat(t));const s=e.map((e=>({role:e.role,content:e.content})));yield*sl((0,Pt.A)(i.llamaStackService.streamMessage(s,t,n)))}catch(s){console.error("\ud83d\udea8 Llama Stack streaming error:",s),yield"Sorry, I encountered an error with the Llama 4 model. Please try again."}}))()}streamFromLlama(e,t,n){var i=this;return tl((function*(){try{let s=t;(i.isOpenAIModel(t)||i.isGeminiModel(t))&&(s="llama3.1:8b",console.log("\ud83e\udd99 Mapping ".concat(t," to ").concat(s," for Llama fallback"))),console.log("\ud83e\udd99 Streaming from Llama model: ".concat(s));const r=yield il(i.sendToLlama(e,s,n));yield r.content}catch(s){console.error("\ud83d\udea8 Llama streaming error:",s),yield"Sorry, I encountered an error processing your request. Please try again."}}))()}async checkAvailability(){return{llama:await this.llamaService.isServerRunning(),gemini:!!this.geminiService&&await this.geminiService.checkAvailability(),openai:!!this.openaiService&&await this.openaiService.testConnection()}}},ll={"gpt-4o":{contextWindow:128e3,maxOutput:16384,pricing:{input:.005,output:.015}},"gpt-4o-mini":{contextWindow:128e3,maxOutput:16384,pricing:{input:15e-5,output:6e-4}},"gpt-3.5-turbo":{contextWindow:16385,maxOutput:4096,pricing:{input:5e-4,output:.0015}},"gemini-2.0-flash":{contextWindow:1e6,maxOutput:8192,pricing:{input:5e-4,output:.0015}},"gemini-1.5-pro":{contextWindow:2e6,maxOutput:8192,pricing:{input:.00125,output:.005}},"llama4-scout":{contextWindow:10485760,maxOutput:8192,pricing:{input:0,output:0}},"llama3.2:3b":{contextWindow:131072,maxOutput:4096,pricing:{input:0,output:0}},"llama3.1:8b":{contextWindow:131072,maxOutput:4096,pricing:{input:0,output:0}}};function ul(e){if(!e)return 0;const t=e.split(/\s+/).filter((e=>e.length>0)),n=e.length,i=1.3*t.length,s=n/4,r=/[{}[\](),:;|<>]/.test(e)?.3:.7,a=Math.ceil(i*r+s*(1-r));return Math.max(a,Math.ceil(.75*t.length))}class cl{constructor(){this.documents=new Map}async processFile(e){const t=await this.extractContent(e),n=function(e,t){var n;const i=function(e){return{pdf:"pdf",docx:"docx",doc:"docx",txt:"txt",md:"md",markdown:"md",csv:"csv",json:"json",xml:"xml",html:"xml",htm:"xml"}[e]||"txt"}((null===(n=e.name.split(".").pop())||void 0===n?void 0:n.toLowerCase())||"txt");return{type:i,name:e.name,content:t,tokenCount:ul(t),size:e.size,uploadedAt:new Date}}(e,t),i=(0,o.A)((0,o.A)({},n),{},{id:this.generateDocumentId(e),chunks:this.chunkDocument(t,n.type),metadata:this.extractMetadata(t,n.type)});return this.documents.set(i.id,i),i}async extractContent(e){var t;switch(null===(t=e.name.split(".").pop())||void 0===t?void 0:t.toLowerCase()){case"pdf":return this.extractPDFContent(e);case"docx":case"doc":return this.extractWordContent(e);case"txt":case"md":case"markdown":default:return this.extractTextContent(e);case"csv":return this.extractCSVContent(e);case"json":return this.extractJSONContent(e);case"xml":case"html":case"htm":return this.extractXMLContent(e)}}async extractPDFContent(e){const{PDFProcessor:t}=await Promise.resolve().then(n.bind(n,574));try{return(await t.processPDF(e)).chunks.map((e=>e.content)).join("\n\n")}catch(i){return console.error("Error processing PDF with PDFProcessor:",i),"[PDF Content from ".concat(e.name," - Error: ").concat(i,"]")}}async extractWordContent(e){await e.arrayBuffer();return"[Word Document Content from ".concat(e.name,"]\n\nThis is a placeholder for Word document content extraction. In a production environment, this would use a library like mammoth.js to extract the actual text content from the .docx file.")}async extractTextContent(e){return e.text()}async extractCSVContent(e){const t=(await e.text()).split("\n").filter((e=>e.trim()));if(0===t.length)return"";const n=t[0].split(",").map((e=>e.trim())),i=t.slice(1).map((e=>e.split(",").map((e=>e.trim()))));let s="CSV Data from ".concat(e.name,"\n\n");return s+="Columns: ".concat(n.join(", "),"\n\n"),i.slice(0,10).forEach(((e,t)=>{s+="Row ".concat(t+1,":\n"),n.forEach(((t,n)=>{s+="  ".concat(t,": ").concat(e[n]||"N/A","\n")})),s+="\n"})),i.length>10&&(s+="... and ".concat(i.length-10," more rows\n")),s}async extractJSONContent(e){const t=await e.text();try{const n=JSON.parse(t);let i="JSON Data from ".concat(e.name,"\n\n");return i+=this.analyzeJSONStructure(n,"",0),i}catch(n){return"Invalid JSON file: ".concat(e.name,"\nError: ").concat(n)}}analyzeJSONStructure(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n>3)return"[... nested data ...]";const i="  ".repeat(n);let s="";if(Array.isArray(e))s+="".concat(i,"Array with ").concat(e.length," items:\n"),e.length>0&&(s+=this.analyzeJSONStructure(e[0],"".concat(t,"[0]"),n+1),e.length>1&&(s+="".concat(i,"  ... and ").concat(e.length-1," more items\n")));else if("object"===typeof e&&null!==e){const r=Object.keys(e);s+="".concat(i,"Object with ").concat(r.length," properties:\n"),r.slice(0,5).forEach((r=>{const a=e[r],o=t?"".concat(t,".").concat(r):r;s+="".concat(i,"  ").concat(r,": "),s+="object"===typeof a?"\n"+this.analyzeJSONStructure(a,o,n+1):"".concat(typeof a," - ").concat(String(a).slice(0,50)).concat(String(a).length>50?"...":"","\n")})),r.length>5&&(s+="".concat(i,"  ... and ").concat(r.length-5," more properties\n"))}else s+="".concat(i).concat(typeof e,": ").concat(String(e).slice(0,100)).concat(String(e).length>100?"...":"","\n");return s}async extractXMLContent(e){const t=(await e.text()).replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi,"").replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim();return"".concat(e.name.endsWith(".html")?"HTML":"XML"," Content from ").concat(e.name,"\n\n").concat(t)}chunkDocument(e,t){switch(t){case"md":return this.chunkMarkdown(e);case"json":case"xml":return this.chunkStructuredData(e);case"csv":return this.chunkCSVData(e);default:return this.chunkPlainText(e,500)}}chunkMarkdown(e){const t=[],n=e.split("\n");let i="",s=0,r=0;for(let a=0;a<n.length;a++){const o=n[a];o.startsWith("#")&&i.trim()?(t.push({id:"chunk-".concat(r++),content:i.trim(),tokenCount:ul(i),startIndex:s,endIndex:e.indexOf(i)+i.length,type:"section"}),i=o+"\n",s=e.indexOf(o)):i+=o+"\n"}return i.trim()&&t.push({id:"chunk-".concat(r),content:i.trim(),tokenCount:ul(i),startIndex:s,endIndex:e.length,type:"section"}),t}chunkStructuredData(e){return[{id:"chunk-0",content:e,tokenCount:ul(e),startIndex:0,endIndex:e.length,type:"paragraph"}]}chunkCSVData(e){const t=e.split("\n").filter((e=>e.trim())),n=[];for(let i=0;i<t.length;i+=10){const s=t.slice(i,i+10),r=s.join("\n");n.push({id:"chunk-".concat(Math.floor(i/10)),content:r,tokenCount:ul(r),startIndex:e.indexOf(s[0]),endIndex:e.indexOf(s[s.length-1])+s[s.length-1].length,type:"table"})}return n}chunkPlainText(e,t){const n=[],i=e.split("\n\n").filter((e=>e.trim()));let s="",r=0,a=0;for(const o of i){const i=s+(s?"\n\n":"")+o;ul(i)>t&&s?(n.push({id:"chunk-".concat(r++),content:s.trim(),tokenCount:ul(s),startIndex:a,endIndex:e.indexOf(s)+s.length,type:"paragraph"}),s=o,a=e.indexOf(o)):s=i}return s.trim()&&n.push({id:"chunk-".concat(r),content:s.trim(),tokenCount:ul(s),startIndex:a,endIndex:e.length,type:"paragraph"}),n}extractMetadata(e,t){const n=e.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter((e=>e.length>3)).reduce(((e,t)=>(e[t]=(e[t]||0)+1,e)),{}),i=Object.entries(n).sort(((e,t)=>{let[,n]=e,[,i]=t;return i-n})).slice(0,10).map((e=>{let[t]=e;return t})),s=e.split(/[.!?]+/).filter((e=>e.trim().length>20)).slice(0,2).join(". ").trim()+".";return{keywords:i,summary:s.length>200?s.slice(0,200)+"...":s,structure:{hasHeaders:/^#+\s/.test(e)||/<h[1-6]>/i.test(e),hasCode:/```|\bcode\b|function\s*\(/.test(e),hasTables:/\|.*\||\btable\b|<table>/i.test(e),hasLists:/^\s*[-*+]\s|^\s*\d+\.\s|<[uo]l>/im.test(e)}}}generateDocumentId(e){return"doc-".concat(Date.now(),"-").concat(e.name.replace(/[^a-zA-Z0-9]/g,"-"))}searchDocuments(e){const t=e.query.toLowerCase().split(/\s+/).filter((e=>e.length>2)),n=[],i=[];for(let s=0;s<t.length-1;s++)i.push(t.slice(s,s+2).join(" ")),s<t.length-2&&i.push(t.slice(s,s+3).join(" "));return this.documents.forEach((s=>{e.documentTypes&&!e.documentTypes.includes(s.type)||s.chunks.forEach((r=>{const a=r.content.toLowerCase(),o=a.split(/\s+/);let l=0;i.forEach((e=>{a.includes(e)&&(l+=.5)})),t.forEach((e=>{const t=new RegExp("\\b".concat(e,"\\b"),"g"),n=a.match(t)||[];l+=.1*n.length/Math.max(o.length/100,1)})),o.length<100&&(l*=1.2),l>=Math.max(.05,.1*e.minRelevanceScore)&&n.push({chunk:r,document:s,relevanceScore:l,context:this.extractBetterContext(r.content,t,i)})}))})),n.sort(((e,t)=>t.relevanceScore-e.relevanceScore)).slice(0,e.maxResults)}extractContext(e,t){return e.split(/[.!?]+/).filter((e=>e.trim())).filter((e=>t.some((t=>e.toLowerCase().includes(t))))).slice(0,3).join(". ")+"."}extractBetterContext(e,t,n){const i=e.split(/[.!?]+/).filter((e=>e.trim().length>10)),s=[];i.forEach(((e,t)=>{const i=e.toLowerCase();n.some((e=>i.includes(e)))&&s.push(t)})),i.forEach(((e,n)=>{const i=e.toLowerCase();!s.includes(n)&&t.some((e=>i.includes(e)))&&s.push(n)}));const r=new Set;s.forEach((e=>{r.add(Math.max(0,e-1)),r.add(e),r.add(Math.min(i.length-1,e+1))}));return Array.from(r).sort(((e,t)=>e-t)).map((e=>i[e].trim())).slice(0,5).join(". ")+"."}getDocuments(){return Array.from(this.documents.values())}removeDocument(e){return this.documents.delete(e)}getTotalTokenCount(){return Array.from(this.documents.values()).reduce(((e,t)=>e+t.tokenCount),0)}}class dl{constructor(){this.audioContext=void 0,this.synthesis=void 0,this.availableVoices=[],this.isInitialized=!1,this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.synthesis=window.speechSynthesis}async initialize(){this.isInitialized||(await this.loadVoices(),"suspended"===this.audioContext.state&&await this.audioContext.resume(),this.isInitialized=!0,console.log("\ud83c\udfb5 Enhanced System TTS initialized successfully"),console.log("\ud83d\udce2 Available voice profiles: ".concat(Object.keys(dl.VOICE_PROFILES).join(", "))))}async loadVoices(){return new Promise((e=>{const t=()=>{this.availableVoices=this.synthesis.getVoices(),this.availableVoices.length>0?(console.log("\ud83d\udd0a Loaded ".concat(this.availableVoices.length," system voices")),e()):setTimeout(t,100)};void 0!==this.synthesis.onvoiceschanged&&(this.synthesis.onvoiceschanged=t),t()}))}async generateSpeech(e){this.isInitialized||await this.initialize();const t=Date.now(),n=dl.VOICE_PROFILES[e.profile||"silky-smooth"];if(!n)throw new Error('Voice profile "'.concat(e.profile,'" not found'));console.log("\ud83c\udfad Generating speech with ".concat(n.name," profile"));const i=this.preprocessText(e.text,n),s=this.selectBestVoice(n),r=await this.generateBrowserSpeech(i,n,s),a=await this.applyAudioEnhancements(r,n),o=await this.createEnhancedAudioBlob(a),l=URL.createObjectURL(o),u=Date.now()-t;return{audioUrl:l,audioBlob:o,duration:a.duration,profile:n,metadata:{textLength:e.text.length,processingTime:u,effectsApplied:this.getAppliedEffects(n),naturalness:this.calculateNaturalnessScore(n)}}}preprocessText(e,t){let n=e;return t.pauseInsertion>.3&&(n=n.replace(/\./g,'.<break time="300ms"/>'),n=n.replace(/,/g,',<break time="200ms"/>'),n=n.replace(/:/g,':<break time="250ms"/>'),n=n.replace(/;/g,';<break time="250ms"/>')),t.emphasisStrength>.5&&(n=n.replace(/"([^"]+)"/g,'<emphasis level="moderate">$1</emphasis>'),n=n.replace(/\b[A-Z]{2,}\b/g,'<emphasis level="strong">$&</emphasis>')),"neutral"!==t.emotion&&(n=this.addEmotionalModulation(n,t)),n}addEmotionalModulation(e,t){switch(t.emotion){case"excited":return e.replace(/!/g,'!<break time="100ms"/>');case"calm":return e.replace(/\./g,'.<break time="400ms"/>');case"authoritative":return'<prosody rate="'.concat(.9*t.rate,'" pitch="').concat(.95*t.pitch,'">').concat(e,"</prosody>");case"friendly":return'<prosody pitch="+10%">'.concat(e,"</prosody>");default:return e}}selectBestVoice(e){if(0===this.availableVoices.length)return null;let t=this.availableVoices.filter((e=>e.lang.startsWith("en")));switch(e.baseVoice){case"auto-male-deep":t=t.filter((e=>e.name.toLowerCase().includes("male")||e.name.toLowerCase().includes("david")||e.name.toLowerCase().includes("alex")));break;case"auto-female-clear":t=t.filter((e=>e.name.toLowerCase().includes("female")||e.name.toLowerCase().includes("samantha")||e.name.toLowerCase().includes("victoria")));break;case"auto-female-bright":t=t.filter((e=>e.name.toLowerCase().includes("female")||e.name.toLowerCase().includes("kate")||e.name.toLowerCase().includes("susan")))}return t[0]||this.availableVoices[0]}async generateBrowserSpeech(e,t,n){return new Promise(((i,s)=>{const r=new SpeechSynthesisUtterance(e);n&&(r.voice=n),r.pitch=t.pitch,r.rate=t.rate,r.volume=t.volume,this.captureUtteranceAudio(r).then(i).catch(s)}))}async captureUtteranceAudio(e){return new Promise(((t,n)=>{const i=22050,s=.08*e.text.length,r=Math.floor(s*i),a=this.audioContext.createBuffer(1,r,i),o=a.getChannelData(0);for(let e=0;e<r;e++){const t=e/i,n=440+100*Math.sin(2*t);o[e]=.3*Math.sin(2*Math.PI*n*t)}t(a)}))}async applyAudioEnhancements(e,t){console.log("\ud83c\udf9b\ufe0f Applying audio enhancements for ".concat(t.name));const n=this.audioContext.createBuffer(e.numberOfChannels,e.length,e.sampleRate);for(let i=0;i<e.numberOfChannels;i++){const s=e.getChannelData(i),r=n.getChannelData(i);for(let e=0;e<s.length;e++){let n=s[e];t.warmth>.5&&(n=this.applyWarmth(n,e,t.warmth)),t.breathiness>.2&&(n=this.applyBreathiness(n,t.breathiness)),t.clarity>.7&&(n=this.applyClarity(n,t.clarity)),r[e]=n}}return n}applyWarmth(e,t,n){const i=.3*n;return e*(1-i)+.8*e*i}applyBreathiness(e,t){return e+(Math.random()-.5)*t*.05}applyClarity(e,t){const n=.2*t;return Math.tanh(e*(1+n))}async createEnhancedAudioBlob(e){const t=e.length,n=e.sampleRate,i=e.numberOfChannels,s=new ArrayBuffer(44+t*i*2),r=new DataView(s),a=(e,t)=>{for(let n=0;n<t.length;n++)r.setUint8(e+n,t.charCodeAt(n))};a(0,"RIFF"),r.setUint32(4,36+t*i*2,!0),a(8,"WAVE"),a(12,"fmt "),r.setUint32(16,16,!0),r.setUint16(20,1,!0),r.setUint16(22,i,!0),r.setUint32(24,n,!0),r.setUint32(28,n*i*2,!0),r.setUint16(32,2*i,!0),r.setUint16(34,16,!0),a(36,"data"),r.setUint32(40,t*i*2,!0);let o=44;for(let l=0;l<t;l++)for(let t=0;t<i;t++){const n=e.getChannelData(t)[l],i=Math.max(-32768,Math.min(32767,32768*n));r.setInt16(o,i,!0),o+=2}return new Blob([s],{type:"audio/wav"})}getAppliedEffects(e){const t=[];return e.warmth>.5&&t.push("Warmth Enhancement"),e.breathiness>.2&&t.push("Natural Breathiness"),e.clarity>.7&&t.push("Clarity Boost"),e.pauseInsertion>.3&&t.push("Natural Pauses"),e.emphasisStrength>.5&&t.push("Word Emphasis"),"neutral"!==e.emotion&&t.push("Emotional Modulation"),t}calculateNaturalnessScore(e){let t=.5;return t+=.2*e.breathiness,t+=.15*e.warmth,t+=.1*e.pauseInsertion,t+=.1*e.intonationVariation,t+=.05*(1-Math.abs(e.pitch-1)),Math.min(1,t)}static getAvailableProfiles(){return Object.keys(this.VOICE_PROFILES)}static getProfile(e){return this.VOICE_PROFILES[e]||null}static createCustomProfile(e){this.VOICE_PROFILES[e.id]=e}}dl.VOICE_PROFILES={"silky-smooth":{id:"silky-smooth",name:"Silky Smooth",baseVoice:"auto",description:"Smooth, warm, and naturally flowing voice",personality:"Warm and approachable with silky delivery",pitch:.9,rate:.85,volume:.8,emotion:"friendly",breathiness:.3,warmth:.8,clarity:.9,intonationVariation:.6,pauseInsertion:.4,emphasisStrength:.5},"michael-crow":{id:"michael-crow",name:"Michael Crow (Presidential)",baseVoice:"auto-male-deep",description:"Deep, authoritative voice with southern warmth",personality:"Presidential authority with subtle southern charm",pitch:.75,rate:.8,volume:.9,emotion:"authoritative",breathiness:.2,warmth:.6,clarity:1,intonationVariation:.4,pauseInsertion:.6,emphasisStrength:.8},"elizabeth-reilley":{id:"elizabeth-reilley",name:"Elizabeth Reilley (Visionary)",baseVoice:"auto-female-clear",description:"Clear, confident voice with forward-thinking energy",personality:"Visionary leadership with inspiring confidence",pitch:1.1,rate:.95,volume:.85,emotion:"professional",breathiness:.1,warmth:.7,clarity:1,intonationVariation:.7,pauseInsertion:.3,emphasisStrength:.7},"zohair-developer":{id:"zohair-developer",name:"Zohair (Thoughtful Developer)",baseVoice:"auto-male-mid",description:"Thoughtful, measured voice with technical precision",personality:"Introverted genius with careful articulation",pitch:.95,rate:.75,volume:.7,emotion:"calm",breathiness:.4,warmth:.5,clarity:.95,intonationVariation:.3,pauseInsertion:.7,emphasisStrength:.4},"jennifer-tutor":{id:"jennifer-tutor",name:"Jennifer (Enthusiastic Tutor)",baseVoice:"auto-female-bright",description:"Bright, energetic voice with teaching enthusiasm",personality:"Excited educator with infectious enthusiasm",pitch:1.2,rate:1.1,volume:.9,emotion:"excited",breathiness:.1,warmth:.9,clarity:.85,intonationVariation:.9,pauseInsertion:.2,emphasisStrength:.9},professional:{id:"professional",name:"Professional",baseVoice:"auto-neutral",description:"Clear, professional voice for business contexts",personality:"Business professional with clear communication",pitch:1,rate:.9,volume:.8,emotion:"professional",breathiness:.1,warmth:.4,clarity:1,intonationVariation:.5,pauseInsertion:.4,emphasisStrength:.6},storyteller:{id:"storyteller",name:"Storyteller",baseVoice:"auto-expressive",description:"Rich, expressive voice perfect for narratives",personality:"Master storyteller with dramatic flair",pitch:.95,rate:.8,volume:.85,emotion:"neutral",breathiness:.3,warmth:.8,clarity:.9,intonationVariation:.8,pauseInsertion:.5,emphasisStrength:.7}};const hl=dl;class pl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{model:"enhanced-system"};this.config=void 0,this.isInitialized=!1,this.worker=null,this.ttsModel=null,this.enhancedTTS=void 0,this.config=e,this.enhancedTTS=new hl}async initialize(){if(!this.isInitialized)try{switch(console.log("\ud83c\udfb5 Initializing Local TTS with ".concat(this.config.model,"...")),await this.enhancedTTS.initialize(),console.log("\u2705 Enhanced System TTS initialized"),this.config.model){case"enhanced-system":break;case"speecht5":await this.initializeSpeechT5();break;case"xtts":await this.initializeXTTS();break;case"piper":await this.initializePiper()}this.isInitialized=!0,console.log("\u2705 Local TTS initialized with ".concat(this.config.model))}catch(e){throw console.error("\u274c Failed to initialize Local TTS:",e),e}}async generateSpeech(e,t){this.isInitialized||await this.initialize();const n=t?pl.LOCAL_VOICE_PROFILES[t]:this.config;console.log("\ud83c\udfb5 Generating speech with ".concat(n.model," (").concat(n.voiceId,")"));try{switch(n.model){case"enhanced-system":return await this.generateWithEnhancedSystem(e,n);case"speecht5":return await this.generateWithSpeechT5(e,n);case"xtts":return await this.generateWithXTTS(e,n);case"piper":return await this.generateWithPiper(e,n);default:throw new Error("Unsupported model: ".concat(n.model))}}catch(i){return console.error("\u274c TTS generation failed with ".concat(n.model,":"),i),console.log("\ud83d\udd04 Falling back to Enhanced System TTS..."),await this.generateWithEnhancedSystem(e,{model:"enhanced-system",voiceId:"silky-smooth"})}}async generateAvatarSpeech(e){const t=Date.now(),n=e.avatarProfile||"scout-friendly",i=pl.LOCAL_VOICE_PROFILES[n];if(!i)throw new Error("Unknown voice profile: ".concat(n));console.log("\ud83c\udfad Local Avatar TTS: Using ".concat(n," with ").concat(i.model));try{const s=await this.generateSpeech(e.text,n),r=Date.now()-t,a=this.analyzeEmotionalContent(e.text);return{audioUrl:s.audioUrl,audioBlob:s.audioBlob,metadata:{voice:i.voiceId||"local",model:i.model,format:"wav",speed:i.speed||1,textLength:e.text.length,estimatedDuration:s.metadata.duration},avatarProfile:{id:n,name:this.getProfileName(n),description:this.getProfileDescription(n),ttsVoice:i.voiceId||"local",personality:"Local AI",useCase:["local","privacy-first"],llamaModel:"llama4-scout",voiceSpeed:i.speed||1,emotionalRange:a},emotionalTags:a,synthesisTime:r,llamaModel:"llama4-scout"}}catch(s){throw console.error("\u274c Local Avatar TTS Error:",s),new Error("Local avatar speech generation failed: ".concat(s instanceof Error?s.message:"Unknown error"))}}async generateWithEnhancedSystem(e,t){const n=Date.now();try{console.log('\ud83c\udfb5 Enhanced System TTS: Generating speech for "'.concat(e.substring(0,100),'..."'));const i=await this.enhancedTTS.generateSpeech({text:e,profile:t.voiceId||"silky-smooth",audioEffects:!0,naturalPauses:!0,emotionalModulation:!0}),s=Date.now()-n;return console.log("\u2705 Enhanced System TTS generated speech in ".concat(s,"ms")),{audioBlob:i.audioBlob,audioUrl:i.audioUrl,metadata:{model:"enhanced-system",voiceId:t.voiceId||"silky-smooth",duration:i.duration||s/1e3,sampleRate:22050}}}catch(i){console.error("\u274c Enhanced System TTS generation failed:",i),console.log("\ud83d\udd04 Creating mock audio fallback...");const n=this.generateMockAudio(e,"enhanced-system");return{audioBlob:n.blob,audioUrl:n.url,metadata:{model:"enhanced-system-mock",voiceId:t.voiceId||"mock",duration:Math.max(1,.05*e.length),sampleRate:22050}}}}async initializeSpeechT5(){console.log("\ud83c\udfa4 Loading SpeechT5 model..."),console.log("\ud83c\udfa4 SpeechT5 ready")}async initializeXTTS(){console.log("\ud83d\udd0a Loading XTTS model..."),console.log("\ud83d\udd0a XTTS ready")}async initializePiper(){console.log("\ud83c\udfba Loading Piper model..."),console.log("\ud83c\udfba Piper ready")}async generateWithSpeechT5(e,t){console.log('\ud83c\udfa4 SpeechT5 generating: "'.concat(e.substring(0,50),'..."'));const n=this.generateMockAudio(e,"speecht5");return{audioBlob:n.blob,audioUrl:n.url,metadata:{model:"speecht5",voiceId:t.voiceId||"default",duration:.08*e.length,sampleRate:16e3}}}async generateWithXTTS(e,t){console.log('\ud83d\udd0a XTTS generating: "'.concat(e.substring(0,50),'..."'));const n=this.generateMockAudio(e,"xtts");return{audioBlob:n.blob,audioUrl:n.url,metadata:{model:"xtts",voiceId:t.voiceId||"default",duration:.09*e.length,sampleRate:22050}}}async generateWithPiper(e,t){console.log('\ud83c\udfba Piper generating: "'.concat(e.substring(0,50),'..."'));const n=this.generateMockAudio(e,"piper");return{audioBlob:n.blob,audioUrl:n.url,metadata:{model:"piper",voiceId:t.voiceId||"default",duration:.06*e.length,sampleRate:22050}}}createWAVBlob(e,t){if(!e||0===e.length)throw console.error("\u274c Empty or invalid audio data provided to createWAVBlob"),new Error("Cannot create WAV blob from empty audio data");(!t||t<=0)&&(console.warn("\u26a0\ufe0f Invalid sample rate, defaulting to 24000Hz"),t=24e3);const n=e.length,i=new ArrayBuffer(44+2*n),s=new DataView(i),r=(e,t)=>{for(let n=0;n<t.length;n++)s.setUint8(e+n,t.charCodeAt(n))};r(0,"RIFF"),s.setUint32(4,36+2*n,!0),r(8,"WAVE"),r(12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,1,!0),s.setUint16(22,1,!0),s.setUint32(24,t,!0),s.setUint32(28,2*t,!0),s.setUint16(32,2,!0),s.setUint16(34,16,!0),r(36,"data"),s.setUint32(40,2*n,!0);const a=new Int16Array(i,44);for(let l=0;l<n;l++){const t=e[l];isNaN(t)?(console.warn("\u26a0\ufe0f NaN detected in audio data at index ".concat(l,", replacing with 0")),a[l]=0):a[l]=Math.max(-32768,Math.min(32767,32768*t))}const o=new Blob([i],{type:"audio/wav"});if(0===o.size)throw console.error("\u274c Created WAV blob has zero size"),new Error("Generated WAV blob is empty");return console.log("\u2705 Created WAV blob: ".concat(o.size," bytes, ").concat(n," samples, ").concat(t,"Hz")),o}generateMockAudio(e,t){const n=Math.max(.08*e.length,1),i=22050,s=Math.floor(n*i),r=44+2*s,a=new ArrayBuffer(r),o=new DataView(a),l=(e,t)=>{for(let n=0;n<t.length;n++)o.setUint8(e+n,t.charCodeAt(n))};l(0,"RIFF"),o.setUint32(4,r-8,!0),l(8,"WAVE"),l(12,"fmt "),o.setUint32(16,16,!0),o.setUint16(20,1,!0),o.setUint16(22,1,!0),o.setUint32(24,i,!0),o.setUint32(28,44100,!0),o.setUint16(32,2,!0),o.setUint16(34,16,!0),l(36,"data"),o.setUint32(40,2*s,!0);const u=new Int16Array(a,44,s);let c=440,d=.3,h=1;t.includes("michael-crow")||t.includes("v2/en_speaker_0")?(c=280,d=.4,h=.75):t.includes("elizabeth-reilley")||t.includes("v2/en_speaker_5")?(c=520,d=.35,h=1.15):t.includes("zohair-developer")||t.includes("v2/en_speaker_4")?(c=360,d=.25,h=.85):t.includes("jennifer-tutor")||t.includes("v2/en_speaker_7")?(c=580,d=.45,h=1.3):t.includes("silky-smooth")||t.includes("v2/en_speaker_1")?(c=380,d=.3,h=.9):t.includes("professional")||t.includes("v2/en_speaker_3")?(c=340,d=.35,h=1):t.includes("storyteller")||t.includes("v2/en_speaker_9")?(c=450,d=.4,h=.8):t.includes("v2/en_speaker_6")?(c=500,d=.35,h=1.05):t.includes("v2/en_speaker_2")?(c=420,d=.3,h=1.2):t.includes("v2/en_speaker_8")?(c=400,d=.32,h=1):c=440+15*t.length;for(let m=0;m<s;m++){const e=m/i;let t=Math.sin(2*Math.PI*c*e*h)*(1+.03*Math.sin(2*Math.PI*4*e))*d;m<2205?t*=m/2205:m>s-2205&&(t*=(s-m)/2205),u[m]=Math.max(-32767,Math.min(32767,32767*t))}const p=new Blob([a],{type:"audio/wav"});if(0===p.size)throw console.error("\u274c Generated audio blob is empty"),new Error("Generated audio blob is empty");const f=URL.createObjectURL(p);return console.log("\ud83c\udfb5 Generated mock audio for ".concat(t," (f=").concat(c,"Hz, a=").concat(d,", mod=").concat(h,", size=").concat(p.size," bytes)")),{blob:p,url:f}}analyzeEmotionalContent(e){const t=[],n=e.toLowerCase();return(n.includes("!")||n.includes("excited"))&&t.push("excited"),(n.includes("calm")||n.includes("peaceful"))&&t.push("calm"),(n.includes("technical")||n.includes("analysis"))&&t.push("professional"),(n.includes("story")||n.includes("once upon"))&&t.push("narrative"),t.length>0?t:["neutral"]}getProfileName(e){return{"scout-professional":"Scout Professional (Local)","scout-friendly":"Scout Friendly (Local)","scout-storyteller":"Scout Storyteller (Local)","llama32-efficient":"Llama 3.2 Quick (Local)"}[e]||"Local Avatar"}getProfileDescription(e){return{"scout-professional":"Professional voice using local SpeechT5","scout-friendly":"Friendly voice using local Bark TTS","scout-storyteller":"Expressive voice using local Bark TTS","llama32-efficient":"Fast voice using local Piper TTS"}[e]||"Local TTS voice"}async testVoice(e){const t="Testing ".concat(e," voice. This is how I sound.");console.log("\ud83e\uddea Testing voice profile: ".concat(e));try{const n=await this.generateSpeech(t,e);return console.log("\u2705 Voice test completed for ".concat(e)),n}catch(n){throw console.error("\u274c Voice test failed for ".concat(e,":"),n),n}}static getLocalVoiceProfiles(){return Object.keys(this.LOCAL_VOICE_PROFILES)}static isModelAvailable(e){return["enhanced-system","speecht5","xtts","piper"].includes(e)}}pl.LOCAL_VOICE_PROFILES={"silky-smooth":{model:"enhanced-system",voiceId:"silky-smooth",speed:.95},"scout-professional":{model:"enhanced-system",voiceId:"professional",speed:.9},"scout-friendly":{model:"enhanced-system",voiceId:"silky-smooth",speed:1},"scout-storyteller":{model:"enhanced-system",voiceId:"storyteller",speed:.95},"scout-quick":{model:"enhanced-system",voiceId:"professional",speed:1.1},"michael-crow":{model:"enhanced-system",voiceId:"michael-crow",speed:.85},"elizabeth-reilley":{model:"enhanced-system",voiceId:"elizabeth-reilley",speed:.95},"zohair-developer":{model:"enhanced-system",voiceId:"zohair-developer",speed:.9},"jennifer-tutor":{model:"enhanced-system",voiceId:"jennifer-tutor",speed:1.05},"natural-conversational":{model:"enhanced-system",voiceId:"storyteller",speed:1},"warm-narrator":{model:"enhanced-system",voiceId:"storyteller",speed:.9},"technical-expert":{model:"enhanced-system",voiceId:"professional",speed:.95},"energetic-presenter":{model:"enhanced-system",voiceId:"jennifer-tutor",speed:1.1},"llama32-efficient":{model:"piper",voiceId:"lessac-medium",speed:1.1}};const fl=pl;class ml{constructor(){this.localTTSService=null,this.isBarkAvailable=!1,this.isInitializing=!1,this.speechSynthesis=void 0,this.voiceCache=[],this.speechSynthesis=window.speechSynthesis,this.initializeBarkTTS(),this.loadBrowserVoices()}async initializeBarkTTS(){if(!this.isInitializing){this.isInitializing=!0;try{console.log("\ud83d\udd0a Initializing Enhanced System TTS..."),this.localTTSService=new fl({model:"enhanced-system"}),await this.localTTSService.initialize(),this.isBarkAvailable=!0,console.log("\u2705 Enhanced System TTS ready - high-quality voices available!")}catch(e){console.warn("\u26a0\ufe0f Enhanced System TTS unavailable, using browser fallback:",e),this.isBarkAvailable=!1}finally{this.isInitializing=!1}}}loadBrowserVoices(){const e=()=>{this.voiceCache=this.speechSynthesis.getVoices()};e(),this.speechSynthesis.onvoiceschanged=e}async speak(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("browser"===t.forceMode)return this.speakWithBrowser(e,t);if("bark"===t.forceMode)return this.speakWithBark(e,t);if(!this.isBarkAvailable||!this.localTTSService)return this.speakWithBrowser(e,t);try{return await this.speakWithBark(e,t)}catch(n){return console.warn("\ud83d\udc15 Bark failed, falling back to browser TTS:",n),this.speakWithBrowser(e,t)}}async speakWithBark(e,t){if(!this.localTTSService||!this.isBarkAvailable)throw new Error("Bark TTS not available");try{const n=this.mapConfigToAvatarProfile(t.preferredVoice||"auto",e),i=await this.localTTSService.generateAvatarSpeech({text:e,avatarProfile:n});return new Audio(i.audioUrl).play(),{success:!0,audioUrl:i.audioUrl,audioBlob:i.audioBlob,method:"bark",metadata:{duration:i.metadata.estimatedDuration,model:"bark",voiceId:n}}}catch(n){return{success:!1,method:"failed",error:n instanceof Error?n.message:"Unknown error"}}}async speakWithBrowser(e,t){return new Promise((n=>{try{const i=new SpeechSynthesisUtterance(e),s=this.selectBrowserVoice(t);s&&(i.voice=s),i.rate=t.speed||1,i.pitch=t.pitch||1,i.volume=1,i.onend=()=>{n({success:!0,method:"browser",metadata:{duration:.1*e.length,model:"browser",voiceId:(null===s||void 0===s?void 0:s.name)||"default"}})},i.onerror=e=>{n({success:!1,method:"failed",error:"Browser TTS error: ".concat(e.error)})},this.speechSynthesis.speak(i)}catch(i){n({success:!1,method:"failed",error:i instanceof Error?i.message:"Unknown browser TTS error"})}}))}mapConfigToAvatarProfile(e,t){if("auto"!==e){return{professional:"scout-professional",friendly:"scout-friendly",storyteller:"scout-storyteller",quick:"llama-quick"}[e]||"scout-friendly"}const n=t.toLowerCase();return n.includes("install")||n.includes("command")||n.includes("error")||n.includes("configure")?"scout-professional":n.includes("story")||n.includes("explain")||n.includes("imagine")||t.length>200?"scout-storyteller":t.length<50?"llama-quick":"scout-friendly"}selectBrowserVoice(e){if(0===this.voiceCache.length)return null;if(e.fallbackVoice){const t=this.voiceCache.find((t=>t.name.toLowerCase().includes(e.fallbackVoice.toLowerCase())));if(t)return t}const t=["Google","Microsoft","Apple","Amazon"];for(const n of t){const e=this.voiceCache.find((e=>e.name.includes(n)&&e.lang.startsWith("en")));if(e)return e}return this.voiceCache.find((e=>e.lang.startsWith("en")))||this.voiceCache[0]}stopSpeaking(){this.speechSynthesis.cancel()}isBarkReady(){return this.isBarkAvailable}getStatus(){return{barkAvailable:this.isBarkAvailable,browserAvailable:"speechSynthesis"in window,isInitializing:this.isInitializing,voiceCount:this.voiceCache.length}}async quickSpeak(e){const t={preferredVoice:"auto",forceMode:!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?"auto":"browser"};return(await this.speak(e,t)).success}async speakAIResponse(e){return this.speak(e,{preferredVoice:"auto",speed:1,forceMode:"auto"})}async speakUserFeedback(e){return this.speak(e,{preferredVoice:"friendly",speed:1.1,forceMode:"auto"})}}let gl=null;const vl=()=>(gl||(gl=new ml),gl),yl=e=>{let{currentWorkingDirectory:t="/Users/danielennis/ai-apps/rate limit message"}=e;const[n,i]=(0,s.useState)([]),[r,a]=(0,s.useState)(null),[o,l]=(0,s.useState)([]),[u,c]=(0,s.useState)(!1),[d,h]=(0,s.useState)(""),[p,f]=(0,s.useState)(!1),[m,g]=(0,s.useState)([]),v=(0,s.useRef)(null),y=(0,s.useRef)(null);(0,s.useEffect)((()=>{y.current=new fl({model:"enhanced-system"}),y.current.initialize().catch(console.warn)}),[]);const D=[{name:"Local TTS Voice Assistant",description:"Set up Bark/SpeechT5 TTS with custom voice profiles",type:"tts",components:[{id:"tts-models",name:"TTS Models",type:"model",status:"pending",commands:[{id:"install-transformers",description:"Install Transformers.js for browser-based TTS",command:"npm install @huggingface/transformers",path:t,requiresApproval:!0,status:"pending"}],files:["src/services/LocalTTSService.ts"]}]},{name:"Talking Head Avatar",description:"Integrate ditto-talkinghead with local TTS",type:"avatar",components:[{id:"avatar-models",name:"Avatar Models",type:"model",status:"pending",commands:[{id:"setup-git-lfs",description:"Install Git LFS for large model files",command:"git lfs install",path:t,requiresApproval:!0,status:"pending"},{id:"clone-ditto",description:"Download ditto-talkinghead model",command:"git clone https://huggingface.co/digital-avatar/ditto-talkinghead models/ditto-talkinghead",path:t,requiresApproval:!0,status:"pending"}],files:["models/ditto-talkinghead/"]}]},{name:"Custom Local AI Extension",description:"Create your own local AI tool or service",type:"custom",components:[]}],x=async e=>{g((t=>t.filter((t=>t.id!==e.id)))),l((t=>[...t,"\ud83d\udcc1 Navigating to: ".concat(e.path),"\ud83d\ude80 Running: ".concat(e.command),"\u23f3 Executing..."])),setTimeout((()=>{l((e=>[...e,"\u2705 Command completed successfully!"]))}),2e3)},b=(0,s.useCallback)((()=>{if(!r)return[];const e=[];return r.components.forEach((t=>{t.commands.forEach((t=>{"pending"===t.status&&e.push(t)}))})),e}),[r]);(0,s.useEffect)((()=>{g(b())}),[r,b]);const w=e=>{let{path:t}=e;return(0,Mt.jsxs)("div",{className:"bg-gray-800 text-green-400 p-2 rounded font-mono text-sm",children:["\ud83d\udcc1 Current Path: ",(0,Mt.jsx)("span",{className:"text-white",children:t})]})};return(0,Mt.jsxs)("div",{className:"max-w-6xl mx-auto p-6 bg-gray-50 min-h-screen",children:[(0,Mt.jsxs)("div",{className:"mb-8",children:[(0,Mt.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"\ud83d\udee0\ufe0f Local Environment Builder"}),(0,Mt.jsx)("p",{className:"text-gray-600",children:"Setup and manage local AI extensions without technical complexity"}),(0,Mt.jsx)(w,{path:t})]}),(0,Mt.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,Mt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\ud83d\udca1 Describe Your Project Idea"}),(0,Mt.jsxs)("div",{className:"flex gap-4",children:[(0,Mt.jsx)("textarea",{value:d,onChange:e=>h(e.target.value),placeholder:"Describe what you want to build... (e.g., 'A voice assistant that helps with cooking recipes' or 'An AI that generates music from text')",className:"flex-1 p-3 border border-gray-300 rounded-lg resize-none h-24"}),(0,Mt.jsx)("button",{onClick:async()=>{if(!d.trim())return;f(!0),await new Promise((e=>setTimeout(e,2e3)));const e={id:Date.now().toString(),name:"Custom Project: ".concat(d.substring(0,30),"..."),description:d,type:"custom",status:"setup",currentPath:t,components:[{id:"setup",name:"Project Setup",type:"config",status:"pending",commands:[{id:"create-dir",description:"Create project directory",command:'mkdir -p "'.concat(d.toLowerCase().replace(/\s+/g,"-"),'"'),path:t,requiresApproval:!0,status:"pending"}],files:[]}]};i((t=>[...t,e])),a(e),f(!1),h("");try{const e=vl();await e.speakUserFeedback("Great idea! I've analyzed your project and created a setup. You can review the commands and approve them when ready.")}catch(n){console.warn("Voice feedback failed:",n)}},disabled:p||!d.trim(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"\ud83e\udd16 Analyzing...":"\ud83d\udd0d Analyze & Setup"})]})]}),(0,Mt.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,Mt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\ud83d\ude80 Quick Start Templates"}),(0,Mt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:D.map(((e,n)=>(0,Mt.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 cursor-pointer transition-colors",onClick:()=>(e=>{const n={id:Date.now().toString(),name:e.name,description:e.description,type:e.type,status:"setup",currentPath:t,components:e.components||[]};i((e=>[...e,n])),a(n),c(!0)})(e),children:[(0,Mt.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:e.name}),(0,Mt.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,Mt.jsx)("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:e.type})]},n)))})]}),r&&(0,Mt.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,Mt.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("h2",{className:"text-xl font-semibold",children:r.name}),(0,Mt.jsx)("p",{className:"text-gray-600",children:r.description})]}),(0,Mt.jsx)("span",{className:"px-3 py-1 rounded-full text-sm ".concat("completed"===r.status?"bg-green-100 text-green-800":"running"===r.status?"bg-blue-100 text-blue-800":"setup"===r.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:r.status})]}),(0,Mt.jsx)("div",{className:"space-y-4",children:r.components.map((e=>(0,Mt.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,Mt.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,Mt.jsx)("h3",{className:"font-semibold",children:e.name}),(0,Mt.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat("ready"===e.status?"bg-green-100 text-green-800":"installing"===e.status?"bg-blue-100 text-blue-800":"error"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status})]}),(0,Mt.jsx)("div",{className:"space-y-2",children:e.commands.map((e=>(0,Mt.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,Mt.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("p",{className:"font-medium text-sm",children:e.description}),(0,Mt.jsx)("code",{className:"text-xs text-gray-600 bg-gray-200 px-2 py-1 rounded",children:e.command})]}),"pending"===e.status&&e.requiresApproval&&(0,Mt.jsx)("button",{onClick:()=>x(e),className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700",children:"\u2705 Approve"})]}),(0,Mt.jsxs)("p",{className:"text-xs text-gray-500",children:["\ud83d\udcc1 Path: ",e.path]})]},e.id)))})]},e.id)))}),m.length>0&&(0,Mt.jsx)("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,Mt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Mt.jsxs)("div",{children:[(0,Mt.jsxs)("h3",{className:"font-semibold text-yellow-800",children:[m.length," Commands Awaiting Approval"]}),(0,Mt.jsx)("p",{className:"text-sm text-yellow-700",children:"Review the commands above and approve them to proceed"})]}),(0,Mt.jsx)("button",{onClick:()=>{m.forEach((e=>{x(e)}))},className:"px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700",children:"\ud83d\ude80 Approve All"})]})})]}),u&&(0,Mt.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,Mt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Mt.jsx)("h2",{className:"text-xl font-semibold",children:"\ud83d\udda5\ufe0f Terminal Output"}),(0,Mt.jsx)("button",{onClick:()=>c(!1),className:"text-gray-500 hover:text-gray-700",children:"\u2715"})]}),(0,Mt.jsx)("div",{ref:v,className:"bg-black text-green-400 p-4 rounded-lg h-64 overflow-y-auto font-mono text-sm",children:0===o.length?(0,Mt.jsx)("div",{className:"text-gray-500",children:"Terminal ready... Approve commands to see output"}):o.map(((e,t)=>(0,Mt.jsx)("div",{className:"mb-1",children:e},t)))})]}),n.length>0&&(0,Mt.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mt-6",children:[(0,Mt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\ud83d\udccb Your Projects"}),(0,Mt.jsx)("div",{className:"space-y-3",children:n.map((e=>(0,Mt.jsx)("div",{className:"p-4 border rounded-lg cursor-pointer transition-colors ".concat((null===r||void 0===r?void 0:r.id)===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>a(e),children:(0,Mt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("h3",{className:"font-semibold",children:e.name}),(0,Mt.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),(0,Mt.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat("completed"===e.status?"bg-green-100 text-green-800":"running"===e.status?"bg-blue-100 text-blue-800":"setup"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.status})]})},e.id)))})]})]})},Dl=Et("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),xl=Et("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),bl=Et("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),wl=Et("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),Al=Et("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),Cl=Et("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),El=Et("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Fl=Et("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),kl=()=>{const[e,t]=(0,s.useState)("stopped"),[n,i]=(0,s.useState)(null),[r,a]=(0,s.useState)([]),[o,l]=(0,s.useState)(!1),[u,c]=(0,s.useState)(null),[d,h]=(0,s.useState)(""),[p,f]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(async()=>{try{const e=await fetch("http://localhost:3001/api/system/status");if(e.ok){const t=await e.json();if(t.currentDirectory)return void h(t.currentDirectory)}}catch(e){console.log("Could not get current directory from backend, using default")}h("/Users/danielennis/ai-apps/rate limit message")})()}),[]);const m=(0,s.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;for(let a=1;a<=e;a++)try{const e=new URLSearchParams;d&&e.set("directory",d);const r=new AbortController,a=setTimeout((()=>r.abort()),5e3),o=await fetch("http://localhost:3001/api/system/status?".concat(e),{signal:r.signal});if(clearTimeout(a),o.ok){var n,s;const e=await o.json();i(e),c(new Date);const r=null===(n=e.ports[3001])||void 0===n?void 0:n.inUse;null===(s=e.ports[3e3])||void 0===s||s.inUse;return t(r?"running":"stopped"),e}throw new Error("HTTP ".concat(o.status,": ").concat(o.statusText))}catch(r){if(console.warn("System status check attempt ".concat(a,"/").concat(e," failed:"),r),a===e)return console.error("All system status check attempts failed"),t("error"),i(null),null;await new Promise((e=>setTimeout(e,1e3*a)))}return null}),[d]);(0,s.useEffect)((()=>{if(!d)return;m();const t=setInterval((()=>{o&&m()}),(()=>{switch(e){case"starting":return 2e3;case"error":return 5e3;case"running":return 15e3;default:return 1e4}})());return()=>clearInterval(t)}),[m,d,e,o]);return(0,Mt.jsxs)("div",{className:"relative",children:[(0,Mt.jsxs)("button",{onClick:()=>l(!o),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium border rounded-lg transition-colors ".concat((()=>{switch(e){case"running":return"text-green-600 border-green-200 bg-green-50 hover:bg-green-100";case"starting":return"text-blue-600 border-blue-200 bg-blue-50";case"error":return"text-red-600 border-red-200 bg-red-50 hover:bg-red-100";default:return"text-gray-600 border-gray-200 bg-gray-50 hover:bg-gray-100"}})()),disabled:"starting"===e,children:[(()=>{switch(e){case"running":return(0,Mt.jsx)(Dl,{className:"w-4 h-4 text-green-500"});case"starting":return(0,Mt.jsx)(xl,{className:"w-4 h-4 text-blue-500 animate-spin"});case"error":return(0,Mt.jsx)(bl,{className:"w-4 h-4 text-red-500"});default:return(0,Mt.jsx)(wl,{className:"w-4 h-4 text-gray-500"})}})(),(0,Mt.jsx)("span",{className:"ml-1.5",children:(()=>{switch(e){case"running":return"Local System Running";case"starting":return"Setting Up...";case"error":return"Setup Error";default:return"Local System Stopped"}})()})]}),o&&(0,Mt.jsxs)("div",{className:"absolute top-full right-0 mt-2 w-96 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:[(0,Mt.jsxs)("div",{className:"p-4 border-b border-gray-100",children:[(0,Mt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Mt.jsx)("h3",{className:"font-semibold text-gray-900",children:"Local System Manager"}),(0,Mt.jsx)("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700",children:"\xd7"})]}),u&&(0,Mt.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Last checked: ",u.toLocaleTimeString()]})]}),(0,Mt.jsxs)("div",{className:"p-4 border-b border-gray-100",children:[(0,Mt.jsxs)("h4",{className:"font-medium text-gray-900 mb-2 flex items-center",children:[(0,Mt.jsx)(Al,{className:"w-4 h-4 mr-1.5"}),"Project Directory"]}),(0,Mt.jsxs)("div",{className:"space-y-2",children:[(0,Mt.jsx)("div",{className:"text-sm text-gray-600 bg-gray-50 rounded p-2 font-mono",children:d||"No directory selected"}),(0,Mt.jsx)("button",{onClick:()=>f(!p),className:"w-full text-left px-3 py-2 text-sm border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:"Choose Directory..."}),p&&(0,Mt.jsxs)("div",{className:"border border-gray-200 rounded-lg p-2 space-y-1 max-h-40 overflow-y-auto",children:[[{path:"/Users/danielennis/ai-apps/rate limit message",name:"Rate Limit Message (Current)"},{path:"/Users/danielennis/ai-apps",name:"AI Apps Directory"},{path:"/Users/danielennis/Desktop",name:"Desktop"},{path:"/Users/danielennis",name:"Home Directory"}].map((e=>(0,Mt.jsxs)("button",{onClick:()=>{h(e.path),f(!1)},className:"w-full text-left px-2 py-1.5 text-sm rounded hover:bg-blue-50 transition-colors ".concat(d===e.path?"bg-blue-100 text-blue-800":"text-gray-700"),children:[(0,Mt.jsx)("div",{className:"font-medium",children:e.name}),(0,Mt.jsx)("div",{className:"text-xs text-gray-500 font-mono",children:e.path})]},e.path))),(0,Mt.jsx)("div",{className:"border-t pt-1 mt-1",children:(0,Mt.jsx)("input",{type:"text",placeholder:"Enter custom path...",className:"w-full px-2 py-1 text-xs border border-gray-200 rounded",onKeyPress:e=>{"Enter"===e.key&&(h(e.currentTarget.value),f(!1))}})})]})]})]}),(0,Mt.jsxs)("div",{className:"p-4 border-b border-gray-100",children:[(0,Mt.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,Mt.jsxs)("button",{onClick:async()=>{if(!d)return void alert("Please select a project directory first!");t("starting"),a([]);const e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const n=(new Date).toLocaleTimeString(),i="success"===t?"\u2705":"error"===t?"\u274c":"warning"===t?"\u26a0\ufe0f":"\ud83d\udd27";a((t=>[...t,"".concat(n,": ").concat(i," ").concat(e)]))};try{var n;e("\ud83c\udfaf Starting complete system setup...","info"),e("\ud83d\udcc2 Project Directory: ".concat(d),"info"),e("\ud83d\udd0d Running pre-flight checks...","info");const s=await m(1);null!==s&&void 0!==s&&null!==(n=s.ports[3001])&&void 0!==n&&n.inUse&&e("\ud83d\udd04 Backend running - preparing clean restart...","warning"),e("\ud83d\ude80 Executing automated setup sequence...","info");const r=new AbortController,a=setTimeout((()=>{r.abort(),e("\u23f0 Setup request timed out after 30 seconds","error")}),3e4),o=await fetch("http://localhost:3001/api/system/setup-complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({directory:d,projectName:d.split("/").pop()||"project",requestId:Date.now().toString()}),signal:r.signal});if(clearTimeout(a),!o.ok)throw new Error("Setup API failed: HTTP ".concat(o.status," - ").concat(o.statusText));(await o.json()).details.forEach((t=>{t.includes("\u2705")||t.includes("success")?e(t.replace(/^[\u2705\ud83c\udf89]?\s*/,""),"success"):t.includes("\u274c")||t.includes("error")?e(t.replace(/^[\u274c\u26a0\ufe0f]?\s*/,""),"error"):t.includes("\u26a0\ufe0f")||t.includes("warning")?e(t.replace(/^[\u26a0\ufe0f]?\s*/,""),"warning"):e(t.replace(/^[\ud83d\udd27\ud83c\udfaf\ud83d\udcca]?\s*/,""),"info")})),e("\u23f3 Monitoring backend startup...","info");let l=0;const u=20,c=[1e3,1500,2e3,2500,3e3];for(;l<u;){const n=c[Math.min(l,c.length-1)];await new Promise((e=>setTimeout(e,n))),l++;try{const n=new AbortController,i=setTimeout((()=>n.abort()),3e3),s=await fetch("http://localhost:3001/api/health",{signal:n.signal});if(clearTimeout(i),s.ok){const n=await s.json();return e("Backend online: ".concat(n.specialization||"Llama 4 Scout"," ready!"),"success"),t("running"),await new Promise((e=>setTimeout(e,1e3))),await m(),void e("\ud83c\udf89 Complete setup finished successfully!","success")}}catch(i){l<u&&e("Backend starting... (".concat(l,"/").concat(u,")"),"info")}}throw new Error("Backend failed to come online after setup (max attempts exceeded)")}catch(i){console.error("Setup failed:",i);const n=i instanceof Error?i.message:String(i);e("Setup failed: ".concat(n),"error"),t("error"),n.includes("EADDRINUSE")?e("\ud83d\udca1 Suggestion: Try stopping all servers first, then setup again","warning"):n.includes("timeout")||n.includes("timed out")?e("\ud83d\udca1 Suggestion: Check your network connection and try again","warning"):n.includes("fetch")&&e("\ud83d\udca1 Suggestion: Backend may not be running - try manual restart","warning")}},disabled:"starting"===e||!d,className:"flex-1 inline-flex items-center justify-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ".concat("starting"!==e&&d?"bg-green-600 text-white hover:bg-green-700":"bg-gray-100 text-gray-400 cursor-not-allowed"),children:[(0,Mt.jsx)(Ft,{className:"w-4 h-4 mr-1.5"}),"Complete Setup"]}),(0,Mt.jsxs)("button",{onClick:async()=>{t("starting"),a([]);const e=e=>{a((t=>[...t,"".concat((new Date).toLocaleTimeString(),": ").concat(e)]))};try{e("\ud83d\uded1 Stopping all local servers...");const i=["3000","3001","11434"];for(const t of i)try{const n=await fetch("http://localhost:3001/api/system/kill-port/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({directory:d})});if(n.ok){e((await n.json()).message)}}catch(n){e("\u26a0\ufe0f Could not clear port ".concat(t))}t("stopped"),e("\u2705 All servers stopped")}catch(n){console.error("Stop failed:",n),e("\u274c Stop failed: ".concat(n instanceof Error?n.message:String(n))),t("error")}},disabled:"starting"===e,className:"flex-1 inline-flex items-center justify-center px-3 py-2 text-sm font-medium border border-red-200 text-red-600 rounded-lg transition-colors ".concat("starting"===e?"opacity-50 cursor-not-allowed":"hover:bg-red-50"),children:[(0,Mt.jsx)(Cl,{className:"w-4 h-4 mr-1.5"}),"Stop All"]})]}),(0,Mt.jsxs)("div",{className:"flex gap-2",children:[(0,Mt.jsxs)("button",{onClick:()=>m(),disabled:"starting"===e,className:"flex-1 inline-flex items-center justify-center px-2 py-1.5 text-xs font-medium border border-gray-200 text-gray-600 rounded hover:bg-gray-50 transition-colors disabled:opacity-50",children:[(0,Mt.jsx)(xl,{className:"w-3 h-3 mr-1"}),"Refresh Status"]}),(0,Mt.jsxs)("button",{onClick:()=>window.open("http://localhost:3001/api/health","_blank"),disabled:"running"!==e,className:"flex-1 inline-flex items-center justify-center px-2 py-1.5 text-xs font-medium border border-gray-200 text-gray-600 rounded hover:bg-gray-50 transition-colors disabled:opacity-50",children:[(0,Mt.jsx)(El,{className:"w-3 h-3 mr-1"}),"Health Check"]})]})]}),n&&(0,Mt.jsxs)("div",{className:"p-4 border-b border-gray-100",children:[(0,Mt.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"System Status"}),(0,Mt.jsxs)("div",{className:"space-y-2",children:[n.currentDirectory&&(0,Mt.jsxs)("div",{className:"text-sm",children:[(0,Mt.jsx)("span",{className:"font-medium text-gray-600",children:"Working Dir:"}),(0,Mt.jsx)("div",{className:"ml-4 text-xs text-gray-500 font-mono bg-gray-50 rounded p-1",children:n.currentDirectory})]}),(0,Mt.jsxs)("div",{className:"text-sm",children:[(0,Mt.jsx)("span",{className:"font-medium text-gray-600",children:"Ports:"}),(0,Mt.jsx)("div",{className:"ml-4 space-y-1",children:Object.entries(n.ports).map((e=>{let[t,n]=e;return(0,Mt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Mt.jsxs)("span",{children:[":",t]}),(0,Mt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat(n.inUse?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:n.inUse?"Running (PID: ".concat(n.pid,")"):"Free"})]},t)}))})]}),(0,Mt.jsxs)("div",{className:"text-sm",children:[(0,Mt.jsx)("span",{className:"font-medium text-gray-600",children:"Ollama Models:"}),(0,Mt.jsx)("span",{className:"ml-2 text-xs px-2 py-0.5 rounded ".concat(n.models.ollama.available?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:n.models.ollama.available?"".concat(n.models.ollama.models.length," models"):"Not available"})]})]})]}),r.length>0&&(0,Mt.jsxs)("div",{className:"p-4",children:[(0,Mt.jsxs)("h4",{className:"font-medium text-gray-900 mb-2 flex items-center",children:[(0,Mt.jsx)(Fl,{className:"w-4 h-4 mr-1.5"}),"Setup Logs"]}),(0,Mt.jsx)("div",{className:"bg-gray-50 rounded-lg p-3 max-h-40 overflow-y-auto",children:(0,Mt.jsx)("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap",children:r.join("\n")})})]})]})]})};class Sl{constructor(){this.compressionEvents=[],this.statistics=void 0,this.statistics={totalCompressions:0,compressionsByType:{},averageCompressionRatio:1,totalTokensSaved:0,losslessPercentage:0,averageAccuracy:1,mostEffectiveStrategy:"lossless",recentCompressions:[],compressionHistory:{daily:[],weekly:[]}}}static getInstance(){return Sl.instance||(Sl.instance=new Sl),Sl.instance}recordCompressionEvent(e,t,n,i,s,r,a){const o={id:"comp_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),timestamp:new Date,strategy:e,originalTokens:t,compressedTokens:n,ratio:i,accuracy:s,conversationId:r,messageCount:a};this.compressionEvents.push(o),this.compressionEvents.length>100&&(this.compressionEvents=this.compressionEvents.slice(-100)),this.updateStatistics()}updateStatistics(){var e;const t=this.compressionEvents;if(0===t.length)return;this.statistics.totalCompressions=t.length,this.statistics.averageCompressionRatio=t.reduce(((e,t)=>e+t.ratio),0)/t.length,this.statistics.totalTokensSaved=t.reduce(((e,t)=>e+(t.originalTokens-t.compressedTokens)),0),this.statistics.averageAccuracy=t.reduce(((e,t)=>e+t.accuracy),0)/t.length,this.statistics.compressionsByType=t.reduce(((e,t)=>(e[t.strategy]=(e[t.strategy]||0)+1,e)),{});const n=t.filter((e=>"lossless"===e.strategy||e.accuracy>=.99)).length;this.statistics.losslessPercentage=n/t.length*100;const i=t.reduce(((e,t)=>{const n=t.originalTokens-t.compressedTokens;return e[t.strategy]=(e[t.strategy]||0)+n,e}),{});this.statistics.mostEffectiveStrategy=(null===(e=Object.entries(i).sort(((e,t)=>{let[,n]=e,[,i]=t;return i-n}))[0])||void 0===e?void 0:e[0])||"lossless",this.statistics.recentCompressions=t.slice(-10),this.updateCompressionHistory()}updateCompressionHistory(){const e=this.compressionEvents,t=new Date,n=new Map;for(let s=6;s>=0;s--){const e=new Date(t);e.setDate(e.getDate()-s);const i=e.toISOString().split("T")[0];n.set(i,{compressions:0,tokensSaved:0})}e.forEach((e=>{const t=e.timestamp.toISOString().split("T")[0],i=n.get(t);i&&(i.compressions++,i.tokensSaved+=e.originalTokens-e.compressedTokens)})),this.statistics.compressionHistory.daily=Array.from(n.entries()).map((e=>{let[t,n]=e;return(0,o.A)({date:t},n)}));const i=new Map;for(let s=3;s>=0;s--){const e=new Date(t);e.setDate(e.getDate()-(e.getDay()+7*s));const n="Week of ".concat(e.toISOString().split("T")[0]);i.set(n,{compressions:0,tokensSaved:0})}e.forEach((e=>{const t=new Date(e.timestamp),n=new Date(t);n.setDate(n.getDate()-n.getDay());const s="Week of ".concat(n.toISOString().split("T")[0]),r=i.get(s);r&&(r.compressions++,r.tokensSaved+=e.originalTokens-e.compressedTokens)})),this.statistics.compressionHistory.weekly=Array.from(i.entries()).map((e=>{let[t,n]=e;return(0,o.A)({week:t},n)}))}getCompressionStatistics(){return(0,o.A)({},this.statistics)}compressLossless(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const i=Math.ceil(e.length/4),s=e.replace(/(.)\1{2,}/g,((e,t)=>"".concat(t,"[").concat(e.length,"]"))),r=new Map([["I understand","\xa7IU\xa7"],["can you help","\xa7CYH\xa7"],["thank you","\xa7TY\xa7"],["let me know","\xa7LMK\xa7"],["by the way","\xa7BTW\xa7"]]);let a=s;r.forEach(((e,t)=>{a=a.replace(new RegExp(t,"gi"),e)}));const o=a.length/e.length,l=Math.ceil(a.length/4);return this.recordCompressionEvent("lossless",i,l,o,1,t,n),{compressed:a,ratio:o}}compressSemantic(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.7,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const s=Math.ceil(e.length/4),r=e.split(/[.!?]+/).filter((e=>e.trim().length>0)),a=r.slice(0,Math.ceil(r.length*t)).join(". ")+".",o=a.length/e.length,l=Math.ceil(a.length/4),u=.9*t;return this.recordCompressionEvent("semantic",s,l,o,u,n,i),{compressed:a,ratio:o}}compressSummary(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown";const n=e.map((e=>e.content)).join(" "),i=Math.ceil(n.length/4),s=this.extractKeyPoints(e),r="[SUMMARY] Key points: ".concat(s.join("; ")),a=r.length/n.length,o=Math.ceil(r.length/4);return this.recordCompressionEvent("summary",i,o,a,.6,t,e.length),{compressed:r,ratio:a}}compressHybrid(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown";const i=e.map((e=>e.content)).join(" "),s=Math.ceil(i.length/4),r=e.slice(-5),a=e.slice(0,-5);let o="";if(a.length>0){const{compressed:e}=this.compressSummary(a,n);o=e}const l=o+"\n\n[RECENT]\n"+r.map((e=>{const t="role"in e?"user"===e.role:e.isUser;return"".concat(t?"User":"AI",": ").concat(e.content)})).join("\n"),u=l.length/i.length,c=Math.ceil(l.length/4);return this.recordCompressionEvent("hybrid",s,c,u,.8,n,e.length),{compressed:l,ratio:u}}decompress(e,t){let n=e;if("lossless"===t.type){new Map([["\xa7IU\xa7","I understand"],["\xa7CYH\xa7","can you help"],["\xa7TY\xa7","thank you"],["\xa7LMK\xa7","let me know"],["\xa7BTW\xa7","by the way"]]).forEach(((e,t)=>{n=n.replace(new RegExp(t,"g"),e)})),n=n.replace(/(.)\[(\d+)\]/g,((e,t,n)=>t.repeat(parseInt(n))))}return n}analyzeAndRecommendStrategy(e,t){const n=e.reduce(((e,t)=>e+t.content.length),0)/e.length,i=this.detectPatterns(e);let s="lossless",r=!0;return t>8e3?(s="hybrid",r=!1):n>200?s="semantic":i&&(s="lossless"),{type:s,compressionRatio:.7,preserveKey:r,metadata:{originalTokens:t,compressedTokens:0,accuracy:"lossless"===s?1:.8}}}extractKeyPoints(e){const t=e.map((e=>e.content)).join(" "),n=t.match(/\b[A-Z][a-z]+(?:\s+[A-Z][a-z]+)*\b/g)||[],i=t.match(/[^.!?]*\?[^.!?]*/g)||[],s=t.match(/(?:decided|chose|selected|will|going to)[^.!?]*/gi)||[];return Array.from(new Set([...n.slice(0,3),...i.slice(0,2),...s.slice(0,2)]))}detectPatterns(e){const t=e.map((e=>e.content));return["I understand","can you help","thank you"].some((e=>t.filter((t=>t.toLowerCase().includes(e.toLowerCase()))).length>1))}generateChecksum(e){let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t.toString(16)}resetStatistics(){this.compressionEvents=[],this.statistics={totalCompressions:0,compressionsByType:{},averageCompressionRatio:1,totalTokensSaved:0,losslessPercentage:0,averageAccuracy:1,mostEffectiveStrategy:"lossless",recentCompressions:[],compressionHistory:{daily:[],weekly:[]}}}getEfficiencyReport(){const e=this.compressionEvents.reduce(((e,t)=>(e[t.strategy]||(e[t.strategy]={count:0,tokensSaved:0,totalRatio:0}),e[t.strategy].count++,e[t.strategy].tokensSaved+=t.originalTokens-t.compressedTokens,e[t.strategy].totalRatio+=t.ratio,e)),{}),t=Object.entries(e).map((e=>{let[t,n]=e;return{strategy:t,count:n.count,tokensSaved:n.tokensSaved,avgRatio:n.totalRatio/n.count}}));return{totalTokensSaved:this.statistics.totalTokensSaved,averageCompressionRatio:this.statistics.averageCompressionRatio,losslessPercentage:this.statistics.losslessPercentage,compressionsByStrategy:t}}}Sl.instance=void 0;const _l=Et("Archive",[["rect",{width:"20",height:"5",x:"2",y:"4",rx:"2",key:"uhwcea"}],["path",{d:"M4 9v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9",key:"shkvi4"}],["path",{d:"M10 13h4",key:"ytezjc"}]]),Nl=Et("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),Ml=Et("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Tl=Et("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Bl=e=>{let{compressionEngine:t,refreshInterval:n=5e3}=e;const[i,r]=(0,s.useState)(null),[a,o]=(0,s.useState)(!1),[l,u]=(0,s.useState)("overview");if((0,s.useEffect)((()=>{const e=()=>{const e=t.getCompressionStatistics();r(e)};e();const i=setInterval(e,n);return()=>clearInterval(i)}),[t,n]),!i)return(0,Mt.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:(0,Mt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Mt.jsx)(_l,{className:"w-4 h-4 text-gray-400"}),(0,Mt.jsx)("span",{className:"text-sm text-gray-600",children:"Loading compression statistics..."})]})});const c=e=>(new Intl.NumberFormat).format(Math.round(e)),d=e=>e<.5?"text-green-600":e<.7?"text-yellow-600":"text-red-600",h=e=>e>=80?"text-green-600":e>=60?"text-yellow-600":"text-red-600";return(0,Mt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 text-sm",children:[(0,Mt.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>o(!a),children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Mt.jsx)(_l,{className:"w-4 h-4 text-blue-600"}),(0,Mt.jsx)("span",{className:"font-medium text-gray-700",children:"Compression Stats:"}),(0,Mt.jsxs)("span",{className:"font-mono text-blue-600",children:[i.totalCompressions," events"]}),(0,Mt.jsxs)("span",{className:"font-medium ".concat(h(i.losslessPercentage)),children:[i.losslessPercentage.toFixed(1),"% lossless"]}),(0,Mt.jsxs)("span",{className:"text-green-600 font-medium",children:[c(i.totalTokensSaved)," tokens saved"]})]}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Mt.jsx)("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,Mt.jsx)("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:"".concat(Math.min(100,100*(1-i.averageCompressionRatio)),"%")}})}),(0,Mt.jsx)("svg",{className:"w-4 h-4 text-gray-400 transform transition-transform ".concat(a?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Mt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),a&&(0,Mt.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200 space-y-3",children:[(0,Mt.jsx)("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:[{id:"overview",label:"Overview",icon:Nl},{id:"history",label:"History",icon:Ml},{id:"efficiency",label:"Efficiency",icon:Tl}].map((e=>(0,Mt.jsxs)("button",{onClick:()=>u(e.id),className:"flex items-center space-x-1 px-3 py-1 rounded-md text-xs font-medium transition-colors ".concat(l===e.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,Mt.jsx)(e.icon,{className:"w-3 h-3"}),(0,Mt.jsx)("span",{children:e.label})]},e.id)))}),"overview"===l&&(0,Mt.jsxs)("div",{className:"space-y-3",children:[(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("h4",{className:"font-medium text-gray-700 text-xs mb-2",children:"Key Metrics"}),(0,Mt.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[(0,Mt.jsxs)("div",{children:[(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"Total compressions:"}),(0,Mt.jsx)("span",{className:"font-mono font-semibold",children:i.totalCompressions})]}),(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"Tokens saved:"}),(0,Mt.jsx)("span",{className:"font-mono text-green-600 font-semibold",children:c(i.totalTokensSaved)})]}),(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"Avg compression ratio:"}),(0,Mt.jsxs)("span",{className:"font-mono font-semibold ".concat(d(i.averageCompressionRatio)),children:[(100*i.averageCompressionRatio).toFixed(1),"%"]})]})]}),(0,Mt.jsxs)("div",{children:[(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"Lossless percentage:"}),(0,Mt.jsxs)("span",{className:"font-mono font-semibold ".concat(h(i.losslessPercentage)),children:[i.losslessPercentage.toFixed(1),"%"]})]}),(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"Average accuracy:"}),(0,Mt.jsxs)("span",{className:"font-mono text-blue-600 font-semibold",children:[(100*i.averageAccuracy).toFixed(1),"%"]})]}),(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"Best strategy:"}),(0,Mt.jsx)("span",{className:"font-mono text-purple-600 font-semibold",children:i.mostEffectiveStrategy})]})]})]})]}),(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("h4",{className:"font-medium text-gray-700 text-xs mb-2",children:"Compressions by Type"}),(0,Mt.jsx)("div",{className:"space-y-1",children:Object.entries(i.compressionsByType).map((e=>{let[t,n]=e;const s=n/i.totalCompressions*100;return(0,Mt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-2 flex-1",children:[(0,Mt.jsxs)("span",{className:"text-xs text-gray-600 capitalize w-16",children:[t,":"]}),(0,Mt.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:(0,Mt.jsx)("div",{className:"h-2 rounded-full ".concat("lossless"===t?"bg-green-500":"semantic"===t?"bg-blue-500":"summary"===t?"bg-yellow-500":"bg-purple-500"),style:{width:"".concat(s,"%")}})})]}),(0,Mt.jsxs)("span",{className:"text-xs font-mono ml-2",children:[n," (",s.toFixed(0),"%)"]})]},t)}))})]}),i.recentCompressions.length>0&&(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("h4",{className:"font-medium text-gray-700 text-xs mb-2",children:"Recent Compressions"}),(0,Mt.jsx)("div",{className:"space-y-1 max-h-24 overflow-y-auto",children:i.recentCompressions.slice(-5).map(((e,t)=>(0,Mt.jsxs)("div",{className:"flex items-center justify-between text-xs bg-white rounded p-2",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Mt.jsx)("span",{className:"px-1 rounded text-xs font-mono ".concat("lossless"===e.strategy?"bg-green-100 text-green-700":"semantic"===e.strategy?"bg-blue-100 text-blue-700":"summary"===e.strategy?"bg-yellow-100 text-yellow-700":"bg-purple-100 text-purple-700"),children:e.strategy}),(0,Mt.jsxs)("span",{className:"text-gray-600",children:[e.originalTokens,"\u2192",e.compressedTokens," tokens"]})]}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Mt.jsxs)("span",{className:"font-mono ".concat(d(e.ratio)),children:[(100*e.ratio).toFixed(0),"%"]}),(0,Mt.jsx)("span",{className:"text-gray-500",children:e.timestamp.toLocaleTimeString().slice(0,5)})]})]},e.id)))})]})]}),"history"===l&&(0,Mt.jsxs)("div",{className:"space-y-3",children:[(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("h4",{className:"font-medium text-gray-700 text-xs mb-2",children:"Daily Activity (Last 7 Days)"}),(0,Mt.jsx)("div",{className:"space-y-1",children:i.compressionHistory.daily.map(((e,t)=>(0,Mt.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:new Date(e.date).toLocaleDateString()}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Mt.jsxs)("span",{className:"font-mono",children:[e.compressions," compressions"]}),(0,Mt.jsxs)("span",{className:"font-mono text-green-600",children:[c(e.tokensSaved)," saved"]}),(0,Mt.jsx)("div",{className:"w-12 bg-gray-200 rounded-full h-1",children:(0,Mt.jsx)("div",{className:"bg-blue-500 h-1 rounded-full",style:{width:"".concat(Math.min(100,e.compressions/10*100),"%")}})})]})]},e.date)))})]}),(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("h4",{className:"font-medium text-gray-700 text-xs mb-2",children:"Weekly Summary (Last 4 Weeks)"}),(0,Mt.jsx)("div",{className:"space-y-1",children:i.compressionHistory.weekly.map(((e,t)=>(0,Mt.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:e.week}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Mt.jsxs)("span",{className:"font-mono",children:[e.compressions," compressions"]}),(0,Mt.jsxs)("span",{className:"font-mono text-green-600",children:[c(e.tokensSaved)," saved"]}),(0,Mt.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:(0,Mt.jsx)("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:"".concat(Math.min(100,e.compressions/50*100),"%")}})})]})]},e.week)))})]})]}),"efficiency"===l&&(0,Mt.jsxs)("div",{className:"space-y-3",children:[(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("h4",{className:"font-medium text-gray-700 text-xs mb-2",children:"Strategy Effectiveness"}),(0,Mt.jsx)("div",{className:"space-y-2",children:t.getEfficiencyReport().compressionsByStrategy.sort(((e,t)=>t.tokensSaved-e.tokensSaved)).map((e=>(0,Mt.jsxs)("div",{className:"bg-white rounded p-2",children:[(0,Mt.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Mt.jsx)("span",{className:"text-xs font-medium capitalize",children:e.strategy}),(0,Mt.jsxs)("span",{className:"text-xs text-gray-500",children:[e.count," uses"]})]}),(0,Mt.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"Tokens saved:"}),(0,Mt.jsx)("span",{className:"font-mono text-green-600",children:c(e.tokensSaved)})]}),(0,Mt.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"Avg compression:"}),(0,Mt.jsxs)("span",{className:"font-mono ".concat(d(e.avgRatio)),children:[(100*e.avgRatio).toFixed(1),"%"]})]}),(0,Mt.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1 mt-1",children:(0,Mt.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-1 rounded-full",style:{width:"".concat(Math.min(100,e.tokensSaved/i.totalTokensSaved*100),"%")}})})]},e.strategy)))})]}),(0,Mt.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded p-2",children:[(0,Mt.jsx)("h4",{className:"font-medium text-blue-800 text-xs mb-1",children:"Overall Efficiency"}),(0,Mt.jsxs)("div",{className:"text-xs text-blue-700",children:[(0,Mt.jsxs)("p",{children:[(0,Mt.jsxs)("strong",{children:[i.losslessPercentage.toFixed(1),"%"]})," of compressions were lossless, saving ",(0,Mt.jsx)("strong",{children:c(i.totalTokensSaved)})," tokens total."]}),(0,Mt.jsxs)("p",{className:"mt-1",children:["Average compression ratio: ",(0,Mt.jsxs)("strong",{children:[(100*i.averageCompressionRatio).toFixed(1),"%"]}),"with ",(0,Mt.jsxs)("strong",{children:[(100*i.averageAccuracy).toFixed(1),"%"]})," accuracy."]})]})]})]})]})]})},Il=e=>{let{conversation:t,template:n,currentInput:i,currentModelId:r,ragContext:a,ragDocuments:o=[]}=e;const l=(0,s.useCallback)((()=>{const e=r||n.modelId,t=ll[e];return(null===t||void 0===t?void 0:t.contextWindow)||n.features.contextLength||128e3}),[r,n.modelId,n.features.contextLength]),[u,c]=(0,s.useState)({systemPrompt:0,conversationHistory:0,ragContext:0,currentMessage:0,total:0,remaining:l(),percentage:0,estimatedCost:0,breakdown:{systemTokens:0,inputTokensTotal:0,outputTokensTotal:0,ragTokens:0,currentInputTokens:0,expectedOutputTokens:0},costs:{inputCost:0,outputCost:0,totalCost:0},contextUtilization:{historyPercentage:0,ragPercentage:0,systemPercentage:0,availableForResponse:l()}}),[d,h]=(0,s.useState)({totalMessages:0,totalInputTokens:0,totalOutputTokens:0,totalTokens:0,averageInputTokens:0,averageOutputTokens:0,longestMessage:0,shortestMessage:0,cumulativeCost:0}),[p,f]=(0,s.useState)(!1),[m]=(0,s.useState)((()=>Sl.getInstance()));(0,s.useEffect)((()=>{const e=r||n.modelId,s=o.length>0?o:a?[{type:"txt",name:"RAG Context",content:a,tokenCount:ul(a),size:a.length,uploadedAt:new Date}]:[],l=function(e,t,n,i,s){const r=ll[s]||ll["gpt-4o-mini"],a=ul(e),o=n.reduce(((e,t)=>e+t.tokenCount),0),l=ul(i),u=r.maxOutput||2e3;let c=0,d=0;t.forEach((e=>{const t=e.tokens||ul(e.content);"user"===e.role?c+=t:"assistant"===e.role&&(d+=t)}));const h=c+d,p=c+l,f=d,m=a+h+o+l,g=Math.max(0,r.contextWindow-m),v=Math.min(100,m/r.contextWindow*100),y=p/1e3*r.pricing.input,D=f/1e3*r.pricing.output,x=y+D,b={historyPercentage:Math.round(h/r.contextWindow*100*10)/10,ragPercentage:Math.round(o/r.contextWindow*100*10)/10,systemPercentage:Math.round(a/r.contextWindow*100*10)/10,availableForResponse:Math.max(0,r.contextWindow-m)};return{systemPrompt:a,conversationHistory:h,ragContext:o,currentMessage:l,total:m,remaining:g,percentage:Math.round(10*v)/10,estimatedCost:Math.round(1e4*x)/1e4,breakdown:{systemTokens:a,inputTokensTotal:p,outputTokensTotal:f,ragTokens:o,currentInputTokens:l,expectedOutputTokens:u},costs:{inputCost:Math.round(1e4*y)/1e4,outputCost:Math.round(1e4*D)/1e4,totalCost:Math.round(1e4*x)/1e4},contextUtilization:b}}(n.systemPrompt||"",t.messages,s,i,e),u=function(e,t){const n=ll[t]||ll["gpt-4o-mini"];let i=0,s=0,r=1/0,a=0;e.map((e=>{const t=e.tokens||ul(e.content);return"user"===e.role?i+=t:"assistant"===e.role&&(s+=t),r=Math.min(r,t),a=Math.max(a,t),t}));const o=i+s,l=i/1e3*n.pricing.input+s/1e3*n.pricing.output;return{totalMessages:e.length,totalInputTokens:i,totalOutputTokens:s,totalTokens:o,averageInputTokens:Math.round(i/Math.max(1,e.filter((e=>"user"===e.role)).length)),averageOutputTokens:Math.round(s/Math.max(1,e.filter((e=>"assistant"===e.role)).length)),longestMessage:a,shortestMessage:r===1/0?0:r,cumulativeCost:Math.round(1e4*l)/1e4}}(t.messages,e);c(l),h(u)}),[t.messages,n,i,r,a,o]);const g=()=>u.percentage<50?"text-green-600":u.percentage<80?"text-yellow-600":"text-red-600",v=()=>u.percentage<50?"bg-green-500":u.percentage<80?"bg-yellow-500":"bg-red-500",y=(D=u).percentage<70?{status:"good",message:"Context usage is healthy",actions:[]}:D.percentage<90?{status:"warning",message:"Context window is filling up",actions:["Consider removing older documents from RAG","Summarize conversation history","Use a model with larger context window"]}:{status:"critical",message:"Context window nearly full - responses may be truncated",actions:["Start a new conversation","Remove documents from RAG context","Switch to a model with larger context window","Clear conversation history"]};var D;return(0,Mt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 text-sm",children:[(0,Mt.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>f(!p),children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Mt.jsx)("span",{className:"font-medium text-gray-700",children:"Token Usage:"}),(0,Mt.jsxs)("span",{className:"font-mono ".concat(g()),children:[u.total.toLocaleString()," / ",l().toLocaleString()]}),(0,Mt.jsxs)("span",{className:"text-gray-500",children:[u.remaining.toLocaleString()," remaining"]}),(0,Mt.jsxs)("span",{className:"font-medium ".concat(g()),children:[u.percentage,"% of context window"]}),u.costs.totalCost>0&&(0,Mt.jsxs)("span",{className:"text-blue-600 font-medium",children:["$",u.costs.totalCost.toFixed(4)]})]}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Mt.jsx)("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,Mt.jsx)("div",{className:"h-full ".concat(v()," transition-all duration-300"),style:{width:"".concat(Math.min(100,u.percentage),"%")}})}),(0,Mt.jsx)("svg",{className:"w-4 h-4 text-gray-400 transform transition-transform ".concat(p?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Mt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),p&&(0,Mt.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200 space-y-3",children:[(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("h4",{className:"font-medium text-gray-700 text-xs mb-2",children:"Current Context Window Usage"}),(0,Mt.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[(0,Mt.jsxs)("div",{children:[(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"System instructions:"}),(0,Mt.jsx)("span",{className:"font-mono",children:u.breakdown.systemTokens.toLocaleString()})]}),(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"Conversation history:"}),(0,Mt.jsx)("span",{className:"font-mono",children:u.conversationHistory.toLocaleString()})]}),(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"RAG/Document content:"}),(0,Mt.jsx)("span",{className:"font-mono ".concat(u.breakdown.ragTokens>0?"text-blue-600 font-semibold":""),children:u.breakdown.ragTokens.toLocaleString()})]})]}),(0,Mt.jsxs)("div",{children:[(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"Your message:"}),(0,Mt.jsx)("span",{className:"font-mono",children:u.breakdown.currentInputTokens.toLocaleString()})]}),(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"Expected AI response:"}),(0,Mt.jsx)("span",{className:"font-mono",children:u.breakdown.expectedOutputTokens.toLocaleString()})]}),(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"Available for response:"}),(0,Mt.jsx)("span",{className:"font-mono text-green-600",children:u.contextUtilization.availableForResponse.toLocaleString()})]})]})]})]}),(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("h4",{className:"font-medium text-gray-700 text-xs mb-2",children:"Conversation Statistics"}),(0,Mt.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[(0,Mt.jsxs)("div",{children:[(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"Total messages:"}),(0,Mt.jsx)("span",{className:"font-mono",children:d.totalMessages})]}),(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"Input tokens (cumulative):"}),(0,Mt.jsx)("span",{className:"font-mono text-blue-600",children:d.totalInputTokens.toLocaleString()})]}),(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"Output tokens (cumulative):"}),(0,Mt.jsx)("span",{className:"font-mono text-purple-600",children:d.totalOutputTokens.toLocaleString()})]})]}),(0,Mt.jsxs)("div",{children:[(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"Avg input per message:"}),(0,Mt.jsx)("span",{className:"font-mono",children:d.averageInputTokens})]}),(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"Avg output per message:"}),(0,Mt.jsx)("span",{className:"font-mono",children:d.averageOutputTokens})]}),(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"Longest message:"}),(0,Mt.jsx)("span",{className:"font-mono",children:d.longestMessage})]})]})]})]}),u.costs.totalCost>0&&(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("h4",{className:"font-medium text-gray-700 text-xs mb-2",children:"Cost Analysis"}),(0,Mt.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"Input cost:"}),(0,Mt.jsxs)("span",{className:"font-mono text-blue-600",children:["$",u.costs.inputCost.toFixed(4)]})]}),(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"Output cost:"}),(0,Mt.jsxs)("span",{className:"font-mono text-purple-600",children:["$",u.costs.outputCost.toFixed(4)]})]}),(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{className:"text-gray-600",children:"Total cost:"}),(0,Mt.jsxs)("span",{className:"font-mono font-semibold",children:["$",u.costs.totalCost.toFixed(4)]})]})]})]}),(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("h4",{className:"font-medium text-gray-700 text-xs mb-2",children:"Context Window Breakdown"}),(0,Mt.jsxs)("div",{className:"w-full h-4 bg-gray-200 rounded-full overflow-hidden flex",children:[(0,Mt.jsx)("div",{className:"bg-yellow-500",style:{width:"".concat(u.contextUtilization.systemPercentage,"%")},title:"System: ".concat(u.contextUtilization.systemPercentage,"%")}),(0,Mt.jsx)("div",{className:"bg-blue-500",style:{width:"".concat(u.contextUtilization.historyPercentage,"%")},title:"History: ".concat(u.contextUtilization.historyPercentage,"%")}),(0,Mt.jsx)("div",{className:"bg-purple-500",style:{width:"".concat(u.contextUtilization.ragPercentage,"%")},title:"RAG: ".concat(u.contextUtilization.ragPercentage,"%")})]}),(0,Mt.jsxs)("div",{className:"flex justify-between mt-1 text-xs text-gray-500",children:[(0,Mt.jsx)("span",{children:"System"}),(0,Mt.jsx)("span",{children:"History"}),(0,Mt.jsx)("span",{children:"RAG"}),(0,Mt.jsx)("span",{children:"Available"})]})]}),(0,Mt.jsxs)("div",{className:"mt-3",children:[(0,Mt.jsx)("div",{className:"w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,Mt.jsx)("div",{className:"h-full ".concat(v()," transition-all duration-300"),style:{width:"".concat(Math.min(100,u.percentage),"%")}})}),(0,Mt.jsxs)("div",{className:"flex justify-between mt-1 text-xs text-gray-500",children:[(0,Mt.jsx)("span",{children:"0"}),(0,Mt.jsx)("span",{className:"font-medium",children:"Context Window"}),(0,Mt.jsx)("span",{children:l().toLocaleString()})]})]}),"good"!==y.status&&(0,Mt.jsxs)("div",{className:"mt-2 p-2 rounded text-xs border ".concat("critical"===y.status?"bg-red-50 border-red-200 text-red-700":"bg-yellow-50 border-yellow-200 text-yellow-700"),children:[(0,Mt.jsxs)("div",{className:"font-medium mb-1",children:["critical"===y.status?"\u26a0\ufe0f":"\ud83d\udcca"," ",y.message]}),y.actions.length>0&&(0,Mt.jsx)("ul",{className:"list-disc list-inside space-y-0.5 ml-2",children:y.actions.map(((e,t)=>(0,Mt.jsx)("li",{children:e},t)))})]}),(0,Mt.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,Mt.jsx)(Bl,{compressionEngine:m,refreshInterval:1e4})})]})]})},jl=Et("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Pl=Et("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Ll=Et("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Rl=e=>{let{notifications:t,onDismiss:n}=e;const[i,r]=(0,s.useState)([]);(0,s.useEffect)((()=>{r(t),t.forEach((e=>{if(e.duration&&e.duration>0){const t=setTimeout((()=>{n(e.id)}),e.duration);return()=>clearTimeout(t)}}))}),[t,n]);const a=e=>{switch(e){case"success":return(0,Mt.jsx)(Dl,{className:"w-5 h-5 text-green-500"});case"warning":return(0,Mt.jsx)(jl,{className:"w-5 h-5 text-yellow-500"});case"error":return(0,Mt.jsx)(jl,{className:"w-5 h-5 text-red-500"});default:return(0,Mt.jsx)(Pl,{className:"w-5 h-5 text-[#FFC627]"})}},o=e=>{switch(e){case"success":return"bg-green-50 border-green-200 text-green-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"error":return"bg-red-50 border-red-200 text-red-800";default:return"bg-[#FFC627] bg-opacity-20 border-[#FFC627] border-opacity-40 text-[#191919]"}};return 0===i.length?null:(0,Mt.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-md",children:i.map((e=>(0,Mt.jsx)("div",{className:"".concat(o(e.type)," border rounded-lg p-4 shadow-lg animate-slide-in"),children:(0,Mt.jsxs)("div",{className:"flex items-start",children:[(0,Mt.jsx)("div",{className:"flex-shrink-0",children:a(e.type)}),(0,Mt.jsxs)("div",{className:"flex-1 ml-3",children:[(0,Mt.jsx)("h3",{className:"text-sm font-semibold",children:e.title}),(0,Mt.jsx)("p",{className:"text-sm mt-1 opacity-90",children:e.message}),e.actions&&e.actions.length>0&&(0,Mt.jsx)("div",{className:"mt-3 flex space-x-2",children:e.actions.map(((e,t)=>(0,Mt.jsx)("button",{onClick:e.onClick,className:"px-3 py-1 text-xs rounded-md font-medium transition-colors ".concat("primary"===e.variant?"bg-[#FFC627] text-[#191919] hover:bg-yellow-400":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.label},t)))})]}),(0,Mt.jsx)("button",{onClick:()=>n(e.id),className:"flex-shrink-0 ml-2 text-gray-400 hover:text-gray-600",children:(0,Mt.jsx)(Ll,{className:"w-4 h-4"})})]})},e.id)))})},Ol=Et("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),zl=Et("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Wl=Et("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]),Ul=Et("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Hl=e=>{let{models:t,currentModelId:n,onModelSwitch:i,compact:r=!1}=e;const[a,o]=(0,s.useState)(!1),l=t.find((e=>e.id===n))||t[0];if(!t||0===t.length||!l)return(0,Mt.jsx)("div",{className:r?"px-3 py-1":"bg-white border border-gray-200 rounded-lg p-4",children:(0,Mt.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,Mt.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse"}),(0,Mt.jsx)("span",{children:"Loading models..."})]})});const u=t.sort(((e,t)=>{var i,s;const r=e.id===n,a=t.id===n;if(r&&!a)return-1;if(!r&&a)return 1;const o={online:0,limited:1,loading:2,offline:3},l=null!==(i=o[(null===e||void 0===e?void 0:e.status)||"unknown"])&&void 0!==i?i:4,u=null!==(s=o[(null===t||void 0===t?void 0:t.status)||"unknown"])&&void 0!==s?s:4;return l!==u?l-u:e.name.localeCompare(t.name)})),c=e=>({"gpt-4o":{purpose:"Advanced reasoning and multimodal analysis",rateLimiting:"Moderate limits, stable for production use",cost:"Premium pricing, higher cost per token",strengths:["Complex reasoning","Code generation","Multimodal"],idealFor:"Complex projects requiring high-quality outputs"},"gpt-4o-mini":{purpose:"Fast and cost-effective general tasks",rateLimiting:"Higher rate limits, excellent availability",cost:"Very cost-effective, budget-friendly",strengths:["Speed","Cost efficiency","High availability"],idealFor:"Rapid prototyping and everyday tasks"},"gpt-3.5-turbo":{purpose:"Reliable conversation and basic tasks",rateLimiting:"Stable limits, good for continuous use",cost:"Budget option, lowest cost per token",strengths:["Proven reliability","Fast responses","Low cost"],idealFor:"Basic automation and simple conversations"},"gemini-2.0-flash":{purpose:"Ultra-fast responses with massive context",rateLimiting:"Generous limits, optimized for high throughput",cost:"Competitive pricing, good value",strengths:["1M token context","Lightning speed","Multimodal"],idealFor:"Large document processing and real-time apps"},"gemini-1.5-pro":{purpose:"Research-grade analysis with huge context",rateLimiting:"Research-friendly limits, stable access",cost:"Research-tier pricing, moderate cost",strengths:["2M token context","Deep analysis","Scientific accuracy"],idealFor:"Academic research and complex analysis"},"llama4-scout":{purpose:"Advanced local reasoning with massive context",rateLimiting:"No rate limits - runs locally",cost:"Free - local processing, no API costs",strengths:["10M token context","Privacy","Unlimited use"],idealFor:"Privacy-sensitive work and unlimited experimentation"},"llama3.2:3b":{purpose:"Lightweight local model for basic tasks",rateLimiting:"No rate limits - runs locally",cost:"Free - local processing, no API costs",strengths:["Fast local inference","Privacy","Low resource usage"],idealFor:"Quick local tasks and testing"},"llama3.1:8b":{purpose:"Balanced local model with good capabilities",rateLimiting:"No rate limits - runs locally",cost:"Free - local processing, no API costs",strengths:["Good reasoning","Privacy","Balanced performance"],idealFor:"Local development and privacy-focused work"}}[e]||{purpose:"General purpose AI assistant",rateLimiting:"Standard rate limits apply",cost:"Variable pricing",strengths:["General capabilities"],idealFor:"General use cases"}),d=e=>{switch(e){case"online":return"text-green-500";case"offline":return"text-red-500";case"limited":return"text-yellow-500";case"loading":return"text-[#FFC627]";default:return"text-gray-500"}},h=e=>{switch(e){case"online":return(0,Mt.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"});case"offline":return(0,Mt.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full"});case"limited":return(0,Mt.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"});case"loading":return(0,Mt.jsx)("div",{className:"w-2 h-2 bg-[#FFC627] rounded-full animate-pulse"});default:return(0,Mt.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full"})}},p=e=>{switch(e){case"online":return"Online";case"offline":return"Offline";case"limited":return"Limited";case"loading":return"Testing...";default:return"Unknown"}};return r?(0,Mt.jsxs)("div",{className:"relative",children:[(0,Mt.jsxs)("button",{onClick:()=>o(!a),className:"flex items-center space-x-2 px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm transition-colors",children:[(0,Mt.jsx)("div",{className:"text-xs",children:h((null===l||void 0===l?void 0:l.status)||"loading")}),(0,Mt.jsx)("span",{className:"font-medium",children:(null===l||void 0===l?void 0:l.name)||"Loading..."}),(0,Mt.jsx)(Ol,{className:"w-3 h-3"})]}),a&&(0,Mt.jsxs)(Mt.Fragment,{children:[(0,Mt.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>o(!1)}),(0,Mt.jsx)("div",{className:"absolute top-full right-0 mt-1 w-[320px] bg-white border border-gray-200 rounded-lg shadow-xl z-20 max-h-96 overflow-y-auto",children:u.map((e=>{const t=c(e.id);return(0,Mt.jsx)("button",{onClick:()=>{i(e.id),o(!1)},disabled:"offline"===(null===e||void 0===e?void 0:e.status)||"loading"===(null===e||void 0===e?void 0:e.status),className:"w-full p-4 text-left hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg disabled:opacity-50 disabled:cursor-not-allowed border-b border-gray-100 last:border-b-0 ".concat(e.id===n?"bg-[#FFC627] bg-opacity-20 border-l-4 border-l-[#FFC627]":""),children:(0,Mt.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Mt.jsx)("div",{className:"flex-shrink-0 mt-1",children:(s=e.id,(0,Mt.jsx)(Tt,{modelId:s,variant:"light",size:"sm"}))}),(0,Mt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,Mt.jsx)("span",{className:"text-sm font-semibold text-gray-900 truncate",children:e.name}),e.id===n&&(0,Mt.jsx)(zl,{className:"w-4 h-4 text-[#FFC627] flex-shrink-0"}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-1 text-xs ".concat(d(null===e||void 0===e?void 0:e.status)," flex-shrink-0"),children:[(0,Mt.jsx)("div",{children:h(null===e||void 0===e?void 0:e.status)}),(0,Mt.jsx)("span",{className:"font-medium",children:p(null===e||void 0===e?void 0:e.status)})]})]}),(0,Mt.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:t.purpose}),(0,Mt.jsxs)("div",{className:"grid grid-cols-1 gap-1 text-xs",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-1 text-gray-500",children:[(0,Mt.jsx)(Wl,{className:"w-3 h-3"}),(0,Mt.jsx)("span",{children:t.rateLimiting})]}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-1 text-gray-500",children:[(0,Mt.jsx)(Ul,{className:"w-3 h-3"}),(0,Mt.jsx)("span",{children:t.cost})]})]}),(0,Mt.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:t.strengths.slice(0,2).map(((e,t)=>(0,Mt.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:e},t)))})]})]})},e.id);var s}))})]})]}):(0,Mt.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 max-w-4xl",children:[(0,Mt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Mt.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 flex items-center",children:[(0,Mt.jsx)(St,{className:"w-4 h-4 mr-2"}),"AI Model"]}),(0,Mt.jsxs)("button",{onClick:()=>o(!a),className:"text-sm text-[#FFC627] hover:text-yellow-600 flex items-center",children:["Switch Model ",(0,Mt.jsx)(Ol,{className:"w-3 h-3 ml-1 transition-transform ".concat(a?"rotate-180":"")})]})]}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg",children:[(0,Mt.jsx)("div",{className:"flex items-center justify-center",children:(0,Mt.jsx)(Tt,{modelId:l.id,variant:"light",size:"lg"})}),(0,Mt.jsxs)("div",{className:"flex-1",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,Mt.jsx)("span",{className:"font-medium text-gray-900",children:(null===l||void 0===l?void 0:l.name)||"Loading..."}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-1 text-xs ".concat(d((null===l||void 0===l?void 0:l.status)||"loading")),children:[(0,Mt.jsx)("div",{children:h((null===l||void 0===l?void 0:l.status)||"loading")}),(0,Mt.jsx)("span",{className:"font-medium",children:p((null===l||void 0===l?void 0:l.status)||"loading")})]})]}),(0,Mt.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:c((null===l||void 0===l?void 0:l.id)||"").purpose}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,Mt.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,Mt.jsx)(Wl,{className:"w-3 h-3"}),(0,Mt.jsx)("span",{children:c((null===l||void 0===l?void 0:l.id)||"").rateLimiting})]}),(0,Mt.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,Mt.jsx)(Ul,{className:"w-3 h-3"}),(0,Mt.jsx)("span",{children:c((null===l||void 0===l?void 0:l.id)||"").cost})]})]})]})]}),a&&(0,Mt.jsxs)("div",{className:"mt-4 space-y-3 border-t border-gray-200 pt-4",children:[(0,Mt.jsx)("h4",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:"Available Models"}),(0,Mt.jsx)("div",{className:"grid grid-cols-1 gap-3",children:u.map((e=>{const t=c(e.id);return(0,Mt.jsx)("button",{onClick:()=>{i(e.id),o(!1)},disabled:"offline"===(null===e||void 0===e?void 0:e.status)||"loading"===(null===e||void 0===e?void 0:e.status),className:"w-full p-4 text-left border rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed ".concat(e.id===n?"border-[#FFC627] border-opacity-40 bg-[#FFC627] bg-opacity-20 shadow-sm":"online"===(null===e||void 0===e?void 0:e.status)||"limited"===(null===e||void 0===e?void 0:e.status)?"border-gray-200 hover:border-gray-300 hover:bg-gray-50 hover:shadow-sm":"border-gray-100 bg-gray-50"),children:(0,Mt.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,Mt.jsx)("div",{className:"flex items-center justify-center flex-shrink-0 mt-1",children:(0,Mt.jsx)(Tt,{modelId:e.id,variant:"light",size:"md"})}),(0,Mt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Mt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Mt.jsx)("span",{className:"font-semibold text-gray-900",children:e.name}),e.id===n&&(0,Mt.jsx)(zl,{className:"w-4 h-4 text-[#FFC627]"})]}),(0,Mt.jsxs)("div",{className:"text-xs font-medium ".concat(d(null===e||void 0===e?void 0:e.status)," flex items-center space-x-1"),children:[(0,Mt.jsx)("span",{children:h(null===e||void 0===e?void 0:e.status)}),(0,Mt.jsx)("span",{children:p(null===e||void 0===e?void 0:e.status)})]})]}),(0,Mt.jsx)("p",{className:"text-sm text-gray-700 mb-3 font-medium",children:t.purpose}),(0,Mt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3",children:[(0,Mt.jsx)("div",{className:"space-y-2",children:(0,Mt.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,Mt.jsx)(Wl,{className:"w-4 h-4 text-blue-500 mt-0.5 flex-shrink-0"}),(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("span",{className:"text-xs font-medium text-gray-700 block",children:"Rate Limiting"}),(0,Mt.jsx)("span",{className:"text-xs text-gray-600",children:t.rateLimiting})]})]})}),(0,Mt.jsx)("div",{className:"space-y-2",children:(0,Mt.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,Mt.jsx)(Ul,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("span",{className:"text-xs font-medium text-gray-700 block",children:"Cost"}),(0,Mt.jsx)("span",{className:"text-xs text-gray-600",children:t.cost})]})]})})]}),(0,Mt.jsxs)("div",{className:"space-y-2",children:[(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("span",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Strengths"}),(0,Mt.jsx)("div",{className:"flex flex-wrap gap-1",children:t.strengths.map(((e,t)=>(0,Mt.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700 border border-blue-200",children:e},t)))})]}),(0,Mt.jsxs)("div",{className:"pt-2 border-t border-gray-100",children:[(0,Mt.jsx)("span",{className:"text-xs font-medium text-gray-700 block mb-1",children:"\ud83d\udca1 Ideal For"}),(0,Mt.jsx)("span",{className:"text-xs text-gray-600 italic",children:t.idealFor})]})]}),e.maxTokens&&(0,Mt.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-2 border-t border-gray-100",children:[(0,Mt.jsx)("span",{className:"text-xs text-gray-500",children:"Context Window"}),(0,Mt.jsxs)("span",{className:"text-xs font-mono text-gray-700",children:[(e.maxTokens/1e3).toLocaleString(),"K tokens"]})]})]})]})},e.id)}))})]})]})},Vl=Et("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),Gl=Et("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ql=e=>{let{isThinking:t,modelName:n="AI",canStream:i=!0}=e;const[r,a]=(0,s.useState)(0),[o,l]=(0,s.useState)("");return(0,s.useEffect)((()=>{if(!t)return a(0),void l("");const e=Date.now(),n=setInterval((()=>{const t=Math.floor((Date.now()-e)/1e3);a(t),l(0===t?"generating...":t<5?"I've been thinking for ".concat(t," second").concat(t>1?"s":"","..."):"I'm thinking deeply about this to answer appropriately...")}),1e3);return()=>clearInterval(n)}),[t]),!t||i?null:(0,Mt.jsx)("div",{className:"flex justify-start",children:(0,Mt.jsxs)("div",{className:"bg-gray-100 px-4 py-3 rounded-lg max-w-md",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Mt.jsx)("div",{className:"flex space-x-1",children:r<5?(0,Mt.jsxs)(Mt.Fragment,{children:[(0,Mt.jsx)("div",{className:"w-2 h-2 bg-[#FFC627] rounded-full animate-bounce"}),(0,Mt.jsx)("div",{className:"w-2 h-2 bg-[#FFC627] rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,Mt.jsx)("div",{className:"w-2 h-2 bg-[#FFC627] rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}):(0,Mt.jsx)(Vl,{className:"w-5 h-5 text-[#FFC627] animate-pulse"})}),(0,Mt.jsxs)("div",{className:"flex-1",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Mt.jsx)("span",{className:"text-gray-700 text-sm",children:o}),r>0&&(0,Mt.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,Mt.jsx)(Gl,{className:"w-3 h-3 mr-1"}),r,"s"]})]}),r>=5&&(0,Mt.jsxs)("div",{className:"mt-1 text-xs text-gray-500 flex items-center",children:[(0,Mt.jsx)(Ft,{className:"w-3 h-3 mr-1"}),n," is processing your request carefully"]})]})]}),r>=5&&(0,Mt.jsx)("div",{className:"mt-2",children:(0,Mt.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1",children:(0,Mt.jsx)("div",{className:"bg-[#FFC627] h-1 rounded-full transition-all duration-1000",style:{width:"".concat(Math.min(100,(r-5)/30*100),"%"),animation:"pulse 2s infinite"}})})})]})})},Kl=Et("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Xl=Et("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),Yl=Et("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Ql=Et("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),$l=Et("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Jl=Et("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Zl=Et("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),eu=e=>{let{citation:t,showRelevance:n=!1,showIncantation:i=!0,maxPreviewLength:r=200}=e;const[a,o]=(0,s.useState)(!1),l=t.content.length>r?t.content.substring(0,r)+"...":t.content,u=a?t.content:l,c=t.content.length>r;return(0,Mt.jsxs)("div",{className:"border rounded-lg p-3 ".concat((e=>{switch(e){case"rag":case"document":case"pdf":case"web":return"border-blue-200 bg-blue-50";case"external":return"border-green-200 bg-green-50";case"knowledge":return"border-purple-200 bg-purple-50";default:return"border-gray-200 bg-gray-50"}})(t.type)," hover:shadow-sm transition-shadow"),children:[(0,Mt.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[(e=>{switch(e){case"rag":case"document":case"pdf":return(0,Mt.jsx)(Kl,{className:"w-4 h-4 text-blue-600"});case"web":return(0,Mt.jsx)(Xl,{className:"w-4 h-4 text-blue-600"});case"external":return(0,Mt.jsx)(Yl,{className:"w-4 h-4 text-green-600"});case"knowledge":return(0,Mt.jsx)(Ql,{className:"w-4 h-4 text-purple-600"});default:return(0,Mt.jsx)(Kl,{className:"w-4 h-4 text-gray-600"})}})(t.type),(0,Mt.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,Mt.jsx)("h4",{className:"text-sm font-medium text-gray-900 truncate",children:t.source}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-3 text-xs text-gray-500 mt-1",children:[(0,Mt.jsx)("span",{className:"capitalize",children:t.type}),t.page&&(0,Mt.jsxs)("span",{children:["Page ",t.page]}),n&&(0,Mt.jsxs)("span",{className:"text-blue-600 font-medium",children:[Math.round(100*t.relevance),"% relevance"]}),t.timestamp&&(0,Mt.jsx)("span",{children:t.timestamp.toLocaleDateString()})]})]})]}),t.url&&(0,Mt.jsx)("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"ml-2 p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Open source",children:(0,Mt.jsx)(Yl,{className:"w-4 h-4"})})]}),i&&t.incantationUsed&&(0,Mt.jsx)("div",{className:"mb-2 flex items-center space-x-2",children:(0,Mt.jsxs)("div",{className:"px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ".concat((d=t.incantationUsed,{"semantic-search":"bg-blue-100 text-blue-800","chain-of-thought":"bg-purple-100 text-purple-800","expert-persona":"bg-green-100 text-green-800","working-backwards":"bg-orange-100 text-orange-800","assumption-reversal":"bg-pink-100 text-pink-800"}[d||""]||"bg-gray-100 text-gray-800")),children:[(0,Mt.jsx)(Ft,{className:"w-3 h-3"}),(0,Mt.jsx)("span",{children:(e=>e?e.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "):"Semantic Search")(t.incantationUsed)})]})}),(0,Mt.jsxs)("div",{className:"text-sm text-gray-700 leading-relaxed",children:[(0,Mt.jsx)("p",{className:"whitespace-pre-wrap",children:u}),c&&(0,Mt.jsx)("button",{onClick:()=>o(!a),className:"mt-2 flex items-center space-x-1 text-xs text-blue-600 hover:text-blue-800 transition-colors",children:a?(0,Mt.jsxs)(Mt.Fragment,{children:[(0,Mt.jsx)(Ol,{className:"w-3 h-3"}),(0,Mt.jsx)("span",{children:"Show less"})]}):(0,Mt.jsxs)(Mt.Fragment,{children:[(0,Mt.jsx)($l,{className:"w-3 h-3"}),(0,Mt.jsx)("span",{children:"Show more"})]})})]}),(0,Mt.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,Mt.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,Mt.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Mt.jsx)("span",{className:"text-gray-500",children:"Relevance"}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Mt.jsx)(Jl,{className:"w-3 h-3 text-blue-600"}),(0,Mt.jsxs)("span",{className:"font-medium",children:[Math.round(100*(t.relevance||0)),"%"]})]})]}),(0,Mt.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Mt.jsx)("span",{className:"text-gray-500",children:"Quality"}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Mt.jsx)(Zl,{className:"w-3 h-3 text-green-600"}),(0,Mt.jsxs)("span",{className:"font-medium",children:[Math.round(100*(t.quality||0)),"%"]})]})]}),(0,Mt.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Mt.jsx)("span",{className:"text-gray-500",children:"Confidence"}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Mt.jsx)(Jl,{className:"w-3 h-3 text-purple-600"}),(0,Mt.jsxs)("span",{className:"font-medium",children:[Math.round(100*(t.confidence||0)),"%"]})]})]})]})})]});var d},tu=e=>{let{citations:t,showRelevanceScores:n=!1,showIncantations:i=!0,maxPreviewLength:s=200,className:r=""}=e;if(!t||0===t.length)return null;const a=[...t].sort(((e,t)=>t.relevance-e.relevance)),o=i?a.reduce(((e,t)=>{const n=t.incantationUsed||"semantic-search";return e[n]||(e[n]=[]),e[n].push(t),e}),{}):{all:a};return(0,Mt.jsxs)("div",{className:"space-y-3 ".concat(r),children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-3",children:[(0,Mt.jsx)(Ql,{className:"w-4 h-4"}),(0,Mt.jsxs)("span",{className:"font-medium",children:["Sources (",t.length,")"]}),n&&(0,Mt.jsx)("span",{className:"text-xs text-gray-500",children:"\u2022 Showing relevance scores"})]}),i?Object.entries(o).map((e=>{let[t,i]=e;return(0,Mt.jsxs)("div",{className:"space-y-2",children:["all"!==t&&(0,Mt.jsxs)("div",{className:"flex items-center space-x-2 text-xs font-medium text-gray-700 mb-2",children:[(0,Mt.jsx)(Ft,{className:"w-3 h-3"}),(0,Mt.jsxs)("span",{children:[t.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),"(",i.length,")"]})]}),(0,Mt.jsx)("div",{className:"space-y-2",children:i.map(((e,i)=>(0,Mt.jsx)(eu,{citation:e,showRelevance:n,showIncantation:!1,maxPreviewLength:s},e.id||"citation-".concat(t,"-").concat(i))))})]},t)})):(0,Mt.jsx)("div",{className:"space-y-2",children:a.map(((e,t)=>(0,Mt.jsx)(eu,{citation:e,showRelevance:n,showIncantation:i,maxPreviewLength:s},e.id||"citation-".concat(t))))})]})},nu=Et("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),iu=Et("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),su=Et("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ru=e=>{let{ragEnabled:t,onToggleRAG:n,uploadedPDFs:i,onUploadPDF:r,onRemovePDF:a,isLoading:o=!1}=e;const[l,u]=(0,s.useState)(!1),c=e=>{console.log("\ud83d\udd27 RAG Panel expansion changed:",e),u(e)};(0,s.useEffect)((()=>{console.log("\ud83d\udd27 InlineRAGControls props changed:",{ragEnabled:t,uploadedPDFs:i.length,isLoading:o})}),[t,i.length,o]);const[d,h]=(0,s.useState)(!1),p=(0,s.useRef)(null),f=i.reduce(((e,t)=>e+t.tokenCount),0),m=(i.reduce(((e,t)=>e+t.size),0),async e=>{if(e)for(let n=0;n<e.length;n++){const i=e[n];if("application/pdf"===i.type)try{await r(i)}catch(t){console.error("Failed to upload ".concat(i.name,":"),t)}}}),g=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};return(0,Mt.jsx)("div",{className:"flex items-center",children:(0,Mt.jsxs)("div",{className:"relative",children:[(0,Mt.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),console.log("\ud83d\udd27 Paperclip button clicked explicitly"),c(!l)},className:"p-2 rounded-lg transition-all duration-200 ".concat(i.length>0?"bg-[#FFC627] bg-opacity-20 text-[#FFC627] hover:bg-opacity-30":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"),title:i.length>0?"".concat(i.length," documents uploaded"):"Upload documents",children:(0,Mt.jsx)(nu,{className:"w-4 h-4"})}),l&&(0,Mt.jsxs)(Mt.Fragment,{children:[(0,Mt.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>c(!1)}),(0,Mt.jsxs)("div",{className:"absolute bottom-full left-0 mb-2 w-80 bg-white border border-gray-200 rounded-lg shadow-xl z-20",children:[(0,Mt.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-gray-200",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Mt.jsx)(iu,{className:"w-4 h-4 ".concat(t?"text-[#FFC627]":"text-gray-400")}),(0,Mt.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Knowledge Base"}),(0,Mt.jsx)("div",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(t?"bg-[#FFC627] bg-opacity-20 text-[#191919]":"bg-gray-100 text-gray-600"),children:t?"Active":"Disabled"})]}),(0,Mt.jsx)("button",{onClick:()=>c(!1),className:"p-1 rounded hover:bg-gray-100 text-gray-400 hover:text-gray-600",children:(0,Mt.jsx)(Ll,{className:"w-4 h-4"})})]}),(0,Mt.jsxs)("div",{className:"p-3 border-b border-gray-200",children:[(0,Mt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Mt.jsxs)("span",{className:"text-sm text-gray-600",children:[i.length," documents \u2022 ",f.toLocaleString()," tokens"]}),(0,Mt.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,Mt.jsx)("input",{type:"checkbox",checked:t,onChange:e=>n(e.target.checked),className:"sr-only peer"}),(0,Mt.jsx)("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-[#FFC627] peer-focus:ring-opacity-30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-[#FFC627]"})]})]}),(0,Mt.jsxs)("button",{onClick:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.click()},disabled:o,className:"w-full flex items-center justify-center space-x-2 p-2 border border-dashed border-gray-300 rounded-lg hover:border-[#FFC627] hover:bg-[#FFC627] hover:bg-opacity-10 transition-colors disabled:opacity-50",children:[(0,Mt.jsx)(su,{className:"w-4 h-4 text-gray-500"}),(0,Mt.jsx)("span",{className:"text-sm text-gray-600",children:o?"Uploading...":"Upload PDFs"})]}),(0,Mt.jsx)("input",{ref:p,type:"file",accept:".pdf",multiple:!0,onChange:e=>m(e.target.files),className:"hidden",disabled:o})]}),i.length>0?(0,Mt.jsx)("div",{className:"max-h-40 overflow-y-auto",children:i.map((e=>(0,Mt.jsxs)("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[(0,Mt.jsx)(Kl,{className:"w-4 h-4 text-red-500 flex-shrink-0"}),(0,Mt.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,Mt.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),(0,Mt.jsxs)("p",{className:"text-xs text-gray-500",children:[g(e.size)," \u2022 ",e.pageCount," pages \u2022 ",e.tokenCount.toLocaleString()," tokens"]})]})]}),(0,Mt.jsx)("button",{onClick:()=>a(e.id),className:"p-1 rounded hover:bg-red-100 text-gray-400 hover:text-red-600 transition-colors flex-shrink-0",children:(0,Mt.jsx)(Ll,{className:"w-3 h-3"})})]},e.id)))}):(0,Mt.jsxs)("div",{className:"p-4 text-center",children:[(0,Mt.jsx)(Kl,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),(0,Mt.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"No documents uploaded"}),(0,Mt.jsx)("p",{className:"text-xs text-gray-500",children:"Upload PDFs to enable contextual search"})]}),i.length>0&&t&&(0,Mt.jsx)("div",{className:"p-3 bg-[#FFC627] bg-opacity-10 border-t border-gray-200",children:(0,Mt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Mt.jsx)("div",{className:"w-2 h-2 bg-[#FFC627] rounded-full animate-pulse"}),(0,Mt.jsx)("span",{className:"text-xs text-gray-700",children:"RAG active - AI will search your documents for relevant context"})]})})]})]})]})})},au=e=>{let{citation:t,discovery:n,isVisible:i,position:s,onClose:r}=e;if(!i)return null;return(0,Mt.jsxs)("div",{className:"fixed z-50 max-w-sm bg-white border border-gray-200 rounded-lg shadow-lg p-4",style:{left:Math.min(s.x,window.innerWidth-400),top:Math.max(s.y-100,10)},children:[(0,Mt.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Mt.jsx)(Kl,{className:"w-4 h-4 text-blue-600"}),(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("h4",{className:"text-sm font-semibold text-gray-900",children:t.source}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[(0,Mt.jsxs)("span",{children:[Math.round(100*t.relevance),"% relevant"]}),t.page&&(0,Mt.jsxs)("span",{children:["Page ",t.page]}),(0,Mt.jsx)("span",{children:(o=t.timestamp,o?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(o):"Unknown date")})]})]})]}),(0,Mt.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:"\xd7"})]}),(0,Mt.jsx)("div",{className:"text-sm text-gray-700 mb-3 border-l-2 border-gray-200 pl-3",children:(0,Mt.jsx)("p",{className:"line-clamp-3",children:t.excerpt||t.highlightedText||t.content.substring(0,150)})}),(0,Mt.jsxs)("div",{className:"border rounded p-2 mb-3 ".concat((a=t.incantationUsed,{"semantic-search":"bg-blue-50 text-blue-700 border-blue-200","chain-of-thought":"bg-purple-50 text-purple-700 border-purple-200","expert-persona":"bg-green-50 text-green-700 border-green-200","working-backwards":"bg-amber-50 text-amber-700 border-amber-200","assumption-reversal":"bg-pink-50 text-pink-700 border-pink-200"}[a||"semantic-search"]||"bg-gray-50 text-gray-700 border-gray-200")),children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-1 mb-1",children:[(0,Mt.jsx)(Ft,{className:"w-3 h-3"}),(0,Mt.jsxs)("span",{className:"text-xs font-medium",children:["Discovered via ",(e=>e?e.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "):"Semantic Search")(t.incantationUsed)]})]}),(null===n||void 0===n?void 0:n.query)&&(0,Mt.jsxs)("p",{className:"text-xs italic",children:['"',n.query,'"']})]}),(0,Mt.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[(0,Mt.jsxs)("div",{className:"flex flex-col items-center p-1 bg-gray-50 rounded border border-gray-100",children:[(0,Mt.jsx)("span",{className:"text-xs text-gray-500",children:"Relevance"}),(0,Mt.jsxs)("div",{className:"flex items-center mt-1",children:[(0,Mt.jsx)(Jl,{className:"w-3 h-3 text-blue-600 mr-1"}),(0,Mt.jsxs)("span",{className:"text-xs font-medium",children:[Math.round(100*(t.relevance||.5)),"%"]})]})]}),(0,Mt.jsxs)("div",{className:"flex flex-col items-center p-1 bg-gray-50 rounded border border-gray-100",children:[(0,Mt.jsx)("span",{className:"text-xs text-gray-500",children:"Quality"}),(0,Mt.jsxs)("div",{className:"flex items-center mt-1",children:[(0,Mt.jsx)(Zl,{className:"w-3 h-3 text-green-600 mr-1"}),(0,Mt.jsxs)("span",{className:"text-xs font-medium",children:[Math.round(100*(t.quality||.5)),"%"]})]})]}),(0,Mt.jsxs)("div",{className:"flex flex-col items-center p-1 bg-gray-50 rounded border border-gray-100",children:[(0,Mt.jsx)("span",{className:"text-xs text-gray-500",children:"Confidence"}),(0,Mt.jsxs)("div",{className:"flex items-center mt-1",children:[(0,Mt.jsx)(Ml,{className:"w-3 h-3 text-purple-600 mr-1"}),(0,Mt.jsxs)("span",{className:"text-xs font-medium",children:[Math.round(100*(t.confidence||.5)),"%"]})]})]})]}),(0,Mt.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Mt.jsx)(Kl,{className:"w-3 h-3"}),(0,Mt.jsx)("span",{children:"rag"===t.type?"Document":t.type})]}),t.url&&(0,Mt.jsx)("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:"View Source"})]})]});var a,o},ou=e=>{let{segments:t,citations:n,discoveries:i=[],onCitationClick:r,className:a=""}=e;const[o,l]=(0,s.useState)(null);return(0,Mt.jsxs)("div",{className:"relative ".concat(a),children:[(0,Mt.jsx)("span",{children:t.map(((e,t)=>e.isHighlighted&&e.citationId?(0,Mt.jsx)("span",{className:"bg-yellow-100 border-b-2 border-yellow-400 cursor-pointer hover:bg-yellow-200 transition-colors px-0.5 rounded",onClick:t=>((e,t)=>{e.preventDefault();const n=e.currentTarget.getBoundingClientRect();l({citationId:t,position:{x:n.left,y:n.top}}),null===r||void 0===r||r(t)})(t,e.citationId),title:"Click to see source details",children:e.text},t):(0,Mt.jsx)("span",{children:e.text},t)))}),o&&(0,Mt.jsx)(au,{citation:(c=o.citationId,n.find((e=>e.id===c))),discovery:(u=o.citationId,i.find((e=>e.results.some((e=>e.id===u))))),isVisible:!0,position:o.position,onClose:()=>{l(null)}})]});var u,c},lu=Et("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),uu=Et("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),cu=e=>{let{discovery:t,onClick:n}=e;const[i,r]=(0,s.useState)(!1),a=t.results.length>0?t.results.reduce(((e,t)=>e+(t.quality||.5)),0)/t.results.length:.5,o=e=>e>=.8?"text-green-600":e>=.6?"text-blue-600":e>=.4?"text-yellow-600":"text-red-600";return(0,Mt.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors cursor-pointer bg-white",onClick:()=>{r(!i),null===n||void 0===n||n()},children:[(0,Mt.jsxs)("div",{className:"flex items-start space-x-3 mb-3",children:[(0,Mt.jsx)(lu,{className:"w-5 h-5 text-gray-600 mt-0.5"}),(0,Mt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Mt.jsxs)("h4",{className:"text-sm font-medium text-gray-900 truncate",children:['"',t.query,'"']}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-3 mt-1",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Mt.jsx)(Gl,{className:"w-3 h-3 text-gray-400"}),(0,Mt.jsx)("span",{className:"text-xs text-gray-500",children:(e=>{const t=new Date,n=Math.floor((t.getTime()-e.getTime())/6e4);return n<1?"Just now":n<60?"".concat(n,"m ago"):n<1440?"".concat(Math.floor(n/60),"h ago"):e.toLocaleDateString()})(t.timestamp)})]}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Mt.jsx)(Kl,{className:"w-3 h-3 text-gray-400"}),(0,Mt.jsxs)("span",{className:"text-xs text-gray-500",children:[t.results.length," sources"]})]}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Mt.jsx)(Tl,{className:"w-3 h-3 text-gray-400"}),(0,Mt.jsxs)("span",{className:"text-xs ".concat(o(a)),children:[Math.round(100*a),"% quality"]})]})]})]})]}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,Mt.jsx)(Ft,{className:"w-4 h-4 text-purple-600"}),(0,Mt.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat((l=t.incantationUsed,{"semantic-search":"bg-blue-100 text-blue-800","chain-of-thought":"bg-purple-100 text-purple-800","expert-persona":"bg-green-100 text-green-800","working-backwards":"bg-orange-100 text-orange-800","assumption-reversal":"bg-pink-100 text-pink-800"}[l]||"bg-gray-100 text-gray-800")),children:t.incantationUsed.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")})]}),(0,Mt.jsxs)("div",{className:"mb-3",children:[(0,Mt.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-1",children:[(0,Mt.jsx)("span",{children:"Discovery Quality"}),(0,Mt.jsxs)("span",{className:o(a),children:[Math.round(100*a),"%"]})]}),(0,Mt.jsx)("div",{className:"w-full h-2 bg-gray-100 rounded-full overflow-hidden",children:(0,Mt.jsx)("div",{className:"h-full rounded-full ".concat(a>=.8?"bg-green-500":a>=.6?"bg-blue-500":a>=.4?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(Math.max(100*a,5),"%")}})})]}),(0,Mt.jsxs)("div",{className:"space-y-2",children:[t.results.slice(0,i?void 0:2).map(((e,t)=>(0,Mt.jsxs)("div",{className:"bg-gray-50 rounded p-2",children:[(0,Mt.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Mt.jsx)("span",{className:"text-xs font-medium text-gray-700",children:e.source}),(0,Mt.jsxs)("span",{className:"text-xs text-gray-500",children:[Math.round(100*e.relevance),"% match"]})]}),(0,Mt.jsxs)("p",{className:"text-xs text-gray-600 line-clamp-2",children:[e.highlightedText||e.content.substring(0,100),"..."]})]},e.id))),!i&&t.results.length>2&&(0,Mt.jsxs)("button",{className:"text-xs text-blue-600 hover:text-blue-800 flex items-center space-x-1",onClick:e=>{e.stopPropagation(),r(!0)},children:[(0,Mt.jsx)(Ol,{className:"w-3 h-3"}),(0,Mt.jsxs)("span",{children:["+",t.results.length-2," more sources"]})]}),i&&(0,Mt.jsxs)("button",{className:"text-xs text-blue-600 hover:text-blue-800 flex items-center space-x-1",onClick:e=>{e.stopPropagation(),r(!1)},children:[(0,Mt.jsx)(uu,{className:"w-3 h-3"}),(0,Mt.jsx)("span",{children:"Show less"})]})]}),(0,Mt.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-200",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-3 text-xs text-gray-500",children:[(0,Mt.jsxs)("span",{children:["Quality: ",Math.round(t.results.reduce(((e,t)=>e+(t.quality||.5)),0)/t.results.length*100),"%"]}),(0,Mt.jsxs)("span",{children:["Sources: ",t.results.length]})]}),(0,Mt.jsx)(Jl,{className:"w-4 h-4 text-gray-400"})]})]});var l},du=e=>{let{discoveries:t,onDiscoveryClick:n,className:i=""}=e;const[r,a]=(0,s.useState)("all");if(0===t.length)return(0,Mt.jsxs)("div",{className:"text-center text-gray-500 py-8 ".concat(i),children:[(0,Mt.jsx)(lu,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),(0,Mt.jsx)("p",{className:"text-sm",children:"No RAG discoveries yet"}),(0,Mt.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Upload documents and ask questions to see incantation-powered research"})]});const o=[...t].sort(((e,t)=>t.timestamp.getTime()-e.timestamp.getTime())),l=o.reduce(((e,t)=>{const n=t.incantationUsed;return e[n]||(e[n]=[]),e[n].push(t),e}),{}),u=Object.entries(l).map((e=>{let[t,n]=e;const i=n.reduce(((e,t)=>e+t.results.length),0),s=n.reduce(((e,t)=>e+t.results.reduce(((e,t)=>e+(t.quality||.5)),0)/t.results.length),0)/n.length;return{incantation:t,count:n.length,totalSources:i,avgQuality:s}})).sort(((e,t)=>t.count-e.count));return(0,Mt.jsxs)("div",{className:"space-y-4 ".concat(i),children:[(0,Mt.jsxs)("div",{className:"flex border-b border-gray-200",children:[(0,Mt.jsx)("button",{className:"px-4 py-2 text-sm font-medium ".concat("all"===r?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>a("all"),children:"All Discoveries"}),(0,Mt.jsx)("button",{className:"px-4 py-2 text-sm font-medium ".concat("incantations"===r?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>a("incantations"),children:"By Incantation"}),(0,Mt.jsx)("button",{className:"px-4 py-2 text-sm font-medium ".concat("timeline"===r?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>a("timeline"),children:"Timeline"})]}),(0,Mt.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,Mt.jsx)(Ft,{className:"w-4 h-4 text-purple-600"}),(0,Mt.jsx)("h3",{className:"text-sm font-semibold text-purple-900",children:"Research Discovery History"})]}),(0,Mt.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("span",{className:"text-purple-600 font-medium",children:t.length}),(0,Mt.jsx)("span",{className:"text-purple-700",children:" Discoveries"})]}),(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("span",{className:"text-purple-600 font-medium",children:Object.keys(l).length}),(0,Mt.jsx)("span",{className:"text-purple-700",children:" Incantations"})]}),(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("span",{className:"text-purple-600 font-medium",children:t.reduce(((e,t)=>e+t.results.length),0)}),(0,Mt.jsx)("span",{className:"text-purple-700",children:" Sources"})]})]})]}),"all"===r&&(0,Mt.jsx)("div",{className:"space-y-3",children:o.map(((e,t)=>(0,Mt.jsx)(cu,{discovery:e,onClick:()=>null===n||void 0===n?void 0:n(e)},"".concat(e.timestamp.getTime(),"-").concat(t))))}),"incantations"===r&&(0,Mt.jsxs)("div",{className:"space-y-4",children:[(0,Mt.jsx)("div",{className:"grid grid-cols-1 gap-3",children:u.map((e=>{return(0,Mt.jsxs)("div",{className:"border rounded-lg p-3 ".concat((t=e.incantation,{"semantic-search":"bg-blue-100 text-blue-800 border-blue-200","chain-of-thought":"bg-purple-100 text-purple-800 border-purple-200","expert-persona":"bg-green-100 text-green-800 border-green-200","working-backwards":"bg-orange-100 text-orange-800 border-orange-200","assumption-reversal":"bg-pink-100 text-pink-800 border-pink-200"}[t]||"bg-gray-100 text-gray-800 border-gray-200")),children:[(0,Mt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Mt.jsx)(Ft,{className:"w-4 h-4"}),(0,Mt.jsx)("h4",{className:"text-sm font-medium",children:e.incantation.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")})]}),(0,Mt.jsxs)("span",{className:"text-xs font-medium",children:[e.count," discoveries"]})]}),(0,Mt.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("span",{className:"text-gray-500",children:"Sources:"}),(0,Mt.jsx)("span",{className:"font-medium ml-1",children:e.totalSources})]}),(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("span",{className:"text-gray-500",children:"Quality:"}),(0,Mt.jsxs)("span",{className:"font-medium ml-1",children:[Math.round(100*e.avgQuality),"%"]})]})]}),(0,Mt.jsx)("div",{className:"mt-2",children:(0,Mt.jsx)("div",{className:"w-full h-1.5 bg-white bg-opacity-50 rounded-full overflow-hidden",children:(0,Mt.jsx)("div",{className:"h-full rounded-full bg-white bg-opacity-80",style:{width:"".concat(Math.max(100*e.avgQuality,5),"%")}})})})]},e.incantation);var t}))}),Object.entries(l).map((e=>{let[t,i]=e;return(0,Mt.jsxs)("div",{className:"space-y-2",children:[(0,Mt.jsxs)("h4",{className:"text-sm font-medium text-gray-900 flex items-center space-x-2",children:[(0,Mt.jsx)(Ft,{className:"w-3 h-3 text-purple-600"}),(0,Mt.jsx)("span",{children:t.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}),(0,Mt.jsxs)("span",{className:"text-xs text-gray-500",children:["(",i.length,")"]})]}),(0,Mt.jsx)("div",{className:"space-y-2 pl-5",children:i.map(((e,i)=>(0,Mt.jsx)(cu,{discovery:e,onClick:()=>null===n||void 0===n?void 0:n(e)},"".concat(t,"-").concat(i))))})]},t)}))]}),"timeline"===r&&(0,Mt.jsx)("div",{className:"space-y-4",children:(()=>{const e=o.reduce(((e,t)=>{const n=t.timestamp.toLocaleDateString();return e[n]||(e[n]=[]),e[n].push(t),e}),{});return Object.entries(e).map((e=>{let[t,i]=e;return(0,Mt.jsxs)("div",{className:"space-y-2",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Mt.jsx)("div",{className:"h-px bg-gray-300 flex-grow"}),(0,Mt.jsx)("span",{className:"text-xs font-medium text-gray-500",children:t}),(0,Mt.jsx)("div",{className:"h-px bg-gray-300 flex-grow"})]}),(0,Mt.jsx)("div",{className:"space-y-2 pl-4 border-l-2 border-gray-200",children:i.map(((e,t)=>(0,Mt.jsxs)("div",{className:"relative",children:[(0,Mt.jsx)("div",{className:"absolute -left-[25px] top-4 w-4 h-4 rounded-full bg-white border-2 border-purple-500"}),(0,Mt.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),(0,Mt.jsx)(cu,{discovery:e,onClick:()=>null===n||void 0===n?void 0:n(e)})]},t)))})]},t)}))})()})]})};function hu(e,t,n){return e.map(((e,n)=>{const i=e.relevanceScore,s=function(e,t){let n=.7*e;t>=100&&t<=500?n+=.2:t>=50&&(n+=.1);return n+=.1,Math.min(n,1)}(i,e.context.length),r=function(e){var t;let n=.6*(e.relevance||0);const i=(null===(t=e.content)||void 0===t?void 0:t.length)||0;let s=0;i>=50&&i<=300?s=1:i>=20&&i<=500?s=.8:i>=10&&(s=.5);return n+=.2*s,n+=.2*(e.confidence||.5),Math.min(n,1)}({id:"rag-".concat(e.document.id,"-").concat(n),source:e.document.name,type:"rag",content:e.context,relevance:i}),a=function(e,t){if(t&&t.length<200)return t;const n=e.split(/[.!?]+/).filter((e=>e.trim().length>10));if(0===n.length)return e.substring(0,150);return n.reduce(((e,t)=>t.length>e.length?t:e)).trim()}(e.context,e.chunk.content);return{id:"rag-".concat(e.document.id,"-").concat(n),source:e.document.name,type:"rag",content:e.context,relevance:i,timestamp:e.document.uploadedAt,documentId:e.document.id,incantationUsed:t||"semantic-search",highlightedText:a,confidence:s,quality:r,page:e.chunk.startIndex?Math.floor(e.chunk.startIndex/1e3)+1:void 0,excerpt:a||e.context.substring(0,150)}}))}function pu(e,t){const n=[],i=[];let s=0;for(const r of t){const t=r.highlightedText||r.content.substring(0,100);let a=e.toLowerCase().indexOf(t.toLowerCase().substring(0,Math.min(50,t.length)));if(-1===a){const n=fu(t);for(const t of n)if(t.length>=15){const n=e.toLowerCase().indexOf(t.toLowerCase());if(-1!==n){a=n;break}}}if(-1!==a&&a>=s){a>s&&n.push({text:e.substring(s,a),isHighlighted:!1});const o=a+t.length;n.push({text:e.substring(a,Math.min(o,e.length)),isHighlighted:!0,citationId:r.id}),i.push({citationId:r.id,inlineText:e.substring(a,Math.min(o,e.length)),position:a,highlightStart:a,highlightEnd:Math.min(o,e.length)}),s=Math.min(o,e.length)}}return s<e.length&&n.push({text:e.substring(s),isHighlighted:!1}),0===n.length&&n.push({text:e,isHighlighted:!1}),{segments:n,references:i}}function fu(e){const t=[],n=e.split(/[.!?;]+/).map((e=>e.trim())).filter((e=>e.length>0));for(const i of n){const e=i.split(/\s+/);if(e.length>=4&&(t.push(i),e.length>6))for(let n=0;n<=e.length-4;n++){const i=e.slice(n,n+4).join(" ");t.push(i)}}return t}class mu{constructor(){this.patterns=new Map,this.combinations=new Map,this.contextual=new Map,this.initializePatterns(),this.initializeCombinations(),this.initializeContextualMappings()}initializePatterns(){this.addPattern({name:"chain-of-thought",category:"reasoning",template:"Let me think through this step by step:\n\n1. First, I need to {step1}\n2. Then I should {step2}\n3. Finally, {step3}\n\nTherefore, {conclusion}",variables:["step1","step2","step3","conclusion"],examples:[{input:"How do I debug this React component?",output:"Let me think through this step by step:\n\n1. First, I need to identify what the component should do\n2. Then I should check what it's actually doing\n3. Finally, compare the difference and fix the issue",context:"Technical debugging"}],effectiveness:.9}),this.addPattern({name:"stream-of-consciousness",category:"reasoning",template:"I'm thinking about {topic} and {current_thought}... Now I'm considering {next_thought}... This makes me realize {insight}...",variables:["topic","current_thought","next_thought","insight"],examples:[{input:"How should we approach this project?",output:"I'm thinking about this project and how it connects to our broader goals... Now I'm considering what the biggest risks might be... This makes me realize we should start with the riskiest assumptions first...",context:"Strategic planning"}],effectiveness:.8}),this.addPattern({name:"perspective-taking",category:"reasoning",template:"From the perspective of {stakeholder}, this {situation} would {impact}. However, from {other_stakeholder}'s view, {alternative_view}.",variables:["stakeholder","situation","impact","other_stakeholder","alternative_view"],examples:[],effectiveness:.85}),this.addPattern({name:"assumption-reversal",category:"creativity",template:"What if we assumed the opposite of {common_assumption}? If {reversed_assumption} were true, then we could {possibility}.",variables:["common_assumption","reversed_assumption","possibility"],examples:[],effectiveness:.8}),this.addPattern({name:"metaphor-bridge",category:"creativity",template:"This problem is like {metaphor} because {similarity}. If we treat it like {metaphor}, we could {solution_approach}.",variables:["metaphor","similarity","solution_approach"],examples:[],effectiveness:.75}),this.addPattern({name:"worst-case-reversal",category:"creativity",template:"If we wanted this to fail spectacularly, we would {failure_actions}. Therefore, to succeed, we should {success_actions}.",variables:["failure_actions","success_actions"],examples:[],effectiveness:.85}),this.addPattern({name:"pyramid-principle",category:"structure",template:"{main_conclusion}\n\nThis is supported by three key points:\n1. {supporting_point_1}\n2. {supporting_point_2}\n3. {supporting_point_3}\n\nIn detail: {detailed_explanation}",variables:["main_conclusion","supporting_point_1","supporting_point_2","supporting_point_3","detailed_explanation"],examples:[],effectiveness:.9}),this.addPattern({name:"problem-solution-benefit",category:"structure",template:"**Problem:** {problem_statement}\n\n**Solution:** {solution_description}\n\n**Benefits:** {key_benefits}\n\n**Implementation:** {implementation_steps}",variables:["problem_statement","solution_description","key_benefits","implementation_steps"],examples:[],effectiveness:.85}),this.addPattern({name:"progressive-disclosure",category:"structure",template:"Here's the quick answer: {quick_answer}\n\nIf you want more detail: {medium_detail}\n\nFor complete understanding: {full_explanation}",variables:["quick_answer","medium_detail","full_explanation"],examples:[],effectiveness:.8}),this.addPattern({name:"expert-persona",category:"roleplay",template:"As a {expert_type} with {years} years of experience in {domain}, I can tell you that {expert_opinion}. In my experience, {experience_story}.",variables:["expert_type","years","domain","expert_opinion","experience_story"],examples:[],effectiveness:.85}),this.addPattern({name:"socratic-method",category:"roleplay",template:"Let me ask you some questions to help us think through this:\n\n1. What do you think {question_1}?\n2. How might {question_2}?\n3. What would happen if {question_3}?",variables:["question_1","question_2","question_3"],examples:[],effectiveness:.8}),this.addPattern({name:"forced-constraint",category:"constraint",template:"If I could only {constraint} to solve this, I would {constrained_solution}. This constraint actually reveals {insight}.",variables:["constraint","constrained_solution","insight"],examples:[],effectiveness:.75}),this.addPattern({name:"resource-limitation",category:"constraint",template:"Given that we only have {limited_resource}, the most essential elements are {essentials}. Everything else is {nice_to_have}.",variables:["limited_resource","essentials","nice_to_have"],examples:[],effectiveness:.8}),this.addPattern({name:"rubber-duck-debugging",category:"reasoning",template:"Let me explain this code line by line as if to a rubber duck:\n\nLine {line_number}: {explanation}\nThis should {expected_behavior}\nBut instead {actual_behavior}\nSo the issue is likely {hypothesis}",variables:["line_number","explanation","expected_behavior","actual_behavior","hypothesis"],examples:[],effectiveness:.9}),this.addPattern({name:"code-review-perspective",category:"reasoning",template:"If I were reviewing this code, I would look for:\n1. {code_aspect_1}\n2. {code_aspect_2}\n3. {code_aspect_3}\n\nThe biggest concern would be {main_concern} because {reasoning}.",variables:["code_aspect_1","code_aspect_2","code_aspect_3","main_concern","reasoning"],examples:[],effectiveness:.85}),this.addPattern({name:"architecture-first",category:"structure",template:"Before writing any code, let's design the architecture:\n\n**Components:** {components}\n**Data Flow:** {data_flow}\n**Interfaces:** {interfaces}\n**Dependencies:** {dependencies}",variables:["components","data_flow","interfaces","dependencies"],examples:[],effectiveness:.9}),this.addPattern({name:"working-backwards",category:"reasoning",template:"Starting from the desired outcome {desired_outcome}, I need to work backwards:\n\nTo achieve {desired_outcome}, I need {prerequisite_1}\nTo get {prerequisite_1}, I need {prerequisite_2}\nTo get {prerequisite_2}, I need {starting_point}",variables:["desired_outcome","prerequisite_1","prerequisite_2","starting_point"],examples:[],effectiveness:.85}),this.addPattern({name:"mvp-thinking",category:"constraint",template:"The absolute minimum viable version of {solution} would be {mvp_description}. This proves {core_hypothesis}. We can add {enhancements} later.",variables:["solution","mvp_description","core_hypothesis","enhancements"],examples:[],effectiveness:.8})}initializeCombinations(){this.addCombination({name:"deep-technical-analysis",patterns:["chain-of-thought","rubber-duck-debugging","code-review-perspective"],order:"sequential",useCase:"Complex debugging and code analysis"}),this.addCombination({name:"strategic-planning",patterns:["working-backwards","perspective-taking","problem-solution-benefit"],order:"layered",useCase:"High-level project planning and strategy"}),this.addCombination({name:"creative-problem-solving",patterns:["assumption-reversal","metaphor-bridge","worst-case-reversal"],order:"conditional",useCase:"Breaking through creative blocks"}),this.addCombination({name:"architecture-design",patterns:["architecture-first","mvp-thinking","forced-constraint"],order:"sequential",useCase:"Software architecture and system design"})}initializeContextualMappings(){this.addContextualMapping({context:"code-debugging",recommendedPatterns:["rubber-duck-debugging","chain-of-thought","code-review-perspective"],avoidPatterns:["metaphor-bridge","worst-case-reversal"]}),this.addContextualMapping({context:"project-planning",recommendedPatterns:["working-backwards","perspective-taking","problem-solution-benefit","mvp-thinking"],avoidPatterns:["rubber-duck-debugging"]}),this.addContextualMapping({context:"creative-brainstorming",recommendedPatterns:["assumption-reversal","metaphor-bridge","worst-case-reversal"],avoidPatterns:["chain-of-thought","pyramid-principle"]}),this.addContextualMapping({context:"technical-explanation",recommendedPatterns:["progressive-disclosure","pyramid-principle","architecture-first"],avoidPatterns:["stream-of-consciousness","assumption-reversal"]}),this.addContextualMapping({context:"learning-conversation",recommendedPatterns:["socratic-method","progressive-disclosure","expert-persona"],avoidPatterns:["forced-constraint","worst-case-reversal"]})}addPattern(e){this.patterns.set(e.name,e)}addCombination(e){this.combinations.set(e.name,e)}addContextualMapping(e){this.contextual.set(e.context,e)}getPattern(e){return this.patterns.get(e)||null}getCombination(e){return this.combinations.get(e)||null}getContextualMapping(e){return this.contextual.get(e)||null}recommendPatterns(e,t){const n=this.getContextualMapping(e);if(n)return n.recommendedPatterns;const i=t.toLowerCase(),s=[];return(i.includes("debug")||i.includes("error")||i.includes("bug"))&&s.push("rubber-duck-debugging","chain-of-thought"),(i.includes("plan")||i.includes("strategy")||i.includes("approach"))&&s.push("working-backwards","problem-solution-benefit"),(i.includes("creative")||i.includes("brainstorm")||i.includes("idea"))&&s.push("assumption-reversal","metaphor-bridge"),(i.includes("explain")||i.includes("understand")||i.includes("learn"))&&s.push("progressive-disclosure","socratic-method"),s.length>0?s:["chain-of-thought"]}enhancePrompt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e;return t.forEach((e=>{const t=this.getPattern(e);if(t){let e=t.template;t.variables.forEach((t=>{n[t]&&(e=e.replace("{".concat(t,"}"),n[t]))})),i+="\n\n## ".concat(t.name.replace(/-/g," ").toUpperCase(),"\n").concat(e)}})),i}getPatternsByCategory(e){return Array.from(this.patterns.values()).filter((t=>t.category===e))}exportLibrary(){return{patterns:Array.from(this.patterns.values()),combinations:Array.from(this.combinations.values()),contextual:Array.from(this.contextual.values())}}importLibrary(e){e.patterns.forEach((e=>this.addPattern(e))),e.combinations.forEach((e=>this.addCombination(e))),e.contextual.forEach((e=>this.addContextualMapping(e)))}}new mu;const gu=Et("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),vu=Et("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),yu=e=>{let{filePath:t,originalCode:n,suggestedCode:i,description:r,onApprove:a,onDiscard:o,language:l="typescript"}=e;const[u,c]=(0,s.useState)(!1),[d,h]=(0,s.useState)(!1);return(0,Mt.jsxs)("div",{className:"border border-blue-200 rounded-lg bg-blue-50/30 p-4 my-4",children:[(0,Mt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Mt.jsx)(Kl,{className:"w-4 h-4 text-blue-600"}),(0,Mt.jsx)("span",{className:"font-medium text-blue-900",children:r})]}),(0,Mt.jsx)("div",{className:"flex items-center space-x-2",children:(0,Mt.jsxs)("button",{onClick:()=>c(!u),className:"flex items-center space-x-1 px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50 transition-colors",children:[u?(0,Mt.jsx)(gu,{className:"w-3 h-3"}):(0,Mt.jsx)(vu,{className:"w-3 h-3"}),(0,Mt.jsxs)("span",{children:[u?"Hide":"View"," Diff"]})]})})]}),(0,Mt.jsx)("div",{className:"text-sm text-gray-600 font-mono bg-white px-2 py-1 rounded border mb-3",children:t}),u&&(0,Mt.jsx)("div",{className:"mb-4",children:(()=>{if(!n)return(0,Mt.jsxs)("div",{className:"space-y-2",children:[(0,Mt.jsxs)("div",{className:"text-sm font-medium text-green-700 bg-green-50 px-2 py-1 rounded",children:["New File: ",t]}),(0,Mt.jsx)("pre",{className:"bg-green-50 border-l-4 border-green-400 p-3 text-sm overflow-x-auto",children:(0,Mt.jsx)("code",{className:"text-green-800",children:i})})]});const e=n.split("\n"),s=i.split("\n");Math.max(e.length,s.length);return(0,Mt.jsxs)("div",{className:"space-y-2",children:[(0,Mt.jsxs)("div",{className:"text-sm font-medium text-blue-700 bg-blue-50 px-2 py-1 rounded",children:["Changes to: ",t]}),(0,Mt.jsx)("div",{className:"bg-gray-50 border rounded-lg overflow-hidden",children:(0,Mt.jsxs)("div",{className:"grid grid-cols-2 divide-x",children:[(0,Mt.jsxs)("div",{className:"p-3",children:[(0,Mt.jsx)("div",{className:"text-xs font-medium text-red-600 mb-2",children:"Before"}),(0,Mt.jsx)("pre",{className:"text-sm overflow-x-auto",children:(0,Mt.jsx)("code",{className:"text-red-700",children:e.map(((e,t)=>(0,Mt.jsxs)("div",{className:"hover:bg-red-100",children:[(0,Mt.jsx)("span",{className:"text-gray-400 mr-2",children:t+1}),e]},t)))})})]}),(0,Mt.jsxs)("div",{className:"p-3",children:[(0,Mt.jsx)("div",{className:"text-xs font-medium text-green-600 mb-2",children:"After"}),(0,Mt.jsx)("pre",{className:"text-sm overflow-x-auto",children:(0,Mt.jsx)("code",{className:"text-green-700",children:s.map(((e,t)=>(0,Mt.jsxs)("div",{className:"hover:bg-green-100",children:[(0,Mt.jsx)("span",{className:"text-gray-400 mr-2",children:t+1}),e]},t)))})})]})]})})]})})()}),!u&&(0,Mt.jsx)("div",{className:"mb-4",children:(0,Mt.jsx)("pre",{className:"bg-white border rounded p-3 text-sm overflow-x-auto max-h-40",children:(0,Mt.jsx)("code",{className:"text-gray-700",children:i.length>500?"".concat(i.substring(0,500),"..."):i})})}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Mt.jsxs)("button",{onClick:async()=>{h(!0);try{await a(t,i)}finally{h(!1)}},disabled:d,className:"flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ".concat(d?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"),children:[(0,Mt.jsx)(zl,{className:"w-4 h-4"}),(0,Mt.jsx)("span",{children:d?"Applying...":"Apply Changes"})]}),(0,Mt.jsxs)("button",{onClick:o,disabled:d,className:"flex items-center space-x-2 px-4 py-2 border border-red-200 text-red-600 rounded-lg hover:bg-red-50 transition-colors",children:[(0,Mt.jsx)(Ll,{className:"w-4 h-4"}),(0,Mt.jsx)("span",{children:"Discard"})]}),(0,Mt.jsx)("div",{className:"text-xs text-gray-500",children:n?"Modify existing file":"Create new file"})]})]})},Du=Et("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),xu=Et("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),bu=Et("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),wu=e=>{let{command:t,description:n,workingDirectory:i,onExecute:r,variant:a="primary"}=e;const[o,l]=(0,s.useState)(!1),[u,c]=(0,s.useState)(null),[d,h]=(0,s.useState)(!1),p=(()=>{switch(a){case"danger":return{button:"bg-red-600 text-white hover:bg-red-700 border-red-600",border:"border-red-200 bg-red-50/30"};case"secondary":return{button:"bg-gray-600 text-white hover:bg-gray-700 border-gray-600",border:"border-gray-200 bg-gray-50/30"};default:return{button:"bg-blue-600 text-white hover:bg-blue-700 border-blue-600",border:"border-blue-200 bg-blue-50/30"}}})();return(0,Mt.jsxs)("div",{className:"border rounded-lg p-4 my-3 ".concat(p.border),children:[(0,Mt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Mt.jsx)(Du,{className:"w-4 h-4 text-blue-600"}),(0,Mt.jsx)("span",{className:"font-medium text-gray-900",children:n})]}),(0,Mt.jsxs)("button",{onClick:async()=>{try{await navigator.clipboard.writeText(t),h(!0),setTimeout((()=>h(!1)),2e3)}catch(e){console.error("Failed to copy command:",e)}},className:"flex items-center space-x-1 px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50 transition-colors",title:"Copy command",children:[d?(0,Mt.jsx)(zl,{className:"w-3 h-3 text-green-600"}):(0,Mt.jsx)(xu,{className:"w-3 h-3"}),(0,Mt.jsx)("span",{children:d?"Copied!":"Copy"})]})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("div",{className:"bg-gray-900 text-green-400 rounded-lg p-3 font-mono text-sm overflow-x-auto",children:(0,Mt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Mt.jsx)("span",{className:"text-blue-400",children:"$"}),(0,Mt.jsx)("span",{children:t})]})}),i&&(0,Mt.jsxs)("div",{className:"text-xs text-gray-500 mt-1 font-mono",children:["Working directory: ",i]})]}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Mt.jsxs)("button",{onClick:async()=>{l(!0),c(null);try{const e=await r(t,i);c(e)}catch(e){c({success:!1,output:"",error:e instanceof Error?e.message:String(e)})}finally{l(!1)}},disabled:o,className:"flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ".concat(o?"bg-gray-100 text-gray-400 cursor-not-allowed":"".concat(p.button)),children:[(0,Mt.jsx)(bu,{className:"w-4 h-4 ".concat(o?"animate-pulse":"")}),(0,Mt.jsx)("span",{children:o?"Running...":"Run Incantation"})]}),u&&(0,Mt.jsxs)("div",{className:"flex items-center space-x-1 text-sm ".concat(u.success?"text-green-600":"text-red-600"),children:[u.success?(0,Mt.jsx)(zl,{className:"w-4 h-4"}):(0,Mt.jsx)(bl,{className:"w-4 h-4"}),(0,Mt.jsx)("span",{children:u.success?"Success":"Failed"})]})]}),u&&(u.output||u.error)&&(0,Mt.jsxs)("div",{className:"mt-4",children:[(0,Mt.jsx)("div",{className:"text-xs font-medium text-gray-600 mb-1",children:"Output:"}),(0,Mt.jsx)("div",{className:"bg-gray-900 rounded-lg p-3 text-sm font-mono max-h-40 overflow-y-auto ".concat(u.success?"text-green-400":"text-red-400"),children:(0,Mt.jsx)("pre",{className:"whitespace-pre-wrap",children:u.error||u.output})})]})]})},Au=e=>{var t;let{conversation:n,template:i,conversationManager:r,modelManager:a,onConversationUpdate:l}=e;const[u,c]=(0,s.useState)(""),[d,h]=(0,s.useState)(!1),[p,f]=(0,s.useState)((()=>{try{const e=localStorage.getItem("pdfs-".concat(n.id));return e?JSON.parse(e):[]}catch(e){return console.warn("Failed to load PDFs from localStorage:",e),[]}})),[m,g]=(0,s.useState)(!1),[v,y]=(0,s.useState)(""),[D]=(0,s.useState)((()=>new cl)),[x,b]=(0,s.useState)(!1),[w,A]=(0,s.useState)({isListening:!1,isRecording:!1,isSpeaking:!1,error:null}),[C,E]=(0,s.useState)(!1),[F,k]=(0,s.useState)([]),[S,_]=(0,s.useState)(i.modelId),[N,M]=(0,s.useState)(!1),[T,B]=(0,s.useState)("silky-smooth"),[I,j]=(0,s.useState)([]),[P,L]=(0,s.useState)([]),[R]=(0,s.useState)((()=>new mu)),[O,z]=(0,s.useState)("/Users/danielennis/ai-apps/rate limit message"),[W,U]=(0,s.useState)(""),H=(0,s.useRef)(null),V=(0,s.useMemo)((()=>new ol),[]),G=(0,s.useRef)(null),q=(0,s.useRef)(null),K=(0,s.useRef)(null),X=!{NODE_ENV:"production",PUBLIC_URL:"/citations",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ENABLE_IMAGE_GENERATION:"false",REACT_APP_ENABLE_CODE_EXECUTION:"false",REACT_APP_ENVIRONMENT:"production",REACT_APP_DEFAULT_MODEL:"gemini-2.0-flash",REACT_APP_ENABLE_SEARCH_GROUNDING:"false"}.REACT_APP_GEMINI_API_KEY&&!{NODE_ENV:"production",PUBLIC_URL:"/citations",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ENABLE_IMAGE_GENERATION:"false",REACT_APP_ENABLE_CODE_EXECUTION:"false",REACT_APP_ENVIRONMENT:"production",REACT_APP_DEFAULT_MODEL:"gemini-2.0-flash",REACT_APP_ENABLE_SEARCH_GROUNDING:"false"}.REACT_APP_OPENAI_API_KEY;(0,s.useEffect)((()=>{"virtual-avatar-builder"===i.id&&(G.current=new fl({model:"enhanced-system"}),console.log("\ud83c\udfad Local TTS Service initialized for Virtual Avatar Builder"),G.current.initialize().catch((e=>{console.warn("\u26a0\ufe0f Local TTS initialization failed, will use browser TTS:",e)}))),G.current||(G.current=new fl({model:"enhanced-system"}),G.current.initialize().catch((e=>{console.warn("\u26a0\ufe0f Local TTS initialization failed, will use browser TTS:",e)})));const e=((e,t)=>{const n={"michael-crow":"michael-crow","elizabeth-reilley":"elizabeth-reilley",zohair:"zohair-developer","jennifer-werner":"jennifer-tutor"},i=t.toLowerCase();for(const[s,r]of Object.entries(n))if(i.includes(s.replace("-"," ")))return r;return"llama-local"===e||e.includes("llama"),"silky-smooth"})(i.id,i.persona);if(e!==T&&(B(e),console.log("\ud83c\udfad Auto-selected voice: ".concat(e," for ").concat(i.persona))),"webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;q.current=new e,q.current.continuous=!1,q.current.interimResults=!1,q.current.lang="en-US",q.current.onstart=()=>{A((e=>(0,o.A)((0,o.A)({},e),{},{isListening:!0,isRecording:!0,error:null})))},q.current.onresult=e=>{const t=e.results[0][0].transcript;c(t),A((e=>(0,o.A)((0,o.A)({},e),{},{isListening:!1,isRecording:!1})))},q.current.onerror=e=>{A((t=>(0,o.A)((0,o.A)({},t),{},{isListening:!1,isRecording:!1,error:"Voice recognition error: ".concat(e.error)})))},q.current.onend=()=>{A((e=>(0,o.A)((0,o.A)({},e),{},{isListening:!1,isRecording:!1})))}}if("speechSynthesis"in window){K.current=window.speechSynthesis;const e=()=>{const e=K.current.getVoices(),t=e.find((e=>e.lang.startsWith("en")))||e[0];t&&U(t.name)};e(),K.current.onvoiceschanged=e}E(!!q.current&&!!K.current)}),[T,i.id,i.persona]);const Y=e=>{const t=(0,o.A)((0,o.A)({},e),{},{id:Date.now().toString()});k((e=>[...e,t]))},Q=e=>{k((t=>t.filter((t=>t.id!==e))))},$=e=>{var t;_(e),Y({type:"info",title:"Model Switched",message:"Now using ".concat((null===(t=a.getAllModels().find((t=>t.id===e)))||void 0===t?void 0:t.name)||e),duration:3e3})};(0,s.useEffect)((()=>{J()}),[n.messages]),(0,s.useEffect)((()=>{try{localStorage.setItem("pdfs-".concat(n.id),JSON.stringify(p)),console.log("\ud83d\udcbe Saved ".concat(p.length," PDFs to localStorage for conversation ").concat(n.id))}catch(e){console.warn("Failed to save PDFs to localStorage:",e)}}),[p,n.id]),(0,s.useEffect)((()=>{if(p.length>0){console.log("\ud83d\udcc4 Loading ".concat(p.length," PDFs into RAG processor")),p.forEach((e=>{if(!D.getDocuments().find((t=>t.id===e.id))){const t=new File([e.content],e.name,{type:"application/pdf"});D.processFile(t).catch((t=>{console.warn("Failed to re-process PDF ".concat(e.name,":"),t)}))}}));const e=p.map((e=>e.content)).join("\n\n");y(e),console.log("\ud83d\udcda RAG processor loaded with ".concat(D.getDocuments().length," documents"))}}),[]),(0,s.useEffect)((()=>{const e=new Date,t=new Date(e.getTime()-6e4),i=n.messages.filter((e=>"user"===e.role&&e.timestamp>t)).length;b(i>=15)}),[n.messages]);const J=()=>{var e;null===(e=H.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},Z=async(e,t)=>{try{const n=await fetch("http://localhost:3001/api/files/apply-changes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:e,content:t,directory:O,backup:!0})}),i=await n.json();if(!i.success)throw new Error(i.error||"Failed to apply changes");console.log("\u2705 Applied changes to ".concat(e))}catch(n){console.error("Failed to apply changes:",n),alert("Failed to apply changes: ".concat(n instanceof Error?n.message:String(n)))}},ee=()=>{console.log("\ud83d\udcad Changes discarded")},te=async(e,t)=>{try{const n=await fetch("http://localhost:3001/api/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:e,cwd:t||O})}),i=await n.json();return{success:i.success,output:i.stdout||i.stderr||"Command completed",error:i.success?void 0:i.stderr}}catch(n){return{success:!1,output:"",error:n instanceof Error?n.message:String(n)}}},ne=e=>{const t=/```suggestion:([^\n]+)\n([\s\S]*?)```/g,n=/```incantation:([^\n]+)\n([^\n]+)```/g;let i=0;const s=[];let r;for(;null!==(r=t.exec(e));){r.index>i&&s.push((0,Mt.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,Mt.jsx)(na,{children:e.slice(i,r.index)})},"text-".concat(i)));const t=r[1],n=r[2];s.push((0,Mt.jsx)(yu,{filePath:t,suggestedCode:n,description:"Update ".concat(t),onApprove:Z,onDiscard:ee},"suggestion-".concat(r.index))),i=r.index+r[0].length}for(n.lastIndex=0;null!==(r=n.exec(e));){r.index>i&&s.push((0,Mt.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,Mt.jsx)(na,{children:e.slice(i,r.index)})},"text-".concat(i)));const t=r[1],n=r[2];s.push((0,Mt.jsx)(wu,{command:n,description:t,workingDirectory:O,onExecute:te},"incantation-".concat(r.index))),i=r.index+r[0].length}return i<e.length&&s.push((0,Mt.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,Mt.jsx)(na,{children:e.slice(i)})},"text-".concat(i))),0===s.length?(0,Mt.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,Mt.jsx)(na,{children:e})}):(0,Mt.jsx)("div",{className:"space-y-2",children:s})};return(0,Mt.jsxs)("div",{className:"flex flex-col h-full bg-gradient-to-br from-gray-50 to-white",children:[X&&(0,Mt.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-4 shadow-md",children:(0,Mt.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Mt.jsx)("div",{className:"flex-shrink-0",children:(0,Mt.jsx)("svg",{className:"h-6 w-6 text-blue-200",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Mt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Mt.jsxs)("div",{className:"flex-1",children:[(0,Mt.jsx)("h3",{className:"text-sm font-semibold",children:"\ud83d\ude80 Demo Mode - GitHub Pages Deployment"}),(0,Mt.jsxs)("p",{className:"text-xs text-blue-100 mt-1",children:["This is a public demo without API keys for security.",(0,Mt.jsx)("strong",{children:" Only local Llama models are available."}),"To access OpenAI/Gemini models, clone this repo and add your API keys locally."]}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs",children:[(0,Mt.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,Mt.jsx)("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),(0,Mt.jsx)("span",{children:"Local Llama Models"})]}),(0,Mt.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,Mt.jsx)("span",{className:"w-2 h-2 bg-gray-400 rounded-full"}),(0,Mt.jsx)("span",{children:"API Models (Requires Keys)"})]})]})]})]})}),(0,Mt.jsx)(Rl,{notifications:F,onDismiss:Q}),(0,Mt.jsxs)("div",{className:"flex-shrink-0 p-4 border-b border-gray-200 bg-white",children:[(0,Mt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-3",children:[i.icon.startsWith("http")?(0,Mt.jsx)("img",{src:i.icon,alt:i.persona,className:"w-10 h-10 rounded-full border-2 border-gray-200 object-cover"}):(0,Mt.jsx)("span",{className:"text-2xl",children:i.icon}),(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:i.persona}),(0,Mt.jsx)("p",{className:"text-sm text-gray-600",children:i.description})]})]}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Mt.jsx)(kl,{}),(0,Mt.jsx)(Hl,{models:a.getAllModels().filter((e=>"online"===e.status)),currentModelId:S,onModelSwitch:$,compact:!0})]})]}),w.error&&(0,Mt.jsx)("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-600",children:w.error})]}),(0,Mt.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===n.messages.length?"local-environment-builder"===i.id?(0,Mt.jsx)(yl,{currentWorkingDirectory:"/Users/danielennis/ai-apps/rate limit message"}):(0,Mt.jsxs)("div",{className:"text-center py-8",children:[(0,Mt.jsx)("div",{className:"text-gray-400 mb-4",children:i.icon.startsWith("http")?(0,Mt.jsx)("img",{src:i.icon,alt:i.persona,className:"w-20 h-20 rounded-full border-2 border-gray-200 object-cover mx-auto"}):(0,Mt.jsx)("span",{className:"text-4xl",children:i.icon})}),(0,Mt.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["Welcome to ",i.name]}),(0,Mt.jsx)("p",{className:"text-gray-600 mb-6",children:i.description}),(0,Mt.jsxs)("div",{className:"space-y-2",children:[(0,Mt.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Try these questions:"}),(0,Mt.jsx)("div",{className:"grid gap-2 max-w-2xl mx-auto",children:i.suggestedQuestions.slice(0,3).map(((e,t)=>(0,Mt.jsx)("button",{onClick:()=>(e=>{c(e)})(e),className:"p-3 text-left bg-white border border-gray-200 rounded-lg hover:bg-gray-50 text-sm",children:e},t)))})]})]}):n.messages.map((e=>{var t,s;return(0,Mt.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,Mt.jsxs)("div",{className:"max-w-3xl px-4 py-2 rounded-lg ".concat("user"===e.role?"bg-[#FFC627] text-[#191919]":"bg-gray-100 text-gray-900"),children:[(0,Mt.jsx)("div",{className:"prose prose-sm max-w-none prose-headings:text-current prose-headings:font-semibold prose-h1:text-lg prose-h2:text-base prose-h3:text-sm prose-p:text-current prose-p:leading-relaxed prose-p:mb-2 prose-strong:text-current prose-strong:font-semibold prose-em:text-current prose-ul:text-current prose-ol:text-current prose-li:text-current prose-li:marker:text-current prose-li:mb-1 prose-code:text-current prose-code:bg-black prose-code:bg-opacity-10 prose-code:px-1 prose-code:rounded prose-code:text-sm prose-pre:bg-black prose-pre:bg-opacity-5 prose-pre:text-current prose-pre:text-sm prose-blockquote:text-current prose-blockquote:border-l-current prose-blockquote:border-opacity-30 prose-hr:border-current prose-hr:border-opacity-20 [&>*:first-child]:mt-0 [&>*:last-child]:mb-0",children:"assistant"===e.role&&e.citations&&e.citations.length>0?(0,Mt.jsx)("div",{children:(()=>{const{segments:t}=pu(e.content,e.citations,P);return(0,Mt.jsx)(ou,{segments:t,citations:e.citations,discoveries:P,onCitationClick:e=>{console.log("Citation clicked:",e)}})})()}):"user"===e.role?(0,Mt.jsx)(na,{remarkPlugins:[Jo],components:{p:e=>{let{children:t}=e;return(0,Mt.jsx)("div",{className:"mb-2",children:t})},h1:e=>{let{children:t}=e;return(0,Mt.jsx)("h1",{className:"text-lg font-semibold mb-2",children:t})},h2:e=>{let{children:t}=e;return(0,Mt.jsx)("h2",{className:"text-base font-semibold mb-2",children:t})},h3:e=>{let{children:t}=e;return(0,Mt.jsx)("h3",{className:"text-sm font-semibold mb-1",children:t})},strong:e=>{let{children:t}=e;return String(t).startsWith("[Source:")?(0,Mt.jsx)("span",{className:"inline-block mt-2 px-2 py-1 bg-black bg-opacity-10 rounded-md text-xs font-medium border-l-2 border-current border-opacity-30",children:t}):(0,Mt.jsx)("strong",{children:t})}},children:e.content}):ne(e.content)}),(0,Mt.jsxs)("div",{className:"text-xs mt-1 ".concat("user"===e.role?"text-gray-700":"text-gray-500"),children:[(s=e.timestamp,s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),e.tokens&&" \u2022 ".concat(e.tokens," tokens"),e.modelUsed&&" \u2022 ".concat(e.modelUsed)]}),"assistant"===e.role&&e.content&&(0,Mt.jsx)("button",{onClick:()=>async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.trim())return;const n=vl();n.stopSpeaking();try{var s;A((e=>(0,o.A)((0,o.A)({},e),{},{isSpeaking:!0,error:null})));const c=n.getStatus();let d;if(console.log("\ud83d\udd0a TTS Status:",c),"browser"===T){const s={preferredVoice:"auto",fallbackVoice:W,forceMode:"browser",speed:1};t?(console.log("\ud83c\udf99\ufe0f ".concat(i.persona,": Speaking AI response with browser voice...")),d=await n.speak(e,s)):(console.log("\ud83c\udf99\ufe0f ".concat(i.persona,": Speaking user feedback with browser voice...")),d=await n.speak(e,s))}else{console.log("\ud83c\udf99\ufe0f ".concat(i.persona,": Speaking with ").concat(T," voice...")),console.log("\ud83d\udd0a Enhanced TTS Available: ".concat(c.barkAvailable,", Initializing: ").concat(c.isInitializing));const t=G.current;if(console.log("\ud83c\udfad Voice Selection Debug: ".concat(T)),console.log("\ud83d\udd0a Enhanced TTS Status: available=".concat(c.barkAvailable,", initializing=").concat(c.isInitializing)),t&&c.barkAvailable)try{console.log("\ud83c\udfaf Calling generateSpeech with voice profile: ".concat(T));const n=await t.generateSpeech(e,T);console.log("\ud83c\udfb5 Generated audio with: ".concat(n.metadata.voiceId," (").concat(n.metadata.model,")"));const i=T.replace(/-/g," ").replace(/\b\w/g,(e=>e.toUpperCase()));if("enhanced-system"===n.metadata.model?Y({title:"Voice Selection",message:"\ud83c\udfb5 Using Enhanced System TTS: ".concat(i," (").concat(n.metadata.voiceId,")"),type:"success",duration:3e3}):n.metadata.model.includes("enhanced")?Y({title:"Voice Selection",message:"\ud83c\udfad Using enhanced ".concat(i," voice simulation"),type:"info",duration:3e3}):n.metadata.model.includes("fallback")?Y({title:"Voice Selection",message:"\ud83d\udd27 Using fallback ".concat(i," voice"),type:"warning",duration:3e3}):Y({title:"Voice Selection",message:"\ud83d\udd0a Using ".concat(i," voice"),type:"success",duration:2e3}),!(n.audioUrl&&n.audioBlob&&n.audioBlob.size>0))throw console.error("\u274c Invalid audio data - missing URL or empty blob"),new Error("Invalid audio data generated");{const e=new Audio(n.audioUrl);e.onerror=e=>{console.error("\ud83d\udea8 Audio playback failed:",e),Y({type:"error",title:"Audio Error",message:"Failed to play generated audio",duration:3e3})},e.onloadeddata=()=>{console.log("\u2705 Audio loaded successfully, duration:",e.duration)};try{await e.play(),console.log("\ud83c\udfb5 Audio playback started successfully")}catch(l){console.error("\ud83d\udea8 Audio play() failed:",l),Y({type:"error",title:"Playback Error",message:"Could not start audio playback",duration:3e3})}}d={success:!0,audioUrl:n.audioUrl,audioBlob:n.audioBlob,method:"enhanced-system",metadata:{duration:n.metadata.duration,model:"enhanced-system",voiceId:n.metadata.voiceId}}}catch(u){console.warn("\ud83c\udfb5 Enhanced System TTS failed, using fallback:",u),d=await n.speak(e,{preferredVoice:"auto",forceMode:"auto",speed:1})}else console.warn("\ud83d\udeab Enhanced TTS not available: localTTS=".concat(!!t,", enhancedAvailable=").concat(c.barkAvailable)),d=await n.speak(e,{preferredVoice:"auto",forceMode:"auto",speed:1})}var r;if("enhanced-system"===d.method)console.log("\ud83c\udfb5 Using high-quality Enhanced System TTS with ".concat(null===(r=d.metadata)||void 0===r?void 0:r.voiceId," voice")),Y({type:"success",title:"Enhanced Voice",message:"Using Enhanced ".concat(T," voice"),duration:2e3});else if("browser"===d.method){var a;console.log("\ud83d\udd0a Using browser TTS with ".concat(null===(a=d.metadata)||void 0===a?void 0:a.voiceId," voice")),Y({type:"info",title:"Browser Voice",message:"Using ".concat(W||"system"," voice"),duration:2e3})}else console.warn("\u26a0\ufe0f TTS failed:",d.error),Y({type:"error",title:"Voice Error",message:d.error||"TTS failed",duration:3e3});if(!d.success)throw new Error(d.error||"TTS failed");const h=null!==(s=d.metadata)&&void 0!==s&&s.duration?1e3*d.metadata.duration:100*e.length;setTimeout((()=>{A((e=>(0,o.A)((0,o.A)({},e),{},{isSpeaking:!1}))),console.log("\u2705 ".concat(i.persona,": Finished speaking"))}),h)}catch(u){console.error("\ud83d\udea8 Enhanced TTS failed:",u),A((e=>(0,o.A)((0,o.A)({},e),{},{isSpeaking:!1,error:"Voice synthesis failed"}))),Y({type:"error",title:"Voice Error",message:"Voice synthesis failed",duration:3e3})}}(e.content,!0),disabled:w.isSpeaking||!e.content,className:"mt-1 text-xs text-[#FFC627] hover:text-yellow-600 disabled:opacity-50 disabled:text-gray-400",title:"Speak this response",children:w.isSpeaking?"\u23f8\ufe0f Speaking...":"\ud83d\udd0a Listen"}),"assistant"===e.role&&e.citations&&e.citations.length>0&&(0,Mt.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,Mt.jsx)(tu,{citations:e.citations,showRelevanceScores:!0,maxPreviewLength:150,className:"max-w-none"})}),"assistant"===e.role&&(null===(t=n.messages[n.messages.length-1])||void 0===t?void 0:t.id)===e.id&&P.length>0&&(0,Mt.jsx)("div",{className:"mt-4 pt-4 border-t border-purple-200",children:(0,Mt.jsx)(du,{discoveries:P,onDiscoveryClick:e=>{console.log("Discovery clicked:",e)},className:"max-w-none"})})]})},e.id)})),(0,Mt.jsx)(ql,{isThinking:d&&n.messages.length>0&&""===n.messages[n.messages.length-1].content,modelName:(null===(t=a.getAllModels().find((e=>e.id===S)))||void 0===t?void 0:t.name)||S,canStream:S.includes("gpt")||S.includes("gemini")}),(0,Mt.jsx)("div",{ref:H})]}),(0,Mt.jsx)("div",{className:"flex-shrink-0 p-4 border-t border-gray-200 bg-white",children:(0,Mt.jsx)(Il,{conversation:n,template:i,currentInput:u,currentModelId:S,ragContext:v,ragDocuments:D.getDocuments()})}),(0,Mt.jsxs)("div",{className:"flex-shrink-0 p-4 border-t border-gray-200 bg-white",children:[(0,Mt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!u.trim()||d||x)return;const t={id:Date.now().toString(),role:"user",content:u.trim(),timestamp:new Date,tokens:ul(u.trim())};r.addMessage(n.id,t);const s=u.trim();c(""),h(!0),l();try{const e=n.messages.slice(-10).map((e=>({role:e.role,content:e.content})));e.push({role:"user",content:s});let t="";const u=N&&D.getDocuments().length>0&&(e=>{const t=e.trim().toLowerCase();return!(t.length<3)&&![/^(hi|hey|hello|yo)$/,/^(thanks?|thank you|ty)$/,/^(ok|okay|yes|no|sure)$/,/^(bye|goodbye|cya|see ya)$/,/^(how are you|what's up|wassup)$/,/^(good|great|nice|cool)$/].some((e=>e.test(t)))})(s);if(u){console.log('\ud83d\udd0d RAG Search: Looking for "'.concat(s,'" in ').concat(D.getDocuments().length," documents"));const e=R.recommendPatterns("document-search",s)[0]||"semantic-search";console.log("\ud83c\udfaf Using incantation: ".concat(e));const n=D.searchDocuments({query:s,maxResults:5,minRelevanceScore:.05});if(console.log("\ud83d\udd0d RAG Results: Found ".concat(n.length," relevant chunks")),n.forEach(((e,t)=>{console.log("  ".concat(t+1,". ").concat(e.document.name," (").concat((100*e.relevanceScore).toFixed(1),"%): ").concat(e.context.substring(0,100),"..."))})),n.length>0){const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return e.filter((e=>(e.quality||0)>=t)).sort(((e,t)=>(t.quality||0)-(e.quality||0))).slice(0,n)}(hu(n,e),.2,5);j(i);const r=(C=i,E=t,{query:s,incantationUsed:e,timestamp:new Date,results:C,confidence:C.length>0?C.reduce(((e,t)=>e+(t.confidence||0)),0)/C.length:0,context:E});L((e=>[...e,r])),t=n.map(((e,t)=>{const n=" (".concat((100*e.relevanceScore).toFixed(0),"% relevant)"),i="paragraph"!==e.chunk.type?" - ".concat(e.chunk.type):"";return"**[Source: ".concat(e.document.name).concat(i).concat(n,"]**\n\n").concat(e.context)})).join("\n\n---\n\n"),console.log("\ud83d\udd0d RAG Context Length: ".concat(t.length," characters")),console.log("\ud83d\udd17 Generated ".concat(i.length," citations from RAG results")),console.log("\ud83c\udfaf Discovery recorded with incantation: ".concat(e))}else console.log("\ud83d\udd0d RAG: No relevant content found, falling back to full context if available")}else N&&D.getDocuments().length>0&&console.log('\ud83d\udd0d RAG: Skipping search for simple query: "'.concat(s,'"'));const c=r.addMessage(n.id,{role:"assistant",content:"",tokens:0,modelUsed:S});l();const d=V.streamMessage(e,S,{ragContext:t||v,systemPrompt:i.systemPrompt,temperature:i.parameters.temperature,maxTokens:i.parameters.maxTokens,topP:i.parameters.topP});let h="";try{var a,o=!1,p=!1;try{for(var f,m=(0,Pt.A)(d);o=!(f=await m.next()).done;o=!1){const e=f.value;h+=e,c.content=h,c.tokens=ul(h),l(),e.includes(".")||e.includes("!")||e.includes("?")||e.includes("\n")?await new Promise((e=>setTimeout(e,100))):await new Promise((e=>setTimeout(e,20)))}}catch(F){p=!0,a=F}finally{try{o&&null!=m.return&&await m.return()}finally{if(p)throw a}}if(h.length>0&&I.length>0){const{segments:e,references:t}=pu(h,I);c.citations=I,c.citationReferences=t,l()}if(0===h.length){var g;const n=await V.sendMessage(e,S,{ragContext:t||v,systemPrompt:i.systemPrompt,temperature:i.parameters.temperature,maxTokens:i.parameters.maxTokens,topP:i.parameters.topP});if(I.length>0){const{segments:e,references:t}=pu(n.content,I);c.content=n.content,c.citations=I,c.citationReferences=t}else c.content=n.content;c.tokens=(null===(g=n.usage)||void 0===g?void 0:g.completion_tokens)||0,c.modelUsed=n.model,n.fallbackInfo&&Y({type:"warning",title:"Model Switched Automatically",message:"".concat(n.fallbackInfo.originalModel," ").concat(n.fallbackInfo.reason.toLowerCase(),". Switched to ").concat(n.fallbackInfo.fallbackModel,"."),duration:8e3,actions:[{label:"Try Gemini",onClick:()=>$("gemini-2.0-flash"),variant:"primary"},{label:"Try GPT-4o",onClick:()=>$("gpt-4o"),variant:"secondary"}]}),l()}}catch(k){var y,b;if(console.error("\ud83d\udea8 Streaming error:",k),null!==k&&void 0!==k&&null!==(y=k.message)&&void 0!==y&&y.startsWith("RATE_LIMITED:")){const[,e]=k.message.split(":");Y({type:"warning",title:"Rate Limited",message:"".concat(e," has reached its rate limit. Switching to backup model."),duration:0,actions:[{label:"Try Gemini",onClick:()=>$("gemini-2.0-flash"),variant:"primary"},{label:"Try Llama",onClick:()=>$("llama3.1:8b"),variant:"secondary"}]})}if(null!==k&&void 0!==k&&null!==(b=k.message)&&void 0!==b&&b.startsWith("FALLBACK:")){const[,e,t]=k.message.split(":");Y({type:"info",title:"Model Switched Automatically",message:"".concat(e," ").concat(t.toLowerCase(),". Switched to Llama for this response."),duration:8e3,actions:[{label:"Try Gemini",onClick:()=>$("gemini-2.0-flash"),variant:"primary"},{label:"Try GPT-4o",onClick:()=>$("gpt-4o"),variant:"secondary"}]})}try{var w;const n=await V.sendMessage(e,S,{ragContext:t||v,systemPrompt:i.systemPrompt,temperature:i.parameters.temperature,maxTokens:i.parameters.maxTokens,topP:i.parameters.topP});c.content=n.content,c.tokens=(null===(w=n.usage)||void 0===w?void 0:w.completion_tokens)||0,c.modelUsed=n.model,n.fallbackInfo&&Y({type:"warning",title:"Model Switched Automatically",message:"".concat(n.fallbackInfo.originalModel," ").concat(n.fallbackInfo.reason.toLowerCase(),". Switched to ").concat(n.fallbackInfo.fallbackModel,"."),duration:8e3,actions:[{label:"Try Gemini",onClick:()=>$("gemini-2.0-flash"),variant:"primary"},{label:"Try GPT-4o",onClick:()=>$("gpt-4o"),variant:"secondary"}]}),l()}catch(_){var A;console.error("\ud83d\udea8 Fallback API call also failed:",_),null!==_&&void 0!==_&&null!==(A=_.message)&&void 0!==A&&A.startsWith("RATE_LIMITED:")&&Y({type:"error",title:"All Models Rate Limited",message:"All available models are currently rate limited. Please try again later.",duration:0,actions:[{label:"Retry in 1 minute",onClick:()=>{setTimeout((()=>{Q("rate-limit-all")}),6e4)},variant:"primary"}]}),c.content="Sorry, I encountered an error while thinking. Please try again.",l()}}}catch(M){console.error("Error sending message:",M);const e={id:(Date.now()+1).toString(),role:"assistant",content:"Sorry, I encountered an error processing your request. Please try again.",timestamp:new Date,tokens:20};r.addMessage(n.id,e),l()}finally{h(!1)}var C,E},className:"flex space-x-2",children:[(0,Mt.jsx)(ru,{ragEnabled:N,onToggleRAG:M,uploadedPDFs:p,onUploadPDF:async e=>{g(!0);try{const t=await D.processFile(e),n=t.chunks.map((e=>e.content)).join("\n\n"),i={id:t.id,name:t.name,content:n,pages:0,size:e.size,pageCount:0,uploadedAt:new Date,tokenCount:t.tokenCount};f((e=>[...e,i])),y((e=>e+"\n\n"+n))}catch(t){console.error("Error processing document:",t);try{const t=await Zo.PDFProcessor.processPDF(e),n=t.chunks.map((e=>e.content)).join("\n\n"),i={id:t.id,name:t.name,content:n,pages:t.pageCount,size:e.size,pageCount:t.pageCount,uploadedAt:new Date,tokenCount:ul(n)};f((e=>[...e,i])),y((e=>e+"\n\n"+n))}catch(n){console.error("Error with fallback PDF processing:",n)}}finally{g(!1)}},onRemovePDF:e=>{D.removeDocument(e),f((t=>{const n=t.filter((t=>t.id!==e)),i=n.map((e=>e.content)).join("\n\n");return y(i),n}))},isLoading:m}),C&&(0,Mt.jsx)("button",{type:"button",onClick:w.isListening?()=>{q.current&&w.isListening&&q.current.stop()}:()=>{if(q.current&&!w.isListening)try{q.current.start()}catch(e){A((e=>(0,o.A)((0,o.A)({},e),{},{error:"Failed to start voice recognition"})))}},disabled:d||x,className:"p-3 rounded-lg transition-colors ".concat(w.isRecording?"bg-red-600 text-white animate-pulse":"bg-gray-100 text-gray-600 hover:bg-gray-200"," disabled:opacity-50"),title:w.isListening?"Stop listening":"Start voice input",children:(0,Mt.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Mt.jsx)("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})})}),(0,Mt.jsx)("input",{type:"text",value:u,onChange:e=>c(e.target.value),placeholder:x?"Rate limited - please wait...":C?"Type your message or use voice input...":"Type your message...",disabled:d||x,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#FFC627] focus:border-transparent disabled:opacity-50"}),(0,Mt.jsx)("button",{type:"submit",disabled:!u.trim()||d||x,className:"px-6 py-3 bg-[#FFC627] text-[#191919] rounded-lg hover:bg-yellow-400 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Sending...":"Send"})]}),(0,Mt.jsx)("div",{className:"mt-3 text-center",children:(0,Mt.jsxs)("p",{className:"text-xs text-gray-500",children:["You are speaking with a synthetic version of ",i.persona," created with Generative AI"]})})]})]})},Cu=Et("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Eu=e=>{let{models:t,onRefresh:n}=e;const[i]=(0,s.useState)((()=>new rl)),[r,a]=(0,s.useState)("checking"),o=(0,s.useCallback)((async()=>{a("checking");try{const e=await i.isServerRunning();a(e?"online":"offline"),n&&n()}catch(e){a("offline")}}),[i,n]);(0,s.useEffect)((()=>{o();const e=setInterval(o,3e4);return()=>clearInterval(e)}),[o]);const l=e=>{switch(e){case"online":return"bg-green-500";case"offline":return"bg-red-500";case"loading":return"bg-yellow-500";default:return"bg-gray-500"}},u=t.filter((e=>"online"===e.status)).length,c=t.length;return(0,Mt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Mt.jsxs)("div",{className:"relative group",children:[(0,Mt.jsx)("div",{className:"w-3 h-3 rounded-full ".concat((()=>{switch(r){case"online":return"bg-green-500";case"offline":return"bg-red-500";case"checking":return"bg-yellow-500 animate-pulse";default:return"bg-gray-500"}})())}),(0,Mt.jsxs)("div",{className:"absolute bottom-full right-0 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-50",children:["Ollama Server - ",r,"offline"===r&&(0,Mt.jsx)("div",{className:"text-xs text-gray-300 mt-1",children:"Run: ollama serve"}),(0,Mt.jsx)("div",{className:"absolute top-full right-2 w-0 h-0 border-l-2 border-r-2 border-t-2 border-transparent border-t-gray-900"})]})]}),(0,Mt.jsxs)("div",{className:"hidden sm:flex items-center space-x-2",children:[(0,Mt.jsx)("span",{className:"text-sm text-gray-600",children:"Ollama:"}),(0,Mt.jsx)("span",{className:"text-sm font-medium ".concat("online"===r?"text-green-600":"checking"===r?"text-yellow-600":"text-red-600"),children:r})]})]}),(0,Mt.jsx)("div",{className:"h-4 w-px bg-gray-300"}),(0,Mt.jsxs)("div",{className:"hidden sm:flex items-center space-x-2",children:[(0,Mt.jsx)("span",{className:"text-sm text-gray-600",children:"Models:"}),(0,Mt.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[u,"/",c," online"]})]}),(0,Mt.jsx)("div",{className:"flex items-center space-x-1",children:t.map((e=>(0,Mt.jsxs)("div",{className:"relative group",title:"".concat(e.name," - ").concat(e.status),children:[(0,Mt.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(l(e.status))}),(0,Mt.jsxs)("div",{className:"absolute bottom-full right-0 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-50",children:[e.name," - ",e.status,(0,Mt.jsx)("div",{className:"text-xs text-gray-300 mt-1",children:e.capabilities.join(", ")}),e.isMultimodal&&(0,Mt.jsxs)("div",{className:"text-xs text-yellow-300 flex items-center",children:[(0,Mt.jsx)(Ft,{className:"w-3 h-3 mr-1"}),"Multimodal"]}),(0,Mt.jsx)("div",{className:"absolute top-full right-2 w-0 h-0 border-l-2 border-r-2 border-t-2 border-transparent border-t-gray-900"})]})]},e.id)))}),(0,Mt.jsx)("button",{onClick:o,className:"p-1 hover:bg-gray-100 rounded transition-colors ".concat("checking"===r?"animate-spin":""),title:"Refresh status",disabled:"checking"===r,children:(0,Mt.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Mt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),"offline"===r&&(0,Mt.jsxs)("div",{className:"hidden lg:flex items-center text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded",children:[(0,Mt.jsx)(Cu,{className:"w-3 h-3 mr-1"}),"Start Ollama: ",(0,Mt.jsx)("code",{className:"ml-1 bg-gray-200 px-1 rounded",children:"ollama serve"})]})]})},Fu=e=>{let{experiences:t,onSelectExperience:n}=e;return(0,Mt.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:(0,Mt.jsxs)("div",{className:"max-w-6xl w-full mx-auto p-4 py-8",children:[(0,Mt.jsx)("div",{className:"text-center mb-12",children:(0,Mt.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-2",children:"Beta Land @ ASU"}),(0,Mt.jsx)("p",{className:"text-xl text-gray-600",children:"Experience the amazing qualities of AI with our ASU experts"})]})})}),(0,Mt.jsxs)("div",{className:"space-y-8 mb-8",children:[(0,Mt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.slice(0,3).map((e=>(0,Mt.jsx)("div",{onClick:()=>n(e.id),className:"\n                  group relative overflow-hidden rounded-xl p-4 cursor-pointer\n                  transition-all duration-200 hover:scale-102 hover:shadow-lg\n                  ".concat(e.color," text-white\n                  border border-white border-opacity-20\n                "),children:(0,Mt.jsxs)("div",{className:"relative",children:[(0,Mt.jsxs)("div",{className:"flex items-center mb-3",children:[e.icon.startsWith("http")?(0,Mt.jsx)("img",{src:e.icon,alt:e.persona,className:"w-10 h-10 rounded-full border-2 border-white border-opacity-50 object-cover mr-3"}):(0,Mt.jsx)("div",{className:"text-2xl mr-3",children:e.icon}),(0,Mt.jsxs)("div",{className:"flex-1",children:[(0,Mt.jsx)("h3",{className:"text-lg font-bold leading-tight",children:e.name}),(0,Mt.jsx)("p",{className:"text-white text-opacity-80 text-sm",children:e.persona})]}),(0,Mt.jsx)("div",{className:"transition-transform duration-200 group-hover:translate-x-1",children:(0,Mt.jsx)("svg",{className:"w-4 h-4 text-white text-opacity-60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Mt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),(0,Mt.jsx)("p",{className:"text-white text-opacity-90 mb-3 text-sm leading-relaxed",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.description}),(0,Mt.jsx)("div",{className:"space-y-1 mb-3",children:e.capabilities.slice(0,2).map(((e,t)=>(0,Mt.jsxs)("div",{className:"flex items-center text-white text-opacity-80",children:[(0,Mt.jsx)("div",{className:"w-1.5 h-1.5 bg-white bg-opacity-60 rounded-full mr-2"}),(0,Mt.jsx)("span",{className:"text-xs",children:e})]},t)))}),(0,Mt.jsxs)("div",{className:"flex items-center justify-between text-white text-opacity-70 text-xs",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Mt.jsx)(Tt,{modelId:e.modelId,variant:"dark",size:"sm"}),(0,Mt.jsx)("span",{children:e.modelId})]}),(0,Mt.jsxs)("span",{children:["\ud83c\udf99\ufe0f ",e.features.voicePersona]})]})]})},e.id)))}),t.length>3&&(0,Mt.jsxs)(Mt.Fragment,{children:[(0,Mt.jsxs)("div",{className:"text-center mb-6",children:[(0,Mt.jsx)("div",{children:(0,Mt.jsx)("h2",{className:"text-2xl font-bold",children:"Sustainable Private Local Models"})}),(0,Mt.jsxs)("p",{className:"text-gray-600 mt-3 max-w-3xl mx-auto leading-relaxed",children:["Experience the power of ",(0,Mt.jsx)("strong",{children:"Llama 4 Scout"})," running entirely on your machine. Transform ideas into working applications in minutes with our browser-based dependency installer. No internet required, complete privacy, unlimited usage - this is the future of AI development."]})]}),(0,Mt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.slice(3).map((e=>(0,Mt.jsx)("div",{onClick:()=>n(e.id),className:"\n                       group relative overflow-hidden rounded-xl p-4 cursor-pointer\n                       transition-all duration-200 hover:scale-102 hover:shadow-lg\n                       ".concat(e.color," text-white\n                       border border-white border-opacity-20\n                     "),children:(0,Mt.jsxs)("div",{className:"relative",children:[(0,Mt.jsxs)("div",{className:"flex items-center mb-3",children:[e.icon.startsWith("http")?(0,Mt.jsx)("img",{src:e.icon,alt:e.persona,className:"w-10 h-10 rounded-full border-2 border-white border-opacity-50 object-cover mr-3"}):(0,Mt.jsx)("div",{className:"text-2xl mr-3",children:e.icon}),(0,Mt.jsxs)("div",{className:"flex-1",children:[(0,Mt.jsx)("h3",{className:"text-lg font-bold leading-tight",children:e.name}),(0,Mt.jsx)("p",{className:"text-white text-opacity-80 text-sm",children:e.persona})]}),(0,Mt.jsx)("div",{className:"transition-transform duration-200 group-hover:translate-x-1",children:(0,Mt.jsx)("svg",{className:"w-4 h-4 text-white text-opacity-60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Mt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),(0,Mt.jsx)("p",{className:"text-white text-opacity-90 mb-3 text-sm leading-relaxed",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.description}),(0,Mt.jsx)("div",{className:"space-y-1 mb-3",children:e.capabilities.slice(0,2).map(((e,t)=>(0,Mt.jsxs)("div",{className:"flex items-center text-white text-opacity-80",children:[(0,Mt.jsx)("div",{className:"w-1.5 h-1.5 bg-white bg-opacity-60 rounded-full mr-2"}),(0,Mt.jsx)("span",{className:"text-xs",children:e})]},t)))}),(0,Mt.jsxs)("div",{className:"flex items-center justify-between text-white text-opacity-70 text-xs",children:[(0,Mt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Mt.jsx)(Tt,{modelId:e.modelId,variant:"dark",size:"sm"}),(0,Mt.jsx)("span",{children:e.modelId})]}),(0,Mt.jsxs)("span",{children:["\ud83c\udf99\ufe0f ",e.features.voicePersona]})]})]})},e.id)))})]})]}),(0,Mt.jsxs)("div",{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100",children:[(0,Mt.jsxs)("div",{className:"text-center mb-8",children:[(0,Mt.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Powered by Advanced AI"}),(0,Mt.jsx)("p",{className:"text-gray-600",children:"Switch between OpenAI, Google Gemini, and local Llama models seamlessly"})]}),(0,Mt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Mt.jsxs)("div",{className:"text-center",children:[(0,Mt.jsx)("div",{className:"w-12 h-12 bg-[#FFC627] bg-opacity-20 rounded-xl flex items-center justify-center mx-auto mb-4",children:(0,Mt.jsx)("svg",{className:"w-6 h-6 text-[#FFC627]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Mt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,Mt.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Natural Conversations"}),(0,Mt.jsx)("p",{className:"text-sm text-gray-600",children:"Stream of consciousness thinking with authentic personalities"})]}),(0,Mt.jsxs)("div",{className:"text-center",children:[(0,Mt.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-4",children:(0,Mt.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Mt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),(0,Mt.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Voice Interaction"}),(0,Mt.jsx)("p",{className:"text-sm text-gray-600",children:"High-quality OpenAI voices matched to each expert"})]}),(0,Mt.jsxs)("div",{className:"text-center",children:[(0,Mt.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-4",children:(0,Mt.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Mt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,Mt.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Model Switching"}),(0,Mt.jsx)("p",{className:"text-sm text-gray-600",children:"Choose the best AI model for each task automatically"})]})]})]}),(0,Mt.jsx)("div",{className:"text-center mt-8",children:(0,Mt.jsx)("p",{className:"text-gray-500 text-sm",children:"Built with \u2764\ufe0f by the ASU AI Innovation Team"})})]})})},ku=Et("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Su=Et("Bug",[["rect",{width:"8",height:"14",x:"8",y:"6",rx:"4",key:"hq8nra"}],["path",{d:"m19 7-3 2",key:"fmg8ec"}],["path",{d:"m5 7 3 2",key:"dkxqes"}],["path",{d:"m19 19-3-2",key:"1hbhi4"}],["path",{d:"m5 19 3-2",key:"dvt2ee"}],["path",{d:"M20 13h-4",key:"1agfp2"}],["path",{d:"M4 13h4",key:"1bwh8b"}],["path",{d:"m10 4 1 2",key:"1pot59"}],["path",{d:"m14 4-1 2",key:"m8sn0o"}]]),_u=e=>{let{modelManager:t}=e;const[n,i]=(0,s.useState)(!1),[r,a]=(0,s.useState)({openai:null,gemini:null,llama:null}),[o,l]=(0,s.useState)(""),[u,c]=(0,s.useState)(!1),d=async()=>{c(!0);try{const e=new ol,t=await e.checkAvailability();a(t),l((new Date).toLocaleTimeString())}catch(e){console.error("Error testing services:",e)}finally{c(!1)}},h=async e=>{c(!0);try{console.log("\ud83e\uddea Testing ".concat(e,"..."));const t=new ol,n=[{role:"user",content:"Hello! This is a test message."}],i=await t.sendMessage(n,e,{maxTokens:50,temperature:.1});console.log("\u2705 ".concat(e," test result:"),i),alert("".concat(e," works! Response: ").concat(i.content.substring(0,100),"..."))}catch(t){console.error("\u274c ".concat(e," test failed:"),t),alert("".concat(e," failed: ").concat(t))}finally{c(!1)}};(0,s.useEffect)((()=>{d()}),[]);const p=e=>null===e?(0,Mt.jsx)(Gl,{className:"w-4 h-4 text-gray-400"}):!0===e?(0,Mt.jsx)(Dl,{className:"w-4 h-4 text-green-500"}):(0,Mt.jsx)(ku,{className:"w-4 h-4 text-red-500"}),f=e=>null===e?"Testing...":!0===e?"Online":"Offline";return n?(0,Mt.jsxs)("div",{className:"fixed bottom-4 right-4 w-80 bg-white border border-gray-200 rounded-lg shadow-xl z-50",children:[(0,Mt.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[(0,Mt.jsxs)("h3",{className:"font-semibold text-gray-900 flex items-center",children:[(0,Mt.jsx)(Su,{className:"w-4 h-4 mr-2"}),"Debug Panel"]}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Mt.jsx)("button",{onClick:d,disabled:u,className:"p-1 text-gray-500 hover:text-gray-700 disabled:opacity-50",title:"Refresh status",children:(0,Mt.jsx)(xl,{className:"w-4 h-4 ".concat(u?"animate-spin":"")})}),(0,Mt.jsx)("button",{onClick:()=>i(!1),className:"p-1 text-gray-500 hover:text-gray-700",children:"\xd7"})]})]}),(0,Mt.jsxs)("div",{className:"p-4 space-y-4",children:[(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Service Status"}),(0,Mt.jsxs)("div",{className:"space-y-2",children:[(0,Mt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Mt.jsx)("span",{className:"text-sm",children:"OpenAI"}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-2",children:[p(r.openai),(0,Mt.jsx)("span",{className:"text-xs",children:f(r.openai)})]})]}),(0,Mt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Mt.jsx)("span",{className:"text-sm",children:"Gemini"}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-2",children:[p(r.gemini),(0,Mt.jsx)("span",{className:"text-xs",children:f(r.gemini)})]})]}),(0,Mt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Mt.jsx)("span",{className:"text-sm",children:"Llama (Local)"}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-2",children:[p(r.llama),(0,Mt.jsx)("span",{className:"text-xs",children:f(r.llama)})]})]})]})]}),(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"API Keys"}),(0,Mt.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{children:"OpenAI:"}),(0,Mt.jsx)("span",{className:{NODE_ENV:"production",PUBLIC_URL:"/citations",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ENABLE_IMAGE_GENERATION:"false",REACT_APP_ENABLE_CODE_EXECUTION:"false",REACT_APP_ENVIRONMENT:"production",REACT_APP_DEFAULT_MODEL:"gemini-2.0-flash",REACT_APP_ENABLE_SEARCH_GROUNDING:"false"}.REACT_APP_OPENAI_API_KEY?"text-green-600":"text-red-600",children:{NODE_ENV:"production",PUBLIC_URL:"/citations",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ENABLE_IMAGE_GENERATION:"false",REACT_APP_ENABLE_CODE_EXECUTION:"false",REACT_APP_ENVIRONMENT:"production",REACT_APP_DEFAULT_MODEL:"gemini-2.0-flash",REACT_APP_ENABLE_SEARCH_GROUNDING:"false"}.REACT_APP_OPENAI_API_KEY?"Set":"Missing"})]}),(0,Mt.jsxs)("div",{className:"flex justify-between",children:[(0,Mt.jsx)("span",{children:"Gemini:"}),(0,Mt.jsx)("span",{className:{NODE_ENV:"production",PUBLIC_URL:"/citations",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ENABLE_IMAGE_GENERATION:"false",REACT_APP_ENABLE_CODE_EXECUTION:"false",REACT_APP_ENVIRONMENT:"production",REACT_APP_DEFAULT_MODEL:"gemini-2.0-flash",REACT_APP_ENABLE_SEARCH_GROUNDING:"false"}.REACT_APP_GEMINI_API_KEY?"text-green-600":"text-red-600",children:{NODE_ENV:"production",PUBLIC_URL:"/citations",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ENABLE_IMAGE_GENERATION:"false",REACT_APP_ENABLE_CODE_EXECUTION:"false",REACT_APP_ENVIRONMENT:"production",REACT_APP_DEFAULT_MODEL:"gemini-2.0-flash",REACT_APP_ENABLE_SEARCH_GROUNDING:"false"}.REACT_APP_GEMINI_API_KEY?"Set":"Missing"})]})]})]}),(0,Mt.jsxs)("div",{children:[(0,Mt.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Test Models"}),(0,Mt.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,Mt.jsx)("button",{onClick:()=>h("gpt-4o"),disabled:u,className:"px-3 py-1 text-xs bg-[#FFC627] bg-opacity-20 text-[#191919] rounded hover:bg-[#FFC627] hover:bg-opacity-30 disabled:opacity-50",children:"Test GPT-4o"}),(0,Mt.jsx)("button",{onClick:()=>h("gemini-2.0-flash"),disabled:u,className:"px-3 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200 disabled:opacity-50",children:"Test Gemini"}),(0,Mt.jsx)("button",{onClick:()=>h("llama3.1:8b"),disabled:u,className:"px-3 py-1 text-xs bg-orange-100 text-orange-700 rounded hover:bg-orange-200 disabled:opacity-50",children:"Test Llama"})]})]}),o&&(0,Mt.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:["Last checked: ",o]})]})]}):(0,Mt.jsx)("button",{onClick:()=>i(!0),className:"fixed bottom-4 right-4 p-3 bg-gray-900 text-white rounded-full shadow-lg hover:bg-gray-800 z-50",title:"Open Debug Panel",children:(0,Mt.jsx)(Su,{className:"w-5 h-5"})})},Nu=()=>{const[e]=(0,s.useState)((()=>new Dt)),[t]=(0,s.useState)((()=>new bt)),[n,i]=(0,s.useState)([]),[r,a]=(0,s.useState)([]),[o,l]=(0,s.useState)(null),[u,c]=(0,s.useState)([]),[d,h]=(0,s.useState)(!1),[p,f]=(0,s.useState)(!0),[m,g]=(0,s.useState)(!1);(0,s.useEffect)((()=>{i(e.getAllModels()),c(t.getAllTemplates());const n=()=>{g(window.innerWidth<768)};return n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n),e.stopStatusMonitoring()}}),[e,t]),(0,s.useEffect)((()=>{a(t.getAllConversations()),l(t.getActiveConversation())}),[t]);const v=e=>{const n=t.createConversation(e);t.setActiveConversation(n.id),a(t.getAllConversations()),l(t.getActiveConversation()),f(!1),m&&h(!1)},y=e=>{t.setActiveConversation(e),l(t.getActiveConversation()),f(!1),m&&h(!1)},D=e=>{t.deleteConversation(e),a(t.getAllConversations()),l(t.getActiveConversation()),0===t.getAllConversations().length&&f(!0)},x=()=>{f(!0),l(null),t.activeConversationId=null},b=()=>{h(!d)};return p||!o?(0,Mt.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[m&&d&&(0,Mt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>h(!1)}),(r.length>0||!m)&&(0,Mt.jsx)("div",{className:"\n            ".concat(m?"fixed":"relative"," \n            ").concat(m&&!d?"-translate-x-full":"translate-x-0","\n            transition-transform duration-300 ease-in-out\n            ").concat(m?"z-50":"z-10","\n            w-80 bg-white border-r border-gray-200 flex flex-col\n          "),children:(0,Mt.jsx)(jt,{conversations:r,templates:u,activeConversationId:null,onSelectConversation:y,onDeleteConversation:D,onCreateConversation:x,onCloseSidebar:()=>h(!1),isMobile:m})}),(0,Mt.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,Mt.jsxs)("div",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[m&&(0,Mt.jsx)("button",{onClick:b,className:"p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:(0,Mt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Mt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,Mt.jsx)("button",{onClick:x,className:"text-lg font-semibold text-gray-900 hover:text-[#FFC627] transition-colors",title:"ASU AI Experiences Homepage",children:"ASU AI Experiences"}),(0,Mt.jsx)("div",{className:"flex items-center",children:(0,Mt.jsx)(Eu,{models:n})})]}),(0,Mt.jsx)("div",{className:"flex-1 overflow-scroll",children:(0,Mt.jsx)(Fu,{experiences:u,onSelectExperience:v})})]})]}):(0,Mt.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[m&&d&&(0,Mt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>h(!1)}),(0,Mt.jsx)("div",{className:"\n        ".concat(m?"fixed":"relative"," \n        ").concat(m&&!d?"-translate-x-full":"translate-x-0","\n        transition-transform duration-300 ease-in-out\n        ").concat(m?"z-50":"z-10","\n        w-80 bg-white border-r border-gray-200 flex flex-col\n      "),children:(0,Mt.jsx)(jt,{conversations:r,templates:u,activeConversationId:(null===o||void 0===o?void 0:o.id)||null,onSelectConversation:y,onDeleteConversation:D,onCreateConversation:x,onCloseSidebar:()=>h(!1),isMobile:m})}),(0,Mt.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,Mt.jsxs)("div",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[m&&(0,Mt.jsx)("button",{onClick:b,className:"p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:(0,Mt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Mt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,Mt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Mt.jsxs)("button",{onClick:x,className:"flex items-center space-x-2 px-3 py-1.5 text-sm text-gray-600 hover:text-[#FFC627] hover:bg-[#FFC627] hover:bg-opacity-10 rounded-lg transition-colors",title:"Back to AI Experiences Homepage",children:[(0,Mt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Mt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,Mt.jsx)("span",{children:"Experiences"})]}),(0,Mt.jsx)("div",{className:"h-4 w-px bg-gray-300"}),(0,Mt.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:(null===o||void 0===o?void 0:o.title)||"Conversation"})]}),(0,Mt.jsx)("div",{className:"flex items-center",children:(0,Mt.jsx)(Eu,{models:n})})]}),(0,Mt.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,Mt.jsx)(Au,{conversation:o,template:u.find((e=>e.id===o.templateId))||u[0],conversationManager:t,modelManager:e,onConversationUpdate:()=>{a(t.getAllConversations()),l(t.getActiveConversation())}})})]}),(0,Mt.jsx)(_u,{modelManager:e})]})},Mu=[{id:"citation-1",source:"Advanced RAG Techniques Whitepaper",type:"document",content:"Retrieval-Augmented Generation (RAG) combines the strengths of retrieval-based and generation-based approaches. By retrieving relevant information from a knowledge base and using it to augment the input to a language model, RAG can produce more factual and contextually appropriate responses.",relevance:.92,timestamp:new Date("2025-03-15"),documentId:"doc-123",incantationUsed:"semantic-search",highlightedText:"Retrieval-Augmented Generation (RAG) combines the strengths of retrieval-based and generation-based approaches.",confidence:.88,quality:.9,page:12},{id:"citation-2",source:"AI System Design Handbook",type:"pdf",content:"Incantation patterns represent structured prompt techniques that consistently produce better AI outputs. These patterns can be categorized as reasoning patterns (chain-of-thought, working backwards), creativity patterns (assumption-reversal), and structure patterns (pyramid principle).",relevance:.87,timestamp:new Date("2025-02-20"),documentId:"doc-456",incantationUsed:"chain-of-thought",highlightedText:"Incantation patterns represent structured prompt techniques that consistently produce better AI outputs.",confidence:.85,quality:.86,page:45},{id:"citation-3",source:"Research on Citation Quality Metrics",type:"rag",content:"Citation quality can be evaluated along multiple dimensions: relevance to the query, confidence score based on semantic similarity, and content quality metrics like coherence and informativeness. High-quality citations should score well across all these dimensions.",relevance:.79,timestamp:new Date("2025-01-05"),documentId:"doc-789",incantationUsed:"expert-persona",highlightedText:"Citation quality can be evaluated along multiple dimensions: relevance to the query, confidence score based on semantic similarity, and content quality metrics.",confidence:.76,quality:.78,page:8},{id:"citation-4",source:"Interactive AI Interfaces Guide",type:"web",content:"Interactive highlighting of source text provides users with immediate visual feedback on which parts of an AI response are grounded in retrieved documents. This transparency builds trust and allows users to evaluate the quality of AI-generated content.",relevance:.85,timestamp:new Date("2025-04-02"),documentId:"web-123",incantationUsed:"semantic-search",highlightedText:"Interactive highlighting of source text provides users with immediate visual feedback on which parts of an AI response are grounded in retrieved documents.",confidence:.82,quality:.84,url:"https://example.com/interactive-ai"},{id:"citation-5",source:"Best Practices for AI Transparency",type:"document",content:"Tracking the reasoning methods used to discover information is essential for AI transparency. By recording which prompt patterns (incantations) led to specific discoveries, users can understand not just what information was found, but how it was found, building trust in the AI system.",relevance:.88,timestamp:new Date("2025-03-28"),documentId:"doc-321",incantationUsed:"working-backwards",highlightedText:"Tracking the reasoning methods used to discover information is essential for AI transparency.",confidence:.84,quality:.87,page:23}],Tu=[{query:"How does RAG improve AI responses?",incantationUsed:"semantic-search",timestamp:new Date("2025-04-10T14:32:00"),results:[Mu[0],Mu[3]],confidence:.9,context:"User asked about RAG techniques"},{query:"What are incantation patterns in AI?",incantationUsed:"chain-of-thought",timestamp:new Date("2025-04-10T15:45:00"),results:[Mu[1],Mu[4]],confidence:.85,context:"User asked about prompt engineering techniques"},{query:"How can we evaluate citation quality?",incantationUsed:"expert-persona",timestamp:new Date("2025-04-09T11:20:00"),results:[Mu[2]],confidence:.78,context:"User asked about quality metrics for citations"},{query:"Why is transparency important in AI systems?",incantationUsed:"working-backwards",timestamp:new Date("2025-04-08T09:15:00"),results:[Mu[4],Mu[3]],confidence:.86,context:"User asked about AI transparency"},{query:"What if we reversed our assumptions about AI interfaces?",incantationUsed:"assumption-reversal",timestamp:new Date("2025-04-07T16:30:00"),results:[{id:"citation-6",source:"Creative AI Design Principles",type:"document",content:"By reversing common assumptions about AI interfaces, we can discover innovative approaches. Instead of assuming AI should always provide answers, what if it primarily asked insightful questions? Rather than optimizing for speed, what if we optimized for depth of understanding?",relevance:.76,timestamp:new Date("2025-02-15"),documentId:"doc-555",incantationUsed:"assumption-reversal",highlightedText:"By reversing common assumptions about AI interfaces, we can discover innovative approaches.",confidence:.72,quality:.75,page:67}],confidence:.75,context:"User wanted creative approaches to AI design"}],Bu=e=>{let{value:t,onValueChange:n,children:i,className:r=""}=e;return(0,Mt.jsx)("div",{className:r,children:s.Children.map(i,(e=>e&&(e.type===Iu||e.type===Pu&&e.props.value===t)?s.cloneElement(e,{activeTab:t,onTabChange:n}):null))})},Iu=e=>{let{children:t,activeTab:n,onTabChange:i}=e;return(0,Mt.jsx)("div",{className:"flex space-x-1 border-b border-gray-200",children:s.Children.map(t,(e=>e?s.cloneElement(e,{active:e.props.value===n,onClick:()=>i(e.props.value)}):null))})},ju=e=>{let{value:t,active:n,onClick:i,children:s}=e;return(0,Mt.jsx)("button",{className:"flex items-center px-4 py-2 text-sm font-medium ".concat(n?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:i,children:s})},Pu=e=>{let{value:t,children:n}=e;return(0,Mt.jsx)("div",{children:n})},Lu=()=>{const[e,t]=(0,s.useState)("highlighted"),[n,i]=(0,s.useState)(null),{segments:r,references:a}=pu("\nRetrieval-Augmented Generation (RAG) combines the strengths of retrieval-based and generation-based approaches to produce more accurate AI responses. By incorporating relevant information from trusted sources, RAG systems can provide responses that are both contextually appropriate and factually grounded.\n\nIncantation patterns represent structured prompt techniques that consistently produce better AI outputs. These patterns help guide the AI's reasoning process in specific ways, such as through step-by-step analysis or creative exploration of alternatives.\n\nInteractive highlighting of source text provides users with immediate visual feedback on which parts of an AI response are grounded in retrieved documents. This transparency builds trust and allows users to evaluate the quality of the information.\n\nCitation quality can be evaluated along multiple dimensions: relevance to the query, confidence score based on semantic similarity, and content quality metrics like coherence and informativeness.\n\nTracking the reasoning methods used to discover information is essential for AI transparency. By showing which prompt patterns led to specific discoveries, users gain insight into the AI's reasoning process.\n",Mu,Tu);return(0,Mt.jsx)("div",{className:"max-w-4xl mx-auto p-4",children:(0,Mt.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[(0,Mt.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 mb-2 flex items-center",children:[(0,Mt.jsx)(Zl,{className:"w-6 h-6 mr-2 text-blue-600"}),"Enhanced RAG Citation System"]}),(0,Mt.jsx)("p",{className:"text-gray-600 mb-6",children:"Interactive demonstration of the citation system with highlighting, tooltips, and discovery tracking."}),(0,Mt.jsxs)(Bu,{value:e,onValueChange:t,className:"mb-6",children:[(0,Mt.jsxs)(Iu,{children:[(0,Mt.jsxs)(ju,{value:"highlighted",children:[(0,Mt.jsx)(Kl,{className:"w-4 h-4 mr-2"}),"Highlighted Text"]}),(0,Mt.jsxs)(ju,{value:"citations",children:[(0,Mt.jsx)(Zl,{className:"w-4 h-4 mr-2"}),"Citations"]}),(0,Mt.jsxs)(ju,{value:"discoveries",children:[(0,Mt.jsx)(Ft,{className:"w-4 h-4 mr-2"}),"Discoveries"]}),n&&(0,Mt.jsxs)(ju,{value:"discovery-detail",children:[(0,Mt.jsx)(lu,{className:"w-4 h-4 mr-2"}),"Discovery Detail"]})]}),(0,Mt.jsx)(Pu,{value:"highlighted",className:"mt-4",children:(0,Mt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,Mt.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-3",children:"AI Response with Citation Highlighting"}),(0,Mt.jsx)("div",{className:"prose prose-blue max-w-none",children:(0,Mt.jsx)(ou,{segments:r,citations:Mu,discoveries:Tu,className:"text-gray-800 leading-relaxed"})}),(0,Mt.jsx)("div",{className:"mt-4 text-xs text-gray-500",children:(0,Mt.jsx)("p",{children:"\ud83d\udc46 Try clicking on the highlighted text to see citation details"})})]})}),(0,Mt.jsx)(Pu,{value:"citations",className:"mt-4",children:(0,Mt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,Mt.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-3",children:"Citations"}),(0,Mt.jsx)(tu,{citations:Mu,showRelevanceScores:!0,showIncantations:!0})]})}),(0,Mt.jsx)(Pu,{value:"discoveries",className:"mt-4",children:(0,Mt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,Mt.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-3",children:"RAG Discoveries"}),(0,Mt.jsx)(du,{discoveries:Tu,onDiscoveryClick:e=>{i(e),t("discovery-detail")}})]})}),n&&(0,Mt.jsx)(Pu,{value:"discovery-detail",className:"mt-4",children:(0,Mt.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,Mt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Mt.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Discovery Detail"}),(0,Mt.jsx)("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium",children:n.incantationUsed.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Query"}),(0,Mt.jsxs)("p",{className:"text-gray-800 bg-white border border-gray-200 rounded p-2 mt-1",children:['"',n.query,'"']})]}),(0,Mt.jsxs)("div",{className:"mb-4",children:[(0,Mt.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Found Sources"}),(0,Mt.jsx)("div",{className:"mt-2",children:(0,Mt.jsx)(tu,{citations:n.results,showRelevanceScores:!0,showIncantations:!1})})]}),(0,Mt.jsx)("div",{className:"text-xs text-gray-500 mt-4",children:(0,Mt.jsxs)("p",{children:["Discovery made on ",n.timestamp.toLocaleString()]})})]})})]}),(0,Mt.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-6",children:[(0,Mt.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"About This Demo"}),(0,Mt.jsx)("p",{className:"text-sm text-gray-600",children:"This demonstration showcases the enhanced RAG citation system with interactive highlighting, source attribution, and incantation tracking. The system provides transparency into how AI discoveries are made and where information comes from."})]})]})})};const Ru=function(){return(0,Mt.jsx)(ut,{basename:"/rate-limiter",children:(0,Mt.jsx)("div",{className:"App",children:(0,Mt.jsxs)(Se,{children:[(0,Mt.jsx)(Fe,{path:"/",element:(0,Mt.jsx)(Nu,{})}),(0,Mt.jsx)(Fe,{path:"/citations",element:(0,Mt.jsx)(Lu,{})})]})})})};r.createRoot(document.getElementById("root")).render((0,Mt.jsx)(s.StrictMode,{children:(0,Mt.jsx)(Ru,{})}))})()})();
//# sourceMappingURL=main.4c4641b7.js.map